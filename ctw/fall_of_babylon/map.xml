<map proto="1.4.2">
<name>Fall of Babylon</name>
<version>1.0.5</version>
<include id="gapple-kill-reward"/>
<gamemode>ctw</gamemode>
<created>2024-10-01</created>
<objective>Capture the wools</objective>
<authors>
    <author uuid="c25a6f7b-4c42-40da-8cd6-add53f0c84eb"/> <!-- arcadeboss -->
</authors>
<gamerules>
    <doDaylightCycle>false</doDaylightCycle>
    <doFireTick>true</doFireTick>
    <randomTickSpeed>0</randomTickSpeed>
</gamerules>
<world>
    <timeset>20000</timeset>
    <timelock>on</timelock>
</world>
<maxbuildheight>75</maxbuildheight>
<teams>
    <team id="red-team" color="red" max="34">Cyrus the Great</team>
    <team id="blue-team" color="blue" max="34">Prince Belshazzar</team>
</teams>
<kits>
    <kit id="spawn-kit">
        <clear/>
        <item slot="0" material="stone sword" unbreakable="true"/>
        <item slot="1" material="bow" unbreakable="false" enchantment="arrow infinite"/>
        <item slot="2" material="iron pickaxe" unbreakable="true"/>
        <item slot="3" material="iron axe" unbreakable="true"/>
        <item slot="4" material="iron spade" unbreakable="true"/>
        <item slot="5" material="wood" damage="5" amount="64"/>
        <item slot="6" material="wood" damage="5" amount="64"/>
        <item slot="7" material="bucket"/>
        <item slot="8" material="golden apple"/>
        <item slot="10" material="arrow"/>
        <item slot="17" material="gold nugget"/> <!-- h/t: Fenland -->
        <item slot="33" material="smooth brick" amount="48"/>
        <effect duration="21s" amplifier="1">speed</effect>
        <effect duration="6s" amplifier="1">regeneration</effect>
        <effect duration="6s" amplifier="255">damage resistance</effect>
        <game-mode>survival</game-mode>
    </kit>
    <kit id="blue-kit" parent="spawn-kit">
        <helmet material="gold helmet" enchantment="projectile_protection:1" locked="false" unbreakable="true"/>
        <chestplate material="chainmail chestplate" locked="false" unbreakable="true"/>
        <leggings material="leather leggings" team-color="true" locked="false" unbreakable="true"/>
        <boots material="leather boots" team-color="true" locked="false" unbreakable="true"/>
    </kit>
    <kit id="red-kit" parent="spawn-kit">
        <helmet material="gold helmet" enchantment="projectile_protection:1" locked="false" unbreakable="true"/>
        <chestplate material="chainmail chestplate" locked="false" unbreakable="true"/>
        <leggings material="leather leggings" team-color="true" locked="false" unbreakable="true"/>
        <boots material="leather boots" team-color="true" locked="false" unbreakable="true"/>
    </kit>
    <lend filter="blue-enemy-fatigue">
        <kit>
            <effect>slow digging</effect>
        </kit>
    </lend>
    <lend filter="red-enemy-fatigue">
        <kit>
            <effect>slow digging</effect>
        </kit>
    </lend>
    <lend filter="store-forbidden-trigger">
        <kit>
            <effect amplifier="10">instant_damage</effect>
        </kit>
    </lend>
    <lend filter="blue-speed-boost">
        <kit>
            <effect>speed</effect>
        </kit>
    </lend>
    <lend filter="red-speed-boost">
        <kit>
            <effect>speed</effect>
        </kit>
    </lend>
    <give filter="all(haste_upgrade_variable=1,alive)">
        <kit>
            <effect>fast digging</effect>
        </kit>
    </give>
    <give filter="all(haste_upgrade_variable=2,alive)">
        <kit>
            <effect amplifier="2">fast digging</effect>
        </kit>
    </give>
    <give filter="all(fireresist_upgrade_variable=1,alive)">
        <kit>
            <item material="potion" damage="3">
                <effect duration="45s">fire resistance</effect>
            </item>
        </kit>
    </give>
    <give filter="all(blocks_upgrade_variable=1,alive)">
        <kit>
            <item material="log" damage="5" amount="64"/>
            <item material="smooth brick" amount="16"/>
        </kit>
    </give>
    <kit id="speed">
        <effect>speed</effect>
    </kit>
    <kit id="flint-and-steel" force="true" filter="always">
        <item material="flint and steel" amount="1"/>
    </kit>
    <kit id="coal" force="true" filter="always">
        <item material="coal" amount="64"/>
    </kit>
    <kit id="coal-block" force="true" filter="always">
        <item material="coal block" amount="64"/>
    </kit>
    <kit id="gold-block" force="true" filter="always">
        <item material="gold block"/>
    </kit>
    <kit id="seal-breaker-kit" force="true">
        <action filter="lime-woolroom">
            <set var="lime_seal_breaker" value="1"/>
        </action>
        <action filter="cyan-woolroom">
            <set var="cyan_seal_breaker" value="1"/>
        </action>
        <action filter="orange-woolroom">
            <set var="orange_seal_breaker" value="1"/>
        </action>
        <action filter="yellow-woolroom">
            <set var="yellow_seal_breaker" value="1"/>
        </action>
    </kit>
</kits>
<spawns>
    <spawn team="blue-team" kit="blue-kit" yaw="0" region="blue-spawn-point"/>
    <spawn team="red-team" kit="red-kit" yaw="180" region="red-spawn-point"/>
    <default>
        <regions>
            <point yaw="180">0.5,75,-2.5</point>
            <point yaw="0">0.5,75,3.5</point>
        </regions>
    </default>
</spawns>
<wools craftable="false">
    <wool id="cyan-wool" team="blue-team" color="cyan" location="21,67,-130">
        <monument>
            <block location="21,67,-130"/>
        </monument>
    </wool>
    <wool id="lime-wool" team="blue-team" color="lime" location="-21,67,-130">
        <monument>
            <block location="-21,67,-130"/>
        </monument>
    </wool>
    <wool id="yellow-wool" team="red-team" color="yellow" location="-21,67,130">
        <monument>
            <block location="-21,67,130"/>
        </monument>
    </wool>
    <wool id="orange-wool" team="red-team" color="orange" location="21,67,130">
        <monument>
            <block location="21,67,130"/>
        </monument>
    </wool>
</wools>
<block-drops>
    <rule region="woolrooms" kit="seal-breaker-kit">
        <filter>
            <material>diamond block</material>
        </filter>
        <drops>
            <item chance="1" amount="12" material="diamond"/>
        </drops>
    </rule>
    <rule region="not-woolrooms">
        <filter>
            <material>diamond block</material>
        </filter>
        <drops>
            <item chance="1" amount="10" material="diamond"/>
        </drops>
    </rule>
    <rule>
        <filter>
            <any>
                <material>nether brick stairs</material>
                <material>spruce wood stairs</material>
            </any>
        </filter>
        <drops>
            <item chance="0.9" material="gold nugget"/>
            <item chance="0.5" material="gold ore"/>
        </drops>
    </rule>
    <rule>
        <filter>
            <any>
                <material>ender stone</material>
                <material>glowstone</material>
            </any>
        </filter>
        <drops>
            <item chance="1" material="gold nugget"/>
            <item chance="0.05" material="gold ore"/>
        </drops>
    </rule>
    <rule>
        <filter>
            <any>
                <material>stained clay</material>
                <material>stained glass</material>
            </any>
        </filter>
        <drops>
            <item chance="0.5" material="gold nugget"/>
            <item chance="0.05" material="gold ore"/>
        </drops>
    </rule>
    <!-- Drops that include original block for normal feel, players can re-mine for loot until gone -->
    <rule>
        <filter>
            <any>
                <material>dirt</material>
                <material>grass</material>
            </any>
        </filter>
        <drops>
            <item chance="0.1" material="gold nugget"/>
            <item chance="0.015" material="gold ore"/>
            <item chance="0.5" material="dirt"/>
        </drops>
    </rule>
    <rule>
        <filter>
            <any>
                <material>sandstone</material>
            </any>
        </filter>
        <drops>
            <item chance="0.13" material="gold nugget"/>
            <item chance="0.04" material="gold ore"/>
            <item chance="0.35" material="sandstone"/>
        </drops>
    </rule>
    <rule>
        <filter>
            <any>
                <material>sand</material>
            </any>
        </filter>
        <drops>
            <item chance="0.15" material="gold nugget"/>
            <item chance="0.03" material="gold ore"/>
            <item chance="0.4" material="sand"/>
        </drops>
    </rule>
    <rule>
        <filter>
            <any>
                <material>gravel</material>
            </any>
        </filter>
        <drops>
            <item chance="0.4" material="gravel"/>
            <item chance="0.12" material="flint"/> <!-- 10% is standard -->
        </drops>
    </rule>
    <rule>
        <filter>
            <any>
                <material>diamond ore</material>
            </any>
        </filter>
        <drops>
            <item chance="1" amount="2" material="diamond"/>
            <item chance="0.1" amount="1" material="diamond ore"/>
        </drops>
    </rule>
</block-drops>
<broadcasts>
    <alert after="10s" filter="only-red">`r`7With `4`lFather Asura`r`7`l we will conquer `9`lBelshazzar`7!</alert>
    <alert after="10s" filter="only-blue">`r`7With `9`lLord Marduk`r`7`l we will conquer `4`lCyrus`7!</alert>
    <tip after="1m" every="11m">`r`6`lGold `r`7`lbuys `r`6`lteam upgrades`r`7`l from `r`6`lThe Bazaar`r`7`l.`r</tip>
    <tip after="2m" every="11m" filter="only-red">`r`7`lBuy `r`b`lplayer upgrades`r`7`l from `r`b`lDilawarzz' Diamonds`r`7`l.`r</tip>
    <tip after="2m" every="11m" filter="only-blue">`r`7`lBuy `r`b`lplayer upgrades`r`7`l from `r`b`lChadnezzar's Diamonds`r`7`l.`r</tip>
    <tip after="4m" every="11m" filter="only-red">`r`4`lCyrus`r`7`l bestows `r`6`lGold`r`7`l &#38; `r`6`ltreasure`r`7`l for kills.`r</tip>
    <tip after="4m" every="11m" filter="only-blue">`r`9`lBelshazzar`r`7`l bestows `r`6`lGold`r`7`l &#38; `r`6`ltreasure`r`7`l for kills.`r</tip>
</broadcasts>
<actions>
    <!-- Wool seals - alerts entire match -->
    <action id="thunder-sounds" scope="match">
        <sound key="ambient.weather.thunder" volume=".6" pitch="1"/>
    </action>
    <trigger filter="all(lime-seal-broke,match-running)" scope="match">
        <action>
            <action id="thunder-sounds"/>
            <message text="`6⚡⚡⚡ `7`oThe `r`aLime Wool`r`7`l seal `r`7`ohas been broken by {player}!`r">
                <replacements>
                    <player id="player" var="lime_seal_breaker"/>
                </replacements>
            </message>
        </action>
    </trigger>
    <trigger filter="all(cyan-seal-broke,match-running)" scope="match">
        <action>
            <action id="thunder-sounds"/>
            <message text="`6⚡⚡⚡ `7`oThe `r`3Cyan Wool`r`7`l seal `r`7`ohas been broken by {player}!`r">
                <replacements>
                    <player id="player" var="cyan_seal_breaker"/>
                </replacements>
            </message>
        </action>
    </trigger>
    <trigger filter="all(yellow-seal-broke,match-running)" scope="match">
        <action>
            <action id="thunder-sounds"/>
            <message text="`6⚡⚡⚡ `7`oThe `r`eYellow Wool`r`7`l seal `r`7`ohas been broken by {player}!`r">
                <replacements>
                    <player id="player" var="yellow_seal_breaker"/>
                </replacements>
            </message>
        </action>
    </trigger>
    <trigger filter="all(orange-seal-broke,match-running)" scope="match">
        <action>
            <action id="thunder-sounds"/>
            <message text="`6⚡⚡⚡ `7`oThe `r`6Orange Wool`r`7`l seal `r`7`ohas been broken by {player}!`r">
                <replacements>
                    <player id="player" var="orange_seal_breaker"/>
                </replacements>
            </message>
        </action>
    </trigger>
    <!-- Defensive webs -->
    <trigger filter="red-web-broke" action="warn-webs" scope="player"/>
    <trigger filter="blue-web-broke" action="warn-webs" scope="player"/>
    <action id="warn-webs" scope="player">
        <set var="web_breaking_team" value="1"/>
        <switch-scope inner="match">
            <switch-scope inner="team" filter="all(web_breaking_team=0,webs_activated=1)">
                <message text="`4☠☠☠ `e`oWoolroom Defensive Webs have been damaged!`r"/>
                <set var="webs_activated" value="0"/>
                <sound preset="objective_mode" volume="0.3" pitch="1.5"/>
                <sound preset="custom"/>
            </switch-scope>
        </switch-scope>
    </action>
    <!-- Water bucket -->
    <trigger filter="all(bucket_upgrade_variable=1,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="bucket"/>
                <replace material="water bucket"/>
            </replace-item>
        </action>
    </trigger>
    <!-- They were warned.  Nerf defensive pickaxes if taken to war -->
    <trigger filter="nerf-pickaxe" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="gold pickaxe"/>
                <replace material="stone pickaxe"/>
            </replace-item>
            <sound key="random.fizz" pitch="1" volume="1"/>
            <sound key="random.fizz" pitch="0.9" volume="1"/>
            <message text="`4☠☠☠ `e`oDefensive pickaxes must stay at home!`r"/>
        </action>
    </trigger>
    <!-- Redstone lamps lit by placing for first wool or -->
    <!-- by proximity for second wool (because end of game is too late) -->
    <trigger filter="any(completed-lime,lime-near-and-last)" scope="player">
        <action>
            <switch-scope inner="match">
                <fill region="blue-lime-light-power" material="redstone block" events="true"/>
            </switch-scope>
        </action>
    </trigger>
    <trigger filter="any(completed-cyan,cyan-near-and-last)" scope="player">
        <action>
            <switch-scope inner="match">
                <fill region="blue-cyan-light-power" material="redstone block" events="true"/>
            </switch-scope>
        </action>
    </trigger>
    <trigger filter="any(completed-orange,orange-near-and-last)" scope="player">
        <action scope="player">
            <switch-scope inner="match">
                <fill region="red-orange-light-power" material="redstone block" events="true"/>
            </switch-scope>
        </action>
    </trigger>
    <trigger filter="any(completed-yellow,yellow-near-and-last)" scope="player">
        <action>
            <switch-scope inner="match">
                <fill region="red-yellow-light-power" material="redstone block" events="true"/>
            </switch-scope>
        </action>
    </trigger>
    <!-- Store Alerts -->
    <action id="team-upgrade-sounds" scope="player">
        <sound key="random.levelup" volume="0.4" pitch="0.8"/>
        <sound key="fireworks.twinkle" volume="0.4" pitch="1"/>
    </action>
    <action id="team-upgrade-sounds-team" scope="team">
        <sound key="random.levelup" volume="0.4" pitch="0.8"/>
        <sound key="fireworks.twinkle" volume="0.4" pitch="1"/>
    </action>
    <!-- Spy reports limited to Protection and Sharpness upgrades -->
    <action id="team-upgrade-armor-with-spy-report" scope="team">
        <action id="team-upgrade-sounds-team"/>
        <set var="upgrading_team" value="1"/>
        <switch-scope inner="match">
            <switch-scope inner="team" filter="upgrading_team=0">
                <sound key="fireworks.twinkle_far" volume="0.9" pitch="1"/>
                <sound preset="objective_mode" volume="0.3" pitch="1.5"/>
                <sound preset="custom" volume="0.5"/>
                <message text="`4☠☠☠ `e`oSpies report that the enemy has upgraded armor!`r"/>
            </switch-scope>
        </switch-scope>
    </action>
    <action id="team-upgrade-sword-with-spy-report" scope="team">
        <action id="team-upgrade-sounds-team"/>
        <set var="upgrading_team" value="1"/>
        <switch-scope inner="match">
            <switch-scope inner="team" filter="upgrading_team=0">
                <sound key="fireworks.twinkle_far" volume="0.9" pitch="1"/>
                <sound preset="objective_mode" volume="0.3" pitch="1.5"/>
                <sound preset="custom" volume="0.5"/>
                <message text="`4☠☠☠ `e`oSpies report that the enemy has upgraded swords!`r"/>
            </switch-scope>
        </switch-scope>
    </action>
    <!-- Woolroom Webs -->
    <action id="web-upgrade-alerts" scope="player">
        <message text="`4`l❥❥❥`e`l [`6`lTeam Upgrade`e`l] `b`lWoolroom`2`l ➡ `f`lWebs Refreshed`r"/>
        <action id="team-upgrade-sounds"/>
    </action>
    <trigger filter="web-activate-red-filter" scope="player">
        <action>
            <set var="webs_activated" value="1"/>
            <set var="webs_to_be_activated" value="0"/>
        </action>
    </trigger>
    <trigger filter="web-activate-blue-filter" scope="player">
        <action>
            <set var="webs_activated" value="1"/>
            <set var="webs_to_be_activated" value="0"/>
        </action>
    </trigger>
    <action id="web-upgrade-red" scope="player">
        <action id="web-upgrade-alerts"/>
        <switch-scope inner="match">
            <fill region="red-webs" material="web" events="false"/>
        </switch-scope>
        <set var="webs_activated" value="0"/>
        <set var="webs_to_be_activated" value="1"/>
    </action>
    <action id="web-upgrade-blue" scope="player">
        <action id="web-upgrade-alerts"/>
        <switch-scope inner="match">
            <fill region="blue-webs" material="web" events="false"/>
        </switch-scope>
        <set var="webs_activated" value="0"/>
        <set var="webs_to_be_activated" value="1"/>
    </action>
    <trigger filter="all(armor_upgrade_variable=1)" scope="team">
        <action>
            <message text="`4`l❥❥❥`e`l [`6`lTeam Upgrade`e`l] `b`lArmor`2`l ➡ `f`lProtection I`r"/>
            <action id="team-upgrade-armor-with-spy-report"/>
        </action>
    </trigger>
    <trigger filter="all(armor_upgrade_variable=2)" scope="team">
        <action>
            <message text="`4`l❥❥❥`e`l [`6`lTeam Upgrade`e`l] `b`lArmor`2`l ➡ `f`lProtection II`r"/>
            <action id="team-upgrade-armor-with-spy-report"/>
        </action>
    </trigger>
    <trigger filter="all(armor_upgrade_variable=3)" scope="team">
        <action>
            <message text="`4`l❥❥❥`e`l [`6`lTeam Upgrade`e`l] `b`lArmor`2`l ➡ `f`lProtection III`r"/>
            <action id="team-upgrade-armor-with-spy-report"/>
        </action>
    </trigger>
    <trigger filter="all(armor_upgrade_variable=4)" scope="team">
        <action>
            <message text="`4`l❥❥❥`e`l [`6`lTeam Upgrade`e`l] `b`lArmor`2`l ➡ `f`lProtection IV`r"/>
            <action id="team-upgrade-armor-with-spy-report"/>
        </action>
    </trigger>
    <trigger filter="all(armor_upgrade_variable=5)" scope="team">
        <action>
            <message text="`4`l❥❥❥`e`l [`6`lTeam Upgrade`e`l] `b`lArmor`2`l ➡ `f`lProtection V`r"/>
            <action id="team-upgrade-armor-with-spy-report"/>
        </action>
    </trigger>
    <trigger filter="all(sharp_upgrade_variable=1)" scope="team">
        <action>
            <message text="`4`l❥❥❥`e`l [`6`lTeam Upgrade`e`l] `b`lSword`2`l ➡ `f`lSharpness I`r"/>
            <action id="team-upgrade-sword-with-spy-report"/>
        </action>
    </trigger>
    <trigger filter="all(sharp_upgrade_variable=2)" scope="team">
        <action>
            <message text="`4`l❥❥❥`e`l [`6`lTeam Upgrade`e`l] `b`lSword`2`l ➡ `f`lSharpness II`r"/>
            <action id="team-upgrade-sword-with-spy-report"/>
        </action>
    </trigger>
    <trigger filter="all(sharp_upgrade_variable=3)" scope="team">
        <action>
            <message text="`4`l❥❥❥`e`l [`6`lTeam Upgrade`e`l] `b`lSword`2`l ➡ `f`lSharpness III`r"/>
            <action id="team-upgrade-sword-with-spy-report"/>
        </action>
    </trigger>
    <trigger filter="all(sharp_upgrade_variable=4)" scope="team">
        <action>
            <message text="`4`l❥❥❥`e`l [`6`lTeam Upgrade`e`l] `b`lSword`2`l ➡ `f`lSharpness IV`r"/>
            <action id="team-upgrade-sword-with-spy-report"/>
        </action>
    </trigger>
    <trigger filter="all(ironsword_upgrade_variable=1)" scope="player">
        <action>
            <message text="`4`l❥❥❥`e`l [`6`lTeam Upgrade`e`l] `b`lSword`2`l ➡ `f`lIron`r"/>
            <action id="team-upgrade-sounds"/>
        </action>
    </trigger>
    <trigger filter="all(feather_upgrade_variable=1)" scope="player">
        <action>
            <message text="`4`l❥❥❥`e`l [`6`lTeam Upgrade`e`l] `b`lBoots`2`l ➡ `f`lFeather Falling I`r"/>
            <action id="team-upgrade-sounds"/>
        </action>
    </trigger>
    <trigger filter="all(feather_upgrade_variable=2)" scope="player">
        <action>
            <message text="`4`l❥❥❥`e`l [`6`lTeam Upgrade`e`l] `b`lBoots`2`l ➡ `f`lFeather Falling II`r"/>
            <action id="team-upgrade-sounds"/>
        </action>
    </trigger>
    <trigger filter="all(feather_upgrade_variable=3)" scope="player">
        <action>
            <message text="`4`l❥❥❥`e`l [`6`lTeam Upgrade`e`l] `b`lBoots`2`l ➡ `f`lFeather Falling III`r"/>
            <action id="team-upgrade-sounds"/>
        </action>
    </trigger>
    <trigger filter="all(haste_upgrade_variable=1)" scope="player">
        <action>
            <message text="`4`l❥❥❥`e`l [`6`lTeam Upgrade`e`l] `b`lMining`2`l ➡ `f`lHaste I`r"/>
            <action id="team-upgrade-sounds"/>
        </action>
    </trigger>
    <trigger filter="all(haste_upgrade_variable=2)" scope="player">
        <action>
            <message text="`4`l❥❥❥`e`l [`6`lTeam Upgrade`e`l] `b`lMining`2`l ➡ `f`lHaste II`r"/>
            <action id="team-upgrade-sounds"/>
        </action>
    </trigger>
    <trigger filter="all(fireresist_upgrade_variable=1)" scope="player">
        <action>
            <message text="`4`l❥❥❥`e`l [`6`lTeam Upgrade`e`l] `b`lKit`2`l ➡ `f`lFire Resistance Potion`r"/>
            <action id="team-upgrade-sounds"/>
        </action>
    </trigger>
    <trigger filter="all(blocks_upgrade_variable=1)" scope="player">
        <action>
            <message text="`4`l❥❥❥`e`l [`6`lTeam Upgrade`e`l] `b`lKit`2`l ➡ `f`lExtra Blocks`r"/>
            <action id="team-upgrade-sounds"/>
        </action>
    </trigger>
    <trigger filter="all(bucket_upgrade_variable=1)" scope="player">
        <action>
            <message text="`4`l❥❥❥`e`l [`6`lTeam Upgrade`e`l] `b`lKit`2`l ➡ `f`lWater Bucket`r"/>
            <action id="team-upgrade-sounds"/>
        </action>
    </trigger>
    <trigger filter="all(speed_upgrade_variable=1)" scope="player">
        <action>
            <message text="`4`l❥❥❥`e`l [`6`lTeam Upgrade`e`l] `b`lHome`2`l ➡ `f`lSpeed I at Home`r"/>
            <action id="team-upgrade-sounds"/>
        </action>
    </trigger>
    <trigger filter="all(fatigue_upgrade_variable=1)" scope="player">
        <action>
            <message text="`4`l❥❥❥`e`l [`6`lTeam Upgrade`e`l] `b`lHome`2`l ➡ `f`lMining Fatigue Trap`r"/>
            <action id="team-upgrade-sounds"/>
        </action>
    </trigger>
    <!-- Self scope -->
    <trigger filter="all(helmet_upgrade_variable=1)" scope="player">
        <action>
            <message text="`b`l♦♦♦`9`l [`3`lUpgrade`9`l] `b`lHelmet`2`l ➡ `f`lDiamond`r"/>
            <sound preset="custom"/>
        </action>
    </trigger>
    <trigger filter="all(chestplate_upgrade_variable=1)" scope="player">
        <action>
            <message text="`b`l♦♦♦`9`l [`3`lUpgrade`9`l] `b`lChestplate`2`l ➡ `f`lDiamond`r"/>
            <sound preset="custom"/>
        </action>
    </trigger>
    <trigger filter="all(leggings_upgrade_variable=1)" scope="player">
        <action>
            <message text="`b`l♦♦♦`9`l [`3`lUpgrade`9`l] `b`lLeggings`2`l ➡ `f`lDiamond`r"/>
            <sound preset="custom"/>
        </action>
    </trigger>
    <trigger filter="all(boots_upgrade_variable=1)" scope="player">
        <action>
            <message text="`b`l♦♦♦`9`l [`3`lUpgrade`9`l] `b`lBoots`2`l ➡ `f`lDiamond`r"/>
            <sound preset="custom"/>
        </action>
    </trigger>
    <trigger filter="all(diamondsword_upgrade_variable=1)" scope="player">
        <action>
            <message text="`b`l♦♦♦`9`l [`3`lUpgrade`9`l] `b`lSword`2`l ➡ `f`lDiamond`r"/>
            <sound preset="custom"/>
        </action>
    </trigger>
    <trigger filter="all(pickaxe_upgrade_variable=1)" scope="player">
        <action>
            <message text="`b`l♦♦♦`9`l [`3`lUpgrade`9`l] `b`lPickaxe`2`l ➡ `f`lDiamond`r"/>
            <sound preset="custom"/>
        </action>
    </trigger>
    <trigger filter="all(axe_upgrade_variable=1)" scope="player">
        <action>
            <message text="`b`l♦♦♦`9`l [`3`lUpgrade`9`l] `b`lAxe`2`l ➡ `f`lDiamond`r"/>
            <sound preset="custom"/>
        </action>
    </trigger>
    <trigger filter="all(shovel_upgrade_variable=1)" scope="player">
        <action>
            <message text="`b`l♦♦♦`9`l [`3`lUpgrade`9`l] `b`lShovel`2`l ➡ `f`lDiamond`r"/>
            <sound preset="custom"/>
        </action>
    </trigger>
    <trigger filter="all(hoe_upgrade_variable=1)" scope="player">
        <action>
            <message text="`b`l♦♦♦`9`l [`3`lUpgrade`9`l] `b`lKit `2`l ➡ `f`lDiamond Knockback Hoe`r"/>
            <sound preset="custom"/>
        </action>
    </trigger>
    <!-- Self Upgrade Actions -->
    <!-- helmet -->
    <trigger filter="all(helmet_upgrade_variable=1,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="gold helmet"/>
                <replace material="diamond helmet" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron helmet"/>
                <replace material="diamond helmet" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- chestplate -->
    <trigger filter="all(chestplate_upgrade_variable=1,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="chainmail chestplate"/>
                <replace material="diamond chestplate" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron chestplate"/>
                <replace material="diamond chestplate" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- leggings -->
    <!-- leggings - prot 0 -->
    <trigger filter="all(leggings_upgrade_variable=1,armor_upgrade_variable=0,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="diamond leggings" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="diamond leggings" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- leggings - prot 1 -->
    <trigger filter="all(leggings_upgrade_variable=1,armor_upgrade_variable=1,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="diamond leggings" enchantment="protection" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="diamond leggings" enchantment="protection" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- leggings - prot 2 -->
    <trigger filter="all(leggings_upgrade_variable=1,armor_upgrade_variable=2,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="diamond leggings" enchantment="protection:2" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="diamond leggings" enchantment="protection:2" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- leggings - prot 3 -->
    <trigger filter="all(leggings_upgrade_variable=1,armor_upgrade_variable=3,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="diamond leggings" enchantment="protection:3" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="diamond leggings" enchantment="protection:3" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- leggings - prot 4 -->
    <trigger filter="all(leggings_upgrade_variable=1,armor_upgrade_variable=4,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="diamond leggings" enchantment="protection:4" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="diamond leggings" enchantment="protection:4" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- leggings - prot 5 -->
    <trigger filter="all(leggings_upgrade_variable=1,armor_upgrade_variable=5,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="diamond leggings" enchantment="protection:5" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="diamond leggings" enchantment="protection:5" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 0 - prot 0 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=0,armor_upgrade_variable=0,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 1 - prot 0 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=1,armor_upgrade_variable=0,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="feather falling:1" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="feather falling:1" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 2 - prot 0 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=2,armor_upgrade_variable=0,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="feather falling:2" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="feather falling:2" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 3 - prot 0 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=3,armor_upgrade_variable=0,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="feather falling:3" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="feather falling:3" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 0 - prot 1 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=0,armor_upgrade_variable=1,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="protection" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="protection" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 1 - prot 1 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=1,armor_upgrade_variable=1,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="feather falling:1;protection" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="feather falling:1;protection" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 2 - prot 1 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=2,armor_upgrade_variable=1,alive)" scope="player">
        <action scope="player">
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="feather falling:2;protection" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="feather falling:2;protection" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 3 - prot 1 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=3,armor_upgrade_variable=1,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="feather falling:3;protection" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="feather falling:3;protection" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 0 - prot 2 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=0,armor_upgrade_variable=2,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="protection:2" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="protection:2" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 1 - prot 2 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=1,armor_upgrade_variable=2,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="feather falling:1;protection:2" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="feather falling:1;protection:2" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 2 - prot 2 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=2,armor_upgrade_variable=2,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="feather falling:2;protection:2" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="feather falling:2;protection:2" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 3 - prot 2 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=3,armor_upgrade_variable=2,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="feather falling:3;protection:2" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="feather falling:3;protection:2" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 0 - prot 3 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=0,armor_upgrade_variable=3,alive)" scope="player">
        <action scope="player">
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="protection:3" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="protection:3" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 1 - prot 3 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=1,armor_upgrade_variable=3,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="feather falling:1;protection:3" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="feather falling:1;protection:3" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 2 - prot 3 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=2,armor_upgrade_variable=3,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="feather falling:2;protection:3" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="feather falling:2;protection:3" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 3 - prot 3 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=3,armor_upgrade_variable=3,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="feather falling:3;protection:3" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="feather falling:3;protection:3" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 0 - prot 4 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=0,armor_upgrade_variable=4,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="protection:4" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="protection:4" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 1 - prot 4 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=1,armor_upgrade_variable=4,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="feather falling:1;protection:4" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="feather falling:1;protection:4" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 2 - prot 4 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=2,armor_upgrade_variable=4,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="feather falling:2;protection:4" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="feather falling:2;protection:4" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 3 - prot 4 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=3,armor_upgrade_variable=4,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="feather falling:3;protection:4" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="feather falling:3;protection:4" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 0 - prot 5 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=0,armor_upgrade_variable=5,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="protection:5" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="protection:5" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 1 - prot 5 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=1,armor_upgrade_variable=5,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="feather falling:1;protection:5" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="feather falling:1;protection:5" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 2 - prot 5 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=2,armor_upgrade_variable=5,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="feather falling:2;protection:5" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="feather falling:2;protection:5" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- boots - feather 3 - prot 5 -->
    <trigger filter="all(boots_upgrade_variable=1,feather_upgrade_variable=3,armor_upgrade_variable=5,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="diamond boots" enchantment="feather falling:3;protection:5" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="diamond boots" enchantment="feather falling:3;protection:5" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- sword upgrades -->
    <trigger filter="all(diamondsword_upgrade_variable=1,sharp_upgrade_variable=0,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="stone sword"/>
                <replace material="diamond sword" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron sword"/>
                <replace material="diamond sword" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <trigger filter="all(diamondsword_upgrade_variable=1,sharp_upgrade_variable=1,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="stone sword"/>
                <replace material="diamond sword" enchantment="sharpness" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron sword"/>
                <replace material="diamond sword" enchantment="sharpness" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <trigger filter="all(diamondsword_upgrade_variable=1,sharp_upgrade_variable=2,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="stone sword"/>
                <replace material="diamond sword" enchantment="sharpness:2" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron sword"/>
                <replace material="diamond sword" enchantment="sharpness:2" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <trigger filter="all(diamondsword_upgrade_variable=1,sharp_upgrade_variable=3,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="stone sword"/>
                <replace material="diamond sword" enchantment="sharpness:3" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron sword"/>
                <replace material="diamond sword" enchantment="sharpness:3" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <trigger filter="all(diamondsword_upgrade_variable=1,sharp_upgrade_variable=4,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="stone sword"/>
                <replace material="diamond sword" enchantment="sharpness:4" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron sword"/>
                <replace material="diamond sword" enchantment="sharpness:4" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- pickaxe upgrade -->
    <trigger filter="all(pickaxe_upgrade_variable=1,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="iron pickaxe"/>
                <replace material="diamond pickaxe" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- axe upgrade -->
    <trigger filter="all(axe_upgrade_variable=1,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="iron axe"/>
                <replace material="diamond axe" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- shovel upgrade -->
    <trigger filter="all(shovel_upgrade_variable=1,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="iron spade"/>
                <replace material="diamond spade" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- hoe upgrade -->
    <trigger filter="all(hoe_upgrade_variable=1,alive)" scope="player">
        <action>
            <kit force="true">
                <item material="diamond hoe" enchantment="knockback"/>
            </kit>
        </action>
    </trigger>
    <!-- Team -->
    <trigger filter="all(sharp_upgrade_variable=1,alive)" scope="player">
        <action id="sharp-upgrade-1-replacements">
            <replace-item ignore-metadata="true">
                <find material="stone sword"/>
                <replace material="stone sword" enchantment="sharpness"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron sword"/>
                <replace material="iron sword" enchantment="sharpness"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond sword"/>
                <replace material="diamond sword" enchantment="sharpness"/>
            </replace-item>
        </action>
        </trigger>
    <trigger filter="all(sharp_upgrade_variable=2,alive)" scope="player">
        <action id="sharp-upgrade-2-replacements">
            <action id="sharp-upgrade-1-replacements"/>
            <replace-item ignore-metadata="true">
                <find material="stone sword"/>
                <replace material="stone sword" enchantment="sharpness:2"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron sword"/>
                <replace material="iron sword" enchantment="sharpness:2"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond sword"/>
                <replace material="diamond sword" enchantment="sharpness:2"/>
            </replace-item>
        </action>
    </trigger>
    <trigger filter="all(sharp_upgrade_variable=3,alive)" scope="player">
        <action id="sharp-upgrade-3-replacements">
            <action id="sharp-upgrade-2-replacements"/>
            <replace-item ignore-metadata="true">
                <find material="stone sword"/>
                <replace material="stone sword" enchantment="sharpness:3"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron sword"/>
                <replace material="iron sword" enchantment="sharpness:3"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond sword"/>
                <replace material="diamond sword" enchantment="sharpness:3"/>
            </replace-item>
        </action>
    </trigger>
    <trigger filter="all(sharp_upgrade_variable=4,alive)" scope="player">
        <action scope="player">
            <action id="sharp-upgrade-3-replacements"/>
            <replace-item ignore-metadata="true">
                <find material="stone sword"/>
                <replace material="stone sword" enchantment="sharpness:4"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron sword"/>
                <replace material="iron sword" enchantment="sharpness:4"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond sword"/>
                <replace material="diamond sword" enchantment="sharpness:4"/>
            </replace-item>
        </action>
    </trigger>
    <!-- iron sword upgrade -->
    <trigger filter="all(ironsword_upgrade_variable=1,sharp_upgrade_variable=0,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="stone sword"/>
                <replace material="iron sword" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <trigger filter="all(ironsword_upgrade_variable=1,sharp_upgrade_variable=1,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="stone sword"/>
                <replace material="iron sword" enchantment="sharpness" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <trigger filter="all(ironsword_upgrade_variable=1,sharp_upgrade_variable=2,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="stone sword"/>
                <replace material="iron sword" enchantment="sharpness:2" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <trigger filter="all(ironsword_upgrade_variable=1,sharp_upgrade_variable=3,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="stone sword"/>
                <replace material="iron sword" enchantment="sharpness:3" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <trigger filter="all(ironsword_upgrade_variable=1,sharp_upgrade_variable=4,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="stone sword"/>
                <replace material="iron sword" enchantment="sharpness:4" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- Feather Falling & Protection -->
    <!-- feather 0, prot 1 -->
    <trigger filter="all(feather_upgrade_variable=0,armor_upgrade_variable=1,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="protection:1" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="protection:1" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="protection:1" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="leather leggings" enchantment="protection:1" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="iron leggings" enchantment="protection:1" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond leggings"/>
                <replace material="diamond leggings" enchantment="protection:1" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 0, prot 2 -->
    <trigger filter="all(feather_upgrade_variable=0,armor_upgrade_variable=2,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="protection:2" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="protection:2" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="protection:2" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="leather leggings" enchantment="protection:2" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="iron leggings" enchantment="protection:2" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond leggings"/>
                <replace material="diamond leggings" enchantment="protection:2" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 0, prot 3 -->
    <trigger filter="all(feather_upgrade_variable=0,armor_upgrade_variable=3,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="protection:3" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="protection:3" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="protection:3" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="leather leggings" enchantment="protection:3" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="iron leggings" enchantment="protection:3" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond leggings"/>
                <replace material="diamond leggings" enchantment="protection:3" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 0, prot 4 -->
    <trigger filter="all(feather_upgrade_variable=0,armor_upgrade_variable=4,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="protection:4" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="protection:4" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="protection:4" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="leather leggings" enchantment="protection:4" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="iron leggings" enchantment="protection:4" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond leggings"/>
                <replace material="diamond leggings" enchantment="protection:4" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 0, prot 5 -->
    <trigger filter="all(feather_upgrade_variable=0,armor_upgrade_variable=5,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="protection:5" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="protection:5" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="protection:5" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="leather leggings" enchantment="protection:5" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="iron leggings" enchantment="protection:5" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond leggings"/>
                <replace material="diamond leggings" enchantment="protection:5" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 1, prot 0 -->
    <trigger filter="all(feather_upgrade_variable=1,armor_upgrade_variable=0,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="feather falling:1" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="feather falling:1" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="feather falling:1" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 1, prot 1 -->
    <trigger filter="all(feather_upgrade_variable=1,armor_upgrade_variable=1,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="feather falling:1;protection:1" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="feather falling:1;protection:1" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="feather falling:1;protection:1" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="leather leggings" enchantment="protection:1" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="iron leggings" enchantment="protection:1" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond leggings"/>
                <replace material="diamond leggings" enchantment="protection:1" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 1, prot 2 -->
    <trigger filter="all(feather_upgrade_variable=1,armor_upgrade_variable=2,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="feather falling:1;protection:2" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="feather falling:1;protection:2" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="feather falling:1;protection:2" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="leather leggings" enchantment="protection:2" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="iron leggings" enchantment="protection:2" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond leggings"/>
                <replace material="diamond leggings" enchantment="protection:2" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 1, prot 3 -->
    <trigger filter="all(feather_upgrade_variable=1,armor_upgrade_variable=3,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="feather falling:1;protection:3" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="feather falling:1;protection:3" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="feather falling:1;protection:3" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="leather leggings" enchantment="protection:3" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="iron leggings" enchantment="protection:3" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond leggings"/>
                <replace material="diamond leggings" enchantment="protection:3" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 1, prot 4 -->
    <trigger filter="all(feather_upgrade_variable=1,armor_upgrade_variable=4,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="feather falling:1;protection:4" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="feather falling:1;protection:4" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="feather falling:1;protection:4" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="leather leggings" enchantment="protection:4" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="iron leggings" enchantment="protection:4" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond leggings"/>
                <replace material="diamond leggings" enchantment="protection:4" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 1, prot 5 -->
    <trigger filter="all(feather_upgrade_variable=1,armor_upgrade_variable=5,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="feather falling:1;protection:5" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="feather falling:1;protection:5" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="feather falling:1;protection:5" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="leather leggings" enchantment="protection:5" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="iron leggings" enchantment="protection:5" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond leggings"/>
                <replace material="diamond leggings" enchantment="protection:5" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 2, prot 0 -->
    <trigger filter="all(feather_upgrade_variable=2,armor_upgrade_variable=0,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="feather falling:2" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="feather falling:2" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="feather falling:2" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 2, prot 1 -->
    <trigger filter="all(feather_upgrade_variable=2,armor_upgrade_variable=1,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="feather falling:2;protection:1" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="feather falling:2;protection:1" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="feather falling:2;protection:1" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="leather leggings" enchantment="protection:1" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="iron leggings" enchantment="protection:1" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond leggings"/>
                <replace material="diamond leggings" enchantment="protection:1" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 2, prot 2 -->
    <trigger filter="all(feather_upgrade_variable=2,armor_upgrade_variable=2,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="feather falling:2;protection:2" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="feather falling:2;protection:2" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="feather falling:2;protection:2" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="leather leggings" enchantment="protection:2" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="iron leggings" enchantment="protection:2" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond leggings"/>
                <replace material="diamond leggings" enchantment="protection:2" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 2, prot 3 -->
    <trigger filter="all(feather_upgrade_variable=2,armor_upgrade_variable=3,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="feather falling:2;protection:3" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="feather falling:2;protection:3" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="feather falling:2;protection:3" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="leather leggings" enchantment="protection:3" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="iron leggings" enchantment="protection:3" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond leggings"/>
                <replace material="diamond leggings" enchantment="protection:3" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 2, prot 4 -->
    <trigger filter="all(feather_upgrade_variable=2,armor_upgrade_variable=4,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="feather falling:2;protection:4" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="feather falling:2;protection:4" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="feather falling:2;protection:4" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="leather leggings" enchantment="protection:4" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="iron leggings" enchantment="protection:4" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond leggings"/>
                <replace material="diamond leggings" enchantment="protection:4" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 2, prot 5 -->
    <trigger filter="all(feather_upgrade_variable=2,armor_upgrade_variable=5,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="feather falling:2;protection:5" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="feather falling:2;protection:5" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="feather falling:2;protection:5" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="leather leggings" enchantment="protection:5" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="iron leggings" enchantment="protection:5" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond leggings"/>
                <replace material="diamond leggings" enchantment="protection:5" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 3, prot 0 -->
    <trigger filter="all(feather_upgrade_variable=3,armor_upgrade_variable=0,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="feather falling:3" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="feather falling:3" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="feather falling:3" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 3, prot 1 -->
    <trigger filter="all(feather_upgrade_variable=3,armor_upgrade_variable=1,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="feather falling:3;protection:1" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="feather falling:3;protection:1" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="feather falling:3;protection:1" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="leather leggings" enchantment="protection:1" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="iron leggings" enchantment="protection:1" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond leggings"/>
                <replace material="diamond leggings" enchantment="protection:1" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 3, prot 2 -->
    <trigger filter="all(feather_upgrade_variable=3,armor_upgrade_variable=2,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="feather falling:3;protection:2" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="feather falling:3;protection:2" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="feather falling:3;protection:2" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="leather leggings" enchantment="protection:2" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="iron leggings" enchantment="protection:2" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond leggings"/>
                <replace material="diamond leggings" enchantment="protection:2" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 3, prot 3 -->
    <trigger filter="all(feather_upgrade_variable=3,armor_upgrade_variable=3,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="feather falling:3;protection:3" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="feather falling:3;protection:3" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="feather falling:3;protection:3" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="leather leggings" enchantment="protection:3" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="iron leggings" enchantment="protection:3" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond leggings"/>
                <replace material="diamond leggings" enchantment="protection:3" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 3, prot 4 -->
    <trigger filter="all(feather_upgrade_variable=3,armor_upgrade_variable=4,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="feather falling:3;protection:4" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="feather falling:3;protection:4" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="feather falling:3;protection:4" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="leather leggings" enchantment="protection:4" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="iron leggings" enchantment="protection:4" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond leggings"/>
                <replace material="diamond leggings" enchantment="protection:4" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <!-- feather 3, prot 5 -->
    <trigger filter="all(feather_upgrade_variable=3,armor_upgrade_variable=5,alive)" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="leather boots"/>
                <replace material="leather boots" enchantment="feather falling:3;protection:5" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron boots"/>
                <replace material="iron boots" enchantment="feather falling:3;protection:5" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond boots"/>
                <replace material="diamond boots" enchantment="feather falling:3;protection:5" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="leather leggings"/>
                <replace material="leather leggings" enchantment="protection:5" team-color="true" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="iron leggings"/>
                <replace material="iron leggings" enchantment="protection:5" unbreakable="true"/>
            </replace-item>
            <replace-item ignore-metadata="true">
                <find material="diamond leggings"/>
                <replace material="diamond leggings" enchantment="protection:5" unbreakable="true"/>
            </replace-item>
        </action>
    </trigger>
    <set id="helmet-upgrade-1-set" var="helmet_upgrade_variable" value="1" scope="player"/>
    <set id="chestplate-upgrade-1-set" var="chestplate_upgrade_variable" value="1" scope="player"/>
    <set id="leggings-upgrade-1-set" var="leggings_upgrade_variable" value="1" scope="player"/>
    <set id="boots-upgrade-1-set" var="boots_upgrade_variable" value="1" scope="player"/>
    <set id="diamondsword-upgrade-1-set" var="diamondsword_upgrade_variable" value="1" scope="player"/>
    <set id="pickaxe-upgrade-1-set" var="pickaxe_upgrade_variable" value="1" scope="player"/>
    <set id="axe-upgrade-1-set" var="axe_upgrade_variable" value="1" scope="player"/>
    <set id="shovel-upgrade-1-set" var="shovel_upgrade_variable" value="1" scope="player"/>
    <set id="hoe-upgrade-1-set" var="hoe_upgrade_variable" value="1" scope="player"/>
    <set id="armor-upgrade-1-set" var="armor_upgrade_variable" value="1" scope="player"/>
    <set id="armor-upgrade-2-set" var="armor_upgrade_variable" value="2" scope="player"/>
    <set id="armor-upgrade-3-set" var="armor_upgrade_variable" value="3" scope="player"/>
    <set id="armor-upgrade-4-set" var="armor_upgrade_variable" value="4" scope="player"/>
    <set id="armor-upgrade-5-set" var="armor_upgrade_variable" value="5" scope="player"/>
    <set id="sharp-upgrade-1-set" var="sharp_upgrade_variable" value="1" scope="player"/>
    <set id="sharp-upgrade-2-set" var="sharp_upgrade_variable" value="2" scope="player"/>
    <set id="sharp-upgrade-3-set" var="sharp_upgrade_variable" value="3" scope="player"/>
    <set id="sharp-upgrade-4-set" var="sharp_upgrade_variable" value="4" scope="player"/>
    <set id="ironsword-upgrade-1-set" var="ironsword_upgrade_variable" value="1" scope="player"/>
    <set id="feather-upgrade-1-set" var="feather_upgrade_variable" value="1" scope="player"/>
    <set id="feather-upgrade-2-set" var="feather_upgrade_variable" value="2" scope="player"/>
    <set id="feather-upgrade-3-set" var="feather_upgrade_variable" value="3" scope="player"/>
    <set id="haste-upgrade-1-set" var="haste_upgrade_variable" value="1" scope="player"/>
    <set id="haste-upgrade-2-set" var="haste_upgrade_variable" value="2" scope="player"/>
    <set id="fireresist-upgrade-1-set" var="fireresist_upgrade_variable" value="1" scope="player"/>
    <set id="blocks-upgrade-1-set" var="blocks_upgrade_variable" value="1" scope="player"/>
    <set id="bucket-upgrade-1-set" var="bucket_upgrade_variable" value="1" scope="player"/>
    <set id="speed-upgrade-1-set" var="speed_upgrade_variable" value="1" scope="player"/>
    <set id="fatigue-upgrade-1-set" var="fatigue_upgrade_variable" value="1" scope="player"/>
</actions>
<variables>
    <!-- Self -->
    <variable id="helmet_upgrade_variable" scope="player"/>
    <variable id="chestplate_upgrade_variable" scope="player"/>
    <variable id="leggings_upgrade_variable" scope="player"/>
    <variable id="boots_upgrade_variable" scope="player"/>
    <variable id="diamondsword_upgrade_variable" scope="player"/>
    <variable id="pickaxe_upgrade_variable" scope="player"/>
    <variable id="axe_upgrade_variable" scope="player"/>
    <variable id="shovel_upgrade_variable" scope="player"/>
    <variable id="hoe_upgrade_variable" scope="player"/>
    <variable id="lime_seal_breaker" scope="player" exclusive="1"/>
    <variable id="cyan_seal_breaker" scope="player" exclusive="1"/>
    <variable id="yellow_seal_breaker" scope="player" exclusive="1"/>
    <variable id="orange_seal_breaker" scope="player" exclusive="1"/>
    <!-- Team -->
    <variable id="blocks_upgrade_variable" scope="player"/>
    <variable id="bucket_upgrade_variable" scope="player"/>
    <variable id="armor_upgrade_variable" scope="team"/>
    <variable id="sharp_upgrade_variable" scope="team"/>
    <variable id="ironsword_upgrade_variable" scope="team"/>
    <variable id="feather_upgrade_variable" scope="team"/>
    <variable id="haste_upgrade_variable" scope="team"/>
    <variable id="fireresist_upgrade_variable" scope="team"/>
    <variable id="speed_upgrade_variable" scope="team"/>
    <variable id="fatigue_upgrade_variable" scope="team"/>
    <variable id="upgrading_team" scope="team" default="0" exclusive="1"/>
    <variable id="web_breaking_team" scope="team" default="0" exclusive="1"/>
    <variable id="webs_activated" scope="team" default="0" exclusive="1"/>
    <variable id="webs_to_be_activated" scope="team" default="0" exclusive="1"/>
</variables>
<filters>
    <alive id="alive"/>
    <match-running id="match-running"/>
    <team id="only-blue">blue-team</team>
    <team id="only-red">red-team</team>
    <all id="completed-lime">
        <completed>lime-wool</completed>
    </all>
    <all id="completed-cyan">
        <completed>cyan-wool</completed>
    </all>
    <all id="completed-orange">
        <completed>orange-wool</completed>
    </all>
    <all id="completed-yellow">
        <completed>yellow-wool</completed>
    </all>
    <all id="nerf-pickaxe">
        <carrying ignore-metadata="true">
            <item material="gold pickaxe"/>
        </carrying>
        <region id="gold-pickaxe-nerf"/>
    </all>
    <all id="lime-near-and-last">
        <carrying ignore-durability="false">
            <item material="wool" damage="5"/>
        </carrying>
        <completed>cyan-wool</completed>
        <region id="near-lime-region"/>
    </all>
    <all id="cyan-near-and-last">
        <carrying ignore-durability="false">
            <item material="wool" damage="9"/>
        </carrying>
        <completed>lime-wool</completed>
        <region id="near-cyan-region"/>
    </all>
    <all id="orange-near-and-last">
        <carrying ignore-durability="false">
            <item material="wool" damage="1"/>
        </carrying>
        <completed>yellow-wool</completed>
        <region id="near-orange-region"/>
    </all>
    <all id="yellow-near-and-last">
        <carrying ignore-durability="false">
            <item material="wool" damage="4"/>
        </carrying>
        <completed>orange-wool</completed>
        <region id="near-yellow-region"/>
    </all>
    <all id="store-forbidden-trigger">
        <alive/>
        <region id="store-forbidden"/>
    </all>
    <all id="red-enemy-fatigue">
        <alive/>
        <team>blue-team</team>
        <variable var="fatigue_upgrade_variable" team="red-team">1</variable>
        <region id="red-home-effect-region"/>
    </all>
    <all id="blue-enemy-fatigue">
        <alive/>
        <team>red-team</team>
        <variable var="fatigue_upgrade_variable" team="blue-team">1</variable>
        <region id="blue-home-effect-region"/>
    </all>
    <all id="red-speed-boost">
        <alive/>
        <team>red-team</team>
        <variable var="speed_upgrade_variable">1</variable>
        <region id="red-home-effect-region"/>
    </all>
    <all id="blue-speed-boost">
        <alive/>
        <team>blue-team</team>
        <variable var="speed_upgrade_variable">1</variable>
        <region id="blue-home-effect-region"/>
    </all>
    <material id="only-air">air</material>
    <any id="only-wool-breakable">
        <material id="only-webs">web</material>
        <material>wood step</material>
        <material>diamond block</material>
        <material>diamond ore</material>
        <material>gold ore</material>
    </any>
    <all id="only-spawn-placeable">
        <any>
            <material>iron block</material>
            <material>redstone block</material>
        </any>
        <cause>world</cause>
    </all>
    <all id="only-iron-cause-world">
        <any>
            <material id="only-iron">iron block</material>
        </any>
        <cause>world</cause>
    </all>
    <any id="only-iron-stuff">
        <material>iron block</material>
        <material>rails</material>
    </any>
    <any id="only-spawn-seals">
        <material>double step:8</material>
    </any>
    <any id="only-waters-leaves">
        <material>water</material>
        <material>stationary_water</material>
        <material>leaves</material> <!-- leaves:0 better, but doesn't work -->
    </any>
    <deny id="only-redstone-block">
        <not>
            <all>
                <material>redstone block</material>
                <cause>world</cause>
            </all>
        </not>
    </deny>
    <deny id="only-water-redstone-place">
        <not>
            <all>
                <any>
                    <material>water</material>
                    <material>stationary water</material>
                    <material>air</material>
                    <material>redstone block</material>
                </any>
                <cause>world</cause>
            </all>
        </not>
    </deny>
    <!-- allow players to break yellow glass to access spawn platform chest -->
    <deny id="original-block-protection-gapple">
        <blocks region="spawner-protect-gapple">
            <not>
                <any>
                    <material>stained glass:4</material>
                </any>
            </not>
        </blocks>
    </deny>
    <!-- to avoid odd pit, reseal with yellow glass after a while -->
    <deny id="gapple-reseal-allow">
        <not>
            <all>
                <material>stained glass:4</material>
                <cause>world</cause>
            </all>
        </not>
    </deny>
    <all id="gapple-seal-broke">
        <offset vector="0,74,0">
            <material>air</material>
        </offset>
    </all>
    <after id="lime-seal-broke" filter="lime-seal-broke-filter" duration="0.5s"/>
    <all id="lime-seal-broke-filter">
        <offset vector="-119,61,134">
            <material>air</material>
        </offset>
    </all>
    <after id="cyan-seal-broke" filter="cyan-seal-broke-filter" duration="0.5s"/>
    <all id="cyan-seal-broke-filter">
        <offset vector="119,61,134">
            <material>air</material>
        </offset>
    </all>
    <after id="yellow-seal-broke" filter="yellow-seal-broke-filter" duration="0.5s"/>
    <all id="yellow-seal-broke-filter">
        <offset vector="-119,61,-134">
            <material>air</material>
        </offset>
    </all>
    <after id="orange-seal-broke" filter="orange-seal-broke-filter" duration="0.5s"/>
    <all id="orange-seal-broke-filter">
        <offset vector="119,61,-134">
            <material>air</material>
        </offset>
    </all>
    <!-- delay web breakable alerts to avoid too many things happening at once -->
    <after id="web-activate-red-filter" filter="red-webs-to-be-activated" duration="3s"/>
    <after id="web-activate-blue-filter" filter="blue-webs-to-be-activated" duration="3s"/>
    <all id="red-webs-to-be-activated">
        <team>red-team</team>
        <variable var="webs_to_be_activated">1</variable>
    </all>
    <all id="blue-webs-to-be-activated">
        <team>blue-team</team>
        <variable var="webs_to_be_activated">1</variable>
    </all>
    <any id="red-web-broke">
        <offset vector="-135,65,122">
            <material>air</material>
        </offset>
        <offset vector="-135,66,122">
            <material>air</material>
        </offset>
        <offset vector="-129,65,122">
            <material>air</material>
        </offset>
        <offset vector="-129,66,122">
            <material>air</material>
        </offset>
        <offset vector="-123,65,122">
            <material>air</material>
        </offset>
        <offset vector="-123,66,122">
            <material>air</material>
        </offset>
        <offset vector="135,65,122">
            <material>air</material>
        </offset>
        <offset vector="135,66,122">
            <material>air</material>
        </offset>
        <offset vector="129,65,122">
            <material>air</material>
        </offset>
        <offset vector="129,66,122">
            <material>air</material>
        </offset>
        <offset vector="123,65,122">
            <material>air</material>
        </offset>
        <offset vector="123,66,122">
            <material>air</material>
        </offset>
    </any>
    <any id="blue-web-broke">
        <offset vector="-135,65,-122">
            <material>air</material>
        </offset>
        <offset vector="-135,66,-122">
            <material>air</material>
        </offset>
        <offset vector="-129,65,-122">
            <material>air</material>
        </offset>
        <offset vector="-129,66,-122">
            <material>air</material>
        </offset>
        <offset vector="-123,65,-122">
            <material>air</material>
        </offset>
        <offset vector="-123,66,-122">
            <material>air</material>
        </offset>
        <offset vector="135,65,-122">
            <material>air</material>
        </offset>
        <offset vector="135,66,-122">
            <material>air</material>
        </offset>
        <offset vector="129,65,-122">
            <material>air</material>
        </offset>
        <offset vector="129,66,-122">
            <material>air</material>
        </offset>
        <offset vector="123,65,-122">
            <material>air</material>
        </offset>
        <offset vector="123,66,-122">
            <material>air</material>
        </offset>
    </any>
</filters>
<portals>
    <portal yaw="@90" region="blue-left-portal" destination="blue-right-portal-point" filter="only-blue" observers="never"/>
    <portal yaw="@270" region="blue-right-portal" destination="blue-left-portal-point" filter="only-blue" observers="never"/>
    <portal yaw="@270" region="red-left-portal" destination="red-right-portal-point" filter="only-red" observers="never"/>
    <portal yaw="@90" region="red-right-portal" destination="red-left-portal-point" filter="only-red" observers="never"/>
</portals>
<shopkeepers>
    <shopkeepers name="`6☫`l The Bazaar`r`6 ☫" shop="team-upgrade-shop">
        <shopkeeper yaw="270">-11.5,64,124.5</shopkeeper> <!-- red -->
    </shopkeepers>
    <shopkeepers name="`b`l♦ Dilawarzz' Diamonds`r`b`l ♦" shop="player-upgrade-shop">
        <shopkeeper yaw="90">12.5,64,124.5</shopkeeper> <!-- red -->
    </shopkeepers>
    <shopkeepers name="`6☬`l The Bazaar`r`6 ☬" shop="team-upgrade-shop">
        <shopkeeper yaw="90">12.5,64,-123.5</shopkeeper> <!-- blue -->
    </shopkeepers>
    <shopkeepers name="`b`l♦ Chadnezzar's Diamonds`r`b`l ♦" shop="player-upgrade-shop">
        <shopkeeper yaw="270">-11.5,64,-123.5</shopkeeper> <!-- blue -->
    </shopkeepers>
</shopkeepers>
<shops>
<shop id="player-upgrade-shop" name="Player Upgrades and Items">
    <category id="player-diamond-upgrades" name="`aPermanent Kit Upgrades" material="diamond helmet">
        <item material="diamond helmet" name="`b`lDiamond Helmet" lore="`7You permanently gain|`7A Diamond Helmet|" price="5" currency="diamond" action="helmet-upgrade-1-set" filter="all(helmet_upgrade_variable=0)"/>
        <item material="diamond chestplate" name="`b`lDiamond Chestplate" lore="`7You permanently gain|`7A Diamond Chestplate|" price="10" currency="diamond" action="chestplate-upgrade-1-set" filter="all(chestplate_upgrade_variable=0)"/>
        <item material="diamond leggings" name="`b`lDiamond Leggings" lore="`7You permanently gain|`7Diamond Leggings|" price="50" currency="diamond" action="leggings-upgrade-1-set" filter="all(leggings_upgrade_variable=0)"/>
        <item material="diamond boots" name="`b`lDiamond Boots" lore="`7You permanently gain|`7Diamond Boots|" price="35" currency="diamond" action="boots-upgrade-1-set" filter="all(boots_upgrade_variable=0)"/>
        <item material="diamond sword" name="`b`lDiamond Sword" lore="`7You permanently gain|`7A Diamond Sword|" price="15" currency="diamond" action="diamondsword-upgrade-1-set" filter="all(diamondsword_upgrade_variable=0)"/>
        <item material="diamond pickaxe" name="`b`lDiamond Pickaxe" lore="`7You permanently gain|`7A Diamond Pickaxe|" price="5" currency="diamond" action="pickaxe-upgrade-1-set" filter="all(pickaxe_upgrade_variable=0)"/>
        <item material="diamond axe" name="`b`lDiamond Axe" lore="`7You permanently gain|`7A Diamond Axe|" price="5" currency="diamond" action="axe-upgrade-1-set" filter="all(axe_upgrade_variable=0)"/>
        <item material="diamond spade" name="`b`lDiamond Shovel" lore="`7You permanently gain|`7A Diamond Shovel|" price="1" currency="diamond" action="shovel-upgrade-1-set" filter="all(shovel_upgrade_variable=0)"/>
        <item material="diamond hoe" name="`b`lDiamond Knockback Hoe" lore="`7You permanently gain|`7A Diamond Hoe with Knockback I|" price="10" currency="diamond" action="hoe-upgrade-1-set" filter="all(hoe_upgrade_variable=0)"/>
    </category>
    <category id="player-diamond-purchase" name="`aDiamond Exchange" material="diamond block">
        <item material="flint and steel" name="`b`lFlint and Steel" lore="`7Purchase|`7Flint and Steel|" price="1" currency="diamond" kit="flint-and-steel"/>
        <item material="coal" amount="64" name="`b`lCoal" lore="`7Purchase|`7A Stack of Coal|`8`oFor Smelting|" price="1" currency="diamond" kit="coal"/>
        <item material="coal block" amount="64" name="`b`lCoal Blocks" lore="`7Purchase|`7A Stack of Coal Blocks|`8`oFor Smelting|" price="2" currency="diamond" kit="coal-block"/>
        <item material="gold block" name="`b`lGold Block" lore="`7Purchase|`7A Gold Block|`8`oFor Team Upgrades|" price="4" currency="diamond" kit="gold-block"/>
    </category>
</shop>
<shop id="team-upgrade-shop" name="Team Upgrades">
    <category id="team-upgrades" name="`6Upgrades for the Team" material="beacon" enchantment="protection">
        <item material="iron helmet" enchantment="protection:1" name="`6`lProtection I (1 of 5)" lore="`7Your team permanently gains|`7Armor Protection I|`8`oLeggings and Boots|" price="60" currency="gold ingot" action="armor-upgrade-1-set" filter="armor_upgrade_variable=0"/>
        <item material="iron helmet" enchantment="protection:2" name="`6`lProtection II (2 of 5)" lore="`7Your team permanently gains|`7Armor Protection II|`8`oLeggings and Boots|" price="100" currency="gold ingot" action="armor-upgrade-2-set" filter="armor_upgrade_variable=1"/>
        <item material="iron helmet" enchantment="protection:3" name="`6`lProtection III (3 of 5)" lore="`7Your team permanently gains|`7Armor Protection III|`8`oLeggings and Boots|" price="120" currency="gold ingot" action="armor-upgrade-3-set" filter="armor_upgrade_variable=2"/>
        <item material="iron helmet" enchantment="protection:4" name="`6`lProtection IV (4 of 5)" lore="`7Your team permanently gains|`7Armor Protection IV|`8`oLeggings and Boots|" price="150" currency="gold ingot" action="armor-upgrade-4-set" filter="armor_upgrade_variable=3"/>
        <item material="iron helmet" enchantment="protection:5" name="`6`lProtection V (5 of 5)" lore="`7Your team permanently gains|`7Armor Protection V|`8`oLeggings and Boots|" price="200" currency="gold ingot" action="armor-upgrade-5-set" filter="armor_upgrade_variable=4"/>
        <item material="stone sword" enchantment="sharpness:1" name="`6`lSharpness I (1 of 4)" lore="`7Your team permanently gains|`7Sharpness I Swords|" price="80" currency="gold ingot" action="sharp-upgrade-1-set" filter="sharp_upgrade_variable=0"/>
        <item material="stone sword" enchantment="sharpness:2" name="`6`lSharpness II (2 of 4)" lore="`7Your team permanently gains|`7Sharpness II Swords|" price="100" currency="gold ingot" action="sharp-upgrade-2-set" filter="sharp_upgrade_variable=1"/>
        <item material="stone sword" enchantment="sharpness:3" name="`6`lSharpness III (3 of 4)" lore="`7Your team permanently gains|`7Sharpness III Swords|" price="150" currency="gold ingot" action="sharp-upgrade-3-set" filter="sharp_upgrade_variable=2"/>
        <item material="stone sword" enchantment="sharpness:4" name="`6`lSharpness IV (4 of 4)" lore="`7Your team permanently gains|`7Sharpness IV Swords|" price="200" currency="gold ingot" action="sharp-upgrade-4-set" filter="sharp_upgrade_variable=3"/>
        <item material="iron sword" name="`6`lIron Sword" lore="`7Your team permanently gains|`7Iron Swords|" price="50" currency="gold ingot" action="ironsword-upgrade-1-set" filter="ironsword_upgrade_variable=0"/>
        <item material="leather boots" enchantment="feather falling" name="`6`lFeather Falling I (1 of 3)" lore="`7Your team permanently gains|`7Feather Falling Boots|" price="40" currency="gold ingot" action="feather-upgrade-1-set" filter="feather_upgrade_variable=0"/>
        <item material="leather boots" enchantment="feather falling:2" name="`6`lFeather Falling II (2 of 3)" lore="`7Your team permanently gains|`7Feather Falling II Boots|" price="70" currency="gold ingot" action="feather-upgrade-2-set" filter="feather_upgrade_variable=1"/>
        <item material="leather boots" enchantment="feather falling:3" name="`6`lFeather Falling III (3 of 3)" lore="`7Your team permanently gains|`7Feather Falling III Boots|" price="100" currency="gold ingot" action="feather-upgrade-3-set" filter="feather_upgrade_variable=2"/>
        <item material="iron pickaxe" enchantment="efficiency" name="`6`lHaste I (1 of 2)" lore="`7Your team permanently gains|`7Haste I Effect|" price="60" currency="gold ingot" action="haste-upgrade-1-set" filter="haste_upgrade_variable=0"/>
        <item material="iron pickaxe" enchantment="efficiency:2" name="`6`lHaste II (2 of 2)" lore="`7Your team permanently gains|`7Haste II Effect|" price="120" currency="gold ingot" action="haste-upgrade-2-set" filter="haste_upgrade_variable=1"/>
        <item material="obsidian" name="`6`lMining Fatigue" lore="`7Your team permanently gains|`7Mining Fatigue Trap|`7Slow the Invaders at Home|" price="100" currency="gold ingot" action="fatigue-upgrade-1-set" filter="fatigue_upgrade_variable=0"/>
        <item material="potion" damage="3" name="`6`lFire Resistance I" lore="`7Your team permanently gains|`7Fire Resistance Potion in Kit|`8`o45 seconds|" price="40" currency="gold ingot" action="fireresist-upgrade-1-set" filter="fireresist_upgrade_variable=0"/>
        <item material="log" amount="64" damage="5" name="`6`lBlocks Upgrade" lore="`7Your team permanently gains|`7Additional Blocks in Kit|" price="40" currency="gold ingot" action="blocks-upgrade-1-set" filter="blocks_upgrade_variable=0"/>
        <item material="water bucket" name="`6`lWater Bucket" lore="`7Your team permanently gains|`7Water Bucket in Kit|" price="30" currency="gold ingot" action="bucket-upgrade-1-set" filter="bucket_upgrade_variable=0"/>
        <item material="potion" damage="2" name="`6`lSpeed I" lore="`7Your team permanently gains|`7Speed Effect at Home|" price="50" currency="gold ingot" action="speed-upgrade-1-set" filter="speed_upgrade_variable=0"/>
        <item material="web" name="`6`lWoolroom Webs" lore="`7Your woolrooms gain refreshed|`7Defensive Webs in entrance|`6★ `8`oSome webs are missing now!|" price="10" currency="gold ingot" action="web-upgrade-red" filter="all(red-web-broke,only-red)"/>
        <item material="web" name="`6`lWoolroom Webs" lore="`7Your woolrooms gain refreshed|`7Defensive Webs in entrance|`6★ `8`oSome webs are missing now!|" price="10" currency="gold ingot" action="web-upgrade-blue" filter="all(blue-web-broke,only-blue)"/>
</category>
</shop>
</shops>
<regions>
    <cylinder id="blue-spawn-point" base="0.5,64,-141.5" radius="0" height="0"/>
    <cylinder id="red-spawn-point" base="0.5,64,142.5" radius="0" height="0"/>
    <cylinder id="near-lime-region" base="-21,57,-130" radius="30" height="20"/>
    <cylinder id="near-cyan-region" base="21,57,-130" radius="30" height="20"/>
    <cylinder id="near-yellow-region" base="-21,57,130" radius="30" height="20"/>
    <cylinder id="near-orange-region" base="21,57,130" radius="30" height="20"/>
    <cuboid id="red-orange-light-power" min="21,72,129" max="22,73,130"/>
    <cuboid id="red-yellow-light-power" min="-20,72,129" max="-21,73,130"/>
    <cuboid id="blue-lime-light-power" min="-20,72,-128" max="-21,73,-129"/>
    <cuboid id="blue-cyan-light-power" min="21,72,-128" max="22,73,-129"/>
    <rectangle id="gapple-region" min="-10,-10" max="11,11"/>
    <rectangle id="gold-pickaxe-nerf" min="-100,-22" max="100,23"/>
    <cuboid id="red-left-portal" min="-54,64,110" max="-50,69,108"/>
    <cuboid id="red-right-portal" min="55,64,110" max="51,69,108"/>
    <cuboid id="blue-left-portal" min="55,64,-108" max="51,69,-110"/>
    <cuboid id="blue-right-portal" min="-54,64,-108" max="-50,69,-111"/>
    <point id="red-left-portal-point">-55.5,64,109.5</point>
    <point id="red-right-portal-point">56.5,64,109.5</point>
    <point id="blue-left-portal-point">56.5,64,-108.5</point>
    <point id="blue-right-portal-point">-55.5,64,-108.5</point>
    <union id="red-webs">
        <block id="lime-left-bottom">-135,65,122</block>
        <block id="lime-left-top">-135,66,122</block>
        <block id="lime-mid-bottom">-129,65,122</block>
        <block id="lime-mid-top">-129,66,122</block>
        <block id="lime-right-bottom">-123,65,122</block>
        <block id="lime-right-top">-123,66,122</block>
        <block id="cyan-left-bottom">135,65,122</block>
        <block id="cyan-left-top">135,66,122</block>
        <block id="cyan-mid-bottom">129,65,122</block>
        <block id="cyan-mid-top">129,66,122</block>
        <block id="cyan-right-bottom">123,65,122</block>
        <block id="cyan-right-top">123,66,122</block>
    </union>
    <union id="blue-webs">
        <block id="yellow-left-bottom">-135,65,-122</block>
        <block id="yellow-left-top">-135,66,-122</block>
        <block id="yellow-mid-bottom">-129,65,-122</block>
        <block id="yellow-mid-top">-129,66,-122</block>
        <block id="yellow-right-bottom">-123,65,-122</block>
        <block id="yellow-right-top">-123,66,-122</block>
        <block id="orange-left-bottom">135,65,-122</block>
        <block id="orange-left-top">135,66,-122</block>
        <block id="orange-mid-bottom">129,65,-122</block>
        <block id="orange-mid-top">129,66,-122</block>
        <block id="orange-right-bottom">123,65,-122</block>
        <block id="orange-right-top">123,66,-122</block>
    </union>
    <union id="spawner-protect-gapple">
        <cuboid id="gapple-region1" min="-4,72,-5" max="5,76,6"/>
        <cuboid id="gapple-region2" min="-5,72,-4" max="6,76,5"/>
    </union>
    <union id="spawner-protect-others">
        <cuboid id="diamond-region" min="-3,45,-3" max="4,52,4"/>
        <cuboid id="gold-region1" min="-91,50,-3" max="-84,57,4"/>
        <cuboid id="gold-region2" min="92,50,-3" max="85,57,4"/>
    </union>
    <block id="gapple-seal">0,74,0</block>
    <union id="loot-seals">
        <block id="blue-wall-yellow">-91,111,-154</block>
        <block id="blue-wall-orange">91,111,-154</block>
        <block id="red-wall-lime">-91,111,154</block>
        <block id="red-wall-cyan">91,111,154</block>
        <block id="blue-gate-yellow">-33,124,-103</block>
        <block id="blue-gate-orange">33,124,-103</block>
        <block id="red-gate-lime">-33,124,103</block>
        <block id="red-gate-cyan">33,124,103</block>
    </union>
    <rectangle id="red-spawn-2" min="-42,120" max="43,147"/>
    <rectangle id="blue-spawn-2" min="-42,-119" max="43,-146"/>
    <rectangle id="blue-spawn" min="-12,-147" max="13,-117"/>
    <rectangle id="red-spawn" min="-12,148" max="13,118"/>
    <union id="not-build-area">
        <negative>
            <union id="build-area">
                <rectangle min="-81,-75" max="82,76"/> <!-- central area -->
                <rectangle min="-141,75" max="142,120"/> <!-- red main square -->
                <rectangle min="-141,-119" max="142,-74"/> <!-- blue main square -->
                <rectangle min="-100,-15" max="101,16"/> <!-- central gold spawner -->
            </union>
            <negative id="not-woolrooms">
                <union id="woolrooms">
                    <union id="reds-woolrooms">
                        <rectangle id="lime-woolroom" min="-142,146" max="-115,120"/>
                        <rectangle id="cyan-woolroom" min="116,146" max="143,120"/>
                    </union>
                    <union id="blues-woolrooms">
                        <rectangle id="orange-woolroom" min="143,-146" max="116,-119"/>
                        <rectangle id="yellow-woolroom" min="-115,-146" max="-142,-119"/>
                    </union>
                </union>
            </negative>
        </negative>
        <rectangle min="-92,107" max="-116,121"/> <!-- lime void -->
        <rectangle min="93,107" max="117,121"/> <!-- cyan void -->
        <rectangle min="-92,-106" max="-116,-121"/> <!-- yellow void -->
        <rectangle min="93,-106" max="117,-121"/> <!-- orange void -->
    </union>
    <rectangle id="red-home-effect-region" min="-141,76" max="142,170"/> <!-- red speed boost, blue fatigue -->
    <rectangle id="blue-home-effect-region" min="-141,-169" max="142,-75"/> <!-- blue speed boost, red fatigue -->
    <union id="iron-regen">
        <cuboid min="-8,59,-102" max="-5,63,-99"/> <!-- blue iron front right -->
        <cuboid min="9,59,-102" max="6,63,-99"/> <!-- blue iron front left -->
        <cuboid min="15,62,-146" max="26,66,-143"/> <!-- blue iron back left -->
        <cuboid min="-15,62,-143" max="-25,66,-146"/> <!-- blue iron back right -->
        <cuboid min="-8,59,103" max="-5,63,100"/> <!-- red iron front left -->
        <cuboid min="9,59,103" max="6,63,100"/> <!-- red iron front right -->
        <cuboid min="-15,62,144" max="-25,66,147"/> <!-- red iron back left -->
        <cuboid min="15,62,147" max="26,66,144"/> <!-- red iron back right -->
    </union>
    <point id="gapple-spawner">0.5,75,0.5</point>
    <point id="diamond-spawner">0.5,49,0.5</point>
    <point id="gold-spawner1">-87.5,54,0.5</point>
    <point id="gold-spawner2">88.5,54,0.5</point>
    <point id="orange-arrow-spawner">119.5,64,-133.5</point>
    <point id="yellow-arrow-spawner">-118.5,64,-133.5</point>
    <point id="cyan-arrow-spawner">119.5,64,134.5</point>
    <point id="lime-arrow-spawner">-118.5,64,134.5</point>
    <cuboid id="bottom-no-build" min="-1000,0,-1000" max="1000,46,1000"/>
    <union id="spawn-protect">
        <rectangle min="-62,132" max="-27,96"/> <!-- red left -->
        <rectangle min="63,132" max="28,96"/> <!-- red right -->
        <rectangle min="35,131" max="-34,114"/> <!-- red center -->
        <rectangle min="-101,163" max="102,131"/> <!-- red back wall -->
        <rectangle min="63,-131" max="28,-95"/> <!-- blue left -->
        <rectangle min="-62,-131" max="-27,-95"/> <!-- blue right -->
        <rectangle min="35,-130" max="-34,-113"/> <!-- blue center -->
        <rectangle min="-101,-163" max="102,-131"/> <!-- blue back wall -->
    </union>
    <union id="store-forbidden">
        <cuboid min="-10,63,-122" max="-13,67,-126"/> <!-- blue right -->
        <cuboid min="11,63,-122" max="13,67,-126"/> <!-- blue left -->
        <cuboid min="-10,63,122" max="-13,67,126"/> <!-- red left -->
        <cuboid min="11,63,122" max="13,67,126"/> <!-- red right -->
    </union>
    <!-- applicators -->
    <apply block-break="only-spawn-seals" region="loot-seals"/>
    <apply block-break="only-red" region="blue-webs" message="You may not break the defensive webs!"/>
    <apply block-break="only-blue" region="red-webs" message="You may not break the defensive webs!"/>
    <apply enter="only-blue" region="blue-spawn" message="You may not pass through the middle of the enemy spawn!"/>
    <apply enter="only-blue" region="blue-spawn-2" message="You may not pass through the middle of the enemy spawn!"/>
    <apply enter="only-red" region="red-spawn" message="You may not pass through the middle of the enemy spawn!"/>
    <apply enter="only-red" region="red-spawn-2" message="You may not pass through the middle of the enemy spawn!"/>
    <apply block-place="never" block-break="only-wool-breakable" region="reds-woolrooms" message="You may not edit this part of the wool room!"/>
    <apply block-place="never" block-break="only-wool-breakable" region="blues-woolrooms" message="You may not edit this part of the wool room!"/>
    <apply enter="only-blue" region="reds-woolrooms" message="You may not enter the enemy wool room!"/>
    <apply enter="only-red" region="blues-woolrooms" message="You may not enter the enemy wool room!"/>
    <apply block-place="only-spawn-placeable" block-break="only-iron-stuff" region="iron-regen" message="You may only break iron here!"/>
    <apply block-place="only-water-redstone-place" block-break="only-waters-leaves" region="not-build-area" message="You may not edit this area!"/>
    <apply block-place="never" region="bottom-no-build" message="You may not build in the land of no return!"/>
    <apply block-place="gapple-reseal-allow" region="spawner-protect-gapple" message="You may not obstruct the spawner!"/>
    <apply block-break="original-block-protection-gapple" region="spawner-protect-gapple" message="You may not edit the spawner!"/>
    <apply block-place="never" region="spawner-protect-others" message="You may not obstruct the spawner!"/>
    <apply block-break="never" region="spawner-protect-others" message="You may not edit the spawner!"/>
    <apply block-place="only-redstone-block" block-break="never" region="spawn-protect" message="You may not edit this area!"/>
</regions>
<spawners>
    <spawner spawn-region="gapple-spawner" player-region="gapple-region" max-entities="2" delay="15s">
        <item material="golden apple" amount="1"/>
    </spawner>
    <spawner spawn-region="diamond-spawner" player-region="everywhere" max-entities="2" delay="6s">
        <item material="diamond" amount="1"/>
    </spawner>
    <spawner spawn-region="gold-spawner1" player-region="everywhere" max-entities="5" delay="8s">
        <item material="gold ore" amount="1"/>
    </spawner>
    <spawner spawn-region="gold-spawner1" player-region="everywhere" max-entities="3" delay="14s">
        <item material="gold ingot" amount="1"/>
    </spawner>
    <spawner spawn-region="gold-spawner1" player-region="everywhere" max-entities="8" delay="3s">
        <item material="gold nugget" amount="1"/>
    </spawner>
    <spawner spawn-region="gold-spawner2" player-region="everywhere" max-entities="5" delay="8s">
        <item material="gold ore" amount="1"/>
    </spawner>
    <spawner spawn-region="gold-spawner2" player-region="everywhere" max-entities="3" delay="14s">
        <item material="gold ingot" amount="1"/>
    </spawner>
    <spawner spawn-region="gold-spawner2" player-region="everywhere" max-entities="8" delay="3s">
        <item material="gold nugget" amount="1"/>
    </spawner>
    <spawner spawn-region="lime-arrow-spawner" player-region="everywhere" max-entities="8" delay="30s">
        <item material="arrow" amount="2"/>
    </spawner>
    <spawner spawn-region="cyan-arrow-spawner" player-region="everywhere" max-entities="8" delay="30s">
        <item material="arrow" amount="2"/>
    </spawner>
    <spawner spawn-region="yellow-arrow-spawner" player-region="everywhere" max-entities="8" delay="30s">
        <item material="arrow" amount="2"/>
    </spawner>
    <spawner spawn-region="orange-arrow-spawner" player-region="everywhere" max-entities="8" delay="30s">
        <item material="arrow" amount="2"/>
    </spawner>
</spawners>
<itemremove>
    <item>diamond sword</item>
    <item>diamond pickaxe</item>
    <item>diamond axe</item>
    <item>diamond spade</item>
    <item>diamond hoe</item>
    <item>stone sword</item>
    <item>stone pickaxe</item>
    <item>stone axe</item>
    <item>iron sword</item>
    <item>iron pickaxe</item>
    <item>iron axe</item>
    <item>iron spade</item>
    <item>smooth brick</item>
    <item>bow</item>
    <item>string</item>
    <item>apple</item>
    <item>gold helmet</item>
    <item>chainmail chestplate</item>
    <item>leather leggings</item>
    <item>leather boots</item>
    <item>diamond helmet</item>
    <item>diamond chestplate</item>
    <item>diamond leggings</item>
    <item>diamond boots</item>
    <item>obsidian</item>
    <item>cactus</item>
    <item>potion</item>
</itemremove>
<crafting>
    <!-- drops 10, so prevent infinite diamonds -->
    <disable>diamond block</disable>
    <!-- excepting shovel, disallow diamond crafting, since store -->
    <disable>diamond helmet</disable>
    <disable>diamond chestplate</disable>
    <disable>diamond leggings</disable>
    <disable>diamond boots</disable>
    <disable>diamond sword</disable>
    <disable>diamond pickaxe</disable>
    <disable>diamond axe</disable>
</crafting>
<hunger>
    <depletion>off</depletion>
</hunger>
<renewables>
    <renewable rate="0.75" sound="true" region="iron-regen" renew-filter="only-iron" replace-filter="only-air" avoid-players="1"/>
</renewables>
<tnt>
    <instantignite>true</instantignite>
    <fuse>3s</fuse>
    <blockdamage>false</blockdamage>
    <friendly-defuse>off</friendly-defuse>
    <power>4</power>
</tnt>
<kill-rewards>
    <kill-reward>
        <item material="wood" damage="5" amount="24"/>
        <item material="stained glass" team-color="true" amount="16"/>
        <item material="gold nugget" amount="5"/>
    </kill-reward>
    <kill-reward>
        <item material="gold ingot" amount="2"/>
        <item material="gold ore" amount="1"/>
        <item material="diamond" amount="1"/>
        <filter>
            <kill-streak count="3" repeat="true"/>
        </filter>
    </kill-reward>
    <kill-reward>
        <item material="diamond" amount="2"/>
        <item material="tnt" amount="2" lore="`4`lBabylon Bomb `r`6`o(Enemy Damage)"/>
        <filter>
            <kill-streak count="5" repeat="true"/>
        </filter>
    </kill-reward>
</kill-rewards>
</map>
