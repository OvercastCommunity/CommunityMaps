<map proto="1.5.0">
<autorespawn/>
<name>NextRace DTM</name>
<version>1.0.1</version>
<objective>Destroy the enemy monument.</objective>
<authors>
    <author uuid="70c5c702-4e70-457b-8d7b-0e22010dc590" contribution="re-re-reinventing the map"/> <!-- ocal -->
</authors>
<contributors>
    <contributor uuid="cbdc7b1d-7a07-465b-bebb-4f20bfb8ebd8" contribution="re-reinventing the map"/> <!-- Cratain -->
    <contributor uuid="dad8b95c-cf6a-44df-982e-8c8dd70201e0" contribution="reinventing the map"/> <!-- ElectroidFilms -->
    <contributor uuid="621b2aa8-4e5f-4ed8-bd36-0ae2f8952a06" contribution="bias"/>
    <contributor uuid="ef4ea031-998f-4ec9-b7b6-1bdd428bcef8" contribution="old map design"/> <!-- Plastix -->
    <contributor uuid="82c796a5-c033-43be-af30-fa06496995f9" contribution="old map design"/> <!-- IM_A_H0B0 -->
    <contributor uuid="3c7db14d-ac4b-4e35-b2c6-3b2237f382be" contribution="old map design and gameplay management"/> <!-- MonsieurApple -->
    <contributor uuid="25961a08-c90c-4abd-b136-dad90e89c2eb" contribution="old map design and item management"/> <!-- Anxuiz -->
    <contributor uuid="b1521072-6993-4fe4-ae60-dbeeb7dc0cfa" contribution="re-xmling the map"/> <!-- Antnecb -->
</contributors>
<constants>
    <constant id="eff.team-1">red</constant>
    <constant id="eff.team-2">blue</constant>
    <constant id="eff.t1-m1-region">blue-monument</constant>
    <constant id="eff.t2-m1-region">red-monument</constant>
    <constant id="eff.modes-preset">every-5m</constant>
</constants>
<include id="efficiency-variables"/>
<teams>
    <team id="blue" color="blue" max="12">Blue</team>
    <team id="red" color="dark red" max="12">Red</team>
</teams>
<kits>
    <kit id="spawn-kit">
        <clear/>
        <item slot="0" unbreakable="true" material="iron sword"/>
        <item slot="1" unbreakable="true" material="bow"/>
        <item slot="2" unbreakable="true" material="diamond pickaxe"/>
        <item slot="3" unbreakable="true" material="iron axe">
            <enchantment level="1">efficiency</enchantment>
        </item>
        <item slot="4" unbreakable="true" material="iron spade"/>
        <item slot="5" material="golden apple"/>
        <item slot="7" material="glass" amount="32"/>
        <item slot="8" material="wood" amount="64" damage="1"/>
        <item slot="35" material="wood" amount="32" damage="1"/>
        <item slot="28" material="arrow" amount="64"/>
        <chestplate unbreakable="true" team-color="true" material="leather chestplate"/>
        <leggings unbreakable="true" material="chainmail leggings"/>
        <boots unbreakable="true" team-color="true" material="leather boots"/>
        <effect duration="3" amplifier="255">damage resistance</effect>
    </kit>
</kits>
<spawns>
    <spawn team="red" yaw="0" kit="spawn-kit">
        <regions>
            <point>-158.5,1,-37.5</point>
        </regions>
    </spawn>
    <spawn team="blue" yaw="180" kit="spawn-kit">
        <regions>
            <point>-158.5,1,64.5</point>
        </regions>
    </spawn>
    <default yaw="90">
        <regions>
            <point>-104.5,38,13.5</point>
        </regions>
    </default>
</spawns>
<filters>
    <!-- Team Filters -->
    <team id="blue-only">blue</team>
    <team id="red-only">red</team>
    <!-- Block Filters -->
    <not id="no-void">
        <void/>
    </not>
    <!-- Usage Filters -->
    <not id="no-glass">
        <material>glass</material>
    </not>
    <not id="spawn-quartz">
        <not>
            <material>quartz block</material>
        </not>
    </not>
    <not id="blue-chest">
        <all>
            <not>
                <team>blue</team>
            </not>
            <material>chest</material>
        </all>
    </not>
    <not id="red-chest">
        <all>
            <not>
                <team>red</team>
            </not>
            <material>chest</material>
        </all>
    </not>
</filters>
<regions>
    <!-- Region Definitions -->
    <union id="spawns"> <!--Ant: Deny enemy entry and all blockplace/break here except stairwell where allow enemy entry but no blockplace/break (to prevent enemies getting stuck in region)-->
        <cuboid id="blue-spawn" min="-167,0,51" max="-150,6,69"/>
        <mirror id="red-spawn" region="blue-spawn" normal="0,0,-1" origin="-158.5,3,13.5"/>
    </union>
    <union id="spawn-entry">
        <cuboid id="blue-spawn-entry" min="-151,0,62" max="-166,5,63"/>
        <mirror id="red-spawn-entry" region="blue-spawn-entry" normal="0,0,-1" origin="-158.5,3,13.5"/>
    </union>
    <cuboid id="blue-monument" min="-189,16,77" max="-190,19,78"/>
    <cuboid id="red-monument" min="-128,16,-51" max="-127,19,-50"/>
    <union id="wools-shrines">
        <union id="red-rooms">
            <rectangle id="red-shrine" min="-133.5,79.5" max="-122.5,90.5"/>
        </union>
        <union id="blue-rooms">
            <rectangle id="blue-shrine" min="-194.5,-63.5" max="-183.5,-52.5"/>
        </union>
    </union>
    <negative id="outside-void-lanes">
        <union id="void-lanes">
            <cuboid id="blue-void" min="-183,0,32" max="-163,50,1"/>
            <cuboid id="red-void" min="-134,0,-6" max="-154,50,26"/>
            <union id="side-lanes">
                <cuboid id="blue-side-lane" min="-195,0,60" max="-183,50,1"/>
                <cuboid id="red-side-lane" min="-122,0,-33" max="-134,50,26"/>
            </union>
        </union>
    </negative>
    <union id="front-spawns">
        <rectangle id="blue-front" min="-163,50" max="-154,45"/>
        <mirror id="red-front" region="blue-front" normal="0,0,-1" origin="-158.5,3,13.5"/>
    </union>
    <union id="spawn-backsides">
        <rectangle id="blue-backside" min="-163,83" max="-154,73"/>
        <mirror id="red-backside" region="blue-backside" normal="0,0,-1" origin="-158.5,3,13.5"/>
    </union>
    <union id="spawners">
        <block id="west-spawner">-189,12,17</block>
        <block id="east-spawner">-129,12,9</block>
    </union>
    <cuboid id="west-spawner-drop" min="-189.5,13,18.5" max="-187.5,13,16.5"/>
    <cuboid id="east-spawner-drop" min="-129.5,13,10.5" max="-127.5,13,8.5"/>
    <cuboid id="west-spawner-activation" min="-195,7,11" max="-182,20,24"/>
    <cuboid id="east-spawner-activation" min="-135,7,3" max="-122,20,16"/>
    <union id="spawner-blocker">
        <cuboid id="west-spawner-blocker" min="-190,12,19" max="-187,16,16"/>
        <cuboid id="east-spawner-blocker" min="-130,12,11" max="-127,16,8"/>
    </union>
    <!-- Block Rules -->
    <apply block="spawn-quartz" region="spawns" message="You may not edit the spawns!"/>
    <apply block="blue-only" region="blue-rooms" message="You may not edit the enemy shrine!"/>
    <apply block="red-only" region="red-rooms" message="You may not edit the enemy shrine!"/>
    <apply block="always" region="front-spawns"/>
    <apply block-break="always" region="spawn-backsides"/>
    <apply block-place="no-void" region="outside-void-lanes" message="You may not edit out of bounds!"/>
    <apply block="never" region="spawner-blocker" message="You may not build here!"/>
    <!-- Entry Rules -->
    <apply enter="blue-only" region="blue-spawn-entry" message="You may not enter the enemy's spawn!"/>
    <apply enter="red-only" region="red-spawn-entry" message="You may not enter the enemy's spawn!"/>
    <apply enter="blue-only" region="blue-rooms" message="You may not enter the enemy shrine!"/>
    <apply enter="red-only" region="red-rooms" message="You may not enter the enemy shrine!"/>
    <!-- Usage Rules -->
    <apply block-place="no-glass" region="side-lanes" message="You may not use glass in the side lanes!"/>
    <apply block="never" region="spawners" message="You may not destroy the spawner!"/>
    <apply use="blue-chest" region="blue-spawn" message="You may not open the enemy's spawn chests!"/>
    <apply use="red-chest" region="red-spawn" message="You may not open the enemy's spawn chests!"/>
</regions>
<spawners>
    <spawner id="west-gapple-spawner" spawn-region="west-spawner-drop" player-region="west-spawner-activation" max-entities="1" delay="9s">
        <item material="golden apple"/>
    </spawner>
    <spawner id="east-gapple-spawner" spawn-region="east-spawner-drop" player-region="east-spawner-activation" max-entities="1" delay="9s">
        <item material="golden apple"/>
    </spawner>
</spawners>
<destroyables>
    <destroyable id="blue-mon" name="Monument" required="true" region="blue-monument" materials="obsidian" owner="blue" completion="100%" show-progress="true" sparks="true" show-effects="true" show-sidebar="true"/>
    <destroyable id="red-mon" name="Monument" required="true" region="red-monument" materials="obsidian" owner="red" completion="100%" show-progress="true" sparks="true" show-effects="true" show-sidebar="true"/>
</destroyables>
<itemremove> <!-- Items addded to this section are deleted if they are dropped in any way onto the floor (add stone slabs to this)-->
    <item>leather chestplate</item>
    <item>chainmail leggings</item>
    <item>leather boots</item>
    <item>string</item>
    <item>glowstone dust</item>
    <item>apple</item>
    <item>sapling</item>
    <item>sugar cane</item>
    <item>clay ball</item>
    <item>stone plate</item>
    <item>iron plate</item>
    <item>sand</item>
    <item>redstone</item>
    <item>redstone torch off</item>
    <item>redstone torch on</item>
    <item>obsidian</item>
</itemremove>
<itemkeep> <!-- Items added to this section are removed upon death, but can still be manually dropped -->
    <item>wood</item>
    <item>log</item>
    <item>glass</item>
    <item>arrow</item>
    <item>iron sword</item>
    <item>iron pickaxe</item>
    <item>iron spade</item>
    <item>iron axe</item>
</itemkeep>
<toolrepair>
    <tool>bow</tool>
</toolrepair>
<block-drops> <!-- This prevents planks from dropping when mined and ensures flint drops -->
    <rule>
        <filter>
            <material>wood</material>
        </filter>
        <drops>
            <item chance="0" material="wood"/>
        </drops>
    </rule>
    <rule wrong-tool="true">
        <region>
            <rectangle min="-oo,-oo" max="oo,oo"/>
        </region>
        <filter>
            <any>
                <material>gravel</material>
            </any>
        </filter>
        <drops>
            <item material="flint"/>
        </drops>
    </rule>
    <rule>
        <filter>
            <material>quartz block</material>
        </filter>
        <drops>
            <item material="iron ingot"/>
        </drops>
    </rule>
</block-drops>
<renewables>
    <renewable region="blue-spawn" interval="4s" avoid-entities="false">
        <renew-filter>
            <material>quartz block</material>
        </renew-filter>
    </renewable>
    <renewable region="red-spawn" interval="4s" avoid-entities="false">
        <renew-filter>
            <material>quartz block</material>
        </renew-filter>
    </renewable>
</renewables>
<kill-rewards> <!-- edit this based on villa -->
    <kill-reward>
        <item material="golden apple"/>
        <item amount="8" material="arrow"/>
        <item amount="32" material="wood" damage="1"/>
        <item amount="16" material="glass"/>
    </kill-reward>
</kill-rewards>
<crafting>
    <disable>iron trapdoor</disable>
    <disable>minecart</disable>
    <disable>boat</disable>
</crafting>
<maxbuildheight>22</maxbuildheight>
<hunger>
    <depletion>off</depletion>
</hunger>
<gamerules>
    <doDaylightCycle>false</doDaylightCycle>
</gamerules>
<respawn delay="5s"/>
</map>