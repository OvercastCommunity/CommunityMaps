<map proto="1.5.0">
<name>BoomBoxxxx</name>
<version>1.0.1</version>
<objective>Destroy the enemy team's monuments</objective> <!-- Fix this -->
<include id="gapple-kill-reward"/>
<authors>
    <author uuid="d5a64b26-15ea-46c4-8319-f9c83e82a1fa"/> <!-- Eliminate -->
    <author uuid="64e840c8-4fb5-4659-a36b-ff93e2f6113a"/> <!-- Javg_ -->
</authors>
<contributors>
    <contributor uuid="3fbec7dd-0a5f-40bf-9d11-885a54507112" contribution="Original map author"/> <!-- Cubist -->
</contributors>
<constants>
    <!-- TEAM IDS -->
    <constant id="TEAM_BLUE">1</constant>
    <constant id="TEAM_RED">2</constant>
    <constant id="TEAM_GREEN">3</constant>
    <constant id="TEAM_YELLOW">4</constant>
</constants>
<teams>
    <team id="blue-team" color="blue" max="16">Blue</team>
    <team id="red-team" color="dark red" max="16">Red</team>
    <team id="green-team" color="green" max="16">Green</team>
    <team id="yellow-team" color="yellow" max="16">Yellow</team>
</teams>
<kits>
    <kit id="spawn-kit" force="true">
        <clear/>
        <item slot="0" amount="1" unbreakable="true" material="diamond pickaxe"/>
        <item slot="1" amount="1" unbreakable="true" enchantment="arrow damage:1" material="bow"/>
        <item slot="2" amount="64" material="vine"/>
        <item slot="4" amount="64" material="nether fence"/>
        <item slot="5" amount="16" material="stone button"/>
        <item slot="6" amount="1" material="water bucket"/>
        <item slot="7" amount="16" material="redstone block"/>
        <item slot="8" amount="64" material="tnt"/>
        <item slot="9" amount="1" material="workbench"/>
        <item slot="10" amount="1" material="shears"/>
        <item slot="11" name="Blade of Icarus" material="wood sword"/>
        <item slot="13" amount="16" material="trap door"/>
        <item slot="14" amount="16" material="piston base"/>
        <item slot="15" amount="1" material="sponge"/>
        <item slot="16" amount="16" material="diode"/>
        <item slot="17" amount="64" material=">tnt"/>
        <item slot="18" amount="3" material="dispenser"/>
        <item slot="22" amount="16" material="ladder"/>
        <item slot="23" amount="16" material="lever"/>
        <item slot="24" amount="1" material="water bucket"/>
        <item slot="25" amount="16" material="redstone torch on"/>
        <item slot="26" amount="64" material="tnt"/>
        <item slot="28" amount="16" material="arrow"/>
        <item slot="29" amount="64" material="vine"/>
        <item slot="31" amount="64" material="step"/>
        <item slot="32" amount="16" material="stone plate"/>
        <item slot="33" amount="1" material="water bucket"/>
        <item slot="34" amount="64" material="redstone"/>
        <item slot="35" amount="64" material="tnt"/>
        <helmet locked="true" unbreakable="true" material="iron helmet">
            <enchantment level="3">blast_protection</enchantment>
        </helmet>
        <chestplate locked="true" unbreakable="true" team-color="true" material="leather chestplate"/>
        <leggings locked="true" unbreakable="true" team-color="true" material="leather leggings"/>
        <boots locked="true" unbreakable="true" team-color="true" material="leather boots">
            <enchantment level="3">feather_falling</enchantment>
        </boots>
        <effect duration="oo">night vision</effect>
        <effect amplifier="8" duration="3">damage resistance</effect>
    </kit>
    <kit id="blue-kit" parent="spawn-kit">
        <item slot="3" amount="64" damage="11" material="stained clay"/>
        <item slot="12" amount="64" damage="11" material="stained clay"/>
        <item slot="21" amount="64" damage="11" material="stained clay"/>
        <item slot="30" amount="64" damage="11" material="stained clay"/>
    </kit>
    <kit id="red-kit" parent="spawn-kit">
        <item slot="3" amount="64" damage="14" material="stained clay"/>
        <item slot="12" amount="64" damage="14" material="stained clay"/>
        <item slot="21" amount="64" damage="14" material="stained clay"/>
        <item slot="30" amount="64" damage="14" material="stained clay"/>
    </kit>
    <kit id="green-kit" parent="spawn-kit">
        <item slot="3" amount="64" damage="13" material="stained clay"/>
        <item slot="12" amount="64" damage="13" material="stained clay"/>
        <item slot="21" amount="64" damage="13" material=">stained clay"/>
        <item slot="30" amount="64" damage="13" material="stained clay"/>
    </kit>
    <kit id="yellow-kit" parent="spawn-kit">
        <item slot="3" amount="64" damage="4" material="stained clay"/>
        <item slot="12" amount="64" damage="4" material="stained clay"/>
        <item slot="21" amount="64" damage="4" material="stained clay"/>
        <item slot="30" amount="64" damage="4" material="stained clay"/>
    </kit>
    <kit id="speed-3">
        <effect amplifier="3" duration="oo">speed</effect>
    </kit>
    <kit id="speed-8">
        <effect amplifier="8" duration="oo">speed</effect>
    </kit>
    <kit id="blue-swap">
        <team-switch team="blue-team" show-title="false"/>
    </kit>
    <kit id="red-swap">
        <team-switch team="red-team" show-title="false"/>
    </kit>
    <kit id="green-swap">
        <team-switch team="green-team" show-title="false"/>
    </kit>
    <kit id="yellow-swap">
        <team-switch team="yellow-team" show-title="false"/>
    </kit>
</kits>
<spawns>
    <spawn team="blue-team" kit="blue-kit" yaw="-45">
        <region>
            <point>-62.5,5,-62.5</point>
        </region>
    </spawn>
    <spawn team="red-team" kit="red-kit" yaw="45">
        <region>
            <point>63.5,5,-62.5</point>
        </region>
    </spawn>
    <spawn team="green-team" kit="green-kit" yaw="135">
        <region>
            <point>63.5,5,63.5</point>
        </region>
    </spawn>
    <spawn team="yellow-team" kit="yellow-kit" yaw="-135">
        <region>
            <point>-62.5,5,63.5</point>
        </region>
    </spawn>
    <default yaw="180">
        <region>
            <point>0.5,55,0.5</point>
        </region>
    </default>
</spawns>
<regions>
    <union id="spawns">
        <union id="blue-spawn">
            <cuboid min="-39,0,-70" max="-50,10,-64"/>
            <cuboid min="-45,0,-71" max="-50,10,-70"/>
            <cuboid min="-70,0,-39" max="-64,10,-50"/>
            <cuboid min="-71,0,-45" max="-70,10,-50"/>
            <cuboid min="-81,0,-81" max="-50,10,-50"/>
            <cuboid min="-50,10,-50" max="-60,11,-60"/>
        </union>
        <mirror id="red-spawn" region="blue-spawn" normal="1,0,0" origin="0.5,0,0.5"/>
        <mirror id="green-spawn" region="blue-spawn" normal="1,0,1" origin="0.5,0,0.5"/>
        <mirror id="yellow-spawn" region="blue-spawn" normal="0,0,1" origin="0.5,0,0.5"/>
    </union>
    <union id="spawn-gates">
        <union id="blue-spawn-gates">
            <cuboid min="-45,5,-69" max="-40,9,-70"/>
            <cuboid min="-69,5,-45" max="-70,9,-40"/>
        </union>
        <mirror id="red-spawn-gates" region="blue-spawn-gates" normal="1,0,0" origin="0.5,0,0.5"/>
        <mirror id="green-spawn-gates" region="blue-spawn-gates" normal="1,0,1" origin="0.5,0,0.5"/>
        <mirror id="yellow-spawn-gates" region="blue-spawn-gates" normal="0,0,1" origin="0.5,0,0.5"/>
    </union>
    <union id="play-space">
        <union id="blue-side">
            <cuboid min="-76,-oo,-76" max="1,50,1"/>
            <cuboid min="-81,-oo,-81" max="-44,50,-44"/>
        </union>
        <mirror id="red-side" region="blue-side" normal="1,0,0" origin="0.5,0,0.5"/>
        <mirror id="green-side" region="blue-side" normal="1,0,1" origin="0.5,0,0.5"/>
        <mirror id="yellow-side" region="blue-side" normal="0,0,1" origin="0.5,0,0.5"/>
    </union>
    <union id="gates">
        <union id="blue-gates">
            <cuboid id="blue-gates-left" min="-35,5,-75" max="-30,40,-76"/>
            <cuboid id="blue-gates-right" min="-75,5,-35" max="-76,40,-30"/>
            <cuboid id="blue-pvp-gate-left" min="-7,5,-85" max="-6,40,-90"/>
            <cuboid id="blue-pvp-gate-right" min="-85,5,-7" max="-90,40,-6"/>
        </union>
        <mirror id="red-gates" region="blue-gates" normal="1,0,0" origin="0.5,0,0.5"/>
        <mirror id="green-gates" region="blue-gates" normal="1,0,1" origin="0.5,0,0.5"/>
        <mirror id="yellow-gates" region="blue-gates" normal="0,0,1" origin="0.5,0,0.5"/>
    </union>
    <union id="platforms">
        <union id="blue-platforms">
            <cuboid min="-35,5,-76" max="-29,49,-91"/>
            <cuboid min="-29,5,-80" max="-7,49,-91"/>
            <cuboid min="-76,5,-29" max="-91,49,-35"/>
            <cuboid min="-80,5,-29" max="-91,49,-7"/>
        </union>
        <mirror id="red-platforms" region="blue-platforms" normal="1,0,0" origin="0.5,0,0.5"/>
        <mirror id="green-platforms" region="blue-platforms" normal="1,0,1" origin="0.5,0,0.5"/>
        <mirror id="yellow-platforms" region="blue-platforms" normal="0,0,1" origin="0.5,0,0.5"/>
    </union>
    <union id="dual-platforms">
        <cuboid id="dual-plat1" min="-78,5,-6.5" max="-91,49,7.5"/> <!-- Blue vs Yellow -->
        <mirror id="dual-plat2" region="dual-plat1" normal="1,0,0" origin="0.5,0,0.5"/> <!-- Red vs Green -->
        <mirror id="dual-plat3" region="dual-plat1" normal="1,0,1" origin="0.5,0,0.5"/> <!-- Green vs Yellow -->
        <mirror id="dual-plat4" region="dual-plat1" normal="1,0,-1" origin="0.5,0,0.5"/> <!-- Blue vs Red -->
    </union>
    <union id="platform-blockers">
        <union id="blue-platform-blockers">
            <cuboid min="-26,0,-76" max="1,50,-77"/>
            <cuboid min="-76,0,-26" max="-77,50,1"/>
        </union>
        <mirror id="red-platform-blockers" region="blue-platform-blockers" normal="1,0,0" origin="0.5,0,0.5"/>
        <mirror id="green-platform-blockers" region="blue-platform-blockers" normal="1,0,1" origin="0.5,0,0.5"/>
        <mirror id="yellow-platform-blockers" region="blue-platform-blockers" normal="0,0,1" origin="0.5,0,0.5"/>
    </union>
    <union id="portals">
        <union id="blue-portals">
            <union id="blue-front-portals">
                <cuboid min="-55,5,-64" max="-54,9,-61"/>
                <cuboid min="-64,5,-55" max="-61,9,-54"/>
            </union>
            <cuboid id="blue-back-portal" min="-67,6,-67" max="-68,9,-68"/>
        </union>
        <union id="red-portals">
            <mirror id="red-front-portals" region="blue-front-portals" normal="1,0,0" origin="0.5,0,0.5"/>
            <mirror id="red-back-portal" region="blue-back-portal" normal="1,0,0" origin="0.5,0,0.5"/>
        </union>
        <union id="green-portals">
            <mirror id="green-front-portals" region="blue-front-portals" normal="1,0,1" origin="0.5,0,0.5"/>
            <mirror id="green-back-portal" region="blue-back-portal" normal="1,0,1" origin="0.5,0,0.5"/>
        </union>
        <union id="yellow-portals">
            <mirror id="yellow-front-portals" region="blue-front-portals" normal="0,0,1" origin="0.5,0,0.5"/>
            <mirror id="yellow-back-portal" region="blue-back-portal" normal="0,0,1" origin="0.5,0,0.5"/>
        </union>
    </union>
    <union id="portal-pads">
        <union id="blue-pad">
            <cuboid id="blue-pad-area" min="-71,0,-81" max="-81,50,-71"/>
            <cuboid id="blue-spawn-pad" min="-80,8,-80" max="-75,10.5,-75"/>
        </union>
        <union id="red-pad">
            <mirror id="red-pad-area" region="blue-pad-area" normal="1,0,0" origin="0.5,0,0.5"/>
            <mirror id="red-spawn-pad" region="blue-spawn-pad" normal="1,0,0" origin="0.5,0,0.5"/>
        </union>
        <union id="green-pad">
            <mirror id="green-pad-area" region="blue-pad-area" normal="1,0,1" origin="0.5,0,0.5"/>
            <mirror id="green-spawn-pad" region="blue-spawn-pad" normal="1,0,1" origin="0.5,0,0.5"/>
        </union>
        <union id="yellow-pad">
            <mirror id="yellow-pad-area" region="blue-pad-area" normal="0,0,1" origin="0.5,0,0.5"/>
            <mirror id="yellow-spawn-pad" region="blue-spawn-pad" normal="0,0,1" origin="0.5,0,0.5"/>
        </union>
    </union>
    <negative id="portal-pads-check">
        <region id="blue-spawn-pad"/>
        <region id="red-spawn-pad"/>
        <region id="green-spawn-pad"/>
        <region id="yellow-spawn-pad"/>
    </negative>
    <union id="chutes">
        <union id="blue-chutes">
            <cuboid min="-44,31,1" max="-51,51,8"/>
            <cuboid min="1,31,-27" max="8,51,-20"/>
        </union>
        <union id="red-chutes">
            <cuboid min="28,31,1" max="21,51,8"/>
            <cuboid min="0,31,-44" max="-7,51,-51"/>
        </union>
        <union id="green-chutes">
            <cuboid min="0,31,28" max="-7,51,21"/>
            <cuboid min="45,31,0" max="52,51,-7"/>
        </union>
        <union id="yellow-chutes">
            <cuboid min="1,31,45" max="8,51,52"/>
            <cuboid min="-27,31,0" max="-20,51,-7"/>
        </union>
    </union>
    <union id="chute-blockers">
        <union id="blue-chute-blockers">
            <cuboid min="-44,28,1" max="-51,31,8"/>
            <cuboid min="1,28,-27" max="8,31,-20"/>
        </union>
        <union id="red-chute-blockers">
            <cuboid min="28,28,1" max="21,31,8"/>
            <cuboid min="0,28,-44" max="-7,31,-51"/>
        </union>
        <union id="green-chute-blockers">
            <cuboid min="0,28,28" max="-7,31,21"/>
            <cuboid min="45,28,0" max="52,31,-7"/>
        </union>
        <union id="yellow-chute-blockers">
            <cuboid min="1,28,45" max="8,31,52"/>
            <cuboid min="-27,28,0" max="-20,31,-7"/>
        </union>
    </union>
    <union id="chute-check">
        <region id="above-map"/>
        <region id="chutes"/>
    </union>
    <union id="voids">
        <union id="blue-void">
            <cuboid min="-29,0,-76" max="-7,50,-80"/>
            <cuboid min="-76,0,-29" max="-80,50,-7"/>
            <cuboid min="-6,0,-75" max="1,50,-79"/>
            <cuboid min="-75,0,-6" max="-79,50,1"/>
        </union>
        <mirror id="red-void" region="blue-void" normal="1,0,0" origin="0.5,0,0.5"/>
        <mirror id="green-void" region="blue-void" normal="1,0,1" origin="0.5,0,0.5"/>
        <mirror id="yellow-void" region="blue-void" normal="0,0,1" origin="0.5,0,0.5"/>
    </union>
    <union id="monuments">
        <cuboid id="blue-mon" min="-60,11,-60" max="-65,50,-65"/>
        <mirror id="red-mon" region="blue-mon" normal="1,0,0" origin="0.5,0,0.5"/>
        <mirror id="green-mon" region="blue-mon" normal="1,0,1" origin="0.5,0,0.5"/>
        <mirror id="yellow-mon" region="blue-mon" normal="0,0,1" origin="0.5,0,0.5"/>
    </union>
    <cuboid id="above-map" min="-81,50,-81" max="82,55,82"/>
    <union id="map-area">
        <region id="play-space"/>
        <region id="gates"/>
        <region id="platforms"/>
        <region id="dual-platforms"/>
        <region id="above-map"/>
    </union>
    <union id="map-edges">
        <union id="blue-edges">
            <cuboid min="1,5,-91" max="-36,55,-92"/>
            <cuboid min="-35,5,-91" max="-36,55,-75"/>
            <cuboid min="-36,5,-76" max="-45,55,-75"/>
            <cuboid min="-45,5,-76" max="-44,55,-81"/>
            <cuboid min="-45,5,-80" max="-81,55,-81"/>
            <cuboid min="-91,5,1" max="-92,55,-36"/>
            <cuboid min="-91,5,-35" max="-75,55,-36"/>
            <cuboid min="-76,5,-36" max="-75,55,-45"/>
            <cuboid min="-76,5,-45" max="-81,55,-44"/>
            <cuboid min="-80,5,-45" max="-81,55,-81"/>
            <cuboid min="-25,0,-76" max="1,50,-75"/>
            <cuboid min="-76,0,-25" max="-75,50,1"/>
        </union>
        <mirror id="red-edges" region="blue-edges" normal="1,0,0" origin="0.5,0,0.5"/>
        <mirror id="green-edges" region="blue-edges" normal="1,0,1" origin="0.5,0,0.5"/>
        <mirror id="yellow-edges" region="blue-edges" normal="0,0,1" origin="0.5,0,0.5"/>
    </union>
    <apply region="everywhere" block-break="deny(unbreakables)"/>
    <apply region="spawns" block="never" message="You may not modify the spawn area!"/>
    <apply region="blue-gates" enter="blue-team" leave="blue-team" message="You may not enter Blue's platform!"/>
    <apply region="red-gates" enter="red-team" message="You may not enter Red's platform!"/>
    <apply region="green-gates" enter="green-team" message="You may not enter Green's platform!"/>
    <apply region="yellow-gates" enter="yellow-team" message="You may not enter Yellow's platform!"/>
    <apply region="blue-spawn-gates" enter="blue-team" leave="blue-team" message="You may not enter Blue's spawn!"/>
    <apply region="red-spawn-gates" enter="red-team" leave="red-team" message="You may not enter Red's spawn!"/>
    <apply region="green-spawn-gates" enter="green-team" leave="green-team" message="You may not enter Green's spawn!"/>
    <apply region="yellow-spawn-gates" enter="yellow-team" leave="yellow-team" message="You may not enter Yellow's spawn!"/>
    <apply region="blue-portals" enter="blue-team" message="You may not use Blue's portals!"/>
    <apply region="red-portals" enter="red-team" message="You may not use Red's portals!"/>
    <apply region="green-portals" enter="green-team" message="You may not use Green's portals!"/>
    <apply region="yellow-portals" enter="yellow-team" message="You may not use Yellow's portals!"/>
    <apply region="portal-pads" block="never" message="You may not build here!"/>
    <apply region="dual-plat1" enter="any(blue-team,yellow-team)"/>
    <apply region="dual-plat2" enter="any(red-team,green-team)"/>
    <apply region="dual-plat3" enter="any(green-team,yellow-team)"/>
    <apply region="dual-plat4" enter="any(blue-team,red-team)"/>
    <apply region="chutes" block="never" enter="can_use_chute=1"/>
    <apply region="chute-blockers" block="never" message="You may not block the drop chutes!"/>
    <apply region="map-edges" block="never" message="You may not build outside the map!"/>
    <apply region="above-map" block="never" lend-kit="speed-8" message="You may not build here!"/>
    <apply region="voids" block="never" message="You may not build here!"/>
    <apply region="platforms" lend-kit="speed-3"/>
    <apply region="dual-platforms" enter="never" />
</regions>
<filters>
    <team id="blue-team">blue-team</team>
    <team id="red-team">red-team</team>
    <team id="green-team">green-team</team>
    <team id="yellow-team">yellow-team</team>
    <any id="unbreakables">
        <material>quartz_block:1</material>
        <material>stained_glass:0</material>
        <material>stained_glass:7</material>
        <material>stained_glass:8</material>
        <material>stained_glass:15</material>
        <material>stained_glass:0</material>
        <material>stained_glass_pane:4</material>
        <material>stained_glass_pane:11</material>
        <material>stained_glass_pane:13</material>
        <material>stained_glass_pane:14</material>
        <material>stained_clay:9</material>
    </any>
    <any id="renewable-blocks">
        <material>quartz_block</material>
        <material>quartz_stairs</material>    
    </any>
    <all id="air">
        <material>air</material>
    </all>
    <all id="dead">
        <dead/>
    </all>
    <all id="enemy-blue">
        <attacker>
            <team>blue-team</team>
        </attacker>
    </all>
    <all id="enemy-red">
        <attacker>
            <team>red-team</team>
        </attacker>
    </all>
    <all id="enemy-green">
        <attacker>
            <team>green-team</team>
        </attacker>
    </all>
    <all id="enemy-yellow">
        <attacker>
            <team>yellow-team</team>
        </attacker>
    </all>
    <completed id="blue-completed">blue-monument</completed>
    <completed id="red-completed">red-monument</completed>
    <completed id="green-completed">green-monument</completed>
    <completed id="yellow-completed">yellow-monument</completed>
    <any id="back-portals">
        <region id="blue-back-portal"/>
        <region id="red-back-portal"/>
        <region id="green-back-portal"/>
        <region id="yellow-back-portal"/>
    </any>
</filters>
<actions>
    <action scope="player" id="when-damaged">
        <set var="temp_last_death" value="0"/> <!-- void -->
        <action filter="enemy-blue">
            <set var="temp_last_death" value="${TEAM_BLUE}"/>
        </action>
        <action filter="enemy-red">
            <set var="temp_last_death" value="${TEAM_RED}"/>
        </action>
        <action filter="enemy-green">
            <set var="temp_last_death" value="${TEAM_GREEN}"/>
        </action>
        <action filter="enemy-yellow">
            <set var="temp_last_death" value="${TEAM_YELLOW}"/>
        </action>
    </action>
    <action id="pre-swap-team" scope="player">
        <set var="last_death" value="temp_last_death"/>
        <action filter="last_death=0">
            <repeat times="1000" filter="last_death=0">
                <message title="`l`d❱❱❱ `fSwitching teams! `l`d❰❰❰"/>
                <set var="temp_last_death" value="floor(random() * 4) + 1"/>
                <action filter="
                not(
                    any(
                        all(blue-team,last_death=${TEAM_BLUE}),
                        all(red-team,last_death=${TEAM_RED}),
                        all(green-team,last_death=${TEAM_GREEN}),
                        all(yellow-team,last_death=${TEAM_YELLOW}),
                        all(temp_last_death=${TEAM_BLUE},blue-completed),
                        all(temp_last_death=${TEAM_RED},red-completed),
                        all(temp_last_death=${TEAM_GREEN},green-completed),
                        all(temp_last_death=${TEAM_YELLOW},yellow-completed)
                    )
                )">
                    <set var="last_death" value="temp_last_death"/>
                </action>
            </repeat>
        </action>
        <set var="should_swap_team" value="last_death"/>
    </action>
    <trigger scope="player" filter="all(alive,not(should_swap_team=0))">
        <action>
            <action filter="should_swap_team=${TEAM_BLUE}">
                <kit id="blue-swap"/>
            </action>
            <action filter="should_swap_team=${TEAM_RED}">
                <kit id="red-swap"/>
            </action>
            <action filter="should_swap_team=${TEAM_GREEN}">
                <kit id="green-swap"/>
            </action>
            <action filter="should_swap_team=${TEAM_YELLOW}">
                <kit id="yellow-swap"/>
            </action>
            <set var="should_swap_team" value="0"/>
        </action>
    </trigger>
    <action id="chute-var" scope="player">
        <set var="can_use_chute" value="1"/>
    </action>
    <action id="chute-var-reset" scope="player">
        <set var="can_use_chute" value="0"/>
    </action>
    <action id="pvp-msg" scope="player">
        <message actionbar="`4⚔ `f`lNow entering a PvP zone! `4⚔"/>
    </action>
    <action id="spawn-res-var" scope="player">
        <Set var="spawn_res" value="1"/>
    </action>
    <action id="spawn-res-var-reset" scope="player">
        <Set var="spawn_res" value="0"/>
    </action>
    <action id="spawn-res-kit" scope="player">
        <kit>
            <effect amplifier="8" duration="4">damage resistance</effect>
        </kit>
    </action>
    <action id="void-tp" scope="player">
        <teleport>
            <x>0</x>
            <y>-50</y>
            <z>0</z>
        </teleport>
    </action>
    <trigger filter="all(dead,blue-team,blue-completed)" action="pre-swap-team" scope="player"/>
    <trigger filter="all(dead,red-team,red-completed)" action="pre-swap-team" scope="player"/>
    <trigger filter="all(dead,green-team,green-completed)" action="pre-swap-team" scope="player"/>
    <trigger filter="all(dead,yellow-team,yellow-completed)" action="pre-swap-team" scope="player"/>
    <trigger filter="chute-check" action="chute-var" scope="player"/>
    <trigger filter="not(chute-check)" action="chute-var-reset" scope="player"/>
    <trigger filter="dual-platforms" action="pvp-msg" scope="player"/>
    <trigger filter="back-portals" action="spawn-res-var" scope="player"/>
    <trigger filter="portal-pads-check" action="spawn-res-var-reset" scope="player"/>
    <trigger filter="spawn_res=1" action="spawn-res-kit" scope="player"/>
    <trigger filter="platform-blockers" action="void-tp" scope="player"/>
</actions>
<variables>
    <variable id="last_death" scope="player" default="0"/> <!-- Last team to kill player 0= none 1=blue 2=red 3=green 4=yellow -->
    <variable id="temp_last_death" scope="player" default="0"/>
    <variable id="can_use_chute" scope="player" default="0"/>
    <variable id="should_swap_team" scope="player" default="0"/> <!-- 1=blue 2=red 3=green 4=yellow -->
    <variable id="spawn_res" scope="player" default="0"/>
</variables>
<portals>
    <portal id="blue-portal-1" x="@-47.5" y="@52" z="@-47.5" yaw="@-45" sound="true" filter="blue-team">
        <region>
            <region id="blue-front-portals"/>
        </region>
    </portal>
    <portal id="blue-portal-2" x="@-77.5" y="@8" z="@-77.5" yaw="@-45" sound="true" filter="blue-team">
        <region>
            <region id="blue-back-portal"/>
        </region>
    </portal>
    <portal id="red-portal" x="@48.5" y="@52" z="@-47.5" yaw="@45" sound="true" filter="red-team">
        <region>
            <region id="red-front-portals"/>
        </region>
    </portal>
    <portal id="red-portal-2" x="@78.5" y="@8" z="@-77.5" yaw="@45" sound="true" filter="red-team">
        <region>
            <region id="red-back-portal"/>
        </region>
    </portal>
    <portal id="green-portal-1" x="@48.5" y="@52" z="@48.5" yaw="@135" sound="true" filter="green-team">
        <region>
            <region id="green-front-portals"/>
        </region>
    </portal>
    <portal id="green-portal-2" x="@78.5" y="@8" z="@78.5" yaw="@135" sound="true" filter="green-team">
        <region>
            <region id="green-back-portal"/>
        </region>
    </portal>
    <portal id="yellow-portal-1" x="@-47.5" y="@52" z="@48.5" yaw="@-135" sound="true" filter="yellow-team">
        <region>
            <region id="yellow-front-portals"/>
        </region>
    </portal>
    <portal id="yellow-portal-2" x="@-77.5" y="@8" z="@78.5" yaw="@-135" sound="false" filter="yellow-team">
        <region>
            <region id="yellow-back-portal"/>
        </region>
    </portal>
</portals>
<destroyables>
    <destroyable id="blue-monument" name="Blue Monument" required="true" region="blue-mon" materials="ender stone" owner="blue-team" completion="90%" show-progress="true" sparks="true" show-effects="true" show-sidebar="true"/>
    <destroyable id="red-monument" name="Red Monument" required="true" region="red-mon" materials="ender stone" owner="red-team" completion="90%" show-progress="true" sparks="true" show-effects="true" show-sidebar="true"/>
    <destroyable id="green-monument" name="Green Monument" required="true" region="green-mon" materials="ender stone" owner="green-team" completion="90%" show-progress="true" sparks="true" show-effects="true" show-sidebar="true"/>
    <destroyable id="yellow-monument" name="Yellow Monument" required="true" region="yellow-mon" materials="ender stone" owner="yellow-team" completion="90%" show-progress="true" sparks="true" show-effects="true" show-sidebar="true"/>
</destroyables>
<renewables>
    <renewable region="everywhere" renew-filter="renewable-blocks" replace-filter="air" interval="10" particles="false" sound="false" avoid-players="2"/>
</renewables>
<itemremove>
    <item>quartz block</item>
    <item>quartz stairs</item>
    <item>diamond pickaxe</item>
    <item>workbench</item>
    <item>dispenser</item>
    <item>sponge</item>
    <item>shears</item>
    <item>wood sword</item>
    <item>bow</item>
    <item>snow ball</item>
    <item>arrow:0</item>
    <item>vine</item>
    <item>stained clay</item>
    <item>stained glass</item>
    <item>nether fence</item>
    <item>step</item>
    <item>ladder</item>
    <item>trap door</item>
    <item>stone plate</item>
    <item>piston base</item>
    <item>redstone block</item>
    <item>redstone</item>
    <item>stone button</item>
    <item>lever</item>
    <item>redstone torch on</item>
    <item>diode</item>
    <item>water bucket</item>
    <item>bucket</item>
    <item>tnt</item>
    <item>leather helmet</item>
    <item>leather chestplate</item>
    <item>leather leggings</item>
    <item>leather boots</item>
    <item>iron helmet</item>
    <item>iron chestplate</item>
    <item>iron leggings</item>
    <item>iron boots</item>
    <item>sign</item>
    <item>melon</item>
    <item>ender stone</item>
</itemremove>
<kill-reward>
    <item amount="16" material="tnt"/>
    <item material="dispenser"/>
    <item amount="8" material="arrow"/>
</kill-reward>
<maxbuildheight>51</maxbuildheight>
<hunger>
    <depletion>off</depletion>
</hunger>
<damage victim-action="when-damaged"/>
<broadcasts>
    <alert after="5s" every="5m" count="4">Once your team's monument is broken, you will join the team of whoever kills you next</alert>
    <!-- <tip after="10s" every="5m" count="2">Cyan stained clay is indestructible</tip> -->
</broadcasts>
</map>