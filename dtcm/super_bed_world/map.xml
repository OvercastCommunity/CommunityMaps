<map proto="1.5.0">
<name>Super Bed World</name>
<version>1.0.3</version>
<include id="gapple-kill-reward"/>
<objective>Destroy the enemy beds and have the last bed standing to win.</objective>
<gamemode>dtm</gamemode>
<created>2025-10-17</created>
<authors>
    <author uuid="c25a6f7b-4c42-40da-8cd6-add53f0c84eb"/> <!-- arcadeboss -->
</authors>
<gamerules>
    <doFireTick>false</doFireTick> <!-- BW style -->
</gamerules>
<respawn auto="true" delay="2.5s"/>
<constants>
    <constant id="red">1</constant>
    <constant id="green">2</constant>
    <constant id="blue">3</constant>
    <constant id="yellow">4</constant>
</constants>
<teams>
    <team id="red-team" color="red" max="20">Castle Mario</team>
    <team id="green-team" color="green" dye-color="green" max="20">Castle Luigi</team>
    <team id="blue-team" color="blue" max="20">Castle Toad</team>
    <team id="yellow-team" color="yellow" max="20">Castle Koopa</team>
</teams>
<kits>
    <!-- Kit 1 of 5: Base Kit -->
    <kit id="spawn-kit" force="true">
        <clear/>
        <effect duration="3s" amplifier="2">regeneration</effect>
        <effect duration="3s" amplifier="255">damage resistance</effect>
        <item slot="0" material="iron sword" unbreakable="true"/>
        <item slot="1" material="bow" unbreakable="true" enchantment="arrow infinite"/>
        <item slot="2" material="iron pickaxe" unbreakable="true"/>
        <item slot="3" material="iron axe" unbreakable="true"/>
        <item slot="4" material="iron spade" unbreakable="true"/>
        <item slot="6" material="wool" amount="10" team-color="true"/>
        <item slot="9" material="egg" amount="1"/> <!-- indicator of respawn -->
        <item slot="28" material="arrow" amount="1"/>
        <item slot="32" material="wood" damage="5" amount="10"/>
        <item slot="33" material="ladder" amount="8"/>
        <helmet unbreakable="true" locked="true" material="leather helmet" team-color="true"/>
        <chestplate unbreakable="true" locked="true" material="leather chestplate" team-color="true"/>
        <leggings unbreakable="true" locked="true" material="leather leggings" team-color="true"/>
        <boots unbreakable="true" locked="true" material="leather boots" team-color="true"/>
    </kit>
    <!-- Kit 2 of 5: First Upgrade - Prot 1 / Sharp 1 -->
    <kit id="spawn-kit-1" force="false">
        <effect duration="3s" amplifier="2">regeneration</effect>
        <effect duration="3s" amplifier="255">damage resistance</effect>
        <item slot="1" material="bow" unbreakable="true" enchantment="arrow infinite"/>
        <item slot="2" material="iron pickaxe" unbreakable="true"/>
        <item slot="3" material="iron axe" unbreakable="true"/>
        <item slot="4" material="iron spade" unbreakable="true"/>
        <item slot="6" material="wool" amount="32" team-color="true"/>
        <item slot="8" material="golden apple"/>
        <item slot="28" material="arrow" amount="1"/>
        <item slot="32" material="wood" damage="5" amount="16"/>
        <item slot="33" material="ladder" amount="12"/>
    </kit>
    <kit id="spawn-kit-1-force" force="true">
        <item slot="0" material="iron sword" enchantment="sharpness:1" unbreakable="true"/>
        <helmet unbreakable="true" locked="true" material="leather helmet" team-color="true"/>
        <chestplate unbreakable="true" locked="true" material="leather chestplate" team-color="true"/>
        <leggings unbreakable="true" locked="true" material="iron leggings" enchantment="protection:1"/>
        <boots unbreakable="true" locked="true" material="leather boots" enchantment="protection:1" team-color="true"/>
    </kit>
    <!-- Kit 3 of 5: Second Upgrade - Prot 2 / Sharp 2 -->
    <kit id="spawn-kit-2" force="false">
        <effect duration="4s" amplifier="2">regeneration</effect>
        <effect duration="4s" amplifier="255">damage resistance</effect>
        <item slot="1" material="bow" unbreakable="true" enchantment="arrow infinite"/>
        <item slot="2" material="iron pickaxe" unbreakable="true"/>
        <item slot="3" material="iron axe" unbreakable="true"/>
        <item slot="4" material="iron spade" unbreakable="true"/>
        <item slot="5" material="stained clay" amount="32" team-color="true"/>
        <item slot="6" material="wool" amount="64" team-color="true"/>
        <item slot="8" material="golden apple"/>
        <item slot="17" material="stained glass" amount="8" team-color="true"/>
        <item slot="28" material="arrow" amount="1"/>
        <item slot="32" material="wood" damage="5" amount="32"/>
        <item slot="33" material="ladder" amount="16"/>
    </kit>
    <kit id="spawn-kit-2-force" force="true">
        <item slot="0" material="iron sword" enchantment="sharpness:2" unbreakable="true"/>
        <helmet unbreakable="true" locked="true" material="leather helmet" team-color="true"/>
        <chestplate unbreakable="true" locked="true" material="leather chestplate" team-color="true"/>
        <leggings unbreakable="true" locked="true" material="iron leggings" enchantment="protection:2"/>
        <boots unbreakable="true" locked="true" material="iron boots" enchantment="protection:2"/>
    </kit>
    <!-- Kit 4 of 5: Third Upgrade - Prot 3 / Sharp 3 -->
    <kit id="spawn-kit-3" force="false">
        <effect duration="5s" amplifier="2">regeneration</effect>
        <effect duration="5s" amplifier="255">damage resistance</effect>
        <item slot="1" material="bow" unbreakable="true" enchantment="arrow infinite"/>
        <item slot="2" material="iron pickaxe" unbreakable="true"/>
        <item slot="3" material="iron axe" unbreakable="true"/>
        <item slot="4" material="iron spade" unbreakable="true"/>
        <item slot="5" material="stained clay" amount="64" team-color="true"/>
        <item slot="6" material="wool" amount="64" team-color="true"/>
        <item slot="8" material="golden apple"/>
        <item slot="17" material="stained glass" amount="16" team-color="true"/>
        <item slot="28" material="arrow"/>
        <item slot="32" material="wood" damage="5" amount="48"/>
        <item slot="33" material="ladder" amount="20"/>
    </kit>
    <kit id="spawn-kit-3-force" force="true">
        <item slot="0" material="iron sword" enchantment="sharpness:3" unbreakable="true"/>
        <helmet unbreakable="true" locked="true" material="iron helmet"/>
        <chestplate unbreakable="true" locked="true" material="leather chestplate" team-color="true"/>
        <leggings unbreakable="true" locked="true" material="iron leggings" enchantment="protection:3"/>
        <boots unbreakable="true" locked="true" material="iron boots" enchantment="protection:3"/>
    </kit>
    <!-- Kit 5 of 5: Forth Upgrade - Prot 4 / Sharp 4 -->
    <kit id="spawn-kit-4" force="false">
        <effect duration="10s" amplifier="2">regeneration</effect>
        <effect duration="10s" amplifier="255">damage resistance</effect>
        <item slot="1" material="bow" unbreakable="true" enchantment="arrow infinite"/>
        <item slot="2" material="iron pickaxe" unbreakable="true"/>
        <item slot="3" material="iron axe" unbreakable="true"/>
        <item slot="5" material="ender stone" amount="64"/>
        <item slot="6" material="wool" amount="64" team-color="true"/>
        <item slot="8" material="golden apple"/>
        <item slot="17" material="stained glass" amount="24" team-color="true"/>
        <item slot="28" material="arrow"/>
        <item slot="32" material="wood" damage="5" amount="64"/>
        <item slot="33" material="ladder" amount="32"/>
    </kit>
    <kit id="spawn-kit-4-force" force="true">
        <item slot="0" material="iron sword" enchantment="sharpness:4" unbreakable="true"/>
        <item slot="4" material="diamond spade" unbreakable="true"/>
        <item material="compass"/>
        <helmet unbreakable="true" locked="true" material="iron helmet"/>
        <chestplate unbreakable="true" locked="true" material="leather chestplate" team-color="true"/>
        <leggings unbreakable="true" locked="true" material="diamond leggings" enchantment="protection:4"/>
        <boots unbreakable="true" locked="true" material="iron boots" enchantment="protection:4;feather_falling:1"/>
    </kit>
    <!-- Jump pad first aid -->
    <kit id="absorption-kit-long" force="true">
        <effect amplifier="6" duration="7s">absorption</effect>
    </kit>
    <kit id="absorption-kit-short" force="true">
        <effect amplifier="3" duration="4s">absorption</effect>
    </kit>
    <!-- Player tracking variables set -->
    <kit id="bed-breaker-kit" force="true">
        <action filter="red-team">
            <set var="bed_breaker" value="${red}"/>
        </action>
        <action filter="green-team">
            <set var="bed_breaker" value="${green}"/>
        </action>
        <action filter="blue-team">
            <set var="bed_breaker" value="${blue}"/>
        </action>
        <action filter="yellow-team">
            <set var="bed_breaker" value="${yellow}"/>
        </action>
    </kit>
    <!-- Team switch here! -->
    <kit id="revive-defeated-by-red-switch" force="true">
        <team-switch team="red-team" show-title="false"/>
    </kit>
    <kit id="revive-defeated-by-green-switch" force="true">
        <team-switch team="green-team" show-title="false"/>
    </kit>
    <kit id="revive-defeated-by-blue-switch" force="true">
        <team-switch team="blue-team" show-title="false"/>
    </kit>
    <kit id="revive-defeated-by-yellow-switch" force="true">
        <team-switch team="yellow-team" show-title="false"/>
    </kit>
</kits>
<compass show-distance="true">
    <player filter="not(red-team)" holder-filter="red-team" name="`eClosest Enemy"/>
    <player filter="not(green-team)" holder-filter="green-team" name="`eClosest Enemy"/>
    <player filter="not(blue-team)" holder-filter="blue-team" name="`eClosest Enemy"/>
    <player filter="not(yellow-team)" holder-filter="yellow-team" name="`eClosest Enemy"/>
</compass>
<spawns>
    <spawn team="blue-team" kit="spawn-kit" yaw="90" region="blue-spawn-point"/>
    <spawn team="red-team" kit="spawn-kit" yaw="180" region="red-spawn-point"/>
    <spawn team="green-team" kit="spawn-kit" yaw="0" region="green-spawn-point"/>
    <spawn team="yellow-team" kit="spawn-kit" yaw="-90" region="yellow-spawn-point"/>
    <default>
        <regions>
            <point yaw="-90">38.5,102,0.5</point>
            <point yaw="90">-37.5,102,0.5</point>
            <point yaw="180">0.5,102,-37.5</point>
            <point yaw="0">0.5,102,38.5</point>
        </regions>
    </default>
</spawns>
<broadcasts>
    <alert after="3s" every="5m" count="2">`r`eLast bed standing wins!`r</alert>
    <alert after="40s" every="5m" count="2">`r`eCapture the 4 wools to level-up your team's kit!`r</alert>
    <alert after="80s" every="5m" count="2">`r`ePlayers switch to team that broke their bed upon death!`r</alert>
    <tip after="120s">`r`eThe central Star Platform has jump boost and gapples!`r</tip>
    <tip after="240s">`r`eBeds can't be destroyed by explosions, they must be mined!`r</tip>
</broadcasts>
<filters>
    <alive id="alive"/>
    <deny id="tnt-immune">
        <all>
            <cause>explosion</cause>
            <any>
                <!-- List of blocks that will be protected against TNT explosions -->
                <material>stained glass</material>
                <material>bed block</material>
            </any>
        </all>
    </deny>
    <deny id="original-block-protection-filter">
        <any>
            <!-- Blocks that players can't modify -->
            <material>sea lantern</material> <!-- bed platform blocks -->
            <material>obsidian</material>
        </any>
    </deny>
    <after id="red-team-upgrade-message1-after" duration="0.05s" filter="all(red-team,red_kit_level=1)"/>
    <after id="red-team-upgrade-message2-after" duration="0.05s" filter="all(red-team,red_kit_level=2)"/>
    <after id="red-team-upgrade-message3-after" duration="0.05s" filter="all(red-team,red_kit_level=3)"/>
    <after id="red-team-upgrade-message4-after" duration="0.05s" filter="all(red-team,red_kit_level=4)"/>
    <after id="green-team-upgrade-message1-after" duration="0.05s" filter="all(green-team,green_kit_level=1)"/>
    <after id="green-team-upgrade-message2-after" duration="0.05s" filter="all(green-team,green_kit_level=2)"/>
    <after id="green-team-upgrade-message3-after" duration="0.05s" filter="all(green-team,green_kit_level=3)"/>
    <after id="green-team-upgrade-message4-after" duration="0.05s" filter="all(green-team,green_kit_level=4)"/>
    <after id="blue-team-upgrade-message1-after" duration="0.05s" filter="all(blue-team,blue_kit_level=1)"/>
    <after id="blue-team-upgrade-message2-after" duration="0.05s" filter="all(blue-team,blue_kit_level=2)"/>
    <after id="blue-team-upgrade-message3-after" duration="0.05s" filter="all(blue-team,blue_kit_level=3)"/>
    <after id="blue-team-upgrade-message4-after" duration="0.05s" filter="all(blue-team,blue_kit_level=4)"/>
    <after id="yellow-team-upgrade-message1-after" duration="0.05s" filter="all(yellow-team,yellow_kit_level=1)"/>
    <after id="yellow-team-upgrade-message2-after" duration="0.05s" filter="all(yellow-team,yellow_kit_level=2)"/>
    <after id="yellow-team-upgrade-message3-after" duration="0.05s" filter="all(yellow-team,yellow_kit_level=3)"/>
    <after id="yellow-team-upgrade-message4-after" duration="0.05s" filter="all(yellow-team,yellow_kit_level=4)"/>
    <!-- Clear egg from inventory after a moment, the revive filter will have fired if needed -->
    <after id="alive-egg" duration="3.0" filter="all(holding-egg,alive)"/>
    <all id="holding-egg">
        <carrying><item material="egg"/></carrying>
    </all>
    <!-- Filters that trigger when player revives on defeated team -->
    <!-- Delayed so player has time to comprehend before TP and team switch -->
    <after id="revive-defeated-by-red-delay" duration="2.5s" filter="revive-defeated-by-red" message="Team switch in {0}"/>
    <after id="revive-defeated-by-blue-delay" duration="2.5s" filter="revive-defeated-by-blue" message="Team switch in {0}"/>
    <after id="revive-defeated-by-green-delay" duration="2.5s" filter="revive-defeated-by-green" message="Team switch in {0}"/>
    <after id="revive-defeated-by-yellow-delay" duration="2.5s" filter="revive-defeated-by-yellow" message="Team switch in {0}"/>
    <all id="revive-defeated-by-red">
        <alive/>
        <any>
            <all>
                <team>blue-team</team>
                <variable var="blue_defeated_by">${red}</variable>
            </all>
            <all>
                <team>green-team</team>
                <variable var="green_defeated_by">${red}</variable>
            </all>
            <all>
                <team>yellow-team</team>
                <variable var="yellow_defeated_by">${red}</variable>
            </all>
        </any>
        <carrying><item material="egg"/></carrying>
    </all>
    <all id="revive-defeated-by-blue">
        <alive/>
        <any>
            <all>
                <team>red-team</team>
                <variable var="red_defeated_by">${blue}</variable>
            </all>
            <all>
                <team>green-team</team>
                <variable var="green_defeated_by">${blue}</variable>
            </all>
            <all>
                <team>yellow-team</team>
                <variable var="yellow_defeated_by">${blue}</variable>
            </all>
        </any>
        <carrying><item material="egg"/></carrying>
    </all>
    <all id="revive-defeated-by-green">
        <alive/>
        <any>
            <all>
                <team>blue-team</team>
                <variable var="blue_defeated_by">${green}</variable>
            </all>
            <all>
                <team>red-team</team>
                <variable var="red_defeated_by">${green}</variable>
            </all>
            <all>
                <team>yellow-team</team>
                <variable var="yellow_defeated_by">${green}</variable>
            </all>
        </any>
        <carrying><item material="egg"/></carrying>
    </all>
    <all id="revive-defeated-by-yellow">
        <alive/>
        <any>
            <all>
                <team>blue-team</team>
                <variable var="blue_defeated_by">${yellow}</variable>
            </all>
            <all>
                <team>green-team</team>
                <variable var="green_defeated_by">${yellow}</variable>
            </all>
            <all>
                <team>red-team</team>
                <variable var="red_defeated_by">${yellow}</variable>
            </all>
        </any>
        <carrying><item material="egg"/></carrying>
    </all>
    <!-- Filters that trigger when player revives or team upgrades -->
    <all id="blue-alive-kit-1-upgrade">
        <team>blue-team</team>
        <alive/>
        <variable var="blue_kit_level">1</variable>
    </all>
    <all id="blue-alive-kit-2-upgrade">
        <team>blue-team</team>
        <alive/>
        <variable var="blue_kit_level">2</variable>
    </all>
    <all id="blue-alive-kit-3-upgrade">
        <team>blue-team</team>
        <alive/>
        <variable var="blue_kit_level">3</variable>
    </all>
    <all id="blue-alive-kit-4-upgrade">
        <team>blue-team</team>
        <alive/>
        <variable var="blue_kit_level">4</variable>
    </all>
    <all id="red-alive-kit-1-upgrade">
        <team>red-team</team>
        <alive/>
        <variable var="red_kit_level">1</variable>
    </all>
    <all id="red-alive-kit-2-upgrade">
        <team>red-team</team>
        <alive/>
        <variable var="red_kit_level">2</variable>
    </all>
    <all id="red-alive-kit-3-upgrade">
        <team>red-team</team>
        <alive/>
        <variable var="red_kit_level">3</variable>
    </all>
    <all id="red-alive-kit-4-upgrade">
        <team>red-team</team>
        <alive/>
        <variable var="red_kit_level">4</variable>
    </all>
    <all id="green-alive-kit-1-upgrade">
        <team>green-team</team>
        <alive/>
        <variable var="green_kit_level">1</variable>
    </all>
    <all id="green-alive-kit-2-upgrade">
        <team>green-team</team>
        <alive/>
        <variable var="green_kit_level">2</variable>
    </all>
    <all id="green-alive-kit-3-upgrade">
        <team>green-team</team>
        <alive/>
        <variable var="green_kit_level">3</variable>
    </all>
    <all id="green-alive-kit-4-upgrade">
        <team>green-team</team>
        <alive/>
        <variable var="green_kit_level">4</variable>
    </all>
    <all id="yellow-alive-kit-1-upgrade">
        <team>yellow-team</team>
        <alive/>
        <variable var="yellow_kit_level">1</variable>
    </all>
    <all id="yellow-alive-kit-2-upgrade">
        <team>yellow-team</team>
        <alive/>
        <variable var="yellow_kit_level">2</variable>
    </all>
    <all id="yellow-alive-kit-3-upgrade">
        <team>yellow-team</team>
        <alive/>
        <variable var="yellow_kit_level">3</variable>
    </all>
    <all id="yellow-alive-kit-4-upgrade">
        <team>yellow-team</team>
        <alive/>
        <variable var="yellow_kit_level">4</variable>
    </all>
    <!-- Objective completed filters: beds -->
    <completed id="red-bed-done">red-monument</completed>
    <completed id="blue-bed-done">blue-monument</completed>
    <completed id="green-bed-done">green-monument</completed>
    <completed id="yellow-bed-done">yellow-monument</completed>
    <!-- Objective completed filters: wools -->
    <completed id="red-upgrade-1">red-gets-purple</completed>
    <completed id="red-upgrade-2">red-gets-cyan</completed>
    <completed id="red-upgrade-3">red-gets-orange</completed>
    <completed id="red-upgrade-4">red-gets-lime</completed>
    <completed id="blue-upgrade-1">blue-gets-purple</completed>
    <completed id="blue-upgrade-2">blue-gets-cyan</completed>
    <completed id="blue-upgrade-3">blue-gets-orange</completed>
    <completed id="blue-upgrade-4">blue-gets-lime</completed>
    <completed id="green-upgrade-1">green-gets-purple</completed>
    <completed id="green-upgrade-2">green-gets-cyan</completed>
    <completed id="green-upgrade-3">green-gets-orange</completed>
    <completed id="green-upgrade-4">green-gets-lime</completed>
    <completed id="yellow-upgrade-1">yellow-gets-purple</completed>
    <completed id="yellow-upgrade-2">yellow-gets-cyan</completed>
    <completed id="yellow-upgrade-3">yellow-gets-orange</completed>
    <completed id="yellow-upgrade-4">yellow-gets-lime</completed>
    <!-- No safeties, until all teams have placed it -->
    <deny id="no-lime-place">
        <all>
            <material>wool:5</material>
            <not>
                <any>
                    <region id="red-lime-mon"/>
                    <region id="blue-lime-mon"/>
                    <region id="green-lime-mon"/>
                    <region id="yellow-lime-mon"/>
                </any>
            </not>
            <not>
                <all>
                    <completed>red-gets-lime</completed>
                    <completed>blue-gets-lime</completed>
                    <completed>green-gets-lime</completed>
                    <completed>yellow-gets-lime</completed>
                </all>
            </not>
        </all>
    </deny>
    <deny id="no-purple-place">
        <all>
            <material>wool:10</material>
            <not>
                <any>
                    <region id="red-purple-mon"/>
                    <region id="blue-purple-mon"/>
                    <region id="green-purple-mon"/>
                    <region id="yellow-purple-mon"/>
                </any>
            </not>
            <not>
                <all>
                    <completed>red-gets-purple</completed>
                    <completed>blue-gets-purple</completed>
                    <completed>green-gets-purple</completed>
                    <completed>yellow-gets-purple</completed>
                </all>
            </not>
        </all>
    </deny>
    <deny id="no-orange-place">
        <all>
            <material>wool:1</material>
            <not>
                <any>
                    <region id="red-orange-mon"/>
                    <region id="blue-orange-mon"/>
                    <region id="green-orange-mon"/>
                    <region id="yellow-orange-mon"/>
                </any>
            </not>
            <not>
                <all>
                    <completed>red-gets-orange</completed>
                    <completed>blue-gets-orange</completed>
                    <completed>green-gets-orange</completed>
                    <completed>yellow-gets-orange</completed>
                </all>
            </not>
        </all>
    </deny>
    <deny id="no-cyan-place">
        <all>
            <material>wool:9</material>
            <not>
                <any>
                    <region id="red-cyan-mon"/>
                    <region id="blue-cyan-mon"/>
                    <region id="green-cyan-mon"/>
                    <region id="yellow-cyan-mon"/>
                </any>
            </not>
            <not>
                <all>
                    <completed>red-gets-cyan</completed>
                    <completed>blue-gets-cyan</completed>
                    <completed>green-gets-cyan</completed>
                    <completed>yellow-gets-cyan</completed>
                </all>
            </not>
        </all>
    </deny>
</filters>
<projectiles>
    <projectile id="throwable-fireball" name="Fireball" projectile="Fireball" velocity=".6" click="right" power="2" damage="2.5" cooldown="1s"/>
</projectiles>
<destroyables materials="bed block" mode-changes="false" sparks="true" repairable="false" show-progress="false" required="true" completion="50%">
    <destroyable id="red-monument" name="§cRed Bed" region="red-bed" owner="red-team"/>
    <destroyable id="blue-monument" name="§9Blue Bed" region="blue-bed" owner="blue-team"/>
    <destroyable id="green-monument" name="§aGreen Bed" region="green-bed" owner="green-team"/>
    <destroyable id="yellow-monument" name="§eYellow Bed" region="yellow-bed" owner="yellow-team"/>
</destroyables>
<wools>
    <wool id="blue-gets-purple" team="blue-team" color="purple" location="0,0,0" craftable="false" scoreboard-filter="never" required="false" show-effects="true">
        <monument>
            <block id="blue-purple-mon">162,85,3</block>
        </monument>
    </wool>
    <wool id="blue-gets-cyan" team="blue-team" color="cyan" location="0,0,0" craftable="false" scoreboard-filter="never" required="false" show-effects="true">
        <monument>
            <block id="blue-cyan-mon">162,85,-9</block>
        </monument>
    </wool>
    <wool id="blue-gets-orange" team="blue-team" color="orange" location="0,0,0" craftable="false" scoreboard-filter="never" required="false" show-effects="true">
        <monument>
            <block id="blue-orange-mon">162,85,9</block>
        </monument>
    </wool>
    <wool id="blue-gets-lime" team="blue-team" color="lime" location="0,0,0" craftable="false" scoreboard-filter="never" required="false" show-effects="true">
        <monument>
            <block id="blue-lime-mon">162,85,-3</block>
        </monument>
    </wool>
    <wool id="yellow-gets-purple" team="yellow-team" color="purple" location="0,0,0" craftable="false" scoreboard-filter="never" required="false" show-effects="true">
        <monument>
            <block id="yellow-purple-mon">-162,85,-3</block>
        </monument>
    </wool>
    <wool id="yellow-gets-cyan" team="yellow-team" color="cyan" location="0,0,0" craftable="false" scoreboard-filter="never" required="false" show-effects="true">
        <monument>
            <block id="yellow-cyan-mon">-162,85,9</block>
        </monument>
    </wool>
    <wool id="yellow-gets-orange" team="yellow-team" color="orange" location="0,0,0" craftable="false" scoreboard-filter="never" required="false" show-effects="true">
        <monument>
            <block id="yellow-orange-mon">-162,85,-9</block>
        </monument>
    </wool>
    <wool id="yellow-gets-lime" team="yellow-team" color="lime" location="0,0,0" craftable="false" scoreboard-filter="never" required="false" show-effects="true">
        <monument>
            <block id="yellow-lime-mon">-162,85,3</block>
        </monument>
    </wool>
    <wool id="red-gets-purple" team="red-team" color="purple" location="0,0,0" craftable="false" scoreboard-filter="never" required="false" show-effects="true">
        <monument>
            <block id="red-purple-mon">-3,85,162</block>
        </monument>
    </wool>
    <wool id="red-gets-cyan" team="red-team" color="cyan" location="0,0,0" craftable="false" scoreboard-filter="never" required="false" show-effects="true">
        <monument>
            <block id="red-cyan-mon">9,85,162</block>
        </monument>
    </wool>
    <wool id="red-gets-orange" team="red-team" color="orange" location="0,0,0" craftable="false" scoreboard-filter="never" required="false" show-effects="true">
        <monument>
            <block id="red-orange-mon">-9,85,162</block>
        </monument>
    </wool>
    <wool id="red-gets-lime" team="red-team" color="lime" location="0,0,0" craftable="false" scoreboard-filter="never" required="false" show-effects="true">
        <monument>
            <block id="red-lime-mon">3,85,162</block>
        </monument>
    </wool>
    <wool id="green-gets-purple" team="green-team" color="purple" location="0,0,0" craftable="false" scoreboard-filter="never" required="false" show-effects="true">
        <monument>
            <block id="green-purple-mon">3,85,-162</block>
        </monument>
    </wool>
    <wool id="green-gets-cyan" team="green-team" color="cyan" location="0,0,0" craftable="false" scoreboard-filter="never" required="false" show-effects="true">
        <monument>
            <block id="green-cyan-mon">-9,85,-162</block>
        </monument>
    </wool>
    <wool id="green-gets-orange" team="green-team" color="orange" location="0,0,0" craftable="false" scoreboard-filter="never" required="false" show-effects="true">
        <monument>
            <block id="green-orange-mon">9,85,-162</block>
        </monument>
    </wool>
    <wool id="green-gets-lime" team="green-team" color="lime" location="0,0,0" craftable="false" scoreboard-filter="never" required="false" show-effects="true">
        <monument>
            <block id="green-lime-mon">-3,85,-162</block>
        </monument>
    </wool>
</wools>
<block-drops>
    <rule kit="bed-breaker-kit">
        <filter>
            <material>bed block</material>
        </filter>
    </rule>
</block-drops>
<variables>
    <!-- Match -->
    <variable id="red_defeated_by" scope="match"/>
    <variable id="blue_defeated_by" scope="match"/>
    <variable id="green_defeated_by" scope="match"/>
    <variable id="yellow_defeated_by" scope="match"/>
    <!-- Team -->
    <variable id="kit_level" default="0" scope="team"/>
    <with-team id="red_kit_level" var="kit_level" team="red-team"/>
    <with-team id="blue_kit_level" var="kit_level" team="blue-team"/>
    <with-team id="green_kit_level" var="kit_level" team="green-team"/>
    <with-team id="yellow_kit_level" var="kit_level" team="yellow-team"/>
    <!-- Player -->
    <variable id="bed_breaker" scope="player" exclusive="1"/>
</variables>
<actions>
    <!-- Team switch incoming action -->
    <trigger filter="revive-defeated-by-red" scope="player">
        <action>
            <message text="  `4▲`e Your bed is gone, you must fight for Red!"/>
            <message text="  `4▲`e Switching team to Castle Mario..."/>
            <sound preset="portal"/>
        </action>
    </trigger>
    <trigger filter="revive-defeated-by-green" scope="player">
        <action>
            <message text="  `4▲`e Your bed is gone, you must fight for Green!"/>
            <message text="  `4▲`e Switching team to Castle Luigi..."/>
            <sound preset="portal"/>
        </action>
    </trigger>
    <trigger filter="revive-defeated-by-blue" scope="player">
        <action>
            <message text="  `4▲`e Your bed is gone, you must fight for Blue!"/>
            <message text="  `4▲`e Switching team to Castle Toad..."/>
            <sound preset="portal"/>
        </action>
    </trigger>
    <trigger filter="revive-defeated-by-yellow" scope="player">
        <action>
            <message text="  `4▲`e Your bed is gone, you must fight for Yellow!"/>
            <message text="  `4▲`e Switching team to Castle Koopa..."/>
            <sound preset="portal"/>
        </action>
    </trigger>
    <!-- Clear the Egg -->
    <trigger filter="alive-egg" scope="player">
        <action>
            <replace-item ignore-metadata="true">
                <find material="egg"/>
                <replace material="air"/>
            </replace-item>
        </action>
    </trigger>
    <!-- Team switch action, delayed by N.N seconds -->
    <trigger filter="revive-defeated-by-red-delay" scope="player">
        <action>
            <kit id="revive-defeated-by-red-switch"/>
        </action>
    </trigger>
    <trigger filter="revive-defeated-by-blue-delay" scope="player">
        <action>
            <kit id="revive-defeated-by-blue-switch"/>
        </action>
    </trigger>
    <trigger filter="revive-defeated-by-green-delay" scope="player">
        <action>
            <kit id="revive-defeated-by-green-switch"/>
        </action>
    </trigger>
    <trigger filter="revive-defeated-by-yellow-delay" scope="player">
        <action>
            <kit id="revive-defeated-by-yellow-switch"/>
        </action>
    </trigger>
    <!-- Store which team broke this team's bed for team switching on death -->
    <trigger filter="red-bed-done" scope="player">
        <action>
            <switch-scope inner="player" filter="all(bed_breaker=${blue})">
                <set var="red_defeated_by" value="${blue}"/>
            </switch-scope>
            <switch-scope inner="player" filter="all(bed_breaker=${green})">
                <set var="red_defeated_by" value="${green}"/>
            </switch-scope>
            <switch-scope inner="player" filter="all(bed_breaker=${yellow})">
                <set var="red_defeated_by" value="${yellow}"/>
            </switch-scope>
        </action>
    </trigger>
    <trigger filter="green-bed-done" scope="player">
        <action>
            <switch-scope inner="player" filter="all(bed_breaker=${blue})">
                <set var="green_defeated_by" value="${blue}"/>
            </switch-scope>
            <switch-scope inner="player" filter="all(bed_breaker=${red})">
                <set var="green_defeated_by" value="${red}"/>
            </switch-scope>
            <switch-scope inner="player" filter="all(bed_breaker=${yellow})">
                <set var="green_defeated_by" value="${yellow}"/>
            </switch-scope>
        </action>
    </trigger>
    <trigger filter="blue-bed-done" scope="player">
        <action>
            <switch-scope inner="player" filter="all(bed_breaker=${green})">
                <set var="blue_defeated_by" value="${green}"/>
            </switch-scope>
            <switch-scope inner="player" filter="all(bed_breaker=${red})">
                <set var="blue_defeated_by" value="${red}"/>
            </switch-scope>
            <switch-scope inner="player" filter="all(bed_breaker=${yellow})">
                <set var="blue_defeated_by" value="${yellow}"/>
            </switch-scope>
        </action>
    </trigger>
    <trigger filter="yellow-bed-done" scope="player">
        <action>
            <switch-scope inner="player" filter="all(bed_breaker=${green})">
                <set var="yellow_defeated_by" value="${green}"/>
            </switch-scope>
            <switch-scope inner="player" filter="all(bed_breaker=${red})">
                <set var="yellow_defeated_by" value="${red}"/>
            </switch-scope>
            <switch-scope inner="player" filter="all(bed_breaker=${blue})">
                <set var="yellow_defeated_by" value="${blue}"/>
            </switch-scope>
        </action>
    </trigger>
    <!-- Wool sounds -->
    <action id="fireworks" scope="match">
        <sound key="${entity.firework_rocket.twinkle_far}" volume="1" pitch=".9"/>
    </action>
    <trigger filter="red-upgrade-1" scope="match">
        <action id="fireworks"/>
    </trigger>
    <trigger filter="red-upgrade-2" scope="match">
        <action id="fireworks"/>
    </trigger>
    <trigger filter="red-upgrade-3" scope="match">
        <action id="fireworks"/>
    </trigger>
    <trigger filter="red-upgrade-4" scope="match">
        <action id="fireworks"/>
    </trigger>
    <trigger filter="green-upgrade-1" scope="match">
        <action id="fireworks"/>
    </trigger>
    <trigger filter="green-upgrade-2" scope="match">
        <action id="fireworks"/>
    </trigger>
    <trigger filter="green-upgrade-3" scope="match">
        <action id="fireworks"/>
    </trigger>
    <trigger filter="green-upgrade-4" scope="match">
        <action id="fireworks"/>
    </trigger>
    <trigger filter="blue-upgrade-1" scope="match">
        <action id="fireworks"/>
    </trigger>
    <trigger filter="blue-upgrade-2" scope="match">
        <action id="fireworks"/>
    </trigger>
    <trigger filter="blue-upgrade-3" scope="match">
        <action id="fireworks"/>
    </trigger>
    <trigger filter="blue-upgrade-4" scope="match">
        <action id="fireworks"/>
    </trigger>
    <trigger filter="yellow-upgrade-1" scope="match">
        <action id="fireworks"/>
    </trigger>
    <trigger filter="yellow-upgrade-2" scope="match">
        <action id="fireworks"/>
    </trigger>
    <trigger filter="yellow-upgrade-3" scope="match">
        <action id="fireworks"/>
    </trigger>
    <trigger filter="yellow-upgrade-4" scope="match">
        <action id="fireworks"/>
    </trigger>
    <!-- Tell team when kit gets upgraded -->
    <action id="team-upgrade-message-1" scope="team">
        <message text="  `4▲`e Kit Upgrade: `6Protection/Sharpness I"/>
        <message text="  `4▲`6 plus Iron Leggings and more Blocks"/>
    </action>
    <action id="team-upgrade-message-2" scope="team">
        <message text="  `4▲`e Kit Upgrade: `6Protection/Sharpness II"/>
        <message text="  `4▲`6 plus Iron Boots and blast-proof Glass"/>
    </action>
    <action id="team-upgrade-message-3" scope="team">
        <message text="  `4▲`e Kit Upgrade: `6Protection/Sharpness III"/>
        <message text="  `4▲`6 plus Block upgrades"/>
    </action>
    <action id="team-upgrade-message-4" scope="team">
        <message text="  `4▲`e Kit Upgrade: `6Protection/Sharpness IV"/>
        <message text="  `4▲`6 plus Diamond Leggings and Compass"/>
    </action>
    <trigger filter="red-team-upgrade-message1-after" scope="team">
        <action id="team-upgrade-message-1"/>
    </trigger>
    <trigger filter="red-team-upgrade-message2-after" scope="team">
        <action id="team-upgrade-message-2"/>
    </trigger>
    <trigger filter="red-team-upgrade-message3-after" scope="team">
        <action id="team-upgrade-message-3"/>
    </trigger>
    <trigger filter="red-team-upgrade-message4-after" scope="team">
        <action id="team-upgrade-message-4"/>
    </trigger>
    <trigger filter="green-team-upgrade-message1-after" scope="team">
        <action id="team-upgrade-message-1"/>
    </trigger>
    <trigger filter="green-team-upgrade-message2-after" scope="team">
        <action id="team-upgrade-message-2"/>
    </trigger>
    <trigger filter="green-team-upgrade-message3-after" scope="team">
        <action id="team-upgrade-message-3"/>
    </trigger>
    <trigger filter="green-team-upgrade-message4-after" scope="team">
        <action id="team-upgrade-message-4"/>
    </trigger>
    <trigger filter="blue-team-upgrade-message1-after" scope="team">
        <action id="team-upgrade-message-1"/>
    </trigger>
    <trigger filter="blue-team-upgrade-message2-after" scope="team">
        <action id="team-upgrade-message-2"/>
    </trigger>
    <trigger filter="blue-team-upgrade-message3-after" scope="team">
        <action id="team-upgrade-message-3"/>
    </trigger>
    <trigger filter="blue-team-upgrade-message4-after" scope="team">
        <action id="team-upgrade-message-4"/>
    </trigger>
    <trigger filter="yellow-team-upgrade-message1-after" scope="team">
        <action id="team-upgrade-message-1"/>
    </trigger>
    <trigger filter="yellow-team-upgrade-message2-after" scope="team">
        <action id="team-upgrade-message-2"/>
    </trigger>
    <trigger filter="yellow-team-upgrade-message3-after" scope="team">
        <action id="team-upgrade-message-3"/>
    </trigger>
    <trigger filter="yellow-team-upgrade-message4-after" scope="team">
        <action id="team-upgrade-message-4"/>
    </trigger>
    <!-- Red -->
    <!-- 1 -->
    <trigger filter="all(red-upgrade-1,not(red-upgrade-2),not(red-upgrade-3),not(red-upgrade-4))" scope="team">
        <action>
            <set var="red_kit_level" value="1"/>
        </action>
    </trigger>
    <trigger filter="all(red-upgrade-2,not(red-upgrade-1),not(red-upgrade-3),not(red-upgrade-4))" scope="team">
        <action>
            <set var="red_kit_level" value="1"/>
        </action>
    </trigger>
    <trigger filter="all(red-upgrade-3,not(red-upgrade-1),not(red-upgrade-2),not(red-upgrade-4))" scope="team">
        <action>
            <set var="red_kit_level" value="1"/>
        </action>
    </trigger>
    <trigger filter="all(red-upgrade-4,not(red-upgrade-1),not(red-upgrade-2),not(red-upgrade-3))" scope="team">
        <action>
            <set var="red_kit_level" value="1"/>
        </action>
    </trigger>
    <!-- 2 -->
    <trigger filter="all(red-upgrade-1,red-upgrade-2,not(red-upgrade-3),not(red-upgrade-4))" scope="team">
        <action>
            <set var="red_kit_level" value="2"/>
        </action>
    </trigger>
    <trigger filter="all(red-upgrade-1,red-upgrade-3,not(red-upgrade-2),not(red-upgrade-4))" scope="team">
        <action>
            <set var="red_kit_level" value="2"/>
        </action>
    </trigger>
    <trigger filter="all(red-upgrade-1,red-upgrade-4,not(red-upgrade-2),not(red-upgrade-3))" scope="team">
        <action>
            <set var="red_kit_level" value="2"/>
        </action>
    </trigger>
    <trigger filter="all(red-upgrade-2,red-upgrade-3,not(red-upgrade-1),not(red-upgrade-4))" scope="team">
        <action>
            <set var="red_kit_level" value="2"/>
        </action>
    </trigger>
    <trigger filter="all(red-upgrade-2,red-upgrade-4,not(red-upgrade-1),not(red-upgrade-3))" scope="team">
        <action>
            <set var="red_kit_level" value="2"/>
        </action>
    </trigger>
    <trigger filter="all(red-upgrade-3,red-upgrade-4,not(red-upgrade-1),not(red-upgrade-2))" scope="team">
        <action>
            <set var="red_kit_level" value="2"/>
        </action>
    </trigger>
    <!-- 3 -->
    <trigger filter="all(not(red-upgrade-1),red-upgrade-2,red-upgrade-3,red-upgrade-4)" scope="team">
        <action>
            <set var="red_kit_level" value="3"/>
        </action>
    </trigger>
    <trigger filter="all(not(red-upgrade-2),red-upgrade-1,red-upgrade-3,red-upgrade-4)" scope="team">
        <action>
            <set var="red_kit_level" value="3"/>
        </action>
    </trigger>
    <trigger filter="all(not(red-upgrade-3),red-upgrade-1,red-upgrade-2,red-upgrade-4)" scope="team">
        <action>
            <set var="red_kit_level" value="3"/>
        </action>
    </trigger>
    <trigger filter="all(not(red-upgrade-4),red-upgrade-1,red-upgrade-2,red-upgrade-3)" scope="team">
        <action>
            <set var="red_kit_level" value="3"/>
        </action>
    </trigger>
    <!-- ALL 4 -->
    <trigger filter="all(red-upgrade-1,red-upgrade-2,red-upgrade-3,red-upgrade-4)" scope="team">
        <action>
            <set var="red_kit_level" value="4"/>
        </action>
    </trigger>
    <!-- Blue -->
    <!-- 1 -->
    <trigger filter="all(blue-upgrade-1,not(blue-upgrade-2),not(blue-upgrade-3),not(blue-upgrade-4))" scope="team">
        <action>
            <set var="blue_kit_level" value="1"/>
        </action>
    </trigger>
    <trigger filter="all(blue-upgrade-2,not(blue-upgrade-1),not(blue-upgrade-3),not(blue-upgrade-4))" scope="team">
        <action>
            <set var="blue_kit_level" value="1"/>
        </action>
    </trigger>
    <trigger filter="all(blue-upgrade-3,not(blue-upgrade-1),not(blue-upgrade-2),not(blue-upgrade-4))" scope="team">
        <action>
            <set var="blue_kit_level" value="1"/>
        </action>
    </trigger>
    <trigger filter="all(blue-upgrade-4,not(blue-upgrade-1),not(blue-upgrade-2),not(blue-upgrade-3))" scope="team">
        <action>
            <set var="blue_kit_level" value="1"/>
        </action>
    </trigger>
    <!-- 2 -->
    <trigger filter="all(blue-upgrade-1,blue-upgrade-2,not(blue-upgrade-3),not(blue-upgrade-4))" scope="team">
        <action>
            <set var="blue_kit_level" value="2"/>
        </action>
    </trigger>
    <trigger filter="all(blue-upgrade-1,blue-upgrade-3,not(blue-upgrade-2),not(blue-upgrade-4))" scope="team">
        <action>
            <set var="blue_kit_level" value="2"/>
        </action>
    </trigger>
    <trigger filter="all(blue-upgrade-1,blue-upgrade-4,not(blue-upgrade-2),not(blue-upgrade-3))" scope="team">
        <action>
            <set var="blue_kit_level" value="2"/>
        </action>
    </trigger>
    <trigger filter="all(blue-upgrade-2,blue-upgrade-3,not(blue-upgrade-1),not(blue-upgrade-4))" scope="team">
        <action>
            <set var="blue_kit_level" value="2"/>
        </action>
    </trigger>
    <trigger filter="all(blue-upgrade-2,blue-upgrade-4,not(blue-upgrade-1),not(blue-upgrade-3))" scope="team">
        <action>
            <set var="blue_kit_level" value="2"/>
        </action>
    </trigger>
    <trigger filter="all(blue-upgrade-3,blue-upgrade-4,not(blue-upgrade-1),not(blue-upgrade-2))" scope="team">
        <action>
            <set var="blue_kit_level" value="2"/>
        </action>
    </trigger>
    <!-- 3 -->
    <trigger filter="all(not(blue-upgrade-1),blue-upgrade-2,blue-upgrade-3,blue-upgrade-4)" scope="team">
        <action>
            <set var="blue_kit_level" value="3"/>
        </action>
    </trigger>
    <trigger filter="all(not(blue-upgrade-2),blue-upgrade-1,blue-upgrade-3,blue-upgrade-4)" scope="team">
        <action>
            <set var="blue_kit_level" value="3"/>
        </action>
    </trigger>
    <trigger filter="all(not(blue-upgrade-3),blue-upgrade-1,blue-upgrade-2,blue-upgrade-4)" scope="team">
        <action>
            <set var="blue_kit_level" value="3"/>
        </action>
    </trigger>
    <trigger filter="all(not(blue-upgrade-4),blue-upgrade-1,blue-upgrade-2,blue-upgrade-3)" scope="team">
        <action>
            <set var="blue_kit_level" value="3"/>
        </action>
    </trigger>
    <!-- ALL 4 -->
    <trigger filter="all(blue-upgrade-1,blue-upgrade-2,blue-upgrade-3,blue-upgrade-4)" scope="team">
        <action>
            <set var="blue_kit_level" value="4"/>
        </action>
    </trigger>
    <!-- Green -->
    <!-- 1 -->
    <trigger filter="all(green-upgrade-1,not(green-upgrade-2),not(green-upgrade-3),not(green-upgrade-4))" scope="team">
        <action>
            <set var="green_kit_level" value="1"/>
        </action>
    </trigger>
    <trigger filter="all(green-upgrade-2,not(green-upgrade-1),not(green-upgrade-3),not(green-upgrade-4))" scope="team">
        <action>
            <set var="green_kit_level" value="1"/>
        </action>
    </trigger>
    <trigger filter="all(green-upgrade-3,not(green-upgrade-1),not(green-upgrade-2),not(green-upgrade-4))" scope="team">
        <action>
            <set var="green_kit_level" value="1"/>
        </action>
    </trigger>
    <trigger filter="all(green-upgrade-4,not(green-upgrade-1),not(green-upgrade-2),not(green-upgrade-3))" scope="team">
        <action>
            <set var="green_kit_level" value="1"/>
        </action>
    </trigger>
    <!-- 2 -->
    <trigger filter="all(green-upgrade-1,green-upgrade-2,not(green-upgrade-3),not(green-upgrade-4))" scope="team">
        <action>
            <set var="green_kit_level" value="2"/>
        </action>
    </trigger>
    <trigger filter="all(green-upgrade-1,green-upgrade-3,not(green-upgrade-2),not(green-upgrade-4))" scope="team">
        <action>
            <set var="green_kit_level" value="2"/>
        </action>
    </trigger>
    <trigger filter="all(green-upgrade-1,green-upgrade-4,not(green-upgrade-2),not(green-upgrade-3))" scope="team">
        <action>
            <set var="green_kit_level" value="2"/>
        </action>
    </trigger>
    <trigger filter="all(green-upgrade-2,green-upgrade-3,not(green-upgrade-1),not(green-upgrade-4))" scope="team">
        <action>
            <set var="green_kit_level" value="2"/>
        </action>
    </trigger>
    <trigger filter="all(green-upgrade-2,green-upgrade-4,not(green-upgrade-1),not(green-upgrade-3))" scope="team">
        <action>
            <set var="green_kit_level" value="2"/>
        </action>
    </trigger>
    <trigger filter="all(green-upgrade-3,green-upgrade-4,not(green-upgrade-1),not(green-upgrade-2))" scope="team">
        <action>
            <set var="green_kit_level" value="2"/>
        </action>
    </trigger>
    <!-- 3 -->
    <trigger filter="all(not(green-upgrade-1),green-upgrade-2,green-upgrade-3,green-upgrade-4)" scope="team">
        <action>
            <set var="green_kit_level" value="3"/>
        </action>
    </trigger>
    <trigger filter="all(not(green-upgrade-2),green-upgrade-1,green-upgrade-3,green-upgrade-4)" scope="team">
        <action>
            <set var="green_kit_level" value="3"/>
        </action>
    </trigger>
    <trigger filter="all(not(green-upgrade-3),green-upgrade-1,green-upgrade-2,green-upgrade-4)" scope="team">
        <action>
            <set var="green_kit_level" value="3"/>
        </action>
    </trigger>
    <trigger filter="all(not(green-upgrade-4),green-upgrade-1,green-upgrade-2,green-upgrade-3)" scope="team">
        <action>
            <set var="green_kit_level" value="3"/>
        </action>
    </trigger>
    <!-- ALL 4 -->
    <trigger filter="all(green-upgrade-1,green-upgrade-2,green-upgrade-3,green-upgrade-4)" scope="team">
        <action>
            <set var="green_kit_level" value="4"/>
        </action>
    </trigger>
    <!-- Yellow -->
    <!-- 1 -->
    <trigger filter="all(yellow-upgrade-1,not(yellow-upgrade-2),not(yellow-upgrade-3),not(yellow-upgrade-4))" scope="team">
        <action>
            <set var="yellow_kit_level" value="1"/>
        </action>
    </trigger>
    <trigger filter="all(yellow-upgrade-2,not(yellow-upgrade-1),not(yellow-upgrade-3),not(yellow-upgrade-4))" scope="team">
        <action>
            <set var="yellow_kit_level" value="1"/>
        </action>
    </trigger>
    <trigger filter="all(yellow-upgrade-3,not(yellow-upgrade-1),not(yellow-upgrade-2),not(yellow-upgrade-4))" scope="team">
        <action>
            <set var="yellow_kit_level" value="1"/>
        </action>
    </trigger>
    <trigger filter="all(yellow-upgrade-4,not(yellow-upgrade-1),not(yellow-upgrade-2),not(yellow-upgrade-3))" scope="team">
        <action>
            <set var="yellow_kit_level" value="1"/>
        </action>
    </trigger>
    <!-- 2 -->
    <trigger filter="all(yellow-upgrade-1,yellow-upgrade-2,not(yellow-upgrade-3),not(yellow-upgrade-4))" scope="team">
        <action>
            <set var="yellow_kit_level" value="2"/>
        </action>
    </trigger>
    <trigger filter="all(yellow-upgrade-1,yellow-upgrade-3,not(yellow-upgrade-2),not(yellow-upgrade-4))" scope="team">
        <action>
            <set var="yellow_kit_level" value="2"/>
        </action>
    </trigger>
    <trigger filter="all(yellow-upgrade-1,yellow-upgrade-4,not(yellow-upgrade-2),not(yellow-upgrade-3))" scope="team">
        <action>
            <set var="yellow_kit_level" value="2"/>
        </action>
    </trigger>
    <trigger filter="all(yellow-upgrade-2,yellow-upgrade-3,not(yellow-upgrade-1),not(yellow-upgrade-4))" scope="team">
        <action>
            <set var="yellow_kit_level" value="2"/>
        </action>
    </trigger>
    <trigger filter="all(yellow-upgrade-2,yellow-upgrade-4,not(yellow-upgrade-1),not(yellow-upgrade-3))" scope="team">
        <action>
            <set var="yellow_kit_level" value="2"/>
        </action>
    </trigger>
    <trigger filter="all(yellow-upgrade-3,yellow-upgrade-4,not(yellow-upgrade-1),not(yellow-upgrade-2))" scope="team">
        <action>
            <set var="yellow_kit_level" value="2"/>
        </action>
    </trigger>
    <!-- 3 -->
    <trigger filter="all(not(yellow-upgrade-1),yellow-upgrade-2,yellow-upgrade-3,yellow-upgrade-4)" scope="team">
        <action>
            <set var="yellow_kit_level" value="3"/>
        </action>
    </trigger>
    <trigger filter="all(not(yellow-upgrade-2),yellow-upgrade-1,yellow-upgrade-3,yellow-upgrade-4)" scope="team">
        <action>
            <set var="yellow_kit_level" value="3"/>
        </action>
    </trigger>
    <trigger filter="all(not(yellow-upgrade-3),yellow-upgrade-1,yellow-upgrade-2,yellow-upgrade-4)" scope="team">
        <action>
            <set var="yellow_kit_level" value="3"/>
        </action>
    </trigger>
    <trigger filter="all(not(yellow-upgrade-4),yellow-upgrade-1,yellow-upgrade-2,yellow-upgrade-3)" scope="team">
        <action>
            <set var="yellow_kit_level" value="3"/>
        </action>
    </trigger>
    <!-- ALL 4 -->
    <trigger filter="all(yellow-upgrade-1,yellow-upgrade-2,yellow-upgrade-3,yellow-upgrade-4)" scope="team">
        <action>
            <set var="yellow_kit_level" value="4"/>
        </action>
    </trigger>
    <!-- When upgrade occurs or when player respawns apply the kits
         kits split into forced and non-forced for most optimal inventory merge
         for players upgraded in middle of life
    -->
    <trigger filter="red-alive-kit-1-upgrade" scope="player">
        <action>
            <kit id="spawn-kit-1"/>
            <kit id="spawn-kit-1-force"/>
        </action>
    </trigger>
    <trigger filter="red-alive-kit-2-upgrade" scope="player">
        <action>
            <kit id="spawn-kit-2"/>
            <kit id="spawn-kit-2-force"/>
        </action>
    </trigger>
    <trigger filter="red-alive-kit-3-upgrade" scope="player">
        <action>
            <kit id="spawn-kit-3"/>
            <kit id="spawn-kit-3-force"/>
        </action>
    </trigger>
    <trigger filter="red-alive-kit-4-upgrade" scope="player">
        <action>
            <kit id="spawn-kit-4"/>
            <kit id="spawn-kit-4-force"/>
        </action>
    </trigger>
    <trigger filter="blue-alive-kit-1-upgrade" scope="player">
        <action>
            <kit id="spawn-kit-1"/>
            <kit id="spawn-kit-1-force"/>
        </action>
    </trigger>
    <trigger filter="blue-alive-kit-2-upgrade" scope="player">
        <action>
            <kit id="spawn-kit-2"/>
            <kit id="spawn-kit-2-force"/>
        </action>
    </trigger>
    <trigger filter="blue-alive-kit-3-upgrade" scope="player">
        <action>
            <kit id="spawn-kit-3"/>
            <kit id="spawn-kit-3-force"/>
        </action>
    </trigger>
    <trigger filter="blue-alive-kit-4-upgrade" scope="player">
        <action>
            <kit id="spawn-kit-4"/>
            <kit id="spawn-kit-4-force"/>
        </action>
    </trigger>
    <trigger filter="green-alive-kit-1-upgrade" scope="player">
        <action>
            <kit id="spawn-kit-1"/>
            <kit id="spawn-kit-1-force"/>
        </action>
    </trigger>
    <trigger filter="green-alive-kit-2-upgrade" scope="player">
        <action>
            <kit id="spawn-kit-2"/>
            <kit id="spawn-kit-2-force"/>
        </action>
    </trigger>
    <trigger filter="green-alive-kit-3-upgrade" scope="player">
        <action>
            <kit id="spawn-kit-3"/>
            <kit id="spawn-kit-3-force"/>
        </action>
    </trigger>
    <trigger filter="green-alive-kit-4-upgrade" scope="player">
        <action>
            <kit id="spawn-kit-4"/>
            <kit id="spawn-kit-4-force"/>
        </action>
    </trigger>
    <trigger filter="yellow-alive-kit-1-upgrade" scope="player">
        <action>
            <kit id="spawn-kit-1"/>
            <kit id="spawn-kit-1-force"/>
        </action>
    </trigger>
    <trigger filter="yellow-alive-kit-2-upgrade" scope="player">
        <action>
            <kit id="spawn-kit-2"/>
            <kit id="spawn-kit-2-force"/>
        </action>
    </trigger>
    <trigger filter="yellow-alive-kit-3-upgrade" scope="player">
        <action>
            <kit id="spawn-kit-3"/>
            <kit id="spawn-kit-3-force"/>
        </action>
    </trigger>
    <trigger filter="yellow-alive-kit-4-upgrade" scope="player">
        <action>
            <kit id="spawn-kit-4"/>
            <kit id="spawn-kit-4-force"/>
        </action>
    </trigger>
</actions>
<spawners>
    <!-- "?" Box - Wool spawners -->
    <spawner spawn-region="purple-floor1-wool" player-region="purple-woolroom" max-entities="1" delay="15s">
        <item amount="1" material="wool" damage="10" lore="`4Warning: No Safeties, No Placing"/>
    </spawner>
    <spawner spawn-region="cyan-floor1-wool" player-region="cyan-woolroom" max-entities="1" delay="15s">
        <item amount="1" material="wool" damage="9" lore="`4Warning: No Safeties, No Placing"/>
    </spawner>
    <spawner spawn-region="lime-floor1-wool" player-region="lime-woolroom" max-entities="1" delay="15s">
        <item amount="1" material="wool" damage="5" lore="`4Warning: No Safeties, No Placing"/>
    </spawner>
    <spawner spawn-region="orange-floor1-wool" player-region="orange-woolroom" max-entities="1" delay="15s">
        <item amount="1" material="wool" damage="1" lore="`4Warning: No Safeties, No Placing"/>
    </spawner>
    <!-- "?" Box - Stained glass spawners -->
    <spawner spawn-region="purple-floor2-wool" player-region="purple-woolroom" max-entities="8" delay="10s">
        <item amount="4" material="stained_glass" damage="10"/>
    </spawner>
    <spawner spawn-region="cyan-floor2-wool" player-region="cyan-woolroom" max-entities="8" delay="10s">
        <item amount="4" material="stained_glass" damage="9"/>
    </spawner>
    <spawner spawn-region="lime-floor2-wool" player-region="lime-woolroom" max-entities="8" delay="10s">
        <item amount="4" material="stained_glass" damage="5"/>
    </spawner>
    <spawner spawn-region="orange-floor2-wool" player-region="orange-woolroom" max-entities="8" delay="10s">
        <item amount="4" material="stained_glass" damage="1"/>
    </spawner>
    <!-- "?" Box - Gapple spawners -->
    <spawner spawn-region="purple-floor3-wool" player-region="purple-woolroom" max-entities="2" delay="45s">
        <item amount="1" material="golden apple"/>
    </spawner>
    <spawner spawn-region="cyan-floor3-wool" player-region="cyan-woolroom" max-entities="2" delay="45s">
        <item amount="1" material="golden apple"/>
    </spawner>
    <spawner spawn-region="lime-floor3-wool" player-region="lime-woolroom" max-entities="2" delay="45s">
        <item amount="1" material="golden apple"/>
    </spawner>
    <spawner spawn-region="orange-floor3-wool" player-region="orange-woolroom" max-entities="2" delay="45s">
        <item amount="1" material="golden apple"/>
    </spawner>
    <!-- Center spawners -->
    <spawner spawn-region="center-spawner" player-region="center-area" max-entities="1" delay="0.6s">
        <potion damage="2">
            <effect duration="35s" amplifier="10">jump boost</effect>
            <effect duration="35s" amplifier="1">absorption</effect>
            <effect duration="12s" amplifier="1">regeneration</effect>
        </potion>
    </spawner>
    <spawner spawn-region="center-spawner" player-region="center-area" max-entities="1" delay="30s">
        <item amount="1" material="golden apple"/>
    </spawner>
</spawners>
<regions>
    <!-- Spawns -->
    <cylinder id="red-spawn-point" base="0.5,85,157.5" radius=".2" height="0"/>
    <cylinder id="blue-spawn-point" base="157.5,85,0.5" radius=".2" height="0"/>
    <cylinder id="green-spawn-point" base="0.5,85,-156.5" radius=".2" height="0"/>
    <cylinder id="yellow-spawn-point" base="-156.5,85,0.5" radius=".2" height="0"/>
    <!-- Monuments -->
    <union id="red-bed">
        <block>0,73,122</block>
        <block>0,73,121</block>
    </union>
    <union id="blue-bed">
        <block>122,73,0</block>
        <block>121,73,0</block>
    </union>
    <union id="green-bed">
        <block>0,73,-122</block>
        <block>0,73,-121</block>
    </union>
    <union id="yellow-bed">
        <block>-122,73,0</block>
        <block>-121,73,0</block>
    </union>
    <!-- Protect spawns, spawner and jumppads -->
    <union id="protect-stuff">
        <cuboid min="116,60,28" max="175,71,-28"/> <!-- blue castle lower -->
        <cuboid min="-175,60,-28" max="-115,71,28"/> <!-- yellow castle lower -->
        <cuboid min="-28,60,116" max="28,71,175"/> <!-- red castle lower -->
        <cuboid min="-28,60,-175" max="28,71,-115"/> <!-- green castle lower -->
        <cuboid min="128,0,50" max="190,200,-50"/> <!-- blue castle upper -->
        <cuboid min="-127,0,50" max="-189,200,-50"/> <!-- yellow castle upper -->
        <cuboid min="50,0,128" max="-50,200,190"/> <!-- red castle upper -->
        <cuboid min="50,0,-127" max="-50,200,-189"/> <!-- green castle upper -->
        <cylinder id="center-area" base="0.5,69,0.5" radius="8" height="15"/> <!-- center spawner -->
        <cuboid id="blue-pad-left-upper" min="116,83,19" max="120,86,23"/>
        <cuboid id="blue-pad-right-upper" min="116,83,-22" max="120,86,-18"/>
        <cuboid id="blue-pad-left-lower" min="76,73,13" max="80,76,9"/>
        <cuboid id="blue-pad-right-lower" min="76,73,-12" max="80,76,-8"/>
        <cuboid id="yellow-pad-left-upper" min="-115,83,19" max="-119,86,23"/>
        <cuboid id="yellow-pad-right-upper" min="-115,83,-22" max="-119,86,-18"/>
        <cuboid id="yellow-pad-left-lower" min="-75,73,13" max="-79,76,9"/>
        <cuboid id="yellow-pad-right-lower" min="-75,73,-12" max="-79,76,-8"/>
        <cuboid id="red-pad-left-upper" min="-22,83,119" max="-18,86,116"/>
        <cuboid id="red-pad-right-upper" min="23,83,119" max="19,86,116"/>
        <cuboid id="red-pad-left-lower" min="-12,73,79" max="-8,76,76"/>
        <cuboid id="red-pad-right-lower" min="13,73,79" max="9,76,76"/>
        <cuboid id="green-pad-left-upper" min="-22,83,-118" max="-18,86,-115"/>
        <cuboid id="green-pad-right-upper" min="23,83,-118" max="19,86,-115"/>
        <cuboid id="green-pad-left-lower" min="-12,73,-78" max="-8,76,-75"/>
        <cuboid id="green-pad-right-lower" min="13,73,-78" max="9,76,-75"/>
        <cuboid id="purple-woolroom" min="56,69,56" max="66,80,66"/>
        <cuboid id="cyan-woolroom" min="56,69,-55" max="66,80,-65"/>
        <cuboid id="lime-woolroom" min="-55,69,-55" max="-65,80,-65"/>
        <cuboid id="orange-woolroom" min="-55,69,56" max="-65,80,66"/>
        <cuboid id="clouds" min="-120,120,-120" max="120,250,120"/>
    </union>
    <!-- Prevent building outside of course -->
    <negative id="not-build-stuff">
        <union id="build-stuff">
            <cuboid min="-128,61,-25" max="135,86,26"/> <!-- blue and yellow strip -->
            <cuboid min="-25,61,135" max="26,86,-135"/> <!-- green and red strip -->
            <cuboid min="-65,61,-65" max="66,86,66"/> <!-- woolroom square -->
        </union>
    </negative>
    <!-- Spawners -->
    <point id="purple-floor1-wool">61,71,61</point>
    <point id="purple-floor2-wool">61,75,61</point>
    <point id="purple-floor3-wool">61,79,61</point>
    <point id="cyan-floor1-wool">61,71,-60</point>
    <point id="cyan-floor2-wool">61,75,-60</point>
    <point id="cyan-floor3-wool">61,79,-60</point>
    <point id="orange-floor1-wool">-60,71,61</point>
    <point id="orange-floor2-wool">-60,75,61</point>
    <point id="orange-floor3-wool">-60,79,61</point>
    <point id="lime-floor1-wool">-60,71,-60</point>
    <point id="lime-floor2-wool">-60,75,-60</point>
    <point id="lime-floor3-wool">-60,79,-60</point>
    <cuboid id="center-spawner" min="0,72,0" max="1.5,73,1.5"/>
    <!-- Applicators -->
    <apply block-break="tnt-immune"/>
    <apply block="original-block-protection-filter" message="You can't remove that block!"/>
    <apply block-break="never" block-place="never" region="protect-stuff" message="This area can't be modified!"/>
    <apply block-place="never" region="not-build-stuff" message="This area can't be built in!"/>
    <apply block-place="no-lime-place" message="You can't place the Lime wool at this time!"/>
    <apply block-place="no-purple-place" message="You can't place the Purple wool at this time!"/>
    <apply block-place="no-orange-place" message="You can't place the Orange wool at this time!"/>
    <apply block-place="no-cyan-place" message="You can't place the Cyan wool at this time!"/>
    <!-- Jump pads -->
    <apply velocity="-1.95,1.6,-0.6" kit="absorption-kit-long" region="blue-pad-left-upper"/>
    <apply velocity="-1.95,1.6,0.6" kit="absorption-kit-long" region="blue-pad-right-upper"/>
    <apply velocity="-1.3,1.3,0" kit="absorption-kit-short" region="blue-pad-left-lower"/>
    <apply velocity="-1.3,1.3,0" kit="absorption-kit-short" region="blue-pad-right-lower"/>
    <apply velocity="1.95,1.6,-0.6" kit="absorption-kit-long" region="yellow-pad-left-upper"/>
    <apply velocity="1.95,1.6,0.6" kit="absorption-kit-long" region="yellow-pad-right-upper"/>
    <apply velocity="1.3,1.3,0" kit="absorption-kit-short" region="yellow-pad-left-lower"/>
    <apply velocity="1.3,1.3,0" kit="absorption-kit-short" region="yellow-pad-right-lower"/>
    <apply velocity="0.6,1.6,-1.95" kit="absorption-kit-long" region="red-pad-left-upper"/>
    <apply velocity="-0.6,1.6,-1.95" kit="absorption-kit-long" region="red-pad-right-upper"/>
    <apply velocity="0,1.3,-1.3" kit="absorption-kit-short" region="red-pad-left-lower"/>
    <apply velocity="0,1.3,-1.3" kit="absorption-kit-short" region="red-pad-right-lower"/>
    <apply velocity="0.6,1.6,1.95" kit="absorption-kit-long" region="green-pad-left-upper"/>
    <apply velocity="-0.6,1.6,1.95" kit="absorption-kit-long" region="green-pad-right-upper"/>
    <apply velocity="0,1.3,1.3" kit="absorption-kit-short" region="green-pad-left-lower"/>
    <apply velocity="0,1.3,1.3" kit="absorption-kit-short" region="green-pad-right-lower"/>
</regions>
<itemkeep>
    <item>smooth brick</item>
    <item>wool</item>
    <item>log</item>
    <item>wood:5</item>
    <item>golden apple</item>
    <item>arrow</item>
    <item>ladder</item>
    <item>bucket</item>
    <item>stained glass</item>
    <item>ender stone</item>
    <item>ladder</item>
</itemkeep>
<itemremove>
    <!-- Weapons -->
    <item>wood sword</item>
    <item>stone sword</item>
    <item>iron sword</item>
    <item>bow</item>
    <!-- Tools -->
    <item>iron pickaxe</item>
    <item>diamond pickaxe</item>
    <item>iron axe</item>
    <item>diamond axe</item>
    <item>iron spade</item>
    <item>diamond spade</item>
    <item>water bucket</item>
    <!-- Armor -->
    <item>leather helmet</item>
    <item>leather chestplate</item>
    <item>leather leggings</item>
    <item>leather boots</item>
    <item>chainmail leggings</item>
    <item>chainmail boots</item>
    <item>iron helmet</item>
    <item>iron leggings</item>
    <item>iron boots</item>
    <item>diamond leggings</item>
    <item>diamond boots</item>
    <item>diamond helmet</item>
    <!-- Misc -->
    <item>double plant</item>
    <item>egg</item>
    <item>bed</item>
    <item>compass</item>
</itemremove>
<tnt>
    <instantignite>true</instantignite>
    <blockdamage>true</blockdamage>
    <friendly-defuse>off</friendly-defuse>
    <fuse>2.5s</fuse>
    <power>2.4</power>
</tnt>
<crafting>
    <disable>wool</disable>
</crafting>
<disabledamage>
    <damage ally="true" self="false" enemy="false" other="false">block explosion</damage>
</disabledamage>
<kill-rewards>
    <kill-reward>
        <item material="stained clay" team-color="true" amount="16"/>
    </kill-reward>
    <kill-reward>
        <item material="tnt" amount="2"/>
        <filter>
            <kill-streak count="2" repeat="true"/>
        </filter>
    </kill-reward>
    <kill-reward>
        <item material="fireball" projectile="throwable-fireball" amount="1"/>
        <filter>
            <kill-streak count="3" repeat="true"/>
        </filter>
    </kill-reward>
</kill-rewards>
<world>
    <timeset>18000</timeset>
    <timelock>on</timelock>
</world>
<hunger>
    <depletion>off</depletion>
</hunger>
<maxbuildheight>86</maxbuildheight>
</map>
