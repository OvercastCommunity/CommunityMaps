<map proto="1.5.0">
<name>Don't Explode My Heart</name>
<version>1.0.1</version>
<objective>Break both of your enemy's hearts and leak their heart-shaped core</objective>
<created>2025-09-06</created>
<gamemode>dtc</gamemode>
<gamemode>dtm</gamemode>
<include id="gapple-kill-reward" />
<authors>
    <author uuid="64e840c8-4fb5-4659-a36b-ff93e2f6113a" /> <!-- Javg_ -->
</authors>
<contributors>
    <contributor uuid="c25a6f7b-4c42-40da-8cd6-add53f0c84eb" contribution="Feedback" /> <!-- arcadeboss -->
</contributors>
<teams>
    <team id="red-team" color="dark red" max="36" max-overfill="40">Red</team>
    <team id="yellow-team" color="yellow" max="36" max-overfill="40">Yellow</team>
</teams>
<kits>
    <kit id="spawn-kit">
        <item slot="0" material="iron sword" unbreakable="true" />
        <item slot="1" material="bow" unbreakable="true">
            <enchantment>infinity</enchantment>
        </item>
        <item slot="2" material="diamond pickaxe" unbreakable="true" />
        <item slot="3" material="iron axe" unbreakable="true" />
        <item slot="4" material="wood" amount="64" damage="2" />
        <item slot="5" material="stained glass" amount="64" team-color="true" />
        <item slot="7" material="bucket" />
        <item slot="8" material="golden apple" />
        <item slot="28" material="arrow" />
        <item slot="31" material="wood" damage="2" amount="64" />
        <item slot="32" material="stained glass" amount="64" team-color="true" />
        <helmet material="leather helmet" team-color="true" />
        <chestplate material="chainmail chestplate">
            <enchantment level="4">blast protection</enchantment>
        </chestplate>
        <boots material="leather boots" team-color="true">
            <enchantment level="3">depth strider</enchantment>
        </boots>
    </kit>
</kits>
<spawns>
    <default>
        <region yaw="-90">
            <point>0,62,0</point>
        </region>
    </default>
    <spawn team="red-team" kit="spawn-kit">
        <region yaw="-90">
            <cuboid min="-15,13,-105" max="-12,13,-102" />
        </region>
        <region yaw="90">
            <cuboid min="16,13,-102" max="13,13,-105" />
        </region>
    </spawn>
    <spawn team="yellow-team" kit="spawn-kit">
        <region yaw="90">
            <cuboid min="16,13,105" max="13,13,102" />
        </region>
        <region yaw="-90">
            <cuboid min="-15,13,102" max="-12,13,105" />
        </region>
    </spawn>
</spawns>
<filters>
    <material id="only-iron">iron block</material>
    <deny id="tnt-immune">
        <all>
            <cause>explosion</cause>
            <any>
                <material>quartz block</material>
                <material>quartz stairs</material>
                <material>step:7</material>
                <material>double step:7</material>
                <material>iron plate</material>
                <material>chest</material>
                <material>trapped chest</material>
            </any>
        </all>
    </deny>
</filters>
<regions>
    <union id="red-base">
        <complement id="red-lower-ring">
            <circle id="red-circle" center="0.5,-89.5" radius="60.5" />
            <complement id="red-central-void">
                <circle center="0.5,-89.5" radius="39.7" />
                <rectangle min="-7,-50" max="-6,-51" />
                <rectangle min="-11,-51" max="-10,-52" />
                <rectangle min="7,-50" max="8,-51" />
                <rectangle min="11,-51" max="12,-52" />
                <rectangle min="-6,-129" max="-7,-128" />
                <rectangle min="-10,-128" max="-11,-127" />
                <rectangle min="8,-129" max="7,-128" />
                <rectangle min="12,-128" max="11,-127" />
            </complement>
        </complement>
        <complement id="red-upper-front">
            <cylinder base="0.5,14,-89.5" radius="40.5" height="32" />
            <circle center="0.5,-89.5" radius="19.5" />
            <rectangle min="-40,-79" max="41,-130" />
            <rectangle min="35,-67" max="39,-79" />
            <rectangle min="-34,-67" max="-38,-79" />
            <rectangle min="-34,-79" max="-20,-78" />
            <rectangle min="-34,-79" max="-22,-77" />
            <rectangle min="-34,-79" max="-24,-76" />
            <rectangle min="-34,-79" max="-26,-75" />
            <rectangle min="-34,-79" max="-28,-74" />
            <rectangle min="-34,-79" max="-30,-73" />
            <rectangle min="-34,-79" max="-32,-72" />
            <rectangle min="35,-79" max="33,-72" />
            <rectangle min="35,-79" max="31,-73" />
            <rectangle min="35,-79" max="29,-74" />
            <rectangle min="35,-79" max="27,-75" />
            <rectangle min="35,-79" max="25,-76" />
            <rectangle min="35,-79" max="23,-77" />
            <rectangle min="35,-79" max="21,-78" />
        </complement>
        <rectangle id="red-spawn" min="-22,-89" max="23,-115" />
        <rectangle id="red-left-monument-area" min="-35,-67" max="-80,-112" />
        <rectangle id="red-right-monument-area" min="36,-112" max="81,-67" />
    </union>
    <union id="yellow-base">
        <complement id="yellow-lower-ring">
            <circle id="yellow-circle" center="0.5,89.5" radius="60.5" />
            <complement id="yellow-central-void">
                <circle center="0.5,89.5" radius="39.7" />
                <rectangle min="-6,50" max="-7,51" />
                <rectangle min="-10,51" max="-11,52" />
                <rectangle min="8,50" max="7,51" />
                <rectangle min="12,51" max="11,52" />
                <rectangle min="-7,129" max="-6,128" />
                <rectangle min="-11,128" max="-10,127" />
                <rectangle min="7,129" max="8,128" />
                <rectangle min="11,128" max="12,127" />
            </complement>
        </complement>
        <complement id="yellow-upper-front">
            <cylinder base="0.5,14,89.5" radius="40.5" height="32" />
            <circle center="0.5,89.5" radius="19.5" />
            <rectangle min="41,79" max="-40,130" />
            <rectangle min="35,67" max="39,79" />
            <rectangle min="-34,67" max="-38,79" />
            <rectangle min="-34,79" max="-32,72" />
            <rectangle min="-34,79" max="-30,73" />
            <rectangle min="-34,79" max="-28,74" />
            <rectangle min="-34,79" max="-26,75" />
            <rectangle min="-34,79" max="-24,76" />
            <rectangle min="-34,79" max="-22,77" />
            <rectangle min="-34,79" max="-20,78" />
            <rectangle min="35,79" max="21,78" />
            <rectangle min="35,79" max="23,77" />
            <rectangle min="35,79" max="25,76" />
            <rectangle min="35,79" max="27,75" />
            <rectangle min="35,79" max="29,74" />
            <rectangle min="35,79" max="31,73" />
            <rectangle min="35,79" max="33,72" />
        </complement>
        <rectangle id="yellow-spawn" min="23,89" max="-22,115" />
        <rectangle id="yellow-left-monument-area" min="36,67" max="81,112" />
        <rectangle id="yellow-right-monument-area" min="-35,112" max="-80,67" />
    </union>
    <union id="spawns">
        <region id="red-spawn" />
        <region id="yellow-spawn" />
    </union>
    <union id="monuments">
        <cuboid id="red-left-heart" min="-80,17,-86" max="-53,42,-93" />
        <cuboid id="red-right-heart" min="54,17,-86" max="81,42,-93" />
        <cuboid id="yellow-left-heart" min="81,17,86" max="54,42,93" />
        <cuboid id="yellow-right-heart" min="-53,17,86" max="-80,42,93" />
    </union>
    <negative id="void-area">
        <region id="red-base" />
        <region id="yellow-base" />
        <complement id="mid">
            <rectangle min="49,-53" max="-48,53" />
            <region id="red-circle" />
            <region id="yellow-circle" />
        </complement>
    </negative>
    <union id="spawners">
        <cuboid id="red-fireball-spawn-region" min="41,6.2,2" max="39,7,3" />
        <cuboid id="red-fireball-player-region" min="44,6,0" max="36,10,5" />
        <cuboid id="yellow-fireball-spawn-region" min="-40,6.2,-2" max="-38,7,-3" />
        <cuboid id="yellow-fireball-player-region" min="-43,6,0" max="-35,10,-5" />
        <cuboid id="red-west-speed-spawn-region" min="-33,6.2,-50" max="-30,7,-53" />
        <cuboid id="red-west-speed-player-region" min="-27,6,-47" max="-36,8,-56" />
        <cuboid id="red-east-speed-spawn-region" min="31,6.2,-50" max="34,7,-53" />
        <cuboid id="red-east-speed-player-region" min="28,6,-47" max="37,8,-56" />
        <cuboid id="yellow-west-speed-spawn-region" min="-30,6.2,50" max="-33,7,53" />
        <cuboid id="yellow-west-speed-player-region" min="-27,6,47" max="-36,8,56" />
        <cuboid id="yellow-east-speed-spawn-region" min="34,6.2,50" max="31,7,53" />
        <cuboid id="yellow-east-speed-player-region" min="28,6,47" max="37,8,56" />
    </union>
    <union id="portal-protections">
        <cuboid min="4,19,63" max="-3,25,70" />
        <cuboid min="28,20,66" max="35,26,73" />
        <cuboid min="-27,20,73" max="-34,26,66" />
        <cuboid min="-2,20,-63" max="4,25,-70" />
        <cuboid min="-27,20,-66" max="-34,26,-73" />
        <cuboid min="28,20,-73" max="35,26,-66" />
    </union>
    <apply region="void-area" block="never" message="You may not build in the void" />
    <apply region="spawns" block-break="only-iron" block-place="not(participating)" message="You may only break iron in the spawn" />
    <apply region="red-spawn" enter="red-team" message="You may not enter your enemy's spawn" />
    <apply region="yellow-spawn" enter="yellow-team" message="You may not enter your enemy's spawn" />
    <apply region="portal-protections" block="never" message="You may not block the portals" />
    <apply block-break="tnt-immune" />
</regions>
<actions>
    <trigger scope="player">
        <filter>
            <pulse duration="0.1s" period="0.5s">
                <holding ignore-durability="true" ignore-metadata="true" ignore-name="true" ignore-enchantments="true">
                    <item material="fireball" />
                </holding>
            </pulse>
        </filter>
        <action>
            <replace-item keep-amount="true" keep-enchants="true" ignore-metadata="true">
                <find material="fireball" />
                <replace material="fireball" name="`d`lFireball" lore="`7Right-click to launch!" projectile="fireball-projectile" />
            </replace-item>
        </action>
    </trigger>
</actions>
<portals protect="true" smooth="true">
    <!-- YELLOW -->
    <!-- SPAWN TO CORE -->
    <portal yaw="@135">
        <region>
            <cuboid min="7,13,111" max="4,16,112" />
        </region>
        <destination>
            <point>29.5,6,139.5</point>
        </destination>
    </portal>
    <!-- SPAWN TO CORE -->
    <portal yaw="@-135">
        <region>
            <cuboid min="-3,13,111" max="-6,16,112" />
        </region>
        <destination>
            <point>-28.5,6,139.5</point>
        </destination>
    </portal>
    <!-- SPAWN TO UPPER FRONT -->
    <portal yaw="@180">
        <region>
            <cuboid min="-1,13,93" max="2,16,92" />
        </region>
        <destination>
            <point>0.5,20,68</point>
        </destination>
    </portal>
    <!-- UPPER FRONT TO SPAWN -->
    <portal yaw="@0" filter="yellow-team">
        <region>
            <cuboid min="2,20,69" max="-1,23,70" />
        </region>
        <destination>
            <point>0.5,13,94</point>
        </destination>
    </portal>
    <!-- UPPER FRONT TO RIGHT MONUMENT -->
    <portal yaw="@-90" filter="yellow-team">
        <region>
            <cuboid min="-32,20,71" max="-33,23,68" />
        </region>
        <destination>
            <point>-71.5,6,89.5</point>
        </destination>
    </portal>
    <!-- UPPER FRONT TO LEFT MONUMENT -->
    <portal yaw="@90" filter="yellow-team">
        <region>
            <cuboid min="33,20,68" max="34,23,71" />
        </region>
        <destination>
            <point>72.5,6,89.5</point>
        </destination>
    </portal>
    <!-- RED -->
    <!-- SPAWN TO CORE -->
    <portal yaw="@-45">
        <region>
            <cuboid min="-6,13,-111" max="-3,16,-112" />
        </region>
        <destination>
            <point>-28.5,6,-139.5</point>
        </destination>
    </portal>
    <!-- SPAWN TO CORE -->
    <portal yaw="@45">
        <region>
            <cuboid min="4,13,-111" max="7,16,-112" />
        </region>
        <destination>
            <point>29.5,6,-139.5</point>
        </destination>
    </portal>
    <!-- SPAWN TO UPPER FRONT -->
    <portal yaw="@0">
        <region>
            <cuboid min="2,13,-93" max="-1,16,-92" />
        </region>
        <destination>
            <point>0.5,20,-68</point>
        </destination>
    </portal>
    <!-- UPPER FRONT TO SPAWN -->
    <portal yaw="@180" filter="red-team">
        <region>
            <cuboid min="-1,20,-69" max="2,23,-70" />
        </region>
        <destination>
            <point>0.5,13,-94</point>
        </destination>
    </portal>
    <!-- UPPER FRONT TO RIGHT MONUMENT -->
    <portal yaw="@90" filter="red-team">
        <region>
            <cuboid min="33,20,-71" max="34,23,-68" />
        </region>
        <destination>
            <point>72.5,6,-89.5</point>
        </destination>
    </portal>
    <!-- UPPER FRONT TO LEFT MONUMENT -->
    <portal yaw="@-90" filter="red-team">
        <region>
            <cuboid min="-32,20,-68" max="-33,23,-71" />
        </region>
        <destination>
            <point>-71.5,6,-89.5</point>
        </destination>
    </portal>
</portals>
<spawners>
    <spawner spawn-region="red-fireball-spawn-region" player-region="red-fireball-player-region" max-entities="2" delay="10s">
        <item material="fireball" name="`d`lFireball" lore="`7Right-click to launch!" projectile="fireball-projectile" />
    </spawner>
    <spawner spawn-region="yellow-fireball-spawn-region" player-region="yellow-fireball-player-region" max-entities="2" delay="10s">
        <item material="fireball" name="`d`lFireball" lore="`7Right-click to launch!" projectile="fireball-projectile" />
    </spawner>
    <spawner spawn-region="red-west-speed-spawn-region" player-region="red-west-speed-player-region" delay="1s">
        <potion damage="2">
            <effect amplifier="2" duration="20s">speed</effect>
        </potion>
    </spawner>
    <spawner spawn-region="red-east-speed-spawn-region" player-region="red-east-speed-player-region" delay="1s">
        <potion damage="2">
            <effect amplifier="2" duration="20s">speed</effect>
        </potion>
    </spawner>
    <spawner spawn-region="yellow-west-speed-spawn-region" player-region="yellow-west-speed-player-region" delay="1s">
        <potion damage="2">
            <effect amplifier="2" duration="20s">speed</effect>
        </potion>
    </spawner>
    <spawner spawn-region="yellow-east-speed-spawn-region" player-region="yellow-east-speed-player-region" delay="1s">
        <potion damage="2">
            <effect amplifier="2" duration="20s">speed</effect>
        </potion>
    </spawner>
</spawners>
<projectiles>
    <projectile id="fireball-projectile" name="`d`lFireball" power="3" damage="4" click="right" destroy-filter="never" cooldown="1s" projectile="Fireball" />
</projectiles>
<renewables>
    <renewable region="spawns" renew-filter="only-iron" rate="0.5" avoid-players="3" />
</renewables>
<cores name="Heart Core" mode-changes="true" required="true" leak="4">
    <core id="red-core" team="red-team">
        <region>
            <cuboid min="-5,29,-137" max="6,39,-142" />
        </region>
    </core>
    <core id="yellow-core" team="yellow-team">
        <region>
            <cuboid min="6,29,137" max="-5,39,142" />
        </region>
    </core>
</cores>
<destroyables materials="coal block" show-progress="true" completion="95">
    <destroyable id="red-left-heart-destroyable" name="Left Heart" owner="red-team">
        <region>
            <region id="red-left-heart" />
        </region>
    </destroyable>
    <destroyable id="red-right-heart-destroyable" name="Right Heart" owner="red-team">
        <region>
            <region id="red-right-heart" />
        </region>
    </destroyable>
    <destroyable id="yellow-left-heart-destroyable" name="Left Heart" owner="yellow-team">
        <region>
            <region id="yellow-left-heart" />
        </region>
    </destroyable>
    <destroyable id="yellow-right-heart-destroyable" name="Right Heart" owner="yellow-team">
        <region>
            <region id="yellow-right-heart" />
        </region>
    </destroyable>
</destroyables>
<modes>
    <mode id="gold-core" name="`6GOLD CORE MODE" material="gold block" after="20m" />
    <mode id="ice-core" name="`bPACKED ICE CORE MODE" material="packed ice" after="45m" />
</modes>
<item-mods>
    <rule>
        <match>
            <material>iron boots</material>
        </match>
        <modify>
            <enchantment level="3">depth strider</enchantment>
        </modify>
    </rule>
    <rule>
        <match>
            <material>iron chestplate</material>
        </match>
        <modify>
            <enchantment level="2">blast protection</enchantment>
        </modify>
    </rule>
    <rule>
        <match>
            <material>diamond boots</material>
        </match>
        <modify>
            <enchantment level="3">depth strider</enchantment>
        </modify>
    </rule>
</item-mods>
<itemremove>
    <item>bucket</item>
    <item>arrow</item>
    <item>leather helmet</item>
    <item>chainmail chestplate</item>
    <item>leather boots</item>
    <item>coal block</item>
    <item>obsidian</item>
    <item>prismarine crystals</item>
</itemremove>
<toolrepair>
    <tool>iron sword</tool>
    <tool>bow</tool>
    <tool>diamond pickaxe</tool>
    <tool>iron axe</tool>
</toolrepair>
<broadcasts>
    <tip after="15s" every="5m">`fThere are `d`lFireball`r `fspawners on the mid islands!</tip>
    <tip after="30s" every="5m">Quartz blocks and their variants are explosion-proof!</tip>
    <alert after="1m">`fMake sure to protect your hearts. They can be damaged by `d`lFireballs!</alert>
</broadcasts>
<maxbuildheight>45</maxbuildheight>
<hunger>
    <depletion>off</depletion>
</hunger>
</map>