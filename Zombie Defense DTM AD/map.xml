<?xml version="1.0" encoding="utf-8"?>
<map proto="1.4.0">
  <name>Zombie Defense DTM:AD</name>
  <version>1.0.2</version>
  <objective>Zombies must destroy the central Villager Monument within 10 minutes. Steves must defend it for 10 minutes.</objective>
  <gamemode>ad</gamemode>
  <authors>
    <author uuid="5ebc601c-82b6-4cd2-88cf-1b5c552b8ace"/> <!--Pe241-->
  </authors>
  <rules>
    <rule>Players can get enchanted Iron_chestplate on uneditable column islands.</rule>
    <rule>Players can only break void area and around the monument with TNT.</rule>
  </rules>
  <teams>
    <team id="zombies" color="dark_green" max="30" show-name-tags="allies" plural="true">Zombies</team>
    <team id="steves" color="gold" max="30" show-name-tags="allies" plural="true">Steves</team>
  </teams>
  <spawns>
    <default yaw="180">
      <region><cuboid min="-1,32,116" max="0,33,117"/></region>
    </default>
    <spawn team="steves" kit="steve" yaw="0">
      <region><cuboid min="-1,53,-1" max="0,54,0"/></region>
    </spawn>
    <spawn team="zombies" kit="zombie">
      <!--South-->
      <region yaw="180">
        <cuboid min="-2,51,75" max="1,52,78"/>
      </region>
      <!--East-->
      <region yaw="90">
        <cuboid min="78,51,-2" max="75,52,1"/>
      </region>
      <!--North-->
      <region yaw="0">
        <cuboid min="-2,51,-79" max="1,52,-76"/>
      </region>
      <!--West-->
      <region yaw="-90">
        <cuboid min="-79,51,1" max="-76,52,-2"/>
      </region>
    </spawn>
  </spawns>
  <kits>
    <kit id="players">
      <item slot="0" unbreakable="true">iron_sword</item>
      <item slot="1" unbreakable="true">bow</item>
      <item slot="2" unbreakable="true">diamond_pickaxe</item>
      <item slot="3" unbreakable="true">iron_axe</item>
      <item slot="4" amount="64">redstone_block</item>
      <item slot="5" amount="64">tnt</item>
      <item slot="8">water_bucket</item>
      <item slot="9" amount="2">golden apple</item>
      <item slot="27" amount="32">arrow</item>
      <item slot="14" amount="64">vine</item>
      <item slot="15" amount="64">step</item>
      <item slot="16" amount="64">stone_button</item>
      <item slot="24" amount="64">nether_fence</item>
      <item slot="25" amount="64">redstone_torch_on</item>
      <item slot="32">water_bucket</item>
      <item slot="33" amount="64">redstone</item>
      <item slot="34" amount="32">stone_plate</item>
      <item slot="35" amount="64">tnt</item>
      <boots unbreakable="true" material="iron_boots">
        <enchantment level="3">protection_fall</enchantment>
      </boots>
      <potion duration="oo" amplifier="10">saturation</potion>
      <potion duration="oo" amplifier="8">slow_digging</potion>
      <potion duration="oo" amplifier="10">damage_resistance</potion>
      <potion duration="oo" amplifier="10">regeneration</potion>
    </kit>
    <kit id="zombie" parents="players">
      <item slot="6" amount="64" damage="13">stained_glass</item>
      <item slot="7" amount="64" damage="3">log</item>
      <item slot="23" amount="64" damage="1">smooth_brick</item>
      <helmet  locked="true" damage="2" name="`2Zombies" material="skull_item"/>
      <chestplate unbreakable="true" color="72a526" material="leather_chestplate" enchantment="protection_explosions"/>
      <leggings unbreakable="true" color="72a526" material="leather_leggings" enchantment="protection_explosions"/>
      <walk-speed>4</walk-speed>
    </kit>
    <kit id="steve" parents="players">
      <item slot="6" amount="64" damage="1">stained_glass</item>
      <item slot="7" amount="64" damage="2">log</item>
      <item slot="17" amount="64">tnt</item>
      <item slot="26" amount="64">tnt</item>
      <item slot="23" amount="64">smooth_brick</item>
      <helmet locked="true" damage="3" name="`6Steves" material="skull_item"/>
      <chestplate unbreakable="true" color="deb233" material="leather_chestplate" enchantment="protection_explosions:5"/>
      <leggings unbreakable="true" color="deb233" material="leather_leggings" enchantment="protection_explosions"/>
      <walk-speed>2.5</walk-speed>
    </kit>
    <kit id="zombie_notube" force="true">
      <potion duration="0" amplifier="0">slow_digging</potion>
      <potion duration="4" amplifier="5">damage_resistance</potion>
      <potion duration="4" amplifier="3">regeneration</potion>
      <walk-speed>1</walk-speed>
    </kit>
    <kit id="steve_noinhead" force="true">
      <potion duration="0" amplifier="0">slow_digging</potion>
      <potion duration="3" amplifier="5">damage_resistance</potion>
      <potion duration="3" amplifier="3">regeneration</potion>
      <walk-speed>1</walk-speed>
    </kit>
  </kits>
  <kill-rewards>
    <kill-reward>
      <item amount="16">arrow</item>
      <item amount="16">tnt</item>
      <item>golden apple</item>
    </kill-reward>
  </kill-rewards>  
  <destroyables>
    <destroyable name="Villager Monument" owner="steves" show-progress="true" sparks="true" materials="stained_clay;stained_glass:0;HARD_CLAY;glowstone" region="monument"/>
  </destroyables>
  <disabledamage>
    <damage self="false" ally="true" enemy="false" other="false">block_explosion</damage>
  </disabledamage>
  <filters>
    <team id="only-zombies">zombies</team>
    <team id="only-steves">steves</team>
    <not id="explosionprotect">
      <all>
        <cause>explosion</cause>
        <not>
          <all>
            <material>tnt</material>
            <cause>explosion</cause>
          </all>
        </not>
      </all>
    </not>
  </filters>
  <regions>
    <union id="monument">
      <cuboid min="-5,26,4" max="4,46,-5"/>
      <cuboid min="-1,35,5" max="1,39,3"/>
    </union>
    <cuboid id="ground-f" min="-6,53,7" max="-3,56,6"/>
    <cuboid id="ground-d" min="-1,21,-1" max="1,22,1"/>
    <cuboid id="basement-f" min="3,53,7" max="6,56,6"/>
    <cuboid id="basement-d" min="-1,6,-1" max="1,7,1"/> 
    <union id="steves-side">
      <rectangle min="-30,-30" max="30,30"/>
      <circle center="-24.5,-24.5" radius="6"/>
      <circle center="24.5,-24.5" radius="6"/>
      <circle center="-24.5,-24.5" radius="6"/>
      <circle center="-24.5,24.5" radius="6"/>
    </union>
    <union id="uneditable-area">
      <!--Outside-->
      <negative>
        <cuboid min="-87,0,-87" max="87,47,87"/>
      </negative>
      <!--Zombies_base-->
      <rectangle min="67,-87" max="87,-67"/><!--NE-->
      <rectangle min="87,67" max="67,87"/><!--SE-->
      <rectangle min="-67,87" max="-87,67"/><!--SW-->       
      <rectangle min="-87,-67" max="-67,-87"/><!--NW-->
      <!--Steves_portal_destination-->
      <cuboid min="-7,-oo,-7" max="7,26,7"/>
    </union>
    <union id="zombies-only">
      <rectangle min="73,-87" max="87,-73"/><!--NE-->
      <rectangle min="86,73" max="73,87"/><!--SE-->
      <rectangle min="-87,73" max="-73,87"/><!--SW-->
      <rectangle min="-87,-73" max="-73,-87"/><!--NW-->
    </union>
    <cuboid id="steves-only" min="-7,-oo,-7" max="6,24,6"/>
    <union id="unbreakable">
      <!--Spawner column islands-->
      <!--SE-->
      <cylinder base="48.5,12,48.5" radius="6" height="3"/>
      <block>48,15,48</block>
      <!--SW-->
      <cylinder base="-48.5,12,48.5" radius="6" height="3"/>
      <block>-49,15,48</block>
      <!--NW-->
      <cylinder base="-48.5,12,-48.5" radius="6" height="3"/>
      <block>-49,15,-49</block>
      <!--NE-->
      <cylinder base="48.5,12,-48.5" radius="6" height="3"/>
      <block>48,15,-49</block>
      <!--Orange stained glass pillar-->
      <cuboid min="4,26,-4" max="5,50,-5"/> 
      <cuboid min="-5,26,-5" max="-4,50,-4"/>
      <cuboid min="-5,26,5" max="-4,51,4"/> 
      <cuboid min="5,26,5" max="4,50,4"/>
      <!--White stained glass panel-->
      <cuboid min="-4,46,4" max="4,47,-4"/>
    </union>
    <complement id="noteamgrief-z">
      <rectangle min="-87,-87" max="87,87"/>
      <rectangle min="-67,-67" max="67,67"/>
      <rectangle min="67,-52" max="87,-30"/>
      <rectangle min="67,30" max="87,52"/>
      <rectangle min="30,67" max="52,87"/>
      <rectangle min="-52,67" max="-30,87"/>
      <rectangle min="-87,30" max="-67,52"/>
      <rectangle min="-87,-51" max="-67,-30"/>
      <rectangle min="-52,-87" max="-30,-67"/>
      <rectangle min="30,-87" max="52,-67"/>
    </complement>
    <complement id="noteamgrief-s">
      <region id="steves-side"/>
      <rectangle min="-7,-7" max="7,7"/>
    </complement>
    <union id="zombies-notube">
      <negative>
        <complement>
          <cuboid min="-87,50,-87" max="87,57,87"/>
          <cuboid min="-67,50,-67" max="67,57,67"/>
        </complement>
      </negative>
    </union>
    <union id="steves-nohead">
      <negative>
        <cuboid min="-8,53,-8" max="8,67,8"/>  
      </negative>
    </union>
    <union id="noexplosion">
      <region id="noteamgrief-z"/>
      <region id="noteamgrief-s"/>
    </union>
    
    <apply block="never" message="Oops! This is uneditable area!" region="uneditable-area"/>
    <apply enter="only-zombies" message="Hey! This is a `2Zombies`c-only area!" region="zombies-only"/>
    <apply enter="only-steves" message="Hey! This is a `6Steves`c-only area!" region="steves-only"/>
    <apply kit="zombie_notube" filter="only-zombies" region="zombies-notube"/>
    <apply kit="steve_noinhead" filter="only-steves" region="steves-nohead"/>   
    <apply block-break="never" message="Oops! This block is unbreakable!" region="unbreakable"/>
    <apply block="explosionprotect" region="noexplosion"/>
  </regions>
  <itemremove>
    <item>iron_sword</item>
    <item>iron_boots</item>
    <item>iron_axe</item>
    <item>diamond_pickaxe</item>
    <item>bow</item>
    <item>skull_item</item>
    <item>arrow</item>
    <item>log</item>
    <item>vine</item>
    <item>leather_chestplate</item>
    <item>leather_leggings</item>
    <item>redstone</item>
    <item>redstone_block</item>
    <item>redstone_torch_on</item>
    <item>smooth_brick</item>
    <item>nether_fence</item>
    <item>stone_plate</item>
    <item>stone_button</item>
    <item>stained_glass</item>
    <item>step</item>
    <item>water_bucket</item>
    <item>bucket</item>
    <item>wood</item>
    <item>wood_button</item>
    <item>tnt</item>
  </itemremove>
  <portals>
    <!--Ground-->
    <portal region="ground-f" destination="ground-d" yaw="0"/>
    <!--Basement-->
    <portal region="basement-f" destination="basement-d" yaw="0"/>
  </portals>
  <broadcasts>
    <tip after="1s">Killrewards are 16 Arrows, 16 TNTs, and Golden apple.</tip>
  </broadcasts>
  <time result="steves">10m</time>
</map>