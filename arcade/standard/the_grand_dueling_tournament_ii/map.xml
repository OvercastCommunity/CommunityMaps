<map proto="1.4.2" game="Wins">
<name>The Grand Dueling Tournament II</name>
<version>2.3.2</version>
<objective>Win the tournament.</objective>
<phase>development</phase>
<variant id="spleef" world="spleef" override="true">The Grand Spleefing Tournament II</variant>
<variant id="cannon" world="cannon" override="true">The Grand Cannoning Tournament II</variant>
<constant id="tournament-type">Dueling</constant>
<constant id="tournament-action">fight</constant>
<constant id="kit-0-name">`bIron</constant>
<constant id="kit-1-name">`6Gold</constant>
<constant id="kit-2-name">`bSlappy Fish</constant>
<constant id="kit-3-name">`cArcher</constant>
<constant id="kit-4-name">`aLumberjack</constant>
<constant id="kit-5-name">`cMCSG</constant>
<constant id="kit-6-name">`3Diamond</constant>
<constant id="kit-7-name">`5Potions</constant>
<constant id="kit-8-name">`6Gapple</constant>
<constant id="kit-9-name">`3Gunz</constant>
<constant id="kit-10-name">`bConquest</constant>
<constant id="kit-11-name">`eBlasternauts</constant>
<constant id="kit-12-name">`cUHC</constant>
<constant id="round-begin-after-seconds">10</constant>
<constant id="round-begin-countdown-after-seconds">7</constant> <!-- 3 less than round-begin-after-seconds for countdown include -->
<if variant="spleef">
    <constant id="tournament-type">Spleefing</constant>
    <constant id="tournament-action">spleef</constant>
    <constant id="kit-0-name">`bClassic</constant>
    <constant id="kit-1-name">`aBuild</constant>
    <constant id="kit-2-name">`cGrenade</constant>
    <constant id="kit-3-name">`2Creep Slap</constant>
    <constant id="kit-4-name">`bClassic (but with `cTNT`b)</constant>
</if>
<if variant="cannon">
    <constant id="tournament-type">Cannoning</constant>
    <constant id="tournament-action">cannon</constant>
    <constant id="kit-0-name">`bClassic</constant>
    <constant id="round-begin-after-seconds">20</constant>
    <constant id="round-begin-countdown-after-seconds">17</constant>
</if>
<include id="countdown"/>
<include id="void-death"/>
<authors>
    <author uuid="07fa10c6-f564-4630-861e-fe134ae27527"/> <!-- Yoyo -->
    <if variant="spleef">
        <author uuid="75fd93dd-8e48-4698-81a2-97dae2ec5b5f"/> <!-- Pugzy -->
    </if>
    <if variant="cannon">
        <author uuid="f690a591-348b-482e-a18d-7779d0c0a28c"/> <!-- mitchiii -->
    </if>
</authors>
<contributors>
    <contributor uuid="f690a591-348b-482e-a18d-7779d0c0a28c" contribution="Remastered XML"/> <!-- mitchiii -->
    <contributor uuid="e82603df-417d-4a95-bd1f-1720648be0b4" contribution="Grandmaster of PGM, XML, and existence itself"/> <!-- Pablete1234 -->
</contributors>
<score>
    <limit>3</limit>
</score>
<teams>
    <team id="team-1" color="dark red"     max="6" min="1">Red</team>
    <team id="team-2" color="blue"         max="6" min="1">Blue</team>
    <team id="team-3" color="dark green"   max="6" min="1">Green</team>
    <team id="team-4" color="dark purple"  max="6" min="1">Purple</team>
    <team id="team-5" color="yellow"       max="6" min="1">Yellow</team>
    <team id="team-6" color="white"        max="6" min="1">White</team>
    <team id="team-7" color="light purple" max="6" min="1">Pink</team>
    <team id="team-8" color="dark aqua"    max="6" min="1">Cyan</team>
</teams>
<spawns spread="true">
    <spawn region="lobby-spawn" angle="193.5,6,31.5" kit="clear-kit" filter="current_round=0"/>
    <spawn region="lobby-spawn" kit="clear-kit" filter="between-rounds"/>
    <spawn region="round-1-arena-1-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=1, not(round-1-arena-1-finished))"/>
    <spawn region="round-1-arena-2-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=1, not(round-1-arena-2-finished))"/>
    <spawn region="round-1-arena-3-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=1, not(round-1-arena-3-finished))"/>
    <spawn region="round-1-arena-4-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=1, not(round-1-arena-4-finished))"/>
    <spawn region="round-2-arena-1-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=2, not(round-2-arena-1-finished))"/>
    <spawn region="round-2-arena-2-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=2, not(round-2-arena-2-finished))"/>
    <spawn region="round-2-arena-3-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=2, not(round-2-arena-3-finished))"/>
    <spawn region="round-2-arena-4-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=2, not(round-2-arena-4-finished))"/>
    <spawn region="round-3-arena-1-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=3, not(round-3-arena-1-finished))"/>
    <spawn region="round-3-arena-2-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=3, not(round-3-arena-2-finished))"/>
    <spawn region="round-3-arena-3-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=3, not(round-3-arena-3-finished))"/>
    <spawn region="round-3-arena-4-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=3, not(round-3-arena-4-finished))"/>
    <default region="lobby-spawn" angle="193.5,6,31.5" kit="obs-kit"/>
</spawns>
<respawn auto="true"/>
<kits>
    <kit id="obs-kit">
        <effect>night vision</effect>
    </kit>
    <kit id="clear-kit" force="true">
        <clear effects="true"/>
        <health>20</health>
        <max-health>20</max-health>
        <foodlevel>20</foodlevel>
        <game-mode>adventure</game-mode>
        <double-jump enabled="false"/>
        <action>
            <set var="current_kill_reward" value="0"/>
            <set var="current_kit_requires_survival" value="0"/>
        </action>
        <if variant="cannon">
            <effect>night vision</effect>
        </if>
    </kit>
    <kit id="spectating-kit" parents="clear-kit" force="true">
        <effect>invisibility</effect>
    </kit>
    <kit id="survival-kit" force="true">
        <game-mode>survival</game-mode>
    </kit>
    <unless variant="spleef, cannon">
        <kit id="kit-0"> <!-- iron -->
            <item slot="0" material="iron sword" unbreakable="true"/>
            <item slot="1" material="bow" unbreakable="true"/>
            <item slot="2" material="arrow" amount="36"/>
            <helmet material="iron helmet"/>
            <chestplate material="iron chestplate"/>
            <leggings material="iron leggings"/>
            <boots material="iron boots"/>
            <action>
                <set var="current_kill_reward" value="1"/>
            </action>
        </kit>
        <kit id="kit-1"> <!-- gold -->
            <item slot="0" material="stone sword" unbreakable="true"/>
            <item slot="1" material="bow" unbreakable="true"/>
            <item slot="2" material="arrow" amount="36"/>
            <helmet material="gold helmet"/>
            <chestplate material="gold chestplate"/>
            <leggings material="gold leggings"/>
            <boots material="gold boots"/>
            <action>
                <set var="current_kill_reward" value="1"/>
            </action>
        </kit>
        <kit id="kit-2"> <!-- slappy fish -->
            <item slot="0" material="raw fish">
                <enchantment level="1">damage all</enchantment>
                <enchantment level="2">knockback</enchantment>
            </item>
        </kit>
        <kit id="kit-3"> <!-- archer -->
            <item slot="0" material="bow" unbreakable="true">
                <enchantment level="1">arrow damage</enchantment>
                <enchantment level="1">arrow knockback</enchantment>
                <enchantment level="1">arrow infinite</enchantment>
            </item>
            <item slot="27" material="arrow"/>
            <helmet material="iron helmet"/>
            <chestplate material="leather chestplate" team-color="true"/>
            <leggings material="leather leggings" team-color="true"/>
            <boots material="iron boots"/>
            <action>
                <set var="current_kill_reward" value="2"/>
            </action>
        </kit>
        <kit id="kit-4"> <!-- lumberjack -->
            <item slot="0" material="diamond axe" unbreakable="true">
                <enchantment level="2">damage all</enchantment>
            </item>
            <helmet material="diamond helmet"/>
            <chestplate material="diamond chestplate"/>
            <leggings material="diamond leggings"/>
            <boots material="diamond boots"/>
            <action>
                <set var="current_kill_reward" value="2"/>
            </action>
        </kit>
        <kit id="kit-5"> <!-- mcsg -->
            <item slot="0" material="stone sword"/>
            <item slot="1" material="bow"/>
            <item slot="2" material="fishing rod"/>
            <item slot="3" material="golden apple"/>
            <item slot="8" material="arrow" amount="16"/>
            <helmet material="chainmail helmet"/>
            <chestplate material="chainmail chestplate"/>
            <leggings material="chainmail leggings"/>
            <boots material="chainmail boots"/>
        </kit>
        <kit id="kit-6"> <!-- diamond -->
            <item slot="0" material="diamond sword" unbreakable="true"/>
            <item slot="1" material="bow" unbreakable="true"/>
            <item slot="2" amount="2" material="golden apple"/>
            <item slot="8" amount="64" material="arrow"/>
            <helmet material="diamond helmet"/>
            <chestplate material="diamond chestplate"/>
            <leggings material="diamond leggings"/>
            <boots material="diamond boots"/>
            <action>
                <set var="current_kill_reward" value="3"/>
            </action>
        </kit>
        <kit id="kit-7"> <!-- pot -->
            <item slot="0" material="diamond sword" unbreakable="true">
                <enchantment level="5">damage all</enchantment>
            </item>
            <item slot="1" material="bow" unbreakable="true">
                <enchantment level="4">arrow damage</enchantment>
            </item>
            <item slot="2" material="potion" damage="16421">
                <potion amplifier="2">heal</potion>
            </item>
            <item slot="3" material="potion" damage="16421">
                <potion amplifier="2">heal</potion>
            </item>
            <item slot="4" material="potion" damage="16421">
                <potion amplifier="2">heal</potion>
            </item>
            <item slot="5" material="potion" damage="16421">
                <potion amplifier="2">heal</potion>
            </item>
            <item slot="6" material="potion" damage="16421">
                <potion amplifier="2">heal</potion>
            </item>
            <item slot="7" material="potion" damage="16421">
                <potion amplifier="2">heal</potion>
            </item>
            <item slot="8" material="potion" damage="16421">
                <potion amplifier="2">heal</potion>
            </item>
            <item slot="27" amount="64" material="arrow"/>
            <helmet material="diamond helmet" damage="250">
                <enchantment level="1">protection environmental</enchantment>
            </helmet>
            <chestplate material="diamond chestplate" damage="300">
                <enchantment level="2">protection environmental</enchantment>
            </chestplate>
            <leggings material="diamond leggings" damage="300">
                <enchantment level="1">protection environmental</enchantment>
            </leggings>
            <boots material="diamond boots" damage="300">
                <enchantment level="1">protection environmental</enchantment>
            </boots>
            <action>
                <set var="current_kill_reward" value="4"/>
            </action>
        </kit>
        <kit id="kit-8"> <!-- gapple -->
            <item slot="0" material="diamond sword" unbreakable="true">
                <enchantment level="5">damage all</enchantment>
            </item>
            <item slot="1" material="golden apple" damage="1" amount="64"/>
            <helmet material="diamond helmet" damage="250">
                <enchantment level="3">protection environmental</enchantment>
            </helmet>
            <chestplate material="diamond chestplate" damage="300">
                <enchantment level="3">protection environmental</enchantment>
            </chestplate>
            <leggings material="diamond leggings" damage="300">
                <enchantment level="3">protection environmental</enchantment>
            </leggings>
            <boots material="diamond boots" damage="300">
                <enchantment level="3">protection environmental</enchantment>
            </boots>
        </kit>
        <kit id="kit-9"> <!-- gunz -->
            <item slot="0" material="wood hoe" unbreakable="true" projectile="egg-gun" name="`rEgg Gun"/>
        </kit>
        <kit id="kit-10"> <!-- conquest  -->
            <item slot="0" material="stone sword" unbreakable="true"/>
            <item slot="1" material="bow" unbreakable="true"/>
            <item slot="2" material="golden apple"/>
            <item slot="8" material="arrow" amount="12"/>
            <helmet material="leather helmet" unbreakable="true" team-color="true"/>
            <chestplate material="leather chestplate" unbreakable="true" team-color="true"/>
            <leggings material="leather leggings" unbreakable="true" team-color="true">
                <enchantment level="3">protection projectile</enchantment>
            </leggings>
            <boots material="iron boots" unbreakable="true"/>
            <action>
                <set var="current_kill_reward" value="5"/>
            </action>
        </kit>
        <kit id="kit-11"> <!-- blasternauts  -->
            <item slot="0" material="blaze rod" name="`rMelee Stick">
                <enchantment level="2">knockback</enchantment>
                <enchantment level="2">damage all</enchantment>
            </item>
            <item slot="1" material="gold hoe" unbreakable="true" projectile="tnt-gun" name="`rTNT Launcher"/>
            <item slot="2" material="tnt" amount="6" show-can-place-on="false">
                <can-place-on>
                    <all-blocks/>
                </can-place-on>
            </item>
            <item slot="3" material="snow ball" amount="16" name="`rGrenade" grenade="true" grenade-power="1.2"/>
            <item slot="4" material="snow ball" amount="16" name="`rGrenade" grenade="true" grenade-power="1.2"/>
            <item slot="8" material="potion" damage="8229"/>
            <helmet material="iron helmet" unbreakable="true"/>
            <chestplate material="leather chestplate" unbreakable="true" team-color="true"/>
            <leggings material="chainmail leggings" unbreakable="true">
                <enchantment level="2">protection explosions</enchantment>
            </leggings>
            <boots material="iron boots" unbreakable="true"/>
            <double-jump/>
            <action>
                <set var="current_kill_reward" value="6"/>
            </action>
        </kit>
        <kit id="kit-12" force="true"> <!-- uhc -->
            <foodlevel>16</foodlevel>
            <item slot="0" material="iron sword">
                <enchantment level="2">damage all</enchantment>
            </item>
            <item slot="1" material="bow">
                <enchantment>arrow damage</enchantment>
            </item>
            <helmet material="iron helmet">
                <enchantment>protection environmental</enchantment>
            </helmet>
            <chestplate material="iron chestplate">
                <enchantment>protection environmental</enchantment>
            </chestplate>
            <leggings material="iron leggings">
                <enchantment>protection environmental</enchantment>
            </leggings>
            <boots material="iron boots">
                <enchantment>protection environmental</enchantment>
            </boots>
            <item slot="2" material="golden apple" amount="3" consumable="uhc-gapple"/>
            <item slot="28" material="arrow" amount="32"/>
        </kit>
    </unless>
    <if variant="spleef">
        <kit id="kit-0"> <!-- classic -->
            <item slot="0" material="diamond spade" unbreakable="true">
                <enchantment level="5">efficiency</enchantment>
                <can-destroy>
                    <material>snow block</material>
                </can-destroy>
            </item>
            <chestplate material="leather chestplate" unbreakable="true" team-color="true"/>
            <boots material="leather boots" unbreakable="true" team-color="true"/>
        </kit>
        <kit id="kit-1"> <!-- build -->
            <item slot="0" material="diamond spade" unbreakable="true">
                <enchantment level="5">efficiency</enchantment>
                <can-destroy>
                    <material>snow block</material>
                </can-destroy>
            </item>
            <item slot="1" material="snow block" amount="126">
                <can-place-on>
                    <material>snow block</material>
                </can-place-on>
            </item>
            <item slot="2" material="snow ball" amount="16"/>
            <helmet material="gold helmet" unbreakable="true"/>
            <chestplate material="leather chestplate" unbreakable="true" team-color="true"/>
            <leggings material="iron leggings" unbreakable="true"/>
            <boots material="leather boots" unbreakable="true" team-color="true"/>
            <action>
                <set var="current_kill_reward" value="1"/>
            </action>
        </kit>
        <kit id="kit-2"> <!-- grenade -->
            <item slot="0" material="diamond spade" unbreakable="true">
                <enchantment level="5">efficiency</enchantment>
                <can-destroy>
                    <material>snow block</material>
                </can-destroy>
            </item>
            <item slot="1" material="egg" amount="36" name="`rGrenade" grenade="true" grenade-power="0.5"/>
            <helmet material="iron helmet" unbreakable="true"/>
            <chestplate material="iron chestplate" unbreakable="true" team-color="true"/>
            <leggings material="iron leggings" unbreakable="true"/>
            <boots material="leather boots" unbreakable="true" team-color="true"/>
            <action>
                <set var="current_kill_reward" value="2"/>
            </action>
        </kit>
        <kit id="kit-3"> <!-- creeper -->
            <item slot="0" material="diamond spade" unbreakable="true">
                <enchantment level="5">efficiency</enchantment>
                <enchantment level="5">knockback</enchantment>
                <can-destroy>
                    <material>snow block</material>
                </can-destroy>
            </item>
            <item slot="1" material="monster egg" damage="50" amount="16" show-can-place-on="false">
                <can-place-on>
                    <all-blocks/>
                </can-place-on>
            </item>
            <item slot="2" material="flint and steel" unbreakable="true">
                <enchantment level="7">knockback</enchantment>
            </item>
            <helmet material="iron helmet" unbreakable="true"/>
            <chestplate material="iron chestplate" unbreakable="true" team-color="true"/>
            <leggings material="iron leggings" unbreakable="true"/>
            <boots material="leather boots" unbreakable="true" team-color="true"/>
            <action>
                <set var="current_kill_reward" value="3"/>
            </action>
        </kit>
        <kit id="kit-4"> <!-- classic w/ tnt -->
            <item slot="0" material="diamond spade" unbreakable="true">
                <enchantment level="5">efficiency</enchantment>
                <enchantment level="5">knockback</enchantment>
                <can-destroy>
                    <material>snow block</material>
                </can-destroy>
            </item>
            <item slot="1" material="tnt" amount="3" show-can-place-on="false">
                <can-place-on>
                    <all-blocks/>
                </can-place-on>
            </item>
            <helmet material="gold helmet" unbreakable="true"/>
            <chestplate material="leather chestplate" unbreakable="true" team-color="true"/>
            <leggings material="gold leggings" unbreakable="true"/>
            <boots material="leather boots" unbreakable="true" team-color="true"/>
            <action>
                <set var="current_kill_reward" value="4"/>
            </action>
        </kit>
    </if>
    <if variant="cannon">
        <kit id="kit-0"> <!-- classic -->
            <item slot="9" material="tnt" amount="64"/>
            <item slot="18" material="tnt" amount="64"/>
            <item slot="27" material="tnt" amount="64"/>
            <item slot="0" material="diamond pickaxe" unbreakable="true"/>
            <item slot="10" material="tnt" amount="64"/>
            <item slot="19" material="tnt" amount="64"/>
            <item slot="28" material="tnt" amount="64"/>
            <item slot="1" material="dispenser" amount="16"/>
            <item slot="11" material="tnt" amount="64"/>
            <item slot="20" material="tnt" amount="64"/>
            <item slot="29" material="tnt" amount="64"/>
            <item slot="2" material="step" amount="64"/>
            <item slot="12" material="stained glass" amount="64" team-color="true"/>
            <item slot="21" material="stained clay" amount="64" team-color="true"/>
            <item slot="30" material="stained clay" amount="64" team-color="true"/>
            <item slot="3" material="stained clay" amount="64" team-color="true"/>
            <item slot="13" material="trap door" amount="16"/>
            <item slot="22" material="ladder" amount="16"/>
            <item slot="31" material="workbench"/>
            <item slot="4" material="nether fence" amount="64"/>
            <item slot="14" material="piston base" amount="16"/>
            <item slot="23" material="lever" amount="16"/>
            <item slot="32" material="stone plate" amount="16"/>
            <item slot="5"  material="stone button" amount="16"/>
            <item slot="15" material="water bucket"/>
            <item slot="24" material="water bucket"/>
            <item slot="33" material="water bucket"/>
            <item slot="6" material="water bucket"/>
            <item slot="16" material="diode" amount="16"/>
            <item slot="25" material="redstone torch on" amount="16"/>
            <item slot="34" material="redstone block" amount="16"/>
            <item slot="7" material="redstone" amount="64"/>
            <item slot="17" material="tnt" amount="64"/>
            <item slot="26" material="tnt" amount="64"/>
            <item slot="35" material="tnt" amount="64"/>
            <item slot="8" material="tnt" amount="64"/>
            <helmet material="leather helmet" team-color="true" unbreakable="true" enchantment="water worker:3"/>
            <chestplate material="leather chestplate" team-color="true" unbreakable="true"/>
            <leggings material="leather leggings" team-color="true" unbreakable="true"/>
            <boots material="leather boots" team-color="true" unbreakable="true"/>
            <action>
                <set var="current_kit_requires_survival" value="1"/>
            </action>
        </kit>
    </if>
</kits>
<consumables>
    <consumable id="uhc-gapple" action="uhc-gapple-eat" on="eat" override="false"/>
</consumables>
<projectiles>
    <projectile id="egg-gun" name="Egg Gun" projectile="Egg" velocity="3.5" damage="1.5" throwable="false" cooldown="0s"/>
    <projectile id="tnt-gun" name="TNT Gun" projectile="TNTPrimed" velocity="2" damage="10" throwable="false" cooldown="3s"/>
</projectiles>
<unless variant="cannon">
    <tnt>
        <instantignite>on</instantignite>
        <fuse>1.25s</fuse>
        <power>3</power>
    </tnt>
</unless>
<hunger>
    <depletion>off</depletion>
</hunger>
<timelock>on</timelock>
<kill-rewards>
    <unless variant="spleef, cannon">
        <kill-reward filter="current_kill_reward=1">
            <item material="golden apple"/>
            <item material="arrow" amount="12"/>
        </kill-reward>
        <kill-reward filter="current_kill_reward=2">
            <item material="golden apple"/>
        </kill-reward>
        <kill-reward filter="current_kill_reward=3">
            <item material="golden apple"/>
            <item material="arrow" amount="16"/>
        </kill-reward>
        <kill-reward filter="current_kill_reward=4">
            <item material="potion" damage="16421">
                <potion amplifier="2">heal</potion>
            </item>
            <item material="potion" damage="16421">
                <potion amplifier="2">heal</potion>
            </item>
            <item material="arrow" amount="24"/>
        </kill-reward>
        <kill-reward filter="current_kill_reward=5">
            <item material="golden apple"/>
            <item material="arrow" amount="6"/>
        </kill-reward>
        <kill-reward filter="current_kill_reward=6">
            <item material="tnt" amount="2" show-can-place-on="false">
                <can-place-on>
                    <all-blocks/>
                </can-place-on>
            </item>
            <item material="snow ball" amount="12" name="`rGrenade" grenade="true" grenade-power="1.2"/>
            <item material="potion" damage="8229"/>
        </kill-reward>
    </unless>
    <if variant="spleef">
        <kill-reward filter="current_kill_reward=1">
            <item material="snow ball" amount="16"/>
        </kill-reward>
        <kill-reward filter="current_kill_reward=2">
            <item material="egg" amount="6" name="`rGrenade" grenade="true" grenade-power="0.5"/>
        </kill-reward>
        <kill-reward filter="current_kill_reward=3">
            <item material="monster egg" damage="50" amount="6" show-can-place-on="false">
                <can-place-on>
                    <all-blocks/>
                </can-place-on>
            </item>
        </kill-reward>
        <kill-reward filter="current_kill_reward=4">
            <item material="tnt" amount="3" show-can-place-on="false">
                <can-place-on>
                    <all-blocks/>
                </can-place-on>
            </item>
        </kill-reward>
    </if>
</kill-rewards>
<damage>
    <deny>
        <unless variant="spleef">
            <not>
                <region id="all-arenas"/>
            </not>
        </unless>
        <if variant="spleef">
            <any>
                <cause>melee</cause>
                <not>
                    <region id="all-arenas"/>
                </not>
            </any>
        </if>
    </deny>
</damage>
<disabledamage>
    <damage ally="true" self="true" enemy="false" other="false">block explosion</damage>
</disabledamage>
<filters>
    <unless variant="spleef, cannon">
        <all id="breakable-blocks">
            <never/>
        </all>
    </unless>
    <if variant="spleef">
        <all id="breakable-blocks">
            <region id="all-arenas"/>
            <material>snow block</material>
        </all>
    </if>
    <match-started id="match-started"/>
    <match-finished id="match-finished"/>
    <participating id="participating"/>
    <material id="allow-tnt">tnt</material>
    <after id="allow-round-1-completion" duration="1s">
        <after id="round-1-begin" duration="${round-begin-after-seconds}s" message="Round 1 begins in {0}">
            <time id="round-1-starting">18s</time>
        </after>
    </after>
    <after id="allow-round-2-completion" duration="1s">
        <after id="round-2-begin" duration="${round-begin-after-seconds}s" message="Round 2 begins in {0}">
            <after id="round-2-starting" duration="2s">
                <all id="round-1-finished">
                    <filter id="round-1-arena-1-finished"/>
                    <filter id="round-1-arena-2-finished"/>
                    <filter id="round-1-arena-3-finished"/>
                    <filter id="round-1-arena-4-finished"/>
                </all>
            </after>
        </after>
    </after>
    <after id="allow-round-3-completion" duration="1s">
        <after id="round-3-begin" duration="${round-begin-after-seconds}s" message="Round 3 begins in {0}">
            <after id="round-3-starting" duration="2s">
                <all id="round-2-finished">
                    <filter id="round-2-arena-1-finished"/>
                    <filter id="round-2-arena-2-finished"/>
                    <filter id="round-2-arena-3-finished"/>
                    <filter id="round-2-arena-4-finished"/>
                </all>
            </after>
        </after>
    </after>
    <all id="round-3-finished">
        <filter id="round-3-arena-1-finished"/>
        <filter id="round-3-arena-2-finished"/>
        <filter id="round-3-arena-3-finished"/>
        <filter id="round-3-arena-4-finished"/>
    </all>
    <if variant="cannon">
        <after id="round-1-kit-rearranging-period" duration="5s" filter="round-1-starting"/>
        <after id="round-2-kit-rearranging-period" duration="5s" filter="round-2-starting"/>
        <after id="round-3-kit-rearranging-period" duration="5s" filter="round-3-starting"/>
    </if>
    <any id="between-rounds">
        <all>
            <variable id="round-1" var="current_round">1</variable>
            <filter id="round-1-finished"/>
        </all>
        <all>
            <variable id="round-2" var="current_round">2</variable>
            <filter id="round-2-finished"/>
        </all>
        <all>
            <variable id="round-3" var="current_round">3</variable>
            <filter id="round-3-finished"/>
        </all>
    </any>
    <any id="countdown-start">
        <all>
            <after duration="${round-begin-countdown-after-seconds}s" filter="round-1-starting"/>
            <not>
                <filter id="round-1-finished"/>
            </not>
        </all>
        <all>
            <after duration="${round-begin-countdown-after-seconds}s" filter="round-2-starting"/>
            <not>
                <filter id="round-2-finished"/>
            </not>
        </all>
        <all>
            <after duration="${round-begin-countdown-after-seconds}s" filter="round-3-starting"/>
            <not>
                <filter id="round-3-finished"/>
            </not>
        </all>
    </any>
    <all id="only-team-1-0-wins">
        <team id="only-team-1">team-1</team>
        <score id="team-1-0-wins" team="team-1">0</score>
    </all>
    <all id="only-team-1-1-wins">
        <filter id="only-team-1"/>
        <score id="team-1-1-wins" team="team-1">1</score>
    </all>
    <all id="only-team-1-2-wins">
        <filter id="only-team-1"/>
        <score id="team-1-2-wins" team="team-1">2</score>
    </all>
    <all id="only-team-2-0-wins">
        <team id="only-team-2">team-2</team>
        <score id="team-2-0-wins" team="team-2">0</score>
    </all>
    <all id="only-team-2-1-wins">
        <filter id="only-team-2"/>
        <score id="team-2-1-wins" team="team-2">1</score>
    </all>
    <all id="only-team-2-2-wins">
        <filter id="only-team-2"/>
        <score id="team-2-2-wins" team="team-2">2</score>
    </all>
    <all id="only-team-3-0-wins">
        <team id="only-team-3">team-3</team>
        <score id="team-3-0-wins" team="team-3">0</score>
    </all>
    <all id="only-team-3-1-wins">
        <filter id="only-team-3"/>
        <score id="team-3-1-wins" team="team-3">1</score>
    </all>
    <all id="only-team-3-2-wins">
        <filter id="only-team-3"/>
        <score id="team-3-2-wins" team="team-3">2</score>
    </all>
    <all id="only-team-4-0-wins">
        <team id="only-team-4">team-4</team>
        <score id="team-4-0-wins" team="team-4">0</score>
    </all>
    <all id="only-team-4-1-wins">
        <filter id="only-team-4"/>
        <score id="team-4-1-wins" team="team-4">1</score>
    </all>
    <all id="only-team-4-2-wins">
        <filter id="only-team-4"/>
        <score id="team-4-2-wins" team="team-4">2</score>
    </all>
    <all id="only-team-5-0-wins">
        <team id="only-team-5">team-5</team>
        <score id="team-5-0-wins" team="team-5">0</score>
    </all>
    <all id="only-team-5-1-wins">
        <filter id="only-team-5"/>
        <score id="team-5-1-wins" team="team-5">1</score>
    </all>
    <all id="only-team-5-2-wins">
        <filter id="only-team-5"/>
        <score id="team-5-2-wins" team="team-5">2</score>
    </all>
    <all id="only-team-6-0-wins">
        <team id="only-team-6">team-6</team>
        <score id="team-6-0-wins" team="team-6">0</score>
    </all>
    <all id="only-team-6-1-wins">
        <filter id="only-team-6"/>
        <score id="team-6-1-wins" team="team-6">1</score>
    </all>
    <all id="only-team-6-2-wins">
        <filter id="only-team-6"/>
        <score id="team-6-2-wins" team="team-6">2</score>
    </all>
    <all id="only-team-7-0-wins">
        <team id="only-team-7">team-7</team>
        <score id="team-7-0-wins" team="team-7">0</score>
    </all>
    <all id="only-team-7-1-wins">
        <filter id="only-team-7"/>
        <score id="team-7-1-wins" team="team-7">1</score>
    </all>
    <all id="only-team-7-2-wins">
        <filter id="only-team-7"/>
        <score id="team-7-2-wins" team="team-7">2</score>
    </all>
    <all id="only-team-8-0-wins">
        <team id="only-team-8">team-8</team>
        <score id="team-8-0-wins" team="team-8">0</score>
    </all>
    <all id="only-team-8-1-wins">
        <filter id="only-team-8"/>
        <score id="team-8-1-wins" team="team-8">1</score>
    </all>
    <all id="only-team-8-2-wins">
        <filter id="only-team-8"/>
        <score id="team-8-2-wins" team="team-8">2</score>
    </all>
    <completed id="round-1-arena-1-finished">round-1-arena-1-decider</completed>
    <completed id="round-1-arena-2-finished">round-1-arena-2-decider</completed>
    <completed id="round-1-arena-3-finished">round-1-arena-3-decider</completed>
    <completed id="round-1-arena-4-finished">round-1-arena-4-decider</completed>
    <completed id="round-2-arena-1-finished">round-2-arena-1-decider</completed>
    <completed id="round-2-arena-2-finished">round-2-arena-2-decider</completed>
    <completed id="round-2-arena-3-finished">round-2-arena-3-decider</completed>
    <completed id="round-2-arena-4-finished">round-2-arena-4-decider</completed>
    <completed id="round-3-arena-1-finished">round-3-arena-1-decider</completed>
    <completed id="round-3-arena-2-finished">round-3-arena-2-decider</completed>
    <completed id="round-3-arena-3-finished">round-3-arena-3-decider</completed>
    <completed id="round-3-arena-4-finished">round-3-arena-4-decider</completed>
    <after id="award-points" duration="2s">
        <any>
            <all>
                <all>
                    <filter id="round-1"/>
                    <filter id="round-1-finished"/>
                </all>
                <any id="round-1-winner">
                    <captured id="round-1-arena-1-winner">round-1-arena-1-decider</captured>
                    <captured id="round-1-arena-2-winner">round-1-arena-2-decider</captured>
                    <captured id="round-1-arena-3-winner">round-1-arena-3-decider</captured>
                    <captured id="round-1-arena-4-winner">round-1-arena-4-decider</captured>
                </any>
            </all>
            <all>
                <all>
                    <filter id="round-2"/>
                    <filter id="round-2-finished"/>
                </all>
                <any id="round-2-winner">
                    <captured id="round-2-arena-1-winner">round-2-arena-1-decider</captured>
                    <captured id="round-2-arena-2-winner">round-2-arena-2-decider</captured>
                    <captured id="round-2-arena-3-winner">round-2-arena-3-decider</captured>
                    <captured id="round-2-arena-4-winner">round-2-arena-4-decider</captured>
                </any>
            </all>
            <all>
                <all>
                    <filter id="round-3"/>
                    <filter id="round-3-finished"/>
                </all>
                <any>
                    <captured id="round-3-arena-1-winner">round-3-arena-1-decider</captured>
                    <captured id="round-3-arena-2-winner">round-3-arena-2-decider</captured>
                    <captured id="round-3-arena-3-winner">round-3-arena-3-decider</captured>
                    <captured id="round-3-arena-4-winner">round-3-arena-4-decider</captured>
                </any>
            </all>
        </any>
    </after>
    <captured id="round-1-arena-1-team-1" team="team-1">round-1-arena-1-decider</captured>
    <captured id="round-2-arena-1-team-1" team="team-1">round-2-arena-1-decider</captured>
    <captured id="round-2-arena-3-team-1" team="team-1">round-2-arena-3-decider</captured>
    <captured id="round-3-arena-1-team-1" team="team-1">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-1" team="team-1">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-1" team="team-1">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-1" team="team-1">round-3-arena-4-decider</captured>
    <captured id="round-1-arena-1-team-2" team="team-2">round-1-arena-1-decider</captured>
    <captured id="round-2-arena-1-team-2" team="team-2">round-2-arena-1-decider</captured>
    <captured id="round-2-arena-3-team-2" team="team-2">round-2-arena-3-decider</captured>
    <captured id="round-3-arena-1-team-2" team="team-2">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-2" team="team-2">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-2" team="team-2">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-2" team="team-2">round-3-arena-4-decider</captured>
    <captured id="round-1-arena-2-team-3" team="team-3">round-1-arena-2-decider</captured>
    <captured id="round-2-arena-1-team-3" team="team-3">round-2-arena-1-decider</captured>
    <captured id="round-2-arena-3-team-3" team="team-3">round-2-arena-3-decider</captured>
    <captured id="round-3-arena-1-team-3" team="team-3">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-3" team="team-3">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-3" team="team-3">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-3" team="team-3">round-3-arena-4-decider</captured>
    <captured id="round-1-arena-2-team-4" team="team-4">round-1-arena-2-decider</captured>
    <captured id="round-2-arena-1-team-4" team="team-4">round-2-arena-1-decider</captured>
    <captured id="round-2-arena-3-team-4" team="team-4">round-2-arena-3-decider</captured>
    <captured id="round-3-arena-1-team-4" team="team-4">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-4" team="team-4">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-4" team="team-4">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-4" team="team-4">round-3-arena-4-decider</captured>
    <captured id="round-1-arena-3-team-5" team="team-5">round-1-arena-3-decider</captured>
    <captured id="round-2-arena-2-team-5" team="team-5">round-2-arena-2-decider</captured>
    <captured id="round-2-arena-4-team-5" team="team-5">round-2-arena-4-decider</captured>
    <captured id="round-3-arena-1-team-5" team="team-5">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-5" team="team-5">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-5" team="team-5">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-5" team="team-5">round-3-arena-4-decider</captured>
    <captured id="round-1-arena-3-team-6" team="team-6">round-1-arena-3-decider</captured>
    <captured id="round-2-arena-2-team-6" team="team-6">round-2-arena-2-decider</captured>
    <captured id="round-2-arena-4-team-6" team="team-6">round-2-arena-4-decider</captured>
    <captured id="round-3-arena-1-team-6" team="team-6">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-6" team="team-6">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-6" team="team-6">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-6" team="team-6">round-3-arena-4-decider</captured>
    <captured id="round-1-arena-4-team-7" team="team-7">round-1-arena-4-decider</captured>
    <captured id="round-2-arena-2-team-7" team="team-7">round-2-arena-2-decider</captured>
    <captured id="round-2-arena-4-team-7" team="team-7">round-2-arena-4-decider</captured>
    <captured id="round-3-arena-1-team-7" team="team-7">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-7" team="team-7">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-7" team="team-7">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-7" team="team-7">round-3-arena-4-decider</captured>
    <captured id="round-1-arena-4-team-8" team="team-8">round-1-arena-4-decider</captured>
    <captured id="round-2-arena-2-team-8" team="team-8">round-2-arena-2-decider</captured>
    <captured id="round-2-arena-4-team-8" team="team-8">round-2-arena-4-decider</captured>
    <captured id="round-3-arena-1-team-8" team="team-8">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-8" team="team-8">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-8" team="team-8">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-8" team="team-8">round-3-arena-4-decider</captured>
    <!--
    round 2 match ups
    -->
    <all id="team-1-vs-team-3">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-1-1-wins"/>
                <filter id="team-3-1-wins"/>
            </all>
            <all>
                <filter id="team-1-0-wins"/>
                <filter id="team-3-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-1-vs-team-4">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-1-1-wins"/>
                <filter id="team-4-1-wins"/>
            </all>
            <all>
                <filter id="team-1-0-wins"/>
                <filter id="team-4-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-1-vs-team-5">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-1-2-wins"/>
                <filter id="team-5-2-wins"/>
            </all>
            <all>
                <filter id="team-1-1-wins"/>
                <filter id="team-5-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-1-team-1"/>
                        <filter id="round-1-arena-3-team-5"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-3-team-1"/>
                        <filter id="round-2-arena-4-team-5"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-1-0-wins"/>
                <filter id="team-5-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-1-vs-team-6">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-1-2-wins"/>
                <filter id="team-6-2-wins"/>
            </all>
            <all>
                <filter id="team-1-1-wins"/>
                <filter id="team-6-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-1-team-1"/>
                        <filter id="round-1-arena-3-team-6"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-3-team-1"/>
                        <filter id="round-2-arena-4-team-6"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-1-0-wins"/>
                <filter id="team-6-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-1-vs-team-7">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-1-2-wins"/>
                <filter id="team-7-2-wins"/>
            </all>
            <all>
                <filter id="team-1-0-wins"/>
                <filter id="team-7-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-1-vs-team-8">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-1-2-wins"/>
                <filter id="team-8-2-wins"/>
            </all>
            <all>
                <filter id="team-1-0-wins"/>
                <filter id="team-8-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-2-vs-team-3">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-2-1-wins"/>
                <filter id="team-3-1-wins"/>
            </all>
            <all>
                <filter id="team-2-0-wins"/>
                <filter id="team-3-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-2-vs-team-4">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-2-1-wins"/>
                <filter id="team-4-1-wins"/>
            </all>
            <all>
                <filter id="team-2-0-wins"/>
                <filter id="team-4-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-2-vs-team-5">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-2-2-wins"/>
                <filter id="team-5-2-wins"/>
            </all>
            <all>
                <filter id="team-2-1-wins"/>
                <filter id="team-5-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-1-team-2"/>
                        <filter id="round-1-arena-3-team-5"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-3-team-2"/>
                        <filter id="round-2-arena-4-team-5"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-2-0-wins"/>
                <filter id="team-5-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-2-vs-team-6">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-2-2-wins"/>
                <filter id="team-6-2-wins"/>
            </all>
            <all>
                <filter id="team-2-1-wins"/>
                <filter id="team-6-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-1-team-2"/>
                        <filter id="round-1-arena-3-team-6"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-3-team-2"/>
                        <filter id="round-2-arena-4-team-6"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-2-0-wins"/>
                <filter id="team-6-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-2-vs-team-7">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-2-2-wins"/>
                <filter id="team-7-2-wins"/>
            </all>
            <all>
                <filter id="team-2-0-wins"/>
                <filter id="team-7-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-2-vs-team-8">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-2-2-wins"/>
                <filter id="team-8-2-wins"/>
            </all>
            <all>
                <filter id="team-2-0-wins"/>
                <filter id="team-8-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-3-vs-team-5">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-3-2-wins"/>
                <filter id="team-5-2-wins"/>
            </all>
            <all>
                <filter id="team-3-0-wins"/>
                <filter id="team-5-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-3-vs-team-6">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-3-2-wins"/>
                <filter id="team-6-2-wins"/>
            </all>
            <all>
                <filter id="team-3-0-wins"/>
                <filter id="team-6-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-3-vs-team-7">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-3-2-wins"/>
                <filter id="team-7-2-wins"/>
            </all>
            <all>
                <filter id="team-3-1-wins"/>
                <filter id="team-7-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-2-team-3"/>
                        <filter id="round-1-arena-4-team-7"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-3-team-3"/>
                        <filter id="round-2-arena-4-team-7"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-3-0-wins"/>
                <filter id="team-7-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-3-vs-team-8">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-3-2-wins"/>
                <filter id="team-8-2-wins"/>
            </all>
            <all>
                <filter id="team-3-1-wins"/>
                <filter id="team-8-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-2-team-3"/>
                        <filter id="round-1-arena-4-team-8"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-3-team-3"/>
                        <filter id="round-2-arena-4-team-8"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-3-0-wins"/>
                <filter id="team-8-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-4-vs-team-5">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-4-2-wins"/>
                <filter id="team-5-2-wins"/>
            </all>
            <all>
                <filter id="team-4-0-wins"/>
                <filter id="team-5-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-4-vs-team-6">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-4-2-wins"/>
                <filter id="team-6-2-wins"/>
            </all>
            <all>
                <filter id="team-4-0-wins"/>
                <filter id="team-6-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-4-vs-team-7">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-4-2-wins"/>
                <filter id="team-7-2-wins"/>
            </all>
            <all>
                <filter id="team-4-1-wins"/>
                <filter id="team-7-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-2-team-4"/>
                        <filter id="round-1-arena-4-team-7"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-3-team-4"/>
                        <filter id="round-2-arena-4-team-7"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-4-0-wins"/>
                <filter id="team-7-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-4-vs-team-8">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-4-2-wins"/>
                <filter id="team-8-2-wins"/>
            </all>
            <all>
                <filter id="team-4-1-wins"/>
                <filter id="team-8-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-2-team-4"/>
                        <filter id="round-1-arena-4-team-8"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-1-team-4"/>
                        <filter id="round-2-arena-2-team-8"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-4-0-wins"/>
                <filter id="team-8-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-5-vs-team-7">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-5-1-wins"/>
                <filter id="team-7-1-wins"/>
            </all>
            <all>
                <filter id="team-5-0-wins"/>
                <filter id="team-7-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-5-vs-team-8">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-5-1-wins"/>
                <filter id="team-8-1-wins"/>
            </all>
            <all>
                <filter id="team-5-0-wins"/>
                <filter id="team-8-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-6-vs-team-7">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-6-1-wins"/>
                <filter id="team-7-1-wins"/>
            </all>
            <all>
                <filter id="team-6-0-wins"/>
                <filter id="team-7-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-6-vs-team-8">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-6-1-wins"/>
                <filter id="team-8-1-wins"/>
            </all>
            <all>
                <filter id="team-6-0-wins"/>
                <filter id="team-8-0-wins"/>
            </all>
        </any>
    </all>
    <all id="round-1-arena-1-competitors">
        <filter id="round-1"/>
        <any>
            <filter id="only-team-1"/>
            <filter id="only-team-2"/>
        </any>
    </all>
    <all id="round-1-arena-2-competitors">
        <filter id="round-1"/>
        <any>
            <filter id="only-team-3"/>
            <filter id="only-team-4"/>
        </any>
    </all>
    <all id="round-1-arena-3-competitors">
        <filter id="round-1"/>
        <any>
            <filter id="only-team-5"/>
            <filter id="only-team-6"/>
        </any>
    </all>
    <all id="round-1-arena-4-competitors">
        <filter id="round-1"/>
        <any>
            <filter id="only-team-7"/>
            <filter id="only-team-8"/>
        </any>
    </all>
    <all id="round-2-arena-1-competitors">
        <filter id="round-2"/>
        <any>
            <filter id="only-team-1-1-wins"/>
            <filter id="only-team-2-1-wins"/>
            <filter id="only-team-3-1-wins"/>
            <filter id="only-team-4-1-wins"/>
        </any>
    </all>
    <all id="round-2-arena-2-competitors">
        <filter id="round-2"/>
        <any>
            <filter id="only-team-5-1-wins"/>
            <filter id="only-team-6-1-wins"/>
            <filter id="only-team-7-1-wins"/>
            <filter id="only-team-8-1-wins"/>
        </any>
    </all>
    <all id="round-2-arena-3-competitors">
        <filter id="round-2"/>
        <any>
            <filter id="only-team-1-0-wins"/>
            <filter id="only-team-2-0-wins"/>
            <filter id="only-team-3-0-wins"/>
            <filter id="only-team-4-0-wins"/>
        </any>
    </all>
    <all id="round-2-arena-4-competitors">
        <filter id="round-2"/>
        <any>
            <filter id="only-team-5-0-wins"/>
            <filter id="only-team-6-0-wins"/>
            <filter id="only-team-7-0-wins"/>
            <filter id="only-team-8-0-wins"/>
        </any>
    </all>
    <all id="round-3-arena-1-competitors">
        <filter id="round-3"/>
        <any>
            <filter id="only-team-1-2-wins"/>
            <filter id="only-team-2-2-wins"/>
            <filter id="only-team-3-2-wins"/>
            <filter id="only-team-4-2-wins"/>
            <filter id="only-team-5-2-wins"/>
            <filter id="only-team-6-2-wins"/>
            <filter id="only-team-7-2-wins"/>
            <filter id="only-team-8-2-wins"/>
        </any>
    </all>
    <all id="round-3-arena-2-competitors">
        <any>
            <filter id="round-3-arena-2-3-spawn-1-competitors"/>
            <filter id="round-3-arena-2-3-spawn-2-competitors"/>
        </any>
        <filter id="round-1-winner"/>
    </all>
    <all id="round-3-arena-3-competitors">
        <any>
            <filter id="round-3-arena-2-3-spawn-1-competitors"/>
            <filter id="round-3-arena-2-3-spawn-2-competitors"/>
        </any>
        <filter id="round-2-winner"/>
    </all>
    <all id="round-3-arena-2-3-spawn-1-competitors">
        <filter id="round-3"/>
        <any>
            <filter id="only-team-1-1-wins"/>
            <filter id="only-team-2-1-wins"/>
            <filter id="only-team-3-1-wins"/>
            <filter id="only-team-4-1-wins"/>
        </any>
    </all>
    <all id="round-3-arena-2-3-spawn-2-competitors">
        <filter id="round-3"/>
        <any>
            <filter id="only-team-5-1-wins"/>
            <filter id="only-team-6-1-wins"/>
            <filter id="only-team-7-1-wins"/>
            <filter id="only-team-8-1-wins"/>
        </any>
    </all>
    <all id="round-3-arena-4-competitors">
        <filter id="round-3"/>
        <any>
            <filter id="only-team-1-0-wins"/>
            <filter id="only-team-2-0-wins"/>
            <filter id="only-team-3-0-wins"/>
            <filter id="only-team-4-0-wins"/>
            <filter id="only-team-5-0-wins"/>
            <filter id="only-team-6-0-wins"/>
            <filter id="only-team-7-0-wins"/>
            <filter id="only-team-8-0-wins"/>
        </any>
    </all>
</filters>
<regions>
    <cylinder id="lobby-spawn" base="205.5,4,31.5" radius="6" height="0.5"/>
    <cuboid id="lobby" min="220,0,13" max="191,25,50"/>
    <union id="all-arenas">
        <cuboid id="arena-1" min="181,-oo,-65" max="144,25,128"/>
        <cuboid id="arena-2" min="137,-oo,-65" max="100,25,128"/>
        <cuboid id="arena-3" min="93,-oo,-65"  max="56,25,128"/>
        <cuboid id="arena-4" min="49,-oo,-65"  max="12,25,128"/>
    </union>
    <union id="all-arena-spawns">
        <unless variant="cannon">
            <point id="round-1-arena-1-spawn-1">162.5,11,-61.5</point>
            <point id="round-1-arena-1-spawn-2">162.5,11,-7.5</point>
        </unless>
        <if variant="cannon">
            <point id="round-1-arena-1-spawn-1">162.5,11,-56.5</point>
            <point id="round-1-arena-1-spawn-2">162.5,11,-12.5</point>
        </if>
        <translate id="round-1-arena-2-spawn-1" offset="-44,0,0" region="round-1-arena-1-spawn-1"/>
        <translate id="round-1-arena-2-spawn-2" offset="-44,0,0" region="round-1-arena-1-spawn-2"/>
        <translate id="round-1-arena-3-spawn-1" offset="-44,0,0" region="round-1-arena-2-spawn-1"/>
        <translate id="round-1-arena-3-spawn-2" offset="-44,0,0" region="round-1-arena-2-spawn-2"/>
        <translate id="round-1-arena-4-spawn-1" offset="-44,0,0" region="round-1-arena-3-spawn-1"/>
        <translate id="round-1-arena-4-spawn-2" offset="-44,0,0" region="round-1-arena-3-spawn-2"/>
        <translate id="round-2-arena-1-spawn-1" offset="0,0,66" region="round-1-arena-1-spawn-1"/>
        <translate id="round-2-arena-1-spawn-2" offset="0,0,66" region="round-1-arena-1-spawn-2"/>
        <translate id="round-2-arena-2-spawn-1" offset="0,0,66" region="round-1-arena-2-spawn-1"/>
        <translate id="round-2-arena-2-spawn-2" offset="0,0,66" region="round-1-arena-2-spawn-2"/>
        <translate id="round-2-arena-3-spawn-1" offset="0,0,66" region="round-1-arena-3-spawn-1"/>
        <translate id="round-2-arena-3-spawn-2" offset="0,0,66" region="round-1-arena-3-spawn-2"/>
        <translate id="round-2-arena-4-spawn-1" offset="0,0,66" region="round-1-arena-4-spawn-1"/>
        <translate id="round-2-arena-4-spawn-2" offset="0,0,66" region="round-1-arena-4-spawn-2"/>
        <translate id="round-3-arena-1-spawn-1" offset="0,0,66" region="round-2-arena-1-spawn-1"/>
        <translate id="round-3-arena-1-spawn-2" offset="0,0,66" region="round-2-arena-1-spawn-2"/>
        <translate id="round-3-arena-2-spawn-1" offset="0,0,66" region="round-2-arena-2-spawn-1"/>
        <translate id="round-3-arena-2-spawn-2" offset="0,0,66" region="round-2-arena-2-spawn-2"/>
        <translate id="round-3-arena-3-spawn-1" offset="0,0,66" region="round-2-arena-3-spawn-1"/>
        <translate id="round-3-arena-3-spawn-2" offset="0,0,66" region="round-2-arena-3-spawn-2"/>
        <translate id="round-3-arena-4-spawn-1" offset="0,0,66" region="round-2-arena-4-spawn-1"/>
        <translate id="round-3-arena-4-spawn-2" offset="0,0,66" region="round-2-arena-4-spawn-2"/>
    </union>
    <union id="all-arena-spectator-spawns">
        <point id="round-1-arena-1-spectator">182.5,14,-34.5</point>
        <point id="round-1-arena-2-spectator">138.5,14,-34.5</point>
        <point id="round-1-arena-3-spectator">94.5,14,-34.5</point>
        <point id="round-1-arena-4-spectator">50.5,14,-34.5</point>
        <point id="round-2-arena-1-spectator">182.5,14,31.5</point>
        <point id="round-2-arena-2-spectator">138.5,14,31.5</point>
        <point id="round-2-arena-3-spectator">94.5,14,31.5</point>
        <point id="round-2-arena-4-spectator">50.5,14,31.5</point>
        <point id="round-3-arena-1-spectator">182,14,97.5</point>
        <point id="round-3-arena-2-spectator">138.5,14,97.5</point>
        <point id="round-3-arena-3-spectator">94.5,14,97.5</point>
        <point id="round-3-arena-4-spectator">50.5,14,97.5</point>
    </union>
    <union id="all-arena-spectator-portals">
        <cuboid id="round-1-arena-1-spectator-portal" min="185,10,-37" max="186,18,-32"/>
        <cuboid id="round-1-arena-2-spectator-portal" min="141,10,-37" max="142,18,-32"/>
        <cuboid id="round-1-arena-3-spectator-portal" min="97,10,-37" max="98,18,-32"/>
        <cuboid id="round-1-arena-4-spectator-portal" min="53,10,-37" max="54,18,-32"/>
        <cuboid id="round-2-arena-1-spectator-portal" min="185,10,29" max="186,18,34"/>
        <cuboid id="round-2-arena-2-spectator-portal" min="141,10,29" max="142,18,34"/>
        <cuboid id="round-2-arena-3-spectator-portal" min="97,10,29" max="98,18,34"/>
        <cuboid id="round-2-arena-4-spectator-portal" min="53,10,29" max="54,18,34"/>
        <cuboid id="round-3-arena-1-spectator-portal" min="185,10,95" max="186,18,100"/>
        <cuboid id="round-3-arena-2-spectator-portal" min="141,10,95" max="142,18,100"/>
        <cuboid id="round-3-arena-3-spectator-portal" min="97,10,95" max="98,18,100"/>
        <cuboid id="round-3-arena-4-spectator-portal" min="53,10,95" max="54,18,100"/>
    </union>
    <union id="all-arena-spectator">
        <cuboid id="arena-1-spectator" min="188,10,-65" max="181,18,128"/>
        <cuboid id="arena-2-spectator" min="144,10,-65" max="137,18,128"/>
        <cuboid id="arena-3-spectator" min="100,10,-65" max="93,18,128"/>
        <cuboid id="arena-4-spectator" min="56,10,-65" max="49,18,128"/>
    </union>
    <apply region="lobby" use="never" block-place="allow-tnt" block-break="never"/>
    <unless variant="cannon">
        <apply block-break="breakable-blocks"/>
    </unless>
    <if variant="cannon">
        <union id="arena-bridges">
            <union id="round-1-bridges">
                <cuboid id="round-1-arena-1-bridge" min="162,9,-50" max="163,10,-19"/>
                <translate id="round-1-arena-2-bridge" offset="-44,0,0" region="round-1-arena-1-bridge"/>
                <translate id="round-1-arena-3-bridge" offset="-44,0,0" region="round-1-arena-2-bridge"/>
                <translate id="round-1-arena-4-bridge" offset="-44,0,0" region="round-1-arena-3-bridge"/>
            </union>
            <translate id="round-2-bridges" offset="0,0,66" region="round-1-bridges"/>
            <translate id="round-3-bridges" offset="0,0,66" region="round-2-bridges"/>
        </union>
        <union id="buildable-area">
            <union id="round-1-buildable-area">
                <union id="round-1-arena-1-buildable-area">
                    <cuboid id="round-1-arena-1-spawn-1-buildable-area" min="156,1,-62" max="169,23,-50"/>
                    <translate id="round-1-arena-1-spawn-2-buildable-area" offset="0,0,43" region="round-1-arena-1-spawn-1-buildable-area"/>
                </union>
                <translate id="round-1-arena-2-buildable-area" offset="-44,0,0" region="round-1-arena-1-buildable-area"/>
                <translate id="round-1-arena-3-buildable-area" offset="-44,0,0" region="round-1-arena-2-buildable-area"/>
                <translate id="round-1-arena-4-buildable-area" offset="-44,0,0" region="round-1-arena-3-buildable-area"/>
            </union>
            <translate id="round-2-buildable-area" offset="0,0,66" region="round-1-buildable-area"/>
            <translate id="round-3-buildable-area" offset="0,0,66" region="round-2-buildable-area"/>
        </union>
        <apply block="buildable-area"/>
    </if>
</regions>
<variables>
    <score id="score"/>
    <variable id="round_1_kit" scope="match" default="0"/>
    <variable id="round_2_kit" scope="match" default="0"/>
    <variable id="round_3_kit" scope="match" default="0"/>
    <variable id="announce_kit" scope="match" default="1"/>
    <variable id="current_round" scope="match" default="0"/>
    <variable id="current_kit" scope="match" default="0"/>
    <variable id="current_kit_requires_survival" scope="player" default="0"/>
    <variable id="current_kill_reward" scope="player" default="0"/>
    <variable id="t" scope="match"/>
    <variable id="k0" scope="match"/>
    <variable id="k1" scope="match"/>
    <variable id="k2" scope="match"/>
    <variable id="k3" scope="match"/>
    <variable id="k4" scope="match"/>
    <variable id="k5" scope="match"/>
    <variable id="k6" scope="match"/>
    <variable id="k7" scope="match"/>
    <variable id="k8" scope="match"/>
    <variable id="k9" scope="match"/>
    <variable id="k10" scope="match"/>
    <variable id="k11" scope="match"/>
    <variable id="k12" scope="match"/>
</variables>
<actions>
    <!--
    kit decider
    cheers, Pablo
    -->
    <trigger scope="match" filter="always">
        <action>
            <set var="k0" value="random()"/>
            <set var="k1" value="random()"/>
            <set var="k2" value="random()"/>
            <set var="k3" value="random()"/>
            <set var="k4" value="random()"/>
            <set var="k5" value="random()"/>
            <set var="k6" value="random()"/>
            <set var="k7" value="random()"/>
            <set var="k8" value="random()"/>
            <set var="k9" value="random()"/>
            <set var="k10" value="random()"/>
            <set var="k11" value="random()"/>
            <set var="k12" value="random()"/>
            <action id="pick-unique-kit"/>
            <set var="round_1_kit" value="t"/>
            <action id="pick-unique-kit"/>
            <set var="round_2_kit" value="t"/>
            <action id="pick-unique-kit"/>
            <set var="round_3_kit" value="t"/>
        </action>
    </trigger>
    <action id="pick-unique-kit" scope="match">
        <unless variant="spleef, cannon">
            <set var="t" value="min(k0, k1, k2, k3, k4, k5, k6, k7, k8, k9, k10, k11, k12)"/>
        </unless>
        <if variant="spleef">
            <set var="t" value="min(k0, k1, k2, k3, k4)"/>
        </if>
        <if variant="cannon">
            <set var="t" value="0"/>
        </if>
        <set var="k0" value="k0 - t"/>
        <set var="k1" value="k1 - t"/>
        <set var="k2" value="k2 - t"/>
        <set var="k3" value="k3 - t"/>
        <set var="k4" value="k4 - t"/>
        <set var="k5" value="k5 - t"/>
        <set var="k6" value="k6 - t"/>
        <set var="k7" value="k7 - t"/>
        <set var="k8" value="k8 - t"/>
        <set var="k9" value="k9 - t"/>
        <set var="k10" value="k10 - t"/>
        <set var="k11" value="k11 - t"/>
        <set var="k12" value="k12 - t"/>
        <action filter="k0=0"><set var="k0" value="9"/><set var="t" value="0"/></action>
        <action filter="k1=0"><set var="k1" value="9"/><set var="t" value="1"/></action>
        <action filter="k2=0"><set var="k2" value="9"/><set var="t" value="2"/></action>
        <action filter="k3=0"><set var="k3" value="9"/><set var="t" value="3"/></action>
        <action filter="k4=0"><set var="k4" value="9"/><set var="t" value="4"/></action>
        <action filter="k5=0"><set var="k5" value="9"/><set var="t" value="5"/></action>
        <action filter="k6=0"><set var="k6" value="9"/><set var="t" value="6"/></action>
        <action filter="k7=0"><set var="k7" value="9"/><set var="t" value="7"/></action>
        <action filter="k8=0"><set var="k8" value="9"/><set var="t" value="8"/></action>
        <action filter="k9=0"><set var="k9" value="9"/><set var="t" value="9"/></action>
        <action filter="k10=0"><set var="k10" value="9"/><set var="t" value="10"/></action>
        <action filter="k11=0"><set var="k11" value="9"/><set var="t" value="11"/></action>
        <action filter="k12=0"><set var="k12" value="9"/><set var="t" value="12"/></action>
    </action>
    <!--
    pre-match introduction announcements
    -->
    <trigger scope="match" filter="match-started">
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: Welcome to The Grand ${tournament-type} Tournament!"/>
            <sound key="mob.villager.haggle"/>
        </action>
    </trigger>
    <trigger scope="match">
        <filter>
            <time>3s</time>
        </filter>
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: This is a swiss tournament where you will ${tournament-action} with your partners against other teams with the same number of wins."/>
            <sound key="mob.villager.haggle"/>
        </action>
    </trigger>
    <unless variant="cannon">
        <trigger scope="match">
            <filter>
                <time>6s</time>
            </filter>
            <action>
                <message text="`7[`6Arena Master`7] `6Tirion`r: Each round will have a randomly chosen kit for you to ${tournament-action} your way to victory with!"/>
                <sound key="mob.villager.haggle"/>
            </action>
        </trigger>
        <trigger scope="match">
            <filter>
                <time>9s</time>
            </filter>
            <action>
                <message text="`7[`6Arena Master`7] `6Tirion`r: Your first kit will be..."/>
                <set var="current_kit" value="round_1_kit"/>
                <action id="clear-kit-applicator"/>
                <action id="kit-applicator"/>
                <sound key="mob.villager.haggle"/>
            </action>
        </trigger>
        <trigger scope="match">
            <filter>
                <time>12s</time>
            </filter>
            <action>
                <message text="`7[`6Arena Master`7] `6Tirion`r: In round 2 your kit will be..."/>
                <set var="current_kit" value="round_2_kit"/>
                <action id="clear-kit-applicator"/>
                <action id="kit-applicator"/>
                <sound key="mob.villager.haggle"/>
            </action>
        </trigger>
        <trigger scope="match">
            <filter>
                <time>15s</time>
            </filter>
            <action>
                <message text="`7[`6Arena Master`7] `6Tirion`r: And for the grand finale..."/>
                <set var="current_kit" value="round_3_kit"/>
                <action id="clear-kit-applicator"/>
                <action id="kit-applicator"/>
                <set var="announce_kit" value="0"/>
                <sound key="mob.villager.haggle"/>
            </action>
        </trigger>
    </unless>
    <if variant="cannon">
        <trigger scope="match">
            <filter>
                <time>9s</time>
            </filter>
            <action>
                <message text="`7[`6Arena Master`7] `6Tirion`r: Each round you will use the same kit to ${tournament-action} your way to victory with!"/>
                <sound key="mob.villager.haggle"/>
            </action>
        </trigger>
        <trigger scope="match">
            <filter>
                <time>12s</time>
            </filter>
            <action>
                <message text="`7[`6Arena Master`7] `6Tirion`r: Your kit will be..."/>
                <set var="current_kit" value="round_1_kit"/>
                <action id="clear-kit-applicator"/>
                <action id="kit-applicator"/>
                <sound key="mob.villager.haggle"/>
                <set var="announce_kit" value="0"/>
            </action>
        </trigger>
    </if>
    <action id="kit-applicator" scope="match">
        <action filter="current_kit=0">
            <action filter="announce_kit=1">
                <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-0-name}`r!"/>
            </action>
            <switch-scope inner="player" filter="participating">
                <kit id="kit-0"/>
            </switch-scope>
        </action>
        <unless variant="cannon">
            <action filter="current_kit=1">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-1-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-1"/>
                </switch-scope>
            </action>
            <action filter="current_kit=2">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-2-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-2"/>
                </switch-scope>
            </action>
            <action filter="current_kit=3">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-3-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-3"/>
                </switch-scope>
            </action>
            <action filter="current_kit=4">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-4-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-4"/>
                </switch-scope>
            </action>
        </unless>
        <unless variant="spleef, cannon">
            <action filter="current_kit=5">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-5-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-5"/>
                </switch-scope>
            </action>
            <action filter="current_kit=6">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-6-name}`b!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-6"/>
                </switch-scope>
            </action>
            <action filter="current_kit=7">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-7-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-7"/>
                </switch-scope>
            </action>
            <action filter="current_kit=8">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-8-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-8"/>
                </switch-scope>
            </action>
            <action filter="current_kit=9">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-9-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-9"/>
                </switch-scope>
            </action>
            <action filter="current_kit=10">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-10-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-10"/>
                </switch-scope>
            </action>
            <action filter="current_kit=11">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-11-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-11"/>
                </switch-scope>
            </action>
            <action filter="current_kit=12">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-12-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-12"/>
                </switch-scope>
            </action>
        </unless>
    </action>
    <action id="clear-kit-applicator" scope="match"> <!-- all references to this action come from a match scoped trigger -->
        <switch-scope inner="player" filter="participating">
            <kit id="clear-kit"/>
        </switch-scope>
    </action>
    <action id="uhc-gapple-eat" scope="player">
        <kit force="true">
            <foodlevel>16</foodlevel>
        </kit>
    </action>
    <trigger scope="player" filter="all(current_kit_requires_survival=1, all-arenas)" action="survival-kit"/>
    <!--
    round starting
    -->
    <trigger scope="match" filter="round-1-starting">
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: Get ready, the first round is about to commence in ${round-begin-after-seconds} seconds!"/>
            <sound key="mob.villager.haggle"/>
            <action id="clear-kit-applicator"/>
            <set var="current_kit" value="round_1_kit"/>
        </action>
    </trigger>
    <trigger scope="match" filter="round-1-begin">
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: Let The Grand ${tournament-type} Tournament begin!"/>
            <sound key="mob.enderdragon.growl" volume="1.2" pitch="0.8"/>
            <set var="current_round" value="1"/>
            <action id="kit-applicator"/>
        </action>
    </trigger>
    <trigger scope="match" filter="round-1-finished" action="clear-kit-applicator"/>
    <trigger scope="match" filter="round-2-starting">
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: Brace yourselves, the second round starts in ${round-begin-after-seconds} seconds!"/>
            <sound key="mob.villager.haggle"/>
            <set var="current_kit" value="round_2_kit"/>
        </action>
    </trigger>
    <trigger scope="match" filter="round-2-begin">
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: Aaaaand fight!"/>
            <sound key="mob.enderdragon.growl" volume="1.2" pitch="0.8"/>
            <set var="current_round" value="2"/>
            <action id="kit-applicator"/>
        </action>
    </trigger>
    <trigger scope="match" filter="round-2-finished" action="clear-kit-applicator"/>
    <trigger scope="match" filter="round-3-starting">
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: Prepare for the `6final showdown`r, starting in ${round-begin-after-seconds} seconds!"/>
            <sound key="mob.villager.haggle"/>
            <set var="current_kit" value="round_3_kit"/>
        </action>
    </trigger>
    <trigger scope="match" filter="round-3-begin">
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: May the best team win!"/>
            <sound key="mob.enderdragon.growl" volume="1.2" pitch="0.8"/>
            <set var="current_round" value="3"/>
            <action id="kit-applicator"/>
        </action>
    </trigger>
    <trigger scope="match" filter="round-3-finished" action="clear-kit-applicator"/>
    <if variant="cannon">
        <trigger scope="match" filter="any(all(round-1-kit-rearranging-period, not(round-1-begin)), all(round-2-kit-rearranging-period, not(round-2-begin)), all(round-3-kit-rearranging-period, not(round-3-begin)))">
            <action>
                <message text="`7[`6Arena Master`7] `6Tirion`r: Use this time to rearrange your inventory to your liking!"/>
                <sound key="mob.villager.haggle"/>
                <action id="kit-applicator"/>
            </action>
        </trigger>
    </if>
    <trigger scope="match" filter="match-finished">
        <action>
            <set var="current_round" value="0"/>
            <action filter="round-3-arena-1-team-1">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `4Red `ron winning The Grand ${tournament-type} Tournament!"/>
            </action>
            <action filter="round-3-arena-1-team-2">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `9Blue `ron winning The Grand ${tournament-type} Tournament!"/>
            </action>
            <action filter="round-3-arena-1-team-3">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `2Green `ron winning The Grand ${tournament-type} Tournament!"/>
            </action>
            <action filter="round-3-arena-1-team-4">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `5Purple `ron winning The Grand ${tournament-type} Tournament!"/>
            </action>
            <action filter="round-3-arena-1-team-5">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `eYellow `ron winning The Grand ${tournament-type} Tournament!"/>
            </action>
            <action filter="round-3-arena-1-team-6">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `fWhite `ron winning The Grand ${tournament-type} Tournament!"/>
            </action>
            <action filter="round-3-arena-1-team-7">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `dPink `ron winning The Grand ${tournament-type} Tournament!"/>
            </action>
            <action filter="round-3-arena-1-team-8">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `3Cyan `ron winning The Grand ${tournament-type} Tournament!"/>
            </action>
        </action>
    </trigger>
    <trigger scope="player" filter="all(all-arena-spectator, participating)" action="spectating-kit"/>
    <if variant="spleef">
        <trigger scope="match">
            <filter>
                <after duration="10s" message="Sudden death in {0}">
                    <after duration="2m20s">
                        <filter id="all(any(all(current_round=1, round-1-starting), all(current_round=2, round-2-starting), all(current_round=3, round-3-starting)), not(between-rounds))"/>
                    </after>
                </after>
            </filter>
            <action>
                <message text="`7[`6Arena Master`7] `6Tirion`r: Let's make this sudden death a little... `cexplosive`r!"/>
                <switch-scope inner="player" filter="all(all-arenas, participating)">
                    <kit>
                        <item material="egg" amount="128" name="`rMega Grenade" grenade="true" grenade-power="4">
                            <enchantment>knockback</enchantment>
                        </item>
                    </kit>
                </switch-scope>
            </action>
        </trigger>
    </if>
    <if variant="cannon">
        <trigger scope="match">
            <filter>
                <after duration="30s" message="Connecting the platforms in {0}">
                    <after duration="2m">
                        <filter id="all(any(all(current_round=1, round-1-starting), all(current_round=2, round-2-starting), all(current_round=3, round-3-starting)), not(between-rounds))"/>
                    </after>
                </after>
            </filter>
            <action>
                <message text="`7[`6Arena Master`7] `6Tirion`r: The platforms have been connected by a bridge!"/>
                <fill region="arena-bridges" material="stained glass:7" filter="any(all(current_round=1, round-1-bridges), all(current_round=2, round-2-bridges), all(current_round=3, round-3-bridges))"/>
            </action>
        </trigger>
    </if>
    <!--
    elimination messages
    -->
    <message id="team-1-defeat-team-2-msg" text="`7[`6Arena Master`7] `6Tirion`r: `4Red `rhas defeated `9Blue`r!"/>
    <message id="team-1-defeat-team-3-msg" text="`7[`6Arena Master`7] `6Tirion`r: `4Red `rhas defeated `2Green`r!"/>
    <message id="team-1-defeat-team-4-msg" text="`7[`6Arena Master`7] `6Tirion`r: `4Red `rhas defeated `5Purple`r!"/>
    <message id="team-1-defeat-team-5-msg" text="`7[`6Arena Master`7] `6Tirion`r: `4Red `rhas defeated `eYellow`r!"/>
    <message id="team-1-defeat-team-6-msg" text="`7[`6Arena Master`7] `6Tirion`r: `4Red `rhas defeated `fWhite`r!"/>
    <message id="team-1-defeat-team-7-msg" text="`7[`6Arena Master`7] `6Tirion`r: `4Red `rhas defeated `dPink`r!"/>
    <message id="team-1-defeat-team-8-msg" text="`7[`6Arena Master`7] `6Tirion`r: `4Red `rhas defeated `3Cyan`r!"/>
    <message id="team-2-defeat-team-1-msg" text="`7[`6Arena Master`7] `6Tirion`r: `9Blue `rhas defeated `4Red`r!"/>
    <message id="team-2-defeat-team-3-msg" text="`7[`6Arena Master`7] `6Tirion`r: `9Blue `rhas defeated `2Green`r!"/>
    <message id="team-2-defeat-team-4-msg" text="`7[`6Arena Master`7] `6Tirion`r: `9Blue `rhas defeated `5Purple`r!"/>
    <message id="team-2-defeat-team-5-msg" text="`7[`6Arena Master`7] `6Tirion`r: `9Blue `rhas defeated `eYellow`r!"/>
    <message id="team-2-defeat-team-6-msg" text="`7[`6Arena Master`7] `6Tirion`r: `9Blue `rhas defeated `fWhite`r!"/>
    <message id="team-2-defeat-team-7-msg" text="`7[`6Arena Master`7] `6Tirion`r: `9Blue `rhas defeated `dPink`r!"/>
    <message id="team-2-defeat-team-8-msg" text="`7[`6Arena Master`7] `6Tirion`r: `9Blue `rhas defeated `3Cyan`r!"/>
    <message id="team-3-defeat-team-1-msg" text="`7[`6Arena Master`7] `6Tirion`r: `2Green `rhas defeated `4Red`r!"/>
    <message id="team-3-defeat-team-2-msg" text="`7[`6Arena Master`7] `6Tirion`r: `2Green `rhas defeated `9Blue`r!"/>
    <message id="team-3-defeat-team-4-msg" text="`7[`6Arena Master`7] `6Tirion`r: `2Green `rhas defeated `5Purple`r!"/>
    <message id="team-3-defeat-team-5-msg" text="`7[`6Arena Master`7] `6Tirion`r: `2Green `rhas defeated `eYellow`r!"/>
    <message id="team-3-defeat-team-6-msg" text="`7[`6Arena Master`7] `6Tirion`r: `2Green `rhas defeated `fWhite`r!"/>
    <message id="team-3-defeat-team-7-msg" text="`7[`6Arena Master`7] `6Tirion`r: `2Green `rhas defeated `dPink`r!"/>
    <message id="team-3-defeat-team-8-msg" text="`7[`6Arena Master`7] `6Tirion`r: `2Green `rhas defeated `3Cyan`r!"/>
    <message id="team-4-defeat-team-1-msg" text="`7[`6Arena Master`7] `6Tirion`r: `5Purple `rhas defeated `4Red`r!"/>
    <message id="team-4-defeat-team-2-msg" text="`7[`6Arena Master`7] `6Tirion`r: `5Purple `rhas defeated `9Blue`r!"/>
    <message id="team-4-defeat-team-3-msg" text="`7[`6Arena Master`7] `6Tirion`r: `5Purple `rhas defeated `2Green`r!"/>
    <message id="team-4-defeat-team-5-msg" text="`7[`6Arena Master`7] `6Tirion`r: `5Purple `rhas defeated `eYellow`r!"/>
    <message id="team-4-defeat-team-6-msg" text="`7[`6Arena Master`7] `6Tirion`r: `5Purple `rhas defeated `fWhite`r!"/>
    <message id="team-4-defeat-team-7-msg" text="`7[`6Arena Master`7] `6Tirion`r: `5Purple `rhas defeated `dPink`r!"/>
    <message id="team-4-defeat-team-8-msg" text="`7[`6Arena Master`7] `6Tirion`r: `5Purple `rhas defeated `3Cyan`r!"/>
    <message id="team-5-defeat-team-1-msg" text="`7[`6Arena Master`7] `6Tirion`r: `eYellow `rhas defeated `4Red`r!"/>
    <message id="team-5-defeat-team-2-msg" text="`7[`6Arena Master`7] `6Tirion`r: `eYellow `rhas defeated `9Blue`r!"/>
    <message id="team-5-defeat-team-3-msg" text="`7[`6Arena Master`7] `6Tirion`r: `eYellow `rhas defeated `2Green`r!"/>
    <message id="team-5-defeat-team-4-msg" text="`7[`6Arena Master`7] `6Tirion`r: `eYellow `rhas defeated `5Purple`r!"/>
    <message id="team-5-defeat-team-6-msg" text="`7[`6Arena Master`7] `6Tirion`r: `eYellow `rhas defeated `fWhite`r!"/>
    <message id="team-5-defeat-team-7-msg" text="`7[`6Arena Master`7] `6Tirion`r: `eYellow `rhas defeated `dPink`r!"/>
    <message id="team-5-defeat-team-8-msg" text="`7[`6Arena Master`7] `6Tirion`r: `eYellow `rhas defeated `3Cyan`r!"/>
    <message id="team-6-defeat-team-1-msg" text="`7[`6Arena Master`7] `6Tirion`r: `fWhite `rhas defeated `4Red`r!"/>
    <message id="team-6-defeat-team-2-msg" text="`7[`6Arena Master`7] `6Tirion`r: `fWhite `rhas defeated `9Blue`r!"/>
    <message id="team-6-defeat-team-3-msg" text="`7[`6Arena Master`7] `6Tirion`r: `fWhite `rhas defeated `2Green`r!"/>
    <message id="team-6-defeat-team-4-msg" text="`7[`6Arena Master`7] `6Tirion`r: `fWhite `rhas defeated `5Purple`r!"/>
    <message id="team-6-defeat-team-5-msg" text="`7[`6Arena Master`7] `6Tirion`r: `fWhite `rhas defeated `eYellow`r!"/>
    <message id="team-6-defeat-team-7-msg" text="`7[`6Arena Master`7] `6Tirion`r: `fWhite `rhas defeated `dPink`r!"/>
    <message id="team-6-defeat-team-8-msg" text="`7[`6Arena Master`7] `6Tirion`r: `fWhite `rhas defeated `3Cyan`r!"/>
    <message id="team-7-defeat-team-1-msg" text="`7[`6Arena Master`7] `6Tirion`r: `dPink `rhas defeated `4Red`r!"/>
    <message id="team-7-defeat-team-2-msg" text="`7[`6Arena Master`7] `6Tirion`r: `dPink `rhas defeated `9Blue`r!"/>
    <message id="team-7-defeat-team-3-msg" text="`7[`6Arena Master`7] `6Tirion`r: `dPink `rhas defeated `2Green`r!"/>
    <message id="team-7-defeat-team-4-msg" text="`7[`6Arena Master`7] `6Tirion`r: `dPink `rhas defeated `5Purple`r!"/>
    <message id="team-7-defeat-team-5-msg" text="`7[`6Arena Master`7] `6Tirion`r: `dPink `rhas defeated `eYellow`r!"/>
    <message id="team-7-defeat-team-6-msg" text="`7[`6Arena Master`7] `6Tirion`r: `dPink `rhas defeated `fWhite`r!"/>
    <message id="team-7-defeat-team-8-msg" text="`7[`6Arena Master`7] `6Tirion`r: `dPink `rhas defeated `3Cyan`r!"/>
    <message id="team-8-defeat-team-1-msg" text="`7[`6Arena Master`7] `6Tirion`r: `3Cyan `rhas defeated `4Red`r!"/>
    <message id="team-8-defeat-team-2-msg" text="`7[`6Arena Master`7] `6Tirion`r: `3Cyan `rhas defeated `9Blue`r!"/>
    <message id="team-8-defeat-team-3-msg" text="`7[`6Arena Master`7] `6Tirion`r: `3Cyan `rhas defeated `2Green`r!"/>
    <message id="team-8-defeat-team-4-msg" text="`7[`6Arena Master`7] `6Tirion`r: `3Cyan `rhas defeated `5Purple`r!"/>
    <message id="team-8-defeat-team-5-msg" text="`7[`6Arena Master`7] `6Tirion`r: `3Cyan `rhas defeated `eYellow`r!"/>
    <message id="team-8-defeat-team-6-msg" text="`7[`6Arena Master`7] `6Tirion`r: `3Cyan `rhas defeated `fWhite`r!"/>
    <message id="team-8-defeat-team-7-msg" text="`7[`6Arena Master`7] `6Tirion`r: `3Cyan `rhas defeated `dPink`r!"/>
    <trigger scope="match" action="team-1-defeat-team-2-msg" filter="round-1-arena-1-team-1"/>
    <trigger scope="match" action="team-2-defeat-team-1-msg" filter="round-1-arena-1-team-2"/>
    <trigger scope="match" action="team-3-defeat-team-4-msg" filter="round-1-arena-2-team-3"/>
    <trigger scope="match" action="team-4-defeat-team-3-msg" filter="round-1-arena-2-team-4"/>
    <trigger scope="match" action="team-5-defeat-team-6-msg" filter="round-1-arena-3-team-5"/>
    <trigger scope="match" action="team-6-defeat-team-5-msg" filter="round-1-arena-3-team-6"/>
    <trigger scope="match" action="team-7-defeat-team-8-msg" filter="round-1-arena-4-team-7"/>
    <trigger scope="match" action="team-8-defeat-team-7-msg" filter="round-1-arena-4-team-8"/>
    <trigger scope="match" action="team-1-defeat-team-3-msg" filter="all(team-1-vs-team-3, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-1), all(current_round=2, round-2-arena-3-team-1)))"/>
    <trigger scope="match" action="team-1-defeat-team-4-msg" filter="all(team-1-vs-team-4, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-1), all(current_round=2, round-2-arena-3-team-1)))"/>
    <trigger scope="match" action="team-1-defeat-team-5-msg" filter="all(team-1-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-1), all(current_round=3, round-3-arena-2-team-1), all(current_round=3, round-3-arena-3-team-1), all(current_round=3, round-3-arena-4-team-1)))"/>
    <trigger scope="match" action="team-1-defeat-team-6-msg" filter="all(team-1-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-1), all(current_round=3, round-3-arena-2-team-1), all(current_round=3, round-3-arena-3-team-1), all(current_round=3, round-3-arena-4-team-1)))"/>
    <trigger scope="match" action="team-1-defeat-team-7-msg" filter="all(team-1-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-1), all(current_round=3, round-3-arena-2-team-1), all(current_round=3, round-3-arena-3-team-1), all(current_round=3, round-3-arena-4-team-1)))"/>
    <trigger scope="match" action="team-1-defeat-team-8-msg" filter="all(team-1-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-1), all(current_round=3, round-3-arena-2-team-1), all(current_round=3, round-3-arena-3-team-1), all(current_round=3, round-3-arena-4-team-1)))"/>
    <trigger scope="match" action="team-2-defeat-team-3-msg" filter="all(team-2-vs-team-3, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-2), all(current_round=2, round-2-arena-3-team-2)))"/>
    <trigger scope="match" action="team-2-defeat-team-4-msg" filter="all(team-2-vs-team-4, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-2), all(current_round=2, round-2-arena-3-team-2)))"/>
    <trigger scope="match" action="team-2-defeat-team-5-msg" filter="all(team-2-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-2), all(current_round=3, round-3-arena-2-team-2), all(current_round=3, round-3-arena-3-team-2), all(current_round=3, round-3-arena-4-team-2)))"/>
    <trigger scope="match" action="team-2-defeat-team-6-msg" filter="all(team-2-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-2), all(current_round=3, round-3-arena-2-team-2), all(current_round=3, round-3-arena-3-team-2), all(current_round=3, round-3-arena-4-team-2)))"/>
    <trigger scope="match" action="team-2-defeat-team-7-msg" filter="all(team-2-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-2), all(current_round=3, round-3-arena-2-team-2), all(current_round=3, round-3-arena-3-team-2), all(current_round=3, round-3-arena-4-team-2)))"/>
    <trigger scope="match" action="team-2-defeat-team-8-msg" filter="all(team-2-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-2), all(current_round=3, round-3-arena-2-team-2), all(current_round=3, round-3-arena-3-team-2), all(current_round=3, round-3-arena-4-team-2)))"/>
    <trigger scope="match" action="team-3-defeat-team-1-msg" filter="all(team-1-vs-team-3, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-3), all(current_round=2, round-2-arena-3-team-3)))"/>
    <trigger scope="match" action="team-3-defeat-team-2-msg" filter="all(team-2-vs-team-3, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-3), all(current_round=2, round-2-arena-3-team-3)))"/>
    <trigger scope="match" action="team-3-defeat-team-5-msg" filter="all(team-3-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-3), all(current_round=3, round-3-arena-2-team-3), all(current_round=3, round-3-arena-3-team-3), all(current_round=3, round-3-arena-4-team-3)))"/>
    <trigger scope="match" action="team-3-defeat-team-6-msg" filter="all(team-3-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-3), all(current_round=3, round-3-arena-2-team-3), all(current_round=3, round-3-arena-3-team-3), all(current_round=3, round-3-arena-4-team-3)))"/>
    <trigger scope="match" action="team-3-defeat-team-7-msg" filter="all(team-3-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-3), all(current_round=3, round-3-arena-2-team-3), all(current_round=3, round-3-arena-3-team-3), all(current_round=3, round-3-arena-4-team-3)))"/>
    <trigger scope="match" action="team-3-defeat-team-8-msg" filter="all(team-3-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-3), all(current_round=3, round-3-arena-2-team-3), all(current_round=3, round-3-arena-3-team-3), all(current_round=3, round-3-arena-4-team-3)))"/>
    <trigger scope="match" action="team-4-defeat-team-1-msg" filter="all(team-1-vs-team-4, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-4), all(current_round=2, round-2-arena-3-team-4)))"/>
    <trigger scope="match" action="team-4-defeat-team-2-msg" filter="all(team-2-vs-team-4, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-4), all(current_round=2, round-2-arena-3-team-4)))"/>
    <trigger scope="match" action="team-4-defeat-team-5-msg" filter="all(team-4-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-4), all(current_round=3, round-3-arena-2-team-4), all(current_round=3, round-3-arena-3-team-4), all(current_round=3, round-3-arena-4-team-4)))"/>
    <trigger scope="match" action="team-4-defeat-team-6-msg" filter="all(team-4-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-4), all(current_round=3, round-3-arena-2-team-4), all(current_round=3, round-3-arena-3-team-4), all(current_round=3, round-3-arena-4-team-4)))"/>
    <trigger scope="match" action="team-4-defeat-team-7-msg" filter="all(team-4-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-4), all(current_round=3, round-3-arena-2-team-4), all(current_round=3, round-3-arena-3-team-4), all(current_round=3, round-3-arena-4-team-4)))"/>
    <trigger scope="match" action="team-4-defeat-team-8-msg" filter="all(team-4-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-4), all(current_round=3, round-3-arena-2-team-4), all(current_round=3, round-3-arena-3-team-4), all(current_round=3, round-3-arena-4-team-4)))"/>
    <trigger scope="match" action="team-5-defeat-team-7-msg" filter="all(team-5-vs-team-7, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-5), all(current_round=2, round-2-arena-4-team-5)))"/>
    <trigger scope="match" action="team-5-defeat-team-8-msg" filter="all(team-5-vs-team-8, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-5), all(current_round=2, round-2-arena-4-team-5)))"/>
    <trigger scope="match" action="team-5-defeat-team-1-msg" filter="all(team-1-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-5), all(current_round=3, round-3-arena-2-team-5), all(current_round=3, round-3-arena-3-team-5), all(current_round=3, round-3-arena-4-team-5)))"/>
    <trigger scope="match" action="team-5-defeat-team-2-msg" filter="all(team-2-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-5), all(current_round=3, round-3-arena-2-team-5), all(current_round=3, round-3-arena-3-team-5), all(current_round=3, round-3-arena-4-team-5)))"/>
    <trigger scope="match" action="team-5-defeat-team-3-msg" filter="all(team-3-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-5), all(current_round=3, round-3-arena-2-team-5), all(current_round=3, round-3-arena-3-team-5), all(current_round=3, round-3-arena-4-team-5)))"/>
    <trigger scope="match" action="team-5-defeat-team-4-msg" filter="all(team-4-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-5), all(current_round=3, round-3-arena-2-team-5), all(current_round=3, round-3-arena-3-team-5), all(current_round=3, round-3-arena-4-team-5)))"/>
    <trigger scope="match" action="team-6-defeat-team-7-msg" filter="all(team-6-vs-team-7, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-6), all(current_round=2, round-2-arena-4-team-6)))"/>
    <trigger scope="match" action="team-6-defeat-team-8-msg" filter="all(team-6-vs-team-8, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-6), all(current_round=2, round-2-arena-4-team-6)))"/>
    <trigger scope="match" action="team-6-defeat-team-1-msg" filter="all(team-1-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-6), all(current_round=3, round-3-arena-2-team-6), all(current_round=3, round-3-arena-3-team-6), all(current_round=3, round-3-arena-4-team-6)))"/>
    <trigger scope="match" action="team-6-defeat-team-2-msg" filter="all(team-2-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-6), all(current_round=3, round-3-arena-2-team-6), all(current_round=3, round-3-arena-3-team-6), all(current_round=3, round-3-arena-4-team-6)))"/>
    <trigger scope="match" action="team-6-defeat-team-3-msg" filter="all(team-3-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-6), all(current_round=3, round-3-arena-2-team-6), all(current_round=3, round-3-arena-3-team-6), all(current_round=3, round-3-arena-4-team-6)))"/>
    <trigger scope="match" action="team-6-defeat-team-4-msg" filter="all(team-4-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-6), all(current_round=3, round-3-arena-2-team-6), all(current_round=3, round-3-arena-3-team-6), all(current_round=3, round-3-arena-4-team-6)))"/>
    <trigger scope="match" action="team-7-defeat-team-5-msg" filter="all(team-5-vs-team-7, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-7), all(current_round=2, round-2-arena-4-team-7)))"/>
    <trigger scope="match" action="team-7-defeat-team-6-msg" filter="all(team-6-vs-team-7, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-7), all(current_round=2, round-2-arena-4-team-7)))"/>
    <trigger scope="match" action="team-7-defeat-team-1-msg" filter="all(team-1-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-7), all(current_round=3, round-3-arena-2-team-7), all(current_round=3, round-3-arena-3-team-7), all(current_round=3, round-3-arena-4-team-7)))"/>
    <trigger scope="match" action="team-7-defeat-team-2-msg" filter="all(team-2-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-7), all(current_round=3, round-3-arena-2-team-7), all(current_round=3, round-3-arena-3-team-7), all(current_round=3, round-3-arena-4-team-7)))"/>
    <trigger scope="match" action="team-7-defeat-team-3-msg" filter="all(team-3-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-7), all(current_round=3, round-3-arena-2-team-7), all(current_round=3, round-3-arena-3-team-7), all(current_round=3, round-3-arena-4-team-7)))"/>
    <trigger scope="match" action="team-7-defeat-team-4-msg" filter="all(team-4-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-7), all(current_round=3, round-3-arena-2-team-7), all(current_round=3, round-3-arena-3-team-7), all(current_round=3, round-3-arena-4-team-7)))"/>
    <trigger scope="match" action="team-8-defeat-team-5-msg" filter="all(team-5-vs-team-8, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-8), all(current_round=2, round-2-arena-4-team-8)))"/>
    <trigger scope="match" action="team-8-defeat-team-6-msg" filter="all(team-6-vs-team-8, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-8), all(current_round=2, round-2-arena-4-team-8)))"/>
    <trigger scope="match" action="team-8-defeat-team-1-msg" filter="all(team-1-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-8), all(current_round=3, round-3-arena-2-team-8), all(current_round=3, round-3-arena-3-team-8), all(current_round=3, round-3-arena-4-team-8)))"/>
    <trigger scope="match" action="team-8-defeat-team-2-msg" filter="all(team-2-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-8), all(current_round=3, round-3-arena-2-team-8), all(current_round=3, round-3-arena-3-team-8), all(current_round=3, round-3-arena-4-team-8)))"/>
    <trigger scope="match" action="team-8-defeat-team-3-msg" filter="all(team-3-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-8), all(current_round=3, round-3-arena-2-team-8), all(current_round=3, round-3-arena-3-team-8), all(current_round=3, round-3-arena-4-team-8)))"/>
    <trigger scope="match" action="team-8-defeat-team-4-msg" filter="all(team-4-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-8), all(current_round=3, round-3-arena-2-team-8), all(current_round=3, round-3-arena-3-team-8), all(current_round=3, round-3-arena-4-team-8)))"/>
    <trigger scope="team" filter="award-points">
        <action>
            <set var="score" value="score+1"/>
        </action>
    </trigger>
    <action id="round-win-msg" scope="team">
        <message text="`aYour team won the duel!"/>
        <sound preset="OBJECTIVE_GOOD"/>
        <sound preset="OBJECTIVE_FIREWORKS_TWINKLE"/>
    </action>
    <trigger scope="team" action="round-win-msg" filter="round-1-arena-1-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-1-arena-2-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-1-arena-3-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-1-arena-4-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-2-arena-1-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-2-arena-2-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-2-arena-3-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-2-arena-4-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-3-arena-1-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-3-arena-2-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-3-arena-3-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-3-arena-4-winner"/>
</actions>
<control-points required="false" capture-time="0s" points="0" capture-rule="exclusive" permanent="true" show="false">
    <control-point id="round-1-arena-1-decider" name="round-1-arena-1-decider" capture="arena-1" capture-filter="allow-round-1-completion" player-filter="round-1-arena-1-competitors"/>
    <control-point id="round-1-arena-2-decider" name="round-1-arena-2-decider" capture="arena-2" capture-filter="allow-round-1-completion" player-filter="round-1-arena-2-competitors"/>
    <control-point id="round-1-arena-3-decider" name="round-1-arena-3-decider" capture="arena-3" capture-filter="allow-round-1-completion" player-filter="round-1-arena-3-competitors"/>
    <control-point id="round-1-arena-4-decider" name="round-1-arena-4-decider" capture="arena-4" capture-filter="allow-round-1-completion" player-filter="round-1-arena-4-competitors"/>
    <control-point id="round-2-arena-1-decider" name="round-2-arena-1-decider" capture="arena-1" capture-filter="allow-round-2-completion" player-filter="round-2-arena-1-competitors"/>
    <control-point id="round-2-arena-2-decider" name="round-2-arena-2-decider" capture="arena-2" capture-filter="allow-round-2-completion" player-filter="round-2-arena-2-competitors"/>
    <control-point id="round-2-arena-3-decider" name="round-2-arena-3-decider" capture="arena-3" capture-filter="allow-round-2-completion" player-filter="round-2-arena-3-competitors"/>
    <control-point id="round-2-arena-4-decider" name="round-2-arena-4-decider" capture="arena-4" capture-filter="allow-round-2-completion" player-filter="round-2-arena-4-competitors"/>
    <control-point id="round-3-arena-1-decider" name="round-3-arena-1-decider" capture="arena-1" capture-filter="allow-round-3-completion" player-filter="round-3-arena-1-competitors"/>
    <control-point id="round-3-arena-2-decider" name="round-3-arena-2-decider" capture="arena-2" capture-filter="allow-round-3-completion" player-filter="round-3-arena-2-competitors"/>
    <control-point id="round-3-arena-3-decider" name="round-3-arena-3-decider" capture="arena-3" capture-filter="allow-round-3-completion" player-filter="round-3-arena-3-competitors"/>
    <control-point id="round-3-arena-4-decider" name="round-3-arena-4-decider" capture="arena-4" capture-filter="allow-round-3-completion" player-filter="round-3-arena-4-competitors"/>
</control-points>
<portals sound="false">
    <portal destination="lobby-spawn" yaw="@90" forward="round-1-finished"/>
    <portal destination="lobby-spawn" yaw="@90" forward="round-2-finished"/>
    <portal destination="lobby-spawn" yaw="@90" forward="round-3-finished"/>
    <!--
    teleport players to respective arenas
    -->
    <portal destination="round-1-arena-1-spawn-1" yaw="@0"   forward="all(round-1-begin, only-team-1)"/>
    <portal destination="round-1-arena-1-spawn-2" yaw="@180" forward="all(round-1-begin, only-team-2)"/>
    <portal destination="round-1-arena-2-spawn-1" yaw="@0"   forward="all(round-1-begin, only-team-3)"/>
    <portal destination="round-1-arena-2-spawn-2" yaw="@180" forward="all(round-1-begin, only-team-4)"/>
    <portal destination="round-1-arena-3-spawn-1" yaw="@0"   forward="all(round-1-begin, only-team-5)"/>
    <portal destination="round-1-arena-3-spawn-2" yaw="@180" forward="all(round-1-begin, only-team-6)"/>
    <portal destination="round-1-arena-4-spawn-1" yaw="@0"   forward="all(round-1-begin, only-team-7)"/>
    <portal destination="round-1-arena-4-spawn-2" yaw="@180" forward="all(round-1-begin, only-team-8)"/>
    <portal destination="round-2-arena-1-spawn-1" yaw="@0"   forward="all(lobby, round-2-begin, not(round-2-finished), only-team-1, team-1-1-wins, round-2-arena-1-competitors)"/>
    <portal destination="round-2-arena-1-spawn-1" yaw="@0"   forward="all(lobby, round-2-begin, not(round-2-finished), only-team-2, team-2-1-wins, round-2-arena-1-competitors)"/>
    <portal destination="round-2-arena-1-spawn-2" yaw="@180" forward="all(lobby, round-2-begin, not(round-2-finished), only-team-3, team-3-1-wins, round-2-arena-1-competitors)"/>
    <portal destination="round-2-arena-1-spawn-2" yaw="@180" forward="all(lobby, round-2-begin, not(round-2-finished), only-team-4, team-4-1-wins, round-2-arena-1-competitors)"/>
    <portal destination="round-2-arena-2-spawn-1" yaw="@0"   forward="all(lobby, round-2-begin, not(round-2-finished), only-team-5, team-5-1-wins, round-2-arena-2-competitors)"/>
    <portal destination="round-2-arena-2-spawn-1" yaw="@0"   forward="all(lobby, round-2-begin, not(round-2-finished), only-team-6, team-6-1-wins, round-2-arena-2-competitors)"/>
    <portal destination="round-2-arena-2-spawn-2" yaw="@180" forward="all(lobby, round-2-begin, not(round-2-finished), only-team-7, team-7-1-wins, round-2-arena-2-competitors)"/>
    <portal destination="round-2-arena-2-spawn-2" yaw="@180" forward="all(lobby, round-2-begin, not(round-2-finished), only-team-8, team-8-1-wins, round-2-arena-2-competitors)"/>
    <portal destination="round-2-arena-3-spawn-1" yaw="@0"   forward="all(lobby, round-2-begin, not(round-2-finished), only-team-1, team-1-0-wins, round-2-arena-3-competitors)"/>
    <portal destination="round-2-arena-3-spawn-1" yaw="@0"   forward="all(lobby, round-2-begin, not(round-2-finished), only-team-2, team-2-0-wins, round-2-arena-3-competitors)"/>
    <portal destination="round-2-arena-3-spawn-2" yaw="@180" forward="all(lobby, round-2-begin, not(round-2-finished), only-team-3, team-3-0-wins, round-2-arena-3-competitors)"/>
    <portal destination="round-2-arena-3-spawn-2" yaw="@180" forward="all(lobby, round-2-begin, not(round-2-finished), only-team-4, team-4-0-wins, round-2-arena-3-competitors)"/>
    <portal destination="round-2-arena-4-spawn-1" yaw="@0"   forward="all(lobby, round-2-begin, not(round-2-finished), only-team-5, team-5-0-wins, round-2-arena-4-competitors)"/>
    <portal destination="round-2-arena-4-spawn-1" yaw="@0"   forward="all(lobby, round-2-begin, not(round-2-finished), only-team-6, team-6-0-wins, round-2-arena-4-competitors)"/>
    <portal destination="round-2-arena-4-spawn-2" yaw="@180" forward="all(lobby, round-2-begin, not(round-2-finished), only-team-7, team-7-0-wins, round-2-arena-4-competitors)"/>
    <portal destination="round-2-arena-4-spawn-2" yaw="@180" forward="all(lobby, round-2-begin, not(round-2-finished), only-team-8, team-8-0-wins, round-2-arena-4-competitors)"/>
    <portal destination="round-3-arena-1-spawn-1" yaw="@0"   forward="all(lobby, round-3-begin, not(round-3-finished), only-team-1, team-1-2-wins, round-3-arena-1-competitors)"/>
    <portal destination="round-3-arena-1-spawn-1" yaw="@0"   forward="all(lobby, round-3-begin, not(round-3-finished), only-team-2, team-2-2-wins, round-3-arena-1-competitors)"/>
    <portal destination="round-3-arena-1-spawn-1" yaw="@0"   forward="all(lobby, round-3-begin, not(round-3-finished), only-team-3, team-3-2-wins, round-3-arena-1-competitors)"/>
    <portal destination="round-3-arena-1-spawn-1" yaw="@0"   forward="all(lobby, round-3-begin, not(round-3-finished), only-team-4, team-4-2-wins, round-3-arena-1-competitors)"/>
    <portal destination="round-3-arena-1-spawn-2" yaw="@180" forward="all(lobby, round-3-begin, not(round-3-finished), only-team-5, team-5-2-wins, round-3-arena-1-competitors)"/>
    <portal destination="round-3-arena-1-spawn-2" yaw="@180" forward="all(lobby, round-3-begin, not(round-3-finished), only-team-6, team-6-2-wins, round-3-arena-1-competitors)"/>
    <portal destination="round-3-arena-1-spawn-2" yaw="@180" forward="all(lobby, round-3-begin, not(round-3-finished), only-team-7, team-7-2-wins, round-3-arena-1-competitors)"/>
    <portal destination="round-3-arena-1-spawn-2" yaw="@180" forward="all(lobby, round-3-begin, not(round-3-finished), only-team-8, team-8-2-wins, round-3-arena-1-competitors)"/>
    <portal destination="round-3-arena-2-spawn-1" yaw="@0"   forward="all(lobby, round-3-begin, not(round-3-finished), round-3-arena-2-3-spawn-1-competitors, round-1-winner)"/>
    <portal destination="round-3-arena-2-spawn-2" yaw="@180" forward="all(lobby, round-3-begin, not(round-3-finished), round-3-arena-2-3-spawn-2-competitors, round-1-winner)"/>
    <portal destination="round-3-arena-3-spawn-1" yaw="@0"   forward="all(lobby, round-3-begin, not(round-3-finished), round-3-arena-2-3-spawn-1-competitors, round-2-winner)"/>
    <portal destination="round-3-arena-3-spawn-2" yaw="@180" forward="all(lobby, round-3-begin, not(round-3-finished), round-3-arena-2-3-spawn-2-competitors, round-2-winner)"/>
    <portal destination="round-3-arena-4-spawn-1" yaw="@0"   forward="all(lobby, round-3-begin, not(round-3-finished), only-team-1, team-1-0-wins, round-3-arena-4-competitors)"/>
    <portal destination="round-3-arena-4-spawn-1" yaw="@0"   forward="all(lobby, round-3-begin, not(round-3-finished), only-team-2, team-2-0-wins, round-3-arena-4-competitors)"/>
    <portal destination="round-3-arena-4-spawn-1" yaw="@0"   forward="all(lobby, round-3-begin, not(round-3-finished), only-team-3, team-3-0-wins, round-3-arena-4-competitors)"/>
    <portal destination="round-3-arena-4-spawn-1" yaw="@0"   forward="all(lobby, round-3-begin, not(round-3-finished), only-team-4, team-4-0-wins, round-3-arena-4-competitors)"/>
    <portal destination="round-3-arena-4-spawn-2" yaw="@180" forward="all(lobby, round-3-begin, not(round-3-finished), only-team-5, team-5-0-wins, round-3-arena-4-competitors)"/>
    <portal destination="round-3-arena-4-spawn-2" yaw="@180" forward="all(lobby, round-3-begin, not(round-3-finished), only-team-6, team-6-0-wins, round-3-arena-4-competitors)"/>
    <portal destination="round-3-arena-4-spawn-2" yaw="@180" forward="all(lobby, round-3-begin, not(round-3-finished), only-team-7, team-7-0-wins, round-3-arena-4-competitors)"/>
    <portal destination="round-3-arena-4-spawn-2" yaw="@180" forward="all(lobby, round-3-begin, not(round-3-finished), only-team-8, team-8-0-wins, round-3-arena-4-competitors)"/>
    <!--
    rescue arena winners to spectator zone
    -->
    <portal destination="round-1-arena-1-spectator" yaw="@90" forward="all(participating, current_round=1, any(all(arena-1, round-1-arena-1-finished), all(arena-2, round-1-arena-2-finished), all(arena-3, round-1-arena-3-finished), all(arena-4, round-1-arena-4-finished)), not(round-1-arena-1-finished))"/>
    <portal destination="round-1-arena-2-spectator" yaw="@90" forward="all(participating, current_round=1, any(all(arena-1, round-1-arena-1-finished), all(arena-2, round-1-arena-2-finished), all(arena-3, round-1-arena-3-finished), all(arena-4, round-1-arena-4-finished)), not(round-1-arena-2-finished))"/>
    <portal destination="round-1-arena-3-spectator" yaw="@90" forward="all(participating, current_round=1, any(all(arena-1, round-1-arena-1-finished), all(arena-2, round-1-arena-2-finished), all(arena-3, round-1-arena-3-finished), all(arena-4, round-1-arena-4-finished)), not(round-1-arena-3-finished))"/>
    <portal destination="round-1-arena-4-spectator" yaw="@90" forward="all(participating, current_round=1, any(all(arena-1, round-1-arena-1-finished), all(arena-2, round-1-arena-2-finished), all(arena-3, round-1-arena-3-finished), all(arena-4, round-1-arena-4-finished)), not(round-1-arena-4-finished))"/>
    <portal destination="lobby-spawn"                         forward="all(participating, current_round=1, any(all(arena-1, round-1-arena-1-finished), all(arena-2, round-1-arena-2-finished), all(arena-3, round-1-arena-3-finished), all(arena-4, round-1-arena-4-finished)), round-1-finished)"/>
    <portal destination="round-2-arena-1-spectator" yaw="@90" forward="all(participating, current_round=2, any(all(arena-1, round-2-arena-1-finished), all(arena-2, round-2-arena-2-finished), all(arena-3, round-2-arena-3-finished), all(arena-4, round-2-arena-4-finished)), not(round-2-arena-1-finished))"/>
    <portal destination="round-2-arena-2-spectator" yaw="@90" forward="all(participating, current_round=2, any(all(arena-1, round-2-arena-1-finished), all(arena-2, round-2-arena-2-finished), all(arena-3, round-2-arena-3-finished), all(arena-4, round-2-arena-4-finished)), not(round-2-arena-2-finished))"/>
    <portal destination="round-2-arena-3-spectator" yaw="@90" forward="all(participating, current_round=2, any(all(arena-1, round-2-arena-1-finished), all(arena-2, round-2-arena-2-finished), all(arena-3, round-2-arena-3-finished), all(arena-4, round-2-arena-4-finished)), not(round-2-arena-3-finished))"/>
    <portal destination="round-2-arena-4-spectator" yaw="@90" forward="all(participating, current_round=2, any(all(arena-1, round-2-arena-1-finished), all(arena-2, round-2-arena-2-finished), all(arena-3, round-2-arena-3-finished), all(arena-4, round-2-arena-4-finished)), not(round-2-arena-4-finished))"/>
    <portal destination="lobby-spawn"                         forward="all(participating, current_round=2, any(all(arena-1, round-2-arena-1-finished), all(arena-2, round-2-arena-2-finished), all(arena-3, round-2-arena-3-finished), all(arena-4, round-2-arena-4-finished)), round-2-finished)"/>
    <portal destination="round-3-arena-1-spectator" yaw="@90" forward="all(participating, current_round=3, any(all(arena-1, round-3-arena-1-finished), all(arena-2, round-3-arena-2-finished), all(arena-3, round-3-arena-3-finished), all(arena-4, round-3-arena-4-finished)), not(round-3-arena-1-finished))"/>
    <portal destination="round-3-arena-2-spectator" yaw="@90" forward="all(participating, current_round=3, any(all(arena-1, round-3-arena-1-finished), all(arena-2, round-3-arena-2-finished), all(arena-3, round-3-arena-3-finished), all(arena-4, round-3-arena-4-finished)), not(round-3-arena-2-finished))"/>
    <portal destination="round-3-arena-3-spectator" yaw="@90" forward="all(participating, current_round=3, any(all(arena-1, round-3-arena-1-finished), all(arena-2, round-3-arena-2-finished), all(arena-3, round-3-arena-3-finished), all(arena-4, round-3-arena-4-finished)), not(round-3-arena-3-finished))"/>
    <portal destination="round-3-arena-4-spectator" yaw="@90" forward="all(participating, current_round=3, any(all(arena-1, round-3-arena-1-finished), all(arena-2, round-3-arena-2-finished), all(arena-3, round-3-arena-3-finished), all(arena-4, round-3-arena-4-finished)), not(round-3-arena-4-finished))"/>
    <portal destination="lobby-spawn"                         forward="all(participating, current_round=3, any(all(arena-1, round-3-arena-1-finished), all(arena-2, round-3-arena-2-finished), all(arena-3, round-3-arena-3-finished), all(arena-4, round-3-arena-4-finished)), round-3-finished)"/>
    <!--
    inter-arena portals
    -->
    <portal destination="round-1-arena-2-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-1-spectator, round-1-arena-1-finished, not(round-1-finished)), round-1-arena-1-spectator-portal), not(round-1-arena-2-finished))"/>
    <portal destination="round-1-arena-3-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-1-spectator, round-1-arena-1-finished, not(round-1-finished)), round-1-arena-1-spectator-portal), not(round-1-arena-3-finished), round-1-arena-2-finished)"/>
    <portal destination="round-1-arena-4-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-1-spectator, round-1-arena-1-finished, not(round-1-finished)), round-1-arena-1-spectator-portal), not(round-1-arena-4-finished), round-1-arena-2-finished, round-1-arena-3-finished)"/>
    <portal destination="round-1-arena-3-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-2-spectator, round-1-arena-2-finished, not(round-1-finished)), round-1-arena-2-spectator-portal), not(round-1-arena-3-finished))"/>
    <portal destination="round-1-arena-4-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-2-spectator, round-1-arena-2-finished, not(round-1-finished)), round-1-arena-2-spectator-portal), not(round-1-arena-4-finished), round-1-arena-3-finished)"/>
    <portal destination="round-1-arena-1-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-2-spectator, round-1-arena-2-finished, not(round-1-finished)), round-1-arena-2-spectator-portal), not(round-1-arena-1-finished), round-1-arena-3-finished, round-1-arena-4-finished)"/>
    <portal destination="round-1-arena-4-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-3-spectator, round-1-arena-3-finished, not(round-1-finished)), round-1-arena-3-spectator-portal), not(round-1-arena-4-finished))"/>
    <portal destination="round-1-arena-1-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-3-spectator, round-1-arena-3-finished, not(round-1-finished)), round-1-arena-3-spectator-portal), not(round-1-arena-1-finished), round-1-arena-4-finished)"/>
    <portal destination="round-1-arena-2-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-3-spectator, round-1-arena-3-finished, not(round-1-finished)), round-1-arena-3-spectator-portal), not(round-1-arena-2-finished), round-1-arena-4-finished, round-1-arena-1-finished)"/>
    <portal destination="round-1-arena-1-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-4-spectator, round-1-arena-4-finished, not(round-1-finished)), round-1-arena-4-spectator-portal), not(round-1-arena-1-finished))"/>
    <portal destination="round-1-arena-2-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-4-spectator, round-1-arena-4-finished, not(round-1-finished)), round-1-arena-4-spectator-portal), not(round-1-arena-2-finished), round-1-arena-1-finished)"/>
    <portal destination="round-1-arena-3-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-4-spectator, round-1-arena-4-finished, not(round-1-finished)), round-1-arena-4-spectator-portal), not(round-1-arena-3-finished), round-1-arena-1-finished, round-1-arena-2-finished)"/>
    <portal destination="round-2-arena-2-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-1-spectator, round-2-arena-1-finished, not(round-2-finished)), round-2-arena-1-spectator-portal), not(round-2-arena-2-finished))"/>
    <portal destination="round-2-arena-3-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-1-spectator, round-2-arena-1-finished, not(round-2-finished)), round-2-arena-1-spectator-portal), not(round-2-arena-3-finished), round-2-arena-2-finished)"/>
    <portal destination="round-2-arena-4-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-1-spectator, round-2-arena-1-finished, not(round-2-finished)), round-2-arena-1-spectator-portal), not(round-2-arena-4-finished), round-2-arena-2-finished, round-2-arena-3-finished)"/>
    <portal destination="round-2-arena-3-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-2-spectator, round-2-arena-2-finished, not(round-2-finished)), round-2-arena-2-spectator-portal), not(round-2-arena-3-finished))"/>
    <portal destination="round-2-arena-4-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-2-spectator, round-2-arena-2-finished, not(round-2-finished)), round-2-arena-2-spectator-portal), not(round-2-arena-4-finished), round-2-arena-3-finished)"/>
    <portal destination="round-2-arena-1-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-2-spectator, round-2-arena-2-finished, not(round-2-finished)), round-2-arena-2-spectator-portal), not(round-2-arena-1-finished), round-2-arena-3-finished, round-2-arena-4-finished)"/>
    <portal destination="round-2-arena-4-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-3-spectator, round-2-arena-3-finished, not(round-2-finished)), round-2-arena-3-spectator-portal), not(round-2-arena-4-finished))"/>
    <portal destination="round-2-arena-1-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-3-spectator, round-2-arena-3-finished, not(round-2-finished)), round-2-arena-3-spectator-portal), not(round-2-arena-1-finished), round-2-arena-4-finished)"/>
    <portal destination="round-2-arena-2-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-3-spectator, round-2-arena-3-finished, not(round-2-finished)), round-2-arena-3-spectator-portal), not(round-2-arena-2-finished), round-2-arena-4-finished, round-2-arena-1-finished)"/>
    <portal destination="round-2-arena-1-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-4-spectator, round-2-arena-4-finished, not(round-2-finished)), round-2-arena-4-spectator-portal), not(round-2-arena-1-finished))"/>
    <portal destination="round-2-arena-2-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-4-spectator, round-2-arena-4-finished, not(round-2-finished)), round-2-arena-4-spectator-portal), not(round-2-arena-2-finished), round-2-arena-1-finished)"/>
    <portal destination="round-2-arena-3-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-4-spectator, round-2-arena-4-finished, not(round-2-finished)), round-2-arena-4-spectator-portal), not(round-2-arena-3-finished), round-2-arena-1-finished, round-2-arena-2-finished)"/>
    <portal destination="round-3-arena-2-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-1-spectator, round-3-arena-1-finished, not(round-3-finished)), round-3-arena-1-spectator-portal), not(round-3-arena-2-finished))"/>
    <portal destination="round-3-arena-3-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-1-spectator, round-3-arena-1-finished, not(round-3-finished)), round-3-arena-1-spectator-portal), not(round-3-arena-3-finished), round-3-arena-2-finished)"/>
    <portal destination="round-3-arena-4-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-1-spectator, round-3-arena-1-finished, not(round-3-finished)), round-3-arena-1-spectator-portal), not(round-3-arena-4-finished), round-3-arena-2-finished, round-3-arena-3-finished)"/>
    <portal destination="round-3-arena-3-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-2-spectator, round-3-arena-2-finished, not(round-3-finished)), round-3-arena-2-spectator-portal), not(round-3-arena-3-finished))"/>
    <portal destination="round-3-arena-4-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-2-spectator, round-3-arena-2-finished, not(round-3-finished)), round-3-arena-2-spectator-portal), not(round-3-arena-4-finished), round-3-arena-3-finished)"/>
    <portal destination="round-3-arena-1-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-2-spectator, round-3-arena-2-finished, not(round-3-finished)), round-3-arena-2-spectator-portal), not(round-3-arena-1-finished), round-3-arena-3-finished, round-3-arena-4-finished)"/>
    <portal destination="round-3-arena-4-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-3-spectator, round-3-arena-3-finished, not(round-3-finished)), round-3-arena-3-spectator-portal), not(round-3-arena-4-finished))"/>
    <portal destination="round-3-arena-1-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-3-spectator, round-3-arena-3-finished, not(round-3-finished)), round-3-arena-3-spectator-portal), not(round-3-arena-1-finished), round-3-arena-4-finished)"/>
    <portal destination="round-3-arena-2-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-3-spectator, round-3-arena-3-finished, not(round-3-finished)), round-3-arena-3-spectator-portal), not(round-3-arena-2-finished), round-3-arena-4-finished, round-3-arena-1-finished)"/>
    <portal destination="round-3-arena-1-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-4-spectator, round-3-arena-4-finished, not(round-3-finished)), round-3-arena-4-spectator-portal), not(round-3-arena-1-finished))"/>
    <portal destination="round-3-arena-2-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-4-spectator, round-3-arena-4-finished, not(round-3-finished)), round-3-arena-4-spectator-portal), not(round-3-arena-2-finished), round-3-arena-1-finished)"/>
    <portal destination="round-3-arena-3-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-4-spectator, round-3-arena-4-finished, not(round-3-finished)), round-3-arena-4-spectator-portal), not(round-3-arena-3-finished), round-3-arena-1-finished, round-3-arena-2-finished)"/>
</portals>
<if variant="spleef">
    <renewables>
        <renewable region="all-arenas" interval="80" grow="false" particles="true">
            <renew-filter>
                <material>snow block</material>
            </renew-filter>
            <replace-filter>
                <material>air</material>
            </replace-filter>
        </renewable>
    </renewables>
</if>
<itemremove>
    <item>leather helmet</item>
    <item>leather chestplate</item>
    <item>leather leggings</item>
    <item>leather boots</item>
    <item>iron helmet</item>
    <item>iron chestplate</item>
    <item>iron leggings</item>
    <item>iron boots</item>
    <item>chainmail chestplate</item>
    <item>chainmail helmet</item>
    <item>chainmail leggings</item>
    <item>chainmail boots</item>
    <item>gold helmet</item>
    <item>gold chestplate</item>
    <item>gold leggings</item>
    <item>gold boots</item>
    <item>diamond helmet</item>
    <item>diamond chestplate</item>
    <item>diamond leggings</item>
    <item>diamond boots</item>
    <item>arrow</item>
    <item>potion</item>
    <item>golden apple</item>
    <item>tnt</item>
    <item>snow ball</item>
    <item>snow block</item>
    <item>monster egg</item>
    <item>egg</item>
    <item>dispenser</item>
    <item>trap door</item>
    <item>ladder</item>
    <item>workbench</item>
    <item>stone plate</item>
    <item>stone button</item>
    <item>water bucket</item>
    <item>bucket</item>
    <item>diode</item>
    <item>redstone torch on</item>
    <item>redstone block</item>
    <item>redstone</item>
    <item>stained glass</item>
    <item>stained clay</item>
    <item>sulphur</item>
</itemremove>
<toolrepair>
    <tool>stone sword</tool>
    <tool>iron sword</tool>
    <tool>diamond sword</tool>
    <tool>bow</tool>
    <tool>diamond axe</tool>
    <tool>wood hoe</tool>
    <tool>gold hoe</tool>
    <tool>blaze rod</tool>
    <tool>raw fish</tool>
    <tool>fishing rod</tool>
    <tool>wood spade</tool>
    <tool>stone spade</tool>
    <tool>iron spade</tool>
    <tool>gold spade</tool>
    <tool>diamond spade</tool>
    <tool>flint and steel</tool>
    <tool>diamond pickaxe</tool>
</toolrepair>
</map>
