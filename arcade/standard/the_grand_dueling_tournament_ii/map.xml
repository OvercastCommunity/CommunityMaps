<map proto="1.4.2" game="Duel Wins">
<name>The Grand Dueling Tournament II</name>
<version>2.0.3</version>
<objective>Win the tournament.</objective>
<phase>development</phase>
<include id="countdown"/>
<authors>
    <author uuid="07fa10c6-f564-4630-861e-fe134ae27527"/> <!-- Yoyo -->
</authors>
<contributors>
    <contributor uuid="f690a591-348b-482e-a18d-7779d0c0a28c" contribution="Remastered XML"/> <!-- mitchiii -->
</contributors>
<score>
    <limit>3</limit>
</score>
<teams>
    <team id="team-1" color="dark red"     max="6" min="1">Red</team>
    <team id="team-2" color="blue"         max="6" min="1">Blue</team>
    <team id="team-3" color="dark green"   max="6" min="1">Green</team>
    <team id="team-4" color="dark purple"  max="6" min="1">Purple</team>
    <team id="team-5" color="yellow"       max="6" min="1">Yellow</team>
    <team id="team-6" color="white"        max="6" min="1">White</team>
    <team id="team-7" color="light purple" max="6" min="1">Pink</team>
    <team id="team-8" color="gray"         max="6" min="1">Gray</team>
</teams>
<spawns spread="true">
    <spawn region="lobby-spawn" angle="193.5,6,31.5" kit="clear-kit" filter="current_round=0"/>
    <spawn region="lobby-spawn" kit="clear-kit" filter="between-rounds"/>
    <spawn region="round-1-arena-1-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=1, not(round-1-arena-1-finished))"/>
    <spawn region="round-1-arena-2-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=1, not(round-1-arena-2-finished))"/>
    <spawn region="round-1-arena-3-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=1, not(round-1-arena-3-finished))"/>
    <spawn region="round-1-arena-4-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=1, not(round-1-arena-4-finished))"/>
    <spawn region="round-2-arena-1-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=2, not(round-2-arena-1-finished))"/>
    <spawn region="round-2-arena-2-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=2, not(round-2-arena-2-finished))"/>
    <spawn region="round-2-arena-3-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=2, not(round-2-arena-3-finished))"/>
    <spawn region="round-2-arena-4-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=2, not(round-2-arena-4-finished))"/>
    <spawn region="round-3-arena-1-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=3, not(round-3-arena-1-finished))"/>
    <spawn region="round-3-arena-2-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=3, not(round-3-arena-2-finished))"/>
    <spawn region="round-3-arena-3-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=3, not(round-3-arena-3-finished))"/>
    <spawn region="round-3-arena-4-spectator" yaw="90" kit="spectating-kit" filter="all(current_round=3, not(round-3-arena-4-finished))"/>
    <default region="lobby-spawn" angle="193.5,6,31.5"/>
</spawns>
<respawn auto="true"/>
<kits>
    <kit id="clear-kit" force="true">
        <clear effects="true"/>
        <health>20</health>
        <max-health>20</max-health>
        <foodlevel>20</foodlevel>
        <game-mode>adventure</game-mode>
        <double-jump enabled="false"/>
    </kit>
    <kit id="spectating-kit" parents="clear-kit" force="true">
        <effect ambient="true" duration="oo">invisibility</effect>
    </kit>
    <kit id="kit-0" parents="clear-kit"> <!-- iron -->
        <item slot="0" material="iron sword" unbreakable="true"/>
        <item slot="1" material="bow" unbreakable="true"/>
        <item slot="2" material="arrow" amount="36"/>
        <helmet material="iron helmet"/>
        <chestplate material="iron chestplate"/>
        <leggings material="iron leggings"/>
        <boots material="iron boots"/>
    </kit>
    <kit id="kit-1" parents="clear-kit"> <!-- gold -->
        <item slot="0" material="stone sword" unbreakable="true"/>
        <item slot="1" material="bow" unbreakable="true"/>
        <item slot="2" material="arrow" amount="36"/>
        <helmet material="gold helmet"/>
        <chestplate material="gold chestplate"/>
        <leggings material="gold leggings"/>
        <boots material="gold boots"/>
    </kit>
    <kit id="kit-2" parents="clear-kit"> <!-- slappy fish -->
        <item slot="0" material="raw fish">
            <enchantment level="1">damage all</enchantment>
            <enchantment level="2">knockback</enchantment>
        </item>
    </kit>
    <kit id="kit-3" parents="clear-kit"> <!-- archer -->
        <item slot="0" material="bow" unbreakable="true">
            <enchantment level="1">arrow damage</enchantment>
            <enchantment level="1">arrow knockback</enchantment>
            <enchantment level="1">arrow infinite</enchantment>
        </item>
        <item slot="27" material="arrow"/>
        <helmet material="iron helmet"/>
        <chestplate material="leather chestplate" team-color="true"/>
        <leggings material="leather leggings" team-color="true"/>
        <boots material="iron boots"/>
    </kit>
    <kit id="kit-4" parents="clear-kit"> <!-- lumberjack -->
        <item slot="0" material="diamond axe" unbreakable="true">
            <enchantment level="2">damage all</enchantment>
        </item>
        <helmet material="diamond helmet"/>
        <chestplate material="diamond chestplate"/>
        <leggings material="diamond leggings"/>
        <boots material="diamond boots"/>
    </kit>
    <kit id="kit-5" parents="clear-kit"> <!-- mcsg -->
        <item slot="0" material="stone sword"/>
        <item slot="1" material="bow"/>
        <item slot="2" material="fishing rod"/>
        <item slot="3" material="golden apple"/>
        <item slot="8" material="arrow" amount="16"/>
        <helmet material="chainmail helmet"/>
        <chestplate material="chainmail chestplate"/>
        <leggings material="chainmail leggings"/>
        <boots material="chainmail boots"/>
    </kit>
    <kit id="kit-6" parents="clear-kit"> <!-- diamond -->
        <item slot="0" material="diamond sword" unbreakable="true"/>
        <item slot="1" material="bow" unbreakable="true"/>
        <item slot="2" amount="2" material="golden apple"/>
        <item slot="8" amount="64" material="arrow"/>
        <helmet material="diamond helmet"/>
        <chestplate material="diamond chestplate"/>
        <leggings material="diamond leggings"/>
        <boots material="diamond boots"/>
    </kit>
    <kit id="kit-7" parents="clear-kit"> <!-- pot -->
        <item slot="0" material="diamond sword" unbreakable="true">
            <enchantment level="5">damage all</enchantment>
        </item>
        <item slot="1" material="bow" unbreakable="true">
            <enchantment level="4">arrow damage</enchantment>
        </item>
        <item slot="2" material="potion" damage="16421">
            <potion amplifier="2">heal</potion>
        </item>
        <item slot="3" material="potion" damage="16421">
            <potion amplifier="2">heal</potion>
        </item>
        <item slot="4" material="potion" damage="16421">
            <potion amplifier="2">heal</potion>
        </item>
        <item slot="5" material="potion" damage="16421">
            <potion amplifier="2">heal</potion>
        </item>
        <item slot="6" material="potion" damage="16421">
            <potion amplifier="2">heal</potion>
        </item>
        <item slot="7" material="potion" damage="16421">
            <potion amplifier="2">heal</potion>
        </item>
        <item slot="8" material="potion" damage="16421">
            <potion amplifier="2">heal</potion>
        </item>
        <item slot="27" amount="64" material="arrow"/>
        <helmet material="diamond helmet" damage="250">
            <enchantment level="1">protection environmental</enchantment>
        </helmet>
        <chestplate material="diamond chestplate" damage="300">
            <enchantment level="2">protection environmental</enchantment>
        </chestplate>
        <leggings material="diamond leggings" damage="300">
            <enchantment level="1">protection environmental</enchantment>
        </leggings>
        <boots material="diamond boots" damage="300">
            <enchantment level="1">protection environmental</enchantment>
        </boots>
    </kit>
    <kit id="kit-8" parents="clear-kit"> <!-- gapple -->
        <item slot="0" material="diamond sword" unbreakable="true">
            <enchantment level="5">damage all</enchantment>
        </item>
        <item slot="1" material="golden apple" damage="1" amount="64"/>
        <helmet material="diamond helmet" damage="250">
            <enchantment level="3">protection environmental</enchantment>
        </helmet>
        <chestplate material="diamond chestplate" damage="300">
            <enchantment level="3">protection environmental</enchantment>
        </chestplate>
        <leggings material="diamond leggings" damage="300">
            <enchantment level="3">protection environmental</enchantment>
        </leggings>
        <boots material="diamond boots" damage="300">
            <enchantment level="3">protection environmental</enchantment>
        </boots>
    </kit>
    <kit id="kit-9" parents="clear-kit"> <!-- gunz -->
        <item slot="0" material="wood hoe" unbreakable="true" projectile="egg-gun" name="`rEgg Gun"/>
    </kit>
    <kit id="kit-10" parents="clear-kit"> <!-- conquest  -->
        <item slot="0" material="stone sword" unbreakable="true"/>
        <item slot="1" material="bow" unbreakable="true"/>
        <item slot="2" material="golden apple"/>
        <item slot="8" material="arrow" amount="12"/>
        <helmet material="leather helmet" unbreakable="true" team-color="true"/>
        <chestplate material="leather chestplate" unbreakable="true" team-color="true"/>
        <leggings material="leather leggings" unbreakable="true" team-color="true">
            <enchantment level="3">protection projectile</enchantment>
        </leggings>
        <boots material="iron boots" unbreakable="true"/>
    </kit>
    <kit id="kit-11" parents="clear-kit"> <!-- blasternauts  -->
        <item slot="0" material="blaze rod" name="`rMelee Stick">
            <enchantment level="2">knockback</enchantment>
            <enchantment>damage all</enchantment>
        </item>
        <item slot="1" material="gold hoe" unbreakable="true" projectile="tnt-gun" name="`rTNT Launcher"/>
        <item slot="2" material="tnt" amount="6" show-can-place-on="false">
            <can-place-on>
                <all-blocks/>
            </can-place-on>
        </item>
        <item slot="3" material="snow ball" amount="16" name="`rGrenade" grenade="true" grenade-power="1.2"/>
        <item slot="4" material="snow ball" amount="16" name="`rGrenade" grenade="true" grenade-power="1.2"/>
        <item slot="8" material="potion" damage="8229"/>
        <helmet material="iron helmet" unbreakable="true"/>
        <chestplate material="leather chestplate" unbreakable="true" team-color="true"/>
        <leggings material="chainmail leggings" unbreakable="true">
            <enchantment level="2">protection explosions</enchantment>
        </leggings>
        <boots material="iron boots" unbreakable="true"/>
        <double-jump/>
    </kit>
    <kit id="kit-12" parents="clear-kit" force="true"> <!-- uhc -->
        <foodlevel>16</foodlevel>
        <item slot="0" material="iron sword">
            <enchantment level="2">damage all</enchantment>
        </item>
        <item slot="1" material="bow">
            <enchantment>arrow damage</enchantment>
        </item>
        <helmet material="iron helmet">
            <enchantment>protection environmental</enchantment>
        </helmet>
        <chestplate material="iron chestplate">
            <enchantment>protection environmental</enchantment>
        </chestplate>
        <leggings material="iron leggings">
            <enchantment>protection environmental</enchantment>
        </leggings>
        <boots material="iron boots">
            <enchantment>protection environmental</enchantment>
        </boots>
        <item slot="28" material="arrow" amount="32"/>
        <item slot="2" material="potion" damage="16421">
            <potion amplifier="2">heal</potion>
        </item>
        <item slot="3" material="potion" damage="16421">
            <potion amplifier="2">heal</potion>
        </item>
        <item slot="4" material="potion" damage="16421">
            <potion amplifier="2">heal</potion>
        </item>
    </kit>
</kits>
<projectiles>
    <projectile id="egg-gun" name="Egg Gun" projectile="Egg" velocity="3.5" damage="1.5" throwable="false" cooldown="0s"/>
    <projectile id="tnt-gun" name="TNT Gun" projectile="TNTPrimed" velocity="2" damage="10" throwable="false" cooldown="3s"/>
</projectiles>
<tnt>
    <instantignite>on</instantignite>
    <fuse>1.25s</fuse>
    <power>3</power>
</tnt>
<hunger>
    <depletion>off</depletion>
</hunger>
<timelock>on</timelock>
<kill-rewards>
    <kill-reward filter="any(all(current_round=1, round_1_kit=0..1), all(current_round=2, round_2_kit=0..1), all(current_round=3, round_3_kit=0..1))">
        <item material="golden apple"/>
        <item material="arrow" amount="12"/>
    </kill-reward>
    <kill-reward filter="any(all(current_round=1, round_1_kit=3..4), all(current_round=2, round_2_kit=3..4), all(current_round=3, round_3_kit=3..4))">
        <item material="golden apple"/>
    </kill-reward>
    <kill-reward filter="any(all(current_round=1, round_1_kit=6), all(current_round=2, round_2_kit=6), all(current_round=3, round_3_kit=6))">
        <item material="golden apple"/>
        <item material="arrow" amount="16"/>
    </kill-reward>
    <kill-reward filter="any(all(current_round=1, round_1_kit=7), all(current_round=2, round_2_kit=7), all(current_round=3, round_3_kit=7))">
        <item material="potion" damage="16421">
            <potion amplifier="2">heal</potion>
        </item>
        <item material="potion" damage="16421">
            <potion amplifier="2">heal</potion>
        </item>
        <item material="arrow" amount="24"/>
    </kill-reward>
    <kill-reward filter="any(all(current_round=1, round_1_kit=10), all(current_round=2, round_2_kit=10), all(current_round=3, round_3_kit=10))">
        <item material="golden apple"/>
        <item material="arrow" amount="6"/>
    </kill-reward>
    <kill-reward filter="any(all(current_round=1, round_1_kit=11), all(current_round=2, round_2_kit=11), all(current_round=3, round_3_kit=11))">
        <item material="tnt" amount="2" show-can-place-on="false">
            <can-place-on>
                <all-blocks/>
            </can-place-on>
        </item>
        <item material="snow ball" amount="6" name="`rGrenade" grenade="true" grenade-power="1.2"/>
        <item material="potion" damage="8229"/>
    </kill-reward>
</kill-rewards>
<damage>
    <deny>
        <not>
            <region id="all-arenas"/>
        </not>
    </deny>
</damage>
<disabledamage>
    <damage ally="true" self="true" enemy="false" other="false">block explosion</damage>
</disabledamage>
<filters>
    <match-finished id="match-finished"/>
    <variable id="round-1" var="current_round">1</variable>
    <variable id="round-2" var="current_round">2</variable>
    <variable id="round-3" var="current_round">3</variable>
    <after id="round-1-begin" duration="10s" message="Round 1 begins in {0}">
        <time id="round-1-starting">18s</time>
    </after>
    <after id="round-2-begin" duration="10s" message="Round 2 begins in {0}">
        <after id="round-2-starting" duration="2s">
            <all id="round-1-finished">
                <filter id="round-1-arena-1-finished"/>
                <filter id="round-1-arena-2-finished"/>
                <filter id="round-1-arena-3-finished"/>
                <filter id="round-1-arena-4-finished"/>
            </all>
        </after>
    </after>
    <after id="round-3-begin" duration="10s" message="Round 2 begins in {0}">
        <after id="round-3-starting" duration="2s">
            <all id="round-2-finished">
                <filter id="round-2-arena-1-finished"/>
                <filter id="round-2-arena-2-finished"/>
                <filter id="round-2-arena-3-finished"/>
                <filter id="round-2-arena-4-finished"/>
            </all>
        </after>
    </after>
    <all id="round-3-finished">
        <filter id="round-3-arena-1-finished"/>
        <filter id="round-3-arena-2-finished"/>
        <filter id="round-3-arena-3-finished"/>
        <filter id="round-3-arena-4-finished"/>
    </all>
    <any id="between-rounds">
        <all>
            <filter id="round-1"/>
            <filter id="round-1-finished"/>
        </all>
        <all>
            <filter id="round-2"/>
            <filter id="round-2-finished"/>
        </all>
    </any>
    <any id="countdown-start">
        <all>
            <variable var="current_round">1</variable>
            <after duration="7s" filter="round-1-starting"/>
        </all>
        <all>
            <variable var="current_round">2</variable>
            <after duration="7s" filter="round-2-starting"/>
        </all>
        <all>
            <variable var="current_round">3</variable>
            <after duration="7s" filter="round-3-starting"/>
        </all>
    </any>
    <any id="participating">
        <team id="only-team-1">team-1</team>
        <team id="only-team-2">team-2</team>
        <team id="only-team-3">team-3</team>
        <team id="only-team-4">team-4</team>
        <team id="only-team-5">team-5</team>
        <team id="only-team-6">team-6</team>
        <team id="only-team-7">team-7</team>
        <team id="only-team-8">team-8</team>
    </any>
    <all id="only-team-1-0-wins">
        <filter id="only-team-1"/>
        <score id="team-1-0-wins" team="team-1">0</score>
    </all>
    <all id="only-team-1-1-wins">
        <filter id="only-team-1"/>
        <score id="team-1-1-wins" team="team-1">1</score>
    </all>
    <all id="only-team-1-2-wins">
        <filter id="only-team-1"/>
        <score id="team-1-2-wins" team="team-1">2</score>
    </all>
    <all id="only-team-2-0-wins">
        <filter id="only-team-2"/>
        <score id="team-2-0-wins" team="team-2">0</score>
    </all>
    <all id="only-team-2-1-wins">
        <filter id="only-team-2"/>
        <score id="team-2-1-wins" team="team-2">1</score>
    </all>
    <all id="only-team-2-2-wins">
        <filter id="only-team-2"/>
        <score id="team-2-2-wins" team="team-2">2</score>
    </all>
    <all id="only-team-3-0-wins">
        <filter id="only-team-3"/>
        <score id="team-3-0-wins" team="team-3">0</score>
    </all>
    <all id="only-team-3-1-wins">
        <filter id="only-team-3"/>
        <score id="team-3-1-wins" team="team-3">1</score>
    </all>
    <all id="only-team-3-2-wins">
        <filter id="only-team-3"/>
        <score id="team-3-2-wins" team="team-3">2</score>
    </all>
    <all id="only-team-4-0-wins">
        <filter id="only-team-4"/>
        <score id="team-4-0-wins" team="team-4">0</score>
    </all>
    <all id="only-team-4-1-wins">
        <filter id="only-team-4"/>
        <score id="team-4-1-wins" team="team-4">1</score>
    </all>
    <all id="only-team-4-2-wins">
        <filter id="only-team-4"/>
        <score id="team-4-2-wins" team="team-4">2</score>
    </all>
    <all id="only-team-5-0-wins">
        <filter id="only-team-5"/>
        <score id="team-5-0-wins" team="team-5">0</score>
    </all>
    <all id="only-team-5-1-wins">
        <filter id="only-team-5"/>
        <score id="team-5-1-wins" team="team-5">1</score>
    </all>
    <all id="only-team-5-2-wins">
        <filter id="only-team-5"/>
        <score id="team-5-2-wins" team="team-5">2</score>
    </all>
    <all id="only-team-6-0-wins">
        <filter id="only-team-6"/>
        <score id="team-6-0-wins" team="team-6">0</score>
    </all>
    <all id="only-team-6-1-wins">
        <filter id="only-team-6"/>
        <score id="team-6-1-wins" team="team-6">1</score>
    </all>
    <all id="only-team-6-2-wins">
        <filter id="only-team-6"/>
        <score id="team-6-2-wins" team="team-6">2</score>
    </all>
    <all id="only-team-7-0-wins">
        <filter id="only-team-7"/>
        <score id="team-7-0-wins" team="team-7">0</score>
    </all>
    <all id="only-team-7-1-wins">
        <filter id="only-team-7"/>
        <score id="team-7-1-wins" team="team-7">1</score>
    </all>
    <all id="only-team-7-2-wins">
        <filter id="only-team-7"/>
        <score id="team-7-2-wins" team="team-7">2</score>
    </all>
    <all id="only-team-8-0-wins">
        <filter id="only-team-8"/>
        <score id="team-8-0-wins" team="team-8">0</score>
    </all>
    <all id="only-team-8-1-wins">
        <filter id="only-team-8"/>
        <score id="team-8-1-wins" team="team-8">1</score>
    </all>
    <all id="only-team-8-2-wins">
        <filter id="only-team-8"/>
        <score id="team-8-2-wins" team="team-8">2</score>
    </all>
    <completed id="round-1-arena-1-finished">round-1-arena-1-decider</completed>
    <completed id="round-1-arena-2-finished">round-1-arena-2-decider</completed>
    <completed id="round-1-arena-3-finished">round-1-arena-3-decider</completed>
    <completed id="round-1-arena-4-finished">round-1-arena-4-decider</completed>
    <completed id="round-2-arena-1-finished">round-2-arena-1-decider</completed>
    <completed id="round-2-arena-2-finished">round-2-arena-2-decider</completed>
    <completed id="round-2-arena-3-finished">round-2-arena-3-decider</completed>
    <completed id="round-2-arena-4-finished">round-2-arena-4-decider</completed>
    <completed id="round-3-arena-1-finished">round-3-arena-1-decider</completed>
    <completed id="round-3-arena-2-finished">round-3-arena-2-decider</completed>
    <completed id="round-3-arena-3-finished">round-3-arena-3-decider</completed>
    <completed id="round-3-arena-4-finished">round-3-arena-4-decider</completed>
    <after id="award-points" duration="2s">
        <any>
            <all>
                <all>
                    <filter id="round-1"/>
                    <filter id="round-1-finished"/>
                </all>
                <any id="round-1-winner">
                    <captured id="round-1-arena-1-winner">round-1-arena-1-decider</captured>
                    <captured id="round-1-arena-2-winner">round-1-arena-2-decider</captured>
                    <captured id="round-1-arena-3-winner">round-1-arena-3-decider</captured>
                    <captured id="round-1-arena-4-winner">round-1-arena-4-decider</captured>
                </any>
            </all>
            <all>
                <all>
                    <filter id="round-2"/>
                    <filter id="round-2-finished"/>
                </all>
                <any id="round-2-winner">
                    <captured id="round-2-arena-1-winner">round-2-arena-1-decider</captured>
                    <captured id="round-2-arena-2-winner">round-2-arena-2-decider</captured>
                    <captured id="round-2-arena-3-winner">round-2-arena-3-decider</captured>
                    <captured id="round-2-arena-4-winner">round-2-arena-4-decider</captured>
                </any>
            </all>
            <all>
                <all>
                    <filter id="round-3"/>
                    <filter id="round-3-finished"/>
                </all>
                <any>
                    <captured id="round-3-arena-1-winner">round-3-arena-1-decider</captured>
                    <captured id="round-3-arena-2-winner">round-3-arena-2-decider</captured>
                    <captured id="round-3-arena-3-winner">round-3-arena-3-decider</captured>
                    <captured id="round-3-arena-4-winner">round-3-arena-4-decider</captured>
                </any>
            </all>
        </any>
    </after>
    <captured id="round-1-arena-1-team-1" team="team-1">round-1-arena-1-decider</captured>
    <captured id="round-2-arena-1-team-1" team="team-1">round-2-arena-1-decider</captured>
    <captured id="round-2-arena-3-team-1" team="team-1">round-2-arena-3-decider</captured>
    <captured id="round-3-arena-1-team-1" team="team-1">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-1" team="team-1">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-1" team="team-1">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-1" team="team-1">round-3-arena-4-decider</captured>
    <captured id="round-1-arena-1-team-2" team="team-2">round-1-arena-1-decider</captured>
    <captured id="round-2-arena-1-team-2" team="team-2">round-2-arena-1-decider</captured>
    <captured id="round-2-arena-3-team-2" team="team-2">round-2-arena-3-decider</captured>
    <captured id="round-3-arena-1-team-2" team="team-2">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-2" team="team-2">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-2" team="team-2">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-2" team="team-2">round-3-arena-4-decider</captured>
    <captured id="round-1-arena-2-team-3" team="team-3">round-1-arena-2-decider</captured>
    <captured id="round-2-arena-1-team-3" team="team-3">round-2-arena-1-decider</captured>
    <captured id="round-2-arena-3-team-3" team="team-3">round-2-arena-3-decider</captured>
    <captured id="round-3-arena-1-team-3" team="team-3">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-3" team="team-3">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-3" team="team-3">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-3" team="team-3">round-3-arena-4-decider</captured>
    <captured id="round-1-arena-2-team-4" team="team-4">round-1-arena-2-decider</captured>
    <captured id="round-2-arena-1-team-4" team="team-4">round-2-arena-1-decider</captured>
    <captured id="round-2-arena-3-team-4" team="team-4">round-2-arena-3-decider</captured>
    <captured id="round-3-arena-1-team-4" team="team-4">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-4" team="team-4">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-4" team="team-4">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-4" team="team-4">round-3-arena-4-decider</captured>
    <captured id="round-1-arena-3-team-5" team="team-5">round-1-arena-3-decider</captured>
    <captured id="round-2-arena-2-team-5" team="team-5">round-2-arena-2-decider</captured>
    <captured id="round-2-arena-4-team-5" team="team-5">round-2-arena-4-decider</captured>
    <captured id="round-3-arena-1-team-5" team="team-5">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-5" team="team-5">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-5" team="team-5">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-5" team="team-5">round-3-arena-4-decider</captured>
    <captured id="round-1-arena-3-team-6" team="team-6">round-1-arena-3-decider</captured>
    <captured id="round-2-arena-2-team-6" team="team-6">round-2-arena-2-decider</captured>
    <captured id="round-2-arena-4-team-6" team="team-6">round-2-arena-4-decider</captured>
    <captured id="round-3-arena-1-team-6" team="team-6">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-6" team="team-6">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-6" team="team-6">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-6" team="team-6">round-3-arena-4-decider</captured>
    <captured id="round-1-arena-4-team-7" team="team-7">round-1-arena-4-decider</captured>
    <captured id="round-2-arena-2-team-7" team="team-7">round-2-arena-2-decider</captured>
    <captured id="round-2-arena-4-team-7" team="team-7">round-2-arena-4-decider</captured>
    <captured id="round-3-arena-1-team-7" team="team-7">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-7" team="team-7">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-7" team="team-7">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-7" team="team-7">round-3-arena-4-decider</captured>
    <captured id="round-1-arena-4-team-8" team="team-8">round-1-arena-4-decider</captured>
    <captured id="round-2-arena-2-team-8" team="team-8">round-2-arena-2-decider</captured>
    <captured id="round-2-arena-4-team-8" team="team-8">round-2-arena-4-decider</captured>
    <captured id="round-3-arena-1-team-8" team="team-8">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-8" team="team-8">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-8" team="team-8">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-8" team="team-8">round-3-arena-4-decider</captured>
    <!--
    round 2 match ups
    -->
    <all id="team-1-vs-team-3">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-1-1-wins"/>
                <filter id="team-3-1-wins"/>
            </all>
            <all>
                <filter id="team-1-0-wins"/>
                <filter id="team-3-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-1-vs-team-4">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-1-1-wins"/>
                <filter id="team-4-1-wins"/>
            </all>
            <all>
                <filter id="team-1-0-wins"/>
                <filter id="team-4-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-1-vs-team-5">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-1-2-wins"/>
                <filter id="team-5-2-wins"/>
            </all>
            <all>
                <filter id="team-1-1-wins"/>
                <filter id="team-5-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-1-team-1"/>
                        <filter id="round-1-arena-3-team-5"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-3-team-1"/>
                        <filter id="round-2-arena-4-team-5"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-1-0-wins"/>
                <filter id="team-5-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-1-vs-team-6">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-1-2-wins"/>
                <filter id="team-6-2-wins"/>
            </all>
            <all>
                <filter id="team-1-1-wins"/>
                <filter id="team-6-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-1-team-1"/>
                        <filter id="round-1-arena-3-team-6"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-3-team-1"/>
                        <filter id="round-2-arena-4-team-6"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-1-0-wins"/>
                <filter id="team-6-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-1-vs-team-7">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-1-2-wins"/>
                <filter id="team-7-2-wins"/>
            </all>
            <all>
                <filter id="team-1-0-wins"/>
                <filter id="team-7-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-1-vs-team-8">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-1-2-wins"/>
                <filter id="team-8-2-wins"/>
            </all>
            <all>
                <filter id="team-1-0-wins"/>
                <filter id="team-8-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-2-vs-team-3">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-2-1-wins"/>
                <filter id="team-3-1-wins"/>
            </all>
            <all>
                <filter id="team-2-0-wins"/>
                <filter id="team-3-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-2-vs-team-4">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-2-1-wins"/>
                <filter id="team-4-1-wins"/>
            </all>
            <all>
                <filter id="team-2-0-wins"/>
                <filter id="team-4-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-2-vs-team-5">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-2-2-wins"/>
                <filter id="team-5-2-wins"/>
            </all>
            <all>
                <filter id="team-2-1-wins"/>
                <filter id="team-5-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-1-team-2"/>
                        <filter id="round-1-arena-3-team-5"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-3-team-2"/>
                        <filter id="round-2-arena-4-team-5"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-2-0-wins"/>
                <filter id="team-5-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-2-vs-team-6">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-2-2-wins"/>
                <filter id="team-6-2-wins"/>
            </all>
            <all>
                <filter id="team-2-1-wins"/>
                <filter id="team-6-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-1-team-2"/>
                        <filter id="round-1-arena-3-team-6"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-3-team-2"/>
                        <filter id="round-2-arena-4-team-6"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-2-0-wins"/>
                <filter id="team-6-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-2-vs-team-7">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-2-2-wins"/>
                <filter id="team-7-2-wins"/>
            </all>
            <all>
                <filter id="team-2-0-wins"/>
                <filter id="team-7-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-2-vs-team-8">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-2-2-wins"/>
                <filter id="team-8-2-wins"/>
            </all>
            <all>
                <filter id="team-2-0-wins"/>
                <filter id="team-8-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-3-vs-team-5">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-3-2-wins"/>
                <filter id="team-5-2-wins"/>
            </all>
            <all>
                <filter id="team-3-0-wins"/>
                <filter id="team-5-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-3-vs-team-6">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-3-2-wins"/>
                <filter id="team-6-2-wins"/>
            </all>
            <all>
                <filter id="team-3-0-wins"/>
                <filter id="team-6-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-3-vs-team-7">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-3-2-wins"/>
                <filter id="team-7-2-wins"/>
            </all>
            <all>
                <filter id="team-3-1-wins"/>
                <filter id="team-7-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-2-team-3"/>
                        <filter id="round-1-arena-4-team-7"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-3-team-3"/>
                        <filter id="round-2-arena-4-team-7"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-3-0-wins"/>
                <filter id="team-7-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-3-vs-team-8">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-3-2-wins"/>
                <filter id="team-8-2-wins"/>
            </all>
            <all>
                <filter id="team-3-1-wins"/>
                <filter id="team-8-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-2-team-3"/>
                        <filter id="round-1-arena-4-team-8"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-3-team-3"/>
                        <filter id="round-2-arena-4-team-8"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-3-0-wins"/>
                <filter id="team-8-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-4-vs-team-5">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-4-2-wins"/>
                <filter id="team-5-2-wins"/>
            </all>
            <all>
                <filter id="team-4-0-wins"/>
                <filter id="team-5-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-4-vs-team-6">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-4-2-wins"/>
                <filter id="team-6-2-wins"/>
            </all>
            <all>
                <filter id="team-4-0-wins"/>
                <filter id="team-6-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-4-vs-team-7">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-4-2-wins"/>
                <filter id="team-7-2-wins"/>
            </all>
            <all>
                <filter id="team-4-1-wins"/>
                <filter id="team-7-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-2-team-4"/>
                        <filter id="round-1-arena-4-team-7"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-3-team-4"/>
                        <filter id="round-2-arena-4-team-7"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-4-0-wins"/>
                <filter id="team-7-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-4-vs-team-8">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-4-2-wins"/>
                <filter id="team-8-2-wins"/>
            </all>
            <all>
                <filter id="team-4-1-wins"/>
                <filter id="team-8-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-2-team-4"/>
                        <filter id="round-1-arena-4-team-8"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-1-team-4"/>
                        <filter id="round-2-arena-2-team-8"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-4-0-wins"/>
                <filter id="team-8-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-5-vs-team-7">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-5-1-wins"/>
                <filter id="team-7-1-wins"/>
            </all>
            <all>
                <filter id="team-5-0-wins"/>
                <filter id="team-7-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-5-vs-team-8">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-5-1-wins"/>
                <filter id="team-8-1-wins"/>
            </all>
            <all>
                <filter id="team-5-0-wins"/>
                <filter id="team-8-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-6-vs-team-7">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-6-1-wins"/>
                <filter id="team-7-1-wins"/>
            </all>
            <all>
                <filter id="team-6-0-wins"/>
                <filter id="team-7-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-6-vs-team-8">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-6-1-wins"/>
                <filter id="team-8-1-wins"/>
            </all>
            <all>
                <filter id="team-6-0-wins"/>
                <filter id="team-8-0-wins"/>
            </all>
        </any>
    </all>
    <all id="round-2-arena-1-competitors">
        <filter id="round-2"/>
        <any>
            <filter id="only-team-1-1-wins"/>
            <filter id="only-team-2-1-wins"/>
            <filter id="only-team-3-1-wins"/>
            <filter id="only-team-4-1-wins"/>
        </any>
    </all>
    <all id="round-2-arena-2-competitors">
        <filter id="round-2"/>
        <any>
            <filter id="only-team-5-1-wins"/>
            <filter id="only-team-6-1-wins"/>
            <filter id="only-team-7-1-wins"/>
            <filter id="only-team-8-1-wins"/>
        </any>
    </all>
    <all id="round-2-arena-3-competitors">
        <filter id="round-2"/>
        <any>
            <filter id="only-team-1-0-wins"/>
            <filter id="only-team-2-0-wins"/>
            <filter id="only-team-3-0-wins"/>
            <filter id="only-team-4-0-wins"/>
        </any>
    </all>
    <all id="round-2-arena-4-competitors">
        <filter id="round-2"/>
        <any>
            <filter id="only-team-5-0-wins"/>
            <filter id="only-team-6-0-wins"/>
            <filter id="only-team-7-0-wins"/>
            <filter id="only-team-8-0-wins"/>
        </any>
    </all>
    <all id="round-3-arena-1-competitors">
        <filter id="round-3"/>
        <any>
            <filter id="only-team-1-2-wins"/>
            <filter id="only-team-2-2-wins"/>
            <filter id="only-team-3-2-wins"/>
            <filter id="only-team-4-2-wins"/>
            <filter id="only-team-5-2-wins"/>
            <filter id="only-team-6-2-wins"/>
            <filter id="only-team-7-2-wins"/>
            <filter id="only-team-8-2-wins"/>
        </any>
    </all>
    <all id="round-3-arena-2-competitors">
        <filter id="round-3"/>
        <any>
            <all>
                <any id="round-3-arena-2-spawn-1-competitors">
                    <filter id="only-team-1-1-wins"/>
                    <filter id="only-team-2-1-wins"/>
                    <filter id="only-team-3-1-wins"/>
                    <filter id="only-team-4-1-wins"/>
                </any>
                <any id="round-3-arena-2-spawn-2-competitors">
                    <filter id="only-team-5-1-wins"/>
                    <filter id="only-team-6-1-wins"/>
                    <filter id="only-team-7-1-wins"/>
                    <filter id="only-team-8-1-wins"/>
                </any>
            </all>
        </any>
    </all>
    <all id="round-3-arena-3-competitors">
        <filter id="round-3"/>
        <any>
            <all>
                <any id="round-3-arena-3-spawn-1-competitors">
                    <filter id="only-team-1-1-wins"/>
                    <filter id="only-team-2-1-wins"/>
                    <filter id="only-team-3-1-wins"/>
                    <filter id="only-team-4-1-wins"/>
                </any>
                <any id="round-3-arena-3-spawn-2-competitors">
                    <filter id="only-team-5-1-wins"/>
                    <filter id="only-team-6-1-wins"/>
                    <filter id="only-team-7-1-wins"/>
                    <filter id="only-team-8-1-wins"/>
                </any>
            </all>
        </any>
    </all>
    <all id="round-3-arena-4-competitors">
        <filter id="round-3"/>
        <any>
            <filter id="only-team-1-0-wins"/>
            <filter id="only-team-2-0-wins"/>
            <filter id="only-team-3-0-wins"/>
            <filter id="only-team-4-0-wins"/>
            <filter id="only-team-5-0-wins"/>
            <filter id="only-team-6-0-wins"/>
            <filter id="only-team-7-0-wins"/>
            <filter id="only-team-8-0-wins"/>
        </any>
    </all>
</filters>
<regions>
    <cylinder id="lobby-spawn" base="205.5,4,31.5" radius="6" height="0.5"/>
    <cuboid id="lobby" min="220,0,13" max="191,25,50"/>
    <union id="all-arenas">
        <cuboid id="arena-1" min="180,25,-65" max="145,8,128"/>
        <cuboid id="arena-2" min="136,25,-65" max="101,8,128"/>
        <cuboid id="arena-3" min="92,25,-65"  max="57,8,128"/>
        <cuboid id="arena-4" min="48,25,-65"  max="13,8,128"/>
    </union>
    <union id="all-arena-spawns">
        <point id="round-1-arena-1-spawn-1">162.5,11,-61.5</point>
        <point id="round-1-arena-1-spawn-2">162.5,11,-7.5</point>
        <point id="round-1-arena-2-spawn-1">118.5,11,-61.5</point>
        <point id="round-1-arena-2-spawn-2">118,11,-7.5</point>
        <point id="round-1-arena-3-spawn-1">74.5,11,-61.5</point>
        <point id="round-1-arena-3-spawn-2">74.5,11,-7.5</point>
        <point id="round-1-arena-4-spawn-1">30.5,11,-61.5</point>
        <point id="round-1-arena-4-spawn-2">30.5,11,-7.5</point>
        <point id="round-2-arena-1-spawn-1">162.5,11,4.5</point>
        <point id="round-2-arena-1-spawn-2">162.5,11,58.5</point>
        <point id="round-2-arena-2-spawn-1">118.5,11,4.5</point>
        <point id="round-2-arena-2-spawn-2">118,11,58.5</point>
        <point id="round-2-arena-3-spawn-1">74.5,11,4.5</point>
        <point id="round-2-arena-3-spawn-2">74.5,11,58.5</point>
        <point id="round-2-arena-4-spawn-1">30.5,11,4.5</point>
        <point id="round-2-arena-4-spawn-2">30.5,11,58.5</point>
        <point id="round-3-arena-1-spawn-1">162.5,11,70.5</point>
        <point id="round-3-arena-1-spawn-2">162.5,11,124.5</point>
        <point id="round-3-arena-2-spawn-1">118.5,11,70.5</point>
        <point id="round-3-arena-2-spawn-2">118,11,124.5</point>
        <point id="round-3-arena-3-spawn-1">74.5,11,70.5</point>
        <point id="round-3-arena-3-spawn-2">74.5,11,124.5</point>
        <point id="round-3-arena-4-spawn-1">30.5,11,70.5</point>
        <point id="round-3-arena-4-spawn-2">30.5,11,124.5</point>
    </union>
    <union id="all-arena-spectator-spawns">
        <point id="round-1-arena-1-spectator">182.5,14,-34.5</point>
        <point id="round-1-arena-2-spectator">138.5,14,-34.5</point>
        <point id="round-1-arena-3-spectator">94.5,14,-34.5</point>
        <point id="round-1-arena-4-spectator">50.5,14,-34.5</point>
        <point id="round-2-arena-1-spectator">182.5,14,31.5</point>
        <point id="round-2-arena-2-spectator">138.5,14,31.5</point>
        <point id="round-2-arena-3-spectator">94.5,14,31.5</point>
        <point id="round-2-arena-4-spectator">50.5,14,31.5</point>
        <point id="round-3-arena-1-spectator">182,14,97.5</point>
        <point id="round-3-arena-2-spectator">138.5,14,97.5</point>
        <point id="round-3-arena-3-spectator">94.5,14,97.5</point>
        <point id="round-3-arena-4-spectator">50.5,14,97.5</point>
    </union>
    <union id="all-arena-spectator-portals">
        <cuboid id="round-1-arena-1-spectator-portal" min="185,10,-37" max="186,18,-32"/>
        <cuboid id="round-1-arena-2-spectator-portal" min="141,10,-37" max="142,18,-32"/>
        <cuboid id="round-1-arena-3-spectator-portal" min="97,10,-37" max="98,18,-32"/>
        <cuboid id="round-1-arena-4-spectator-portal" min="53,10,-37" max="54,18,-32"/>
        <cuboid id="round-2-arena-1-spectator-portal" min="185,10,29" max="186,18,34"/>
        <cuboid id="round-2-arena-2-spectator-portal" min="141,10,29" max="142,18,34"/>
        <cuboid id="round-2-arena-3-spectator-portal" min="97,10,29" max="98,18,34"/>
        <cuboid id="round-2-arena-4-spectator-portal" min="53,10,29" max="54,18,34"/>
        <cuboid id="round-3-arena-1-spectator-portal" min="185,10,95" max="186,18,100"/>
        <cuboid id="round-3-arena-2-spectator-portal" min="141,10,95" max="142,18,100"/>
        <cuboid id="round-3-arena-3-spectator-portal" min="97,10,95" max="98,18,100"/>
        <cuboid id="round-3-arena-4-spectator-portal" min="53,10,95" max="54,18,100"/>
    </union>
    <union id="all-arena-spectator">
        <cuboid id="arena-1-spectator" min="188,10,-65" max="181,18,128"/>
        <cuboid id="arena-2-spectator" min="144,10,-65" max="137,18,128"/>
        <cuboid id="arena-3-spectator" min="100,10,-65" max="93,18,128"/>
        <cuboid id="arena-4-spectator" min="56,10,-65" max="49,18,128"/>
    </union>
    <apply block-break="never"/>
</regions>
<variables>
    <score id="score"/>
    <variable id="kit_count" scope="match" default="13"/>
    <variable id="round_1_kit" scope="match" default="0"/>
    <variable id="round_2_kit" scope="match" default="0"/>
    <variable id="round_3_kit" scope="match" default="0"/>
    <variable id="kit_announcer" scope="match" default="0"/>
    <variable id="current_round" scope="match" default="0"/>
</variables>
<actions>
    <!--
    kit decider
    -->
    <trigger scope="match">
        <filter>
            <time>0s</time>
        </filter>
        <action>
            <set var="round_1_kit" value="floor(random() * kit_count)"/>
            <set var="round_2_kit" value="floor(random() * kit_count)"/>
            <set var="round_3_kit" value="floor(random() * kit_count)"/>
        </action>
    </trigger>
    <!--
    pre-match introduction announcements
    -->
    <trigger scope="match">
        <filter>
            <time>0s</time>
        </filter>
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: Welcome to the Grand Dueling Tournament!"/>
            <sound key="mob.villager.haggle"/>
        </action>
    </trigger>
    <trigger scope="match">
        <filter>
            <time>3s</time>
        </filter>
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: This is a swiss tournament where you will fight with your partners against other teams with the same number of wins."/>
            <sound key="mob.villager.haggle"/>
        </action>
    </trigger>
    <trigger scope="match">
        <filter>
            <time>6s</time>
        </filter>
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: Each round will have a randomly chosen kit for you to fight your way to victory with!"/>
            <sound key="mob.villager.haggle"/>
        </action>
    </trigger>
    <trigger scope="match">
        <filter>
            <time>9s</time>
        </filter>
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: Your first kit will be..."/>
            <set var="kit_announcer" value="1"/>
            <action id="kit-applicator"/>
            <sound key="mob.villager.haggle"/>
        </action>
    </trigger>
    <trigger scope="match">
        <filter>
            <time>12s</time>
        </filter>
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: In round 2 your kit will be..."/>
            <set var="kit_announcer" value="2"/>
            <action id="kit-applicator"/>
            <sound key="mob.villager.haggle"/>
        </action>
    </trigger>
    <trigger scope="match">
        <filter>
            <time>15s</time>
        </filter>
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: And for the grand finale..."/>
            <set var="kit_announcer" value="3"/>
            <action id="kit-applicator"/>
            <sound key="mob.villager.haggle"/>
            <set var="kit_announcer" value="0"/>
        </action>
    </trigger>
    <action id="kit-applicator" scope="match">
        <action filter="any(all(any(current_round=1, kit_announcer=1), round_1_kit=0), all(any(current_round=2, kit_announcer=2), round_2_kit=0), all(any(current_round=3, kit_announcer=3), round_3_kit=0))">
            <action filter="not(kit_announcer=0)">
                <message text="`7[`6Arena Master`7] `6Tirion`r: `bIron`r!"/>
            </action>
            <switch-scope inner="player">
                <action filter="participating">
                    <kit id="kit-0"/>
                </action>
            </switch-scope>
        </action>
        <action filter="any(all(any(current_round=1, kit_announcer=1), round_1_kit=1), all(any(current_round=2, kit_announcer=2), round_2_kit=1), all(any(current_round=3, kit_announcer=3), round_3_kit=1))">
            <action filter="not(kit_announcer=0)">
                <message text="`7[`6Arena Master`7] `6Tirion`r: `6Gold`r!"/>
            </action>
            <switch-scope inner="player">
                <action filter="participating">
                    <kit id="kit-1"/>
                </action>
            </switch-scope>
        </action>
        <action filter="any(all(any(current_round=1, kit_announcer=1), round_1_kit=2), all(any(current_round=2, kit_announcer=2), round_2_kit=2), all(any(current_round=3, kit_announcer=3), round_3_kit=2))">
            <action filter="not(kit_announcer=0)">
                <message text="`7[`6Arena Master`7] `6Tirion`r: `bSlappy Fish`r!"/>
            </action>
            <switch-scope inner="player">
                <action filter="participating">
                    <kit id="kit-2"/>
                </action>
            </switch-scope>
        </action>
        <action filter="any(all(any(current_round=1, kit_announcer=1), round_1_kit=3), all(any(current_round=2, kit_announcer=2), round_2_kit=3), all(any(current_round=3, kit_announcer=3), round_3_kit=3))">
            <action filter="not(kit_announcer=0)">
                <message text="`7[`6Arena Master`7] `6Tirion`r: `cArcher`r!"/>
            </action>
            <switch-scope inner="player">
                <action filter="participating">
                    <kit id="kit-3"/>
                </action>
            </switch-scope>
        </action>
        <action filter="any(all(any(current_round=1, kit_announcer=1), round_1_kit=4), all(any(current_round=2, kit_announcer=2), round_2_kit=4), all(any(current_round=3, kit_announcer=3), round_3_kit=4))">
            <action filter="not(kit_announcer=0)">
                <message text="`7[`6Arena Master`7] `6Tirion`r: `aLumberjack`r!"/>
            </action>
            <switch-scope inner="player">
                <action filter="participating">
                    <kit id="kit-4"/>
                </action>
            </switch-scope>
        </action>
        <action filter="any(all(any(current_round=1, kit_announcer=1), round_1_kit=5), all(any(current_round=2, kit_announcer=2), round_2_kit=5), all(any(current_round=3, kit_announcer=3), round_3_kit=5))">
            <action filter="not(kit_announcer=0)">
                <message text="`7[`6Arena Master`7] `6Tirion`r: `cMCSG`r!"/>
            </action>
            <switch-scope inner="player">
                <action filter="participating">
                    <kit id="kit-5"/>
                </action>
            </switch-scope>
        </action>
        <action filter="any(all(any(current_round=1, kit_announcer=1), round_1_kit=6), all(any(current_round=2, kit_announcer=2), round_2_kit=6), all(any(current_round=3, kit_announcer=3), round_3_kit=6))">
            <action filter="not(kit_announcer=0)">
                <message text="`7[`6Arena Master`7] `6Tirion`r: `3Diamond`b!"/>
            </action>
            <switch-scope inner="player">
                <action filter="participating">
                    <kit id="kit-6"/>
                </action>
            </switch-scope>
        </action>
        <action filter="any(all(any(current_round=1, kit_announcer=1), round_1_kit=7), all(any(current_round=2, kit_announcer=2), round_2_kit=7), all(any(current_round=3, kit_announcer=3), round_3_kit=7))">
            <action filter="not(kit_announcer=0)">
                <message text="`7[`6Arena Master`7] `6Tirion`r: `5Potions`r!"/>
            </action>
            <switch-scope inner="player">
                <action filter="participating">
                    <kit id="kit-7"/>
                </action>
            </switch-scope>
        </action>
        <action filter="any(all(any(current_round=1, kit_announcer=1), round_1_kit=8), all(any(current_round=2, kit_announcer=2), round_2_kit=8), all(any(current_round=3, kit_announcer=3), round_3_kit=8))">
            <action filter="not(kit_announcer=0)">
                <message text="`7[`6Arena Master`7] `6Tirion`r: `6Gapple`r!"/>
            </action>
            <switch-scope inner="player">
                <action filter="participating">
                    <kit id="kit-8"/>
                </action>
            </switch-scope>
        </action>
        <action filter="any(all(any(current_round=1, kit_announcer=1), round_1_kit=9), all(any(current_round=2, kit_announcer=2), round_2_kit=9), all(any(current_round=3, kit_announcer=3), round_3_kit=9))">
            <action filter="not(kit_announcer=0)">
                <message text="`7[`6Arena Master`7] `6Tirion`r: `3Gunz`r!"/>
            </action>
            <switch-scope inner="player">
                <action filter="participating">
                    <kit id="kit-9"/>
                </action>
            </switch-scope>
        </action>
        <action filter="any(all(any(current_round=1, kit_announcer=1), round_1_kit=10), all(any(current_round=2, kit_announcer=2), round_2_kit=10), all(any(current_round=3, kit_announcer=3), round_3_kit=10))">
            <action filter="not(kit_announcer=0)">
                <message text="`7[`6Arena Master`7] `6Tirion`r: `bConquest`r!"/>
            </action>
            <switch-scope inner="player">
                <action filter="participating">
                    <kit id="kit-10"/>
                </action>
            </switch-scope>
        </action>
        <action filter="any(all(any(current_round=1, kit_announcer=1), round_1_kit=11), all(any(current_round=2, kit_announcer=2), round_2_kit=11), all(any(current_round=3, kit_announcer=3), round_3_kit=11))">
            <action filter="not(kit_announcer=0)">
                <message text="`7[`6Arena Master`7] `6Tirion`r: `eBlasternauts`r!"/>
            </action>
            <switch-scope inner="player">
                <action filter="participating">
                    <kit id="kit-11"/>
                </action>
            </switch-scope>
        </action>
        <action filter="any(all(any(current_round=1, kit_announcer=1), round_1_kit=12), all(any(current_round=2, kit_announcer=2), round_2_kit=12), all(any(current_round=3, kit_announcer=3), round_3_kit=12))">
            <action filter="not(kit_announcer=0)">
                <message text="`7[`6Arena Master`7] `6Tirion`r: `cUHC`r!"/>
            </action>
            <switch-scope inner="player">
                <action filter="participating">
                    <kit id="kit-12"/>
                </action>
            </switch-scope>
        </action>
    </action>
    <action id="clear-kit-applicator" scope="match"> <!-- all references to this action come from a match scoped trigger -->
        <switch-scope inner="player">
            <action filter="participating">
                <kit id="clear-kit"/>
            </action>
        </switch-scope>
    </action>
    <!--
    round starting
    -->
    <trigger scope="match" filter="round-1-starting">
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: Get ready, the first round is about to commence in 10 seconds!"/>
            <sound key="mob.villager.haggle"/>
            <action id="clear-kit-applicator"/>
            <set var="current_round" value="1"/>
        </action>
    </trigger>
    <trigger scope="match" filter="round-1-begin">
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: Let the Grand Dueling Tournament begin!"/>
            <sound key="mob.enderdragon.growl" volume="1.2" pitch="0.8"/>
            <action id="kit-applicator"/>
        </action>
    </trigger>
    <trigger scope="match" filter="round-1-finished">
        <action>
            <action id="clear-kit-applicator"/>
        </action>
    </trigger>
    <trigger scope="match" filter="round-2-starting">
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: Brace yourselves, the second round starts in 10 seconds!"/>
            <sound key="mob.villager.haggle"/>
            <set var="current_round" value="2"/>
        </action>
    </trigger>
    <trigger scope="match" filter="round-2-begin">
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: Aaaaand fight!"/>
            <sound key="mob.enderdragon.growl" volume="1.2" pitch="0.8"/>
            <action id="kit-applicator"/>
        </action>
    </trigger>
    <trigger scope="match" filter="round-2-finished">
        <action>
            <action id="clear-kit-applicator"/>
        </action>
    </trigger>
    <trigger scope="match" filter="round-3-starting">
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: Prepare for the `6final showdown`r, starting in 10 seconds!"/>
            <sound key="mob.villager.haggle"/>
            <set var="current_round" value="3"/>
        </action>
    </trigger>
    <trigger scope="match" filter="round-3-begin">
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: May the best team win!"/>
            <sound key="mob.enderdragon.growl" volume="1.2" pitch="0.8"/>
            <action id="kit-applicator"/>
        </action>
    </trigger>
    <trigger scope="match" filter="round-3-finished">
        <action>
            <action id="clear-kit-applicator"/>
        </action>
    </trigger>
    <trigger scope="match" filter="match-finished">
        <action>
            <set var="current_round" value="0"/>
            <action filter="round-3-arena-1-team-1">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `4Red `ron winning the Grand Dueling Tournament!"/>
            </action>
            <action filter="round-3-arena-1-team-2">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `9Blue `ron winning the Grand Dueling Tournament!"/>
            </action>
            <action filter="round-3-arena-1-team-3">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `2Green `ron winning the Grand Dueling Tournament!"/>
            </action>
            <action filter="round-3-arena-1-team-4">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `5Purple `ron winning the Grand Dueling Tournament!"/>
            </action>
            <action filter="round-3-arena-1-team-5">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `eYellow `ron winning the Grand Dueling Tournament!"/>
            </action>
            <action filter="round-3-arena-1-team-6">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `fWhite `ron winning the Grand Dueling Tournament!"/>
            </action>
            <action filter="round-3-arena-1-team-7">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `dPink `ron winning the Grand Dueling Tournament!"/>
            </action>
            <action filter="round-3-arena-1-team-8">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `7Gray `ron winning the Grand Dueling Tournament!"/>
            </action>
        </action>
    </trigger>
    <trigger scope="player" filter="all-arena-spectator">
        <action filter="participating">
            <kit id="spectating-kit"/>
        </action>
    </trigger>
    <!--
    elimination messages
    -->
    <message id="team-1-defeat-team-2-msg" text="`7[`6Arena Master`7] `6Tirion`r: `4Red `rhas defeated `9Blue`r!"/>
    <message id="team-1-defeat-team-3-msg" text="`7[`6Arena Master`7] `6Tirion`r: `4Red `rhas defeated `2Green`r!"/>
    <message id="team-1-defeat-team-4-msg" text="`7[`6Arena Master`7] `6Tirion`r: `4Red `rhas defeated `5Purple`r!"/>
    <message id="team-1-defeat-team-5-msg" text="`7[`6Arena Master`7] `6Tirion`r: `4Red `rhas defeated `eYellow`r!"/>
    <message id="team-1-defeat-team-6-msg" text="`7[`6Arena Master`7] `6Tirion`r: `4Red `rhas defeated `fWhite`r!"/>
    <message id="team-1-defeat-team-7-msg" text="`7[`6Arena Master`7] `6Tirion`r: `4Red `rhas defeated `dPink`r!"/>
    <message id="team-1-defeat-team-8-msg" text="`7[`6Arena Master`7] `6Tirion`r: `4Red `rhas defeated `7Gray`r!"/>
    <message id="team-2-defeat-team-1-msg" text="`7[`6Arena Master`7] `6Tirion`r: `9Blue `rhas defeated `4Red`r!"/>
    <message id="team-2-defeat-team-3-msg" text="`7[`6Arena Master`7] `6Tirion`r: `9Blue `rhas defeated `2Green`r!"/>
    <message id="team-2-defeat-team-4-msg" text="`7[`6Arena Master`7] `6Tirion`r: `9Blue `rhas defeated `5Purple`r!"/>
    <message id="team-2-defeat-team-5-msg" text="`7[`6Arena Master`7] `6Tirion`r: `9Blue `rhas defeated `eYellow`r!"/>
    <message id="team-2-defeat-team-6-msg" text="`7[`6Arena Master`7] `6Tirion`r: `9Blue `rhas defeated `fWhite`r!"/>
    <message id="team-2-defeat-team-7-msg" text="`7[`6Arena Master`7] `6Tirion`r: `9Blue `rhas defeated `dPink`r!"/>
    <message id="team-2-defeat-team-8-msg" text="`7[`6Arena Master`7] `6Tirion`r: `9Blue `rhas defeated `7Gray`r!"/>
    <message id="team-3-defeat-team-1-msg" text="`7[`6Arena Master`7] `6Tirion`r: `2Green `rhas defeated `4Red`r!"/>
    <message id="team-3-defeat-team-2-msg" text="`7[`6Arena Master`7] `6Tirion`r: `2Green `rhas defeated `9Blue`r!"/>
    <message id="team-3-defeat-team-4-msg" text="`7[`6Arena Master`7] `6Tirion`r: `2Green `rhas defeated `5Purple`r!"/>
    <message id="team-3-defeat-team-5-msg" text="`7[`6Arena Master`7] `6Tirion`r: `2Green `rhas defeated `eYellow`r!"/>
    <message id="team-3-defeat-team-6-msg" text="`7[`6Arena Master`7] `6Tirion`r: `2Green `rhas defeated `fWhite`r!"/>
    <message id="team-3-defeat-team-7-msg" text="`7[`6Arena Master`7] `6Tirion`r: `2Green `rhas defeated `dPink`r!"/>
    <message id="team-3-defeat-team-8-msg" text="`7[`6Arena Master`7] `6Tirion`r: `2Green `rhas defeated `7Gray`r!"/>
    <message id="team-4-defeat-team-1-msg" text="`7[`6Arena Master`7] `6Tirion`r: `5Purple `rhas defeated `4Red`r!"/>
    <message id="team-4-defeat-team-2-msg" text="`7[`6Arena Master`7] `6Tirion`r: `5Purple `rhas defeated `9Blue`r!"/>
    <message id="team-4-defeat-team-3-msg" text="`7[`6Arena Master`7] `6Tirion`r: `5Purple `rhas defeated `2Green`r!"/>
    <message id="team-4-defeat-team-5-msg" text="`7[`6Arena Master`7] `6Tirion`r: `5Purple `rhas defeated `eYellow`r!"/>
    <message id="team-4-defeat-team-6-msg" text="`7[`6Arena Master`7] `6Tirion`r: `5Purple `rhas defeated `fWhite`r!"/>
    <message id="team-4-defeat-team-7-msg" text="`7[`6Arena Master`7] `6Tirion`r: `5Purple `rhas defeated `dPink`r!"/>
    <message id="team-4-defeat-team-8-msg" text="`7[`6Arena Master`7] `6Tirion`r: `5Purple `rhas defeated `7Gray`r!"/>
    <message id="team-5-defeat-team-1-msg" text="`7[`6Arena Master`7] `6Tirion`r: `eYellow `rhas defeated `4Red`r!"/>
    <message id="team-5-defeat-team-2-msg" text="`7[`6Arena Master`7] `6Tirion`r: `eYellow `rhas defeated `9Blue`r!"/>
    <message id="team-5-defeat-team-3-msg" text="`7[`6Arena Master`7] `6Tirion`r: `eYellow `rhas defeated `2Green`r!"/>
    <message id="team-5-defeat-team-4-msg" text="`7[`6Arena Master`7] `6Tirion`r: `eYellow `rhas defeated `5Purple`r!"/>
    <message id="team-5-defeat-team-6-msg" text="`7[`6Arena Master`7] `6Tirion`r: `eYellow `rhas defeated `fWhite`r!"/>
    <message id="team-5-defeat-team-7-msg" text="`7[`6Arena Master`7] `6Tirion`r: `eYellow `rhas defeated `dPink`r!"/>
    <message id="team-5-defeat-team-8-msg" text="`7[`6Arena Master`7] `6Tirion`r: `eYellow `rhas defeated `7Gray`r!"/>
    <message id="team-6-defeat-team-1-msg" text="`7[`6Arena Master`7] `6Tirion`r: `fWhite `rhas defeated `4Red`r!"/>
    <message id="team-6-defeat-team-2-msg" text="`7[`6Arena Master`7] `6Tirion`r: `fWhite `rhas defeated `9Blue`r!"/>
    <message id="team-6-defeat-team-3-msg" text="`7[`6Arena Master`7] `6Tirion`r: `fWhite `rhas defeated `2Green`r!"/>
    <message id="team-6-defeat-team-4-msg" text="`7[`6Arena Master`7] `6Tirion`r: `fWhite `rhas defeated `5Purple`r!"/>
    <message id="team-6-defeat-team-5-msg" text="`7[`6Arena Master`7] `6Tirion`r: `fWhite `rhas defeated `eYellow`r!"/>
    <message id="team-6-defeat-team-7-msg" text="`7[`6Arena Master`7] `6Tirion`r: `fWhite `rhas defeated `dPink`r!"/>
    <message id="team-6-defeat-team-8-msg" text="`7[`6Arena Master`7] `6Tirion`r: `fWhite `rhas defeated `7Gray`r!"/>
    <message id="team-7-defeat-team-1-msg" text="`7[`6Arena Master`7] `6Tirion`r: `dPink `rhas defeated `4Red`r!"/>
    <message id="team-7-defeat-team-2-msg" text="`7[`6Arena Master`7] `6Tirion`r: `dPink `rhas defeated `9Blue`r!"/>
    <message id="team-7-defeat-team-3-msg" text="`7[`6Arena Master`7] `6Tirion`r: `dPink `rhas defeated `2Green`r!"/>
    <message id="team-7-defeat-team-4-msg" text="`7[`6Arena Master`7] `6Tirion`r: `dPink `rhas defeated `5Purple`r!"/>
    <message id="team-7-defeat-team-5-msg" text="`7[`6Arena Master`7] `6Tirion`r: `dPink `rhas defeated `eYellow`r!"/>
    <message id="team-7-defeat-team-6-msg" text="`7[`6Arena Master`7] `6Tirion`r: `dPink `rhas defeated `fWhite`r!"/>
    <message id="team-7-defeat-team-8-msg" text="`7[`6Arena Master`7] `6Tirion`r: `dPink `rhas defeated `7Gray`r!"/>
    <message id="team-8-defeat-team-1-msg" text="`7[`6Arena Master`7] `6Tirion`r: `7Gray `rhas defeated `4Red`r!"/>
    <message id="team-8-defeat-team-2-msg" text="`7[`6Arena Master`7] `6Tirion`r: `7Gray `rhas defeated `9Blue`r!"/>
    <message id="team-8-defeat-team-3-msg" text="`7[`6Arena Master`7] `6Tirion`r: `7Gray `rhas defeated `2Green`r!"/>
    <message id="team-8-defeat-team-4-msg" text="`7[`6Arena Master`7] `6Tirion`r: `7Gray `rhas defeated `5Purple`r!"/>
    <message id="team-8-defeat-team-5-msg" text="`7[`6Arena Master`7] `6Tirion`r: `7Gray `rhas defeated `eYellow`r!"/>
    <message id="team-8-defeat-team-6-msg" text="`7[`6Arena Master`7] `6Tirion`r: `7Gray `rhas defeated `fWhite`r!"/>
    <message id="team-8-defeat-team-7-msg" text="`7[`6Arena Master`7] `6Tirion`r: `7Gray `rhas defeated `dPink`r!"/>
    <trigger scope="match" action="team-1-defeat-team-2-msg" filter="round-1-arena-1-team-1"/>
    <trigger scope="match" action="team-2-defeat-team-1-msg" filter="round-1-arena-1-team-2"/>
    <trigger scope="match" action="team-3-defeat-team-4-msg" filter="round-1-arena-2-team-3"/>
    <trigger scope="match" action="team-4-defeat-team-3-msg" filter="round-1-arena-2-team-4"/>
    <trigger scope="match" action="team-5-defeat-team-6-msg" filter="round-1-arena-3-team-5"/>
    <trigger scope="match" action="team-6-defeat-team-5-msg" filter="round-1-arena-3-team-6"/>
    <trigger scope="match" action="team-7-defeat-team-8-msg" filter="round-1-arena-4-team-7"/>
    <trigger scope="match" action="team-8-defeat-team-7-msg" filter="round-1-arena-4-team-8"/>
    <trigger scope="match" action="team-1-defeat-team-3-msg" filter="all(team-1-vs-team-3, not(round-3-starting), not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-1), all(current_round=2, round-2-arena-3-team-1)))"/>
    <trigger scope="match" action="team-1-defeat-team-4-msg" filter="all(team-1-vs-team-4, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-1), all(current_round=2, round-2-arena-3-team-1)))"/>
    <trigger scope="match" action="team-1-defeat-team-5-msg" filter="all(team-1-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-1), all(current_round=3, round-3-arena-2-team-1), all(current_round=3, round-3-arena-3-team-1), all(current_round=3, round-3-arena-4-team-1)))"/>
    <trigger scope="match" action="team-1-defeat-team-6-msg" filter="all(team-1-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-1), all(current_round=3, round-3-arena-2-team-1), all(current_round=3, round-3-arena-3-team-1), all(current_round=3, round-3-arena-4-team-1)))"/>
    <trigger scope="match" action="team-1-defeat-team-7-msg" filter="all(team-1-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-1), all(current_round=3, round-3-arena-2-team-1), all(current_round=3, round-3-arena-3-team-1), all(current_round=3, round-3-arena-4-team-1)))"/>
    <trigger scope="match" action="team-1-defeat-team-8-msg" filter="all(team-1-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-1), all(current_round=3, round-3-arena-2-team-1), all(current_round=3, round-3-arena-3-team-1), all(current_round=3, round-3-arena-4-team-1)))"/>
    <trigger scope="match" action="team-2-defeat-team-3-msg" filter="all(team-2-vs-team-3, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-2), all(current_round=2, round-2-arena-3-team-2)))"/>
    <trigger scope="match" action="team-2-defeat-team-4-msg" filter="all(team-2-vs-team-4, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-2), all(current_round=2, round-2-arena-3-team-2)))"/>
    <trigger scope="match" action="team-2-defeat-team-5-msg" filter="all(team-2-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-2), all(current_round=3, round-3-arena-2-team-2), all(current_round=3, round-3-arena-3-team-2), all(current_round=3, round-3-arena-4-team-2)))"/>
    <trigger scope="match" action="team-2-defeat-team-6-msg" filter="all(team-2-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-2), all(current_round=3, round-3-arena-2-team-2), all(current_round=3, round-3-arena-3-team-2), all(current_round=3, round-3-arena-4-team-2)))"/>
    <trigger scope="match" action="team-2-defeat-team-7-msg" filter="all(team-2-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-2), all(current_round=3, round-3-arena-2-team-2), all(current_round=3, round-3-arena-3-team-2), all(current_round=3, round-3-arena-4-team-2)))"/>
    <trigger scope="match" action="team-2-defeat-team-8-msg" filter="all(team-2-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-2), all(current_round=3, round-3-arena-2-team-2), all(current_round=3, round-3-arena-3-team-2), all(current_round=3, round-3-arena-4-team-2)))"/>
    <trigger scope="match" action="team-3-defeat-team-1-msg" filter="all(team-1-vs-team-3, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-3), all(current_round=2, round-2-arena-3-team-3)))"/>
    <trigger scope="match" action="team-3-defeat-team-2-msg" filter="all(team-2-vs-team-3, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-3), all(current_round=2, round-2-arena-3-team-3)))"/>
    <trigger scope="match" action="team-3-defeat-team-5-msg" filter="all(team-3-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-3), all(current_round=3, round-3-arena-2-team-3), all(current_round=3, round-3-arena-3-team-3), all(current_round=3, round-3-arena-4-team-3)))"/>
    <trigger scope="match" action="team-3-defeat-team-6-msg" filter="all(team-3-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-3), all(current_round=3, round-3-arena-2-team-3), all(current_round=3, round-3-arena-3-team-3), all(current_round=3, round-3-arena-4-team-3)))"/>
    <trigger scope="match" action="team-3-defeat-team-7-msg" filter="all(team-3-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-3), all(current_round=3, round-3-arena-2-team-3), all(current_round=3, round-3-arena-3-team-3), all(current_round=3, round-3-arena-4-team-3)))"/>
    <trigger scope="match" action="team-3-defeat-team-8-msg" filter="all(team-3-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-3), all(current_round=3, round-3-arena-2-team-3), all(current_round=3, round-3-arena-3-team-3), all(current_round=3, round-3-arena-4-team-3)))"/>
    <trigger scope="match" action="team-4-defeat-team-1-msg" filter="all(team-1-vs-team-4, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-4), all(current_round=2, round-2-arena-3-team-4)))"/>
    <trigger scope="match" action="team-4-defeat-team-2-msg" filter="all(team-2-vs-team-4, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-4), all(current_round=2, round-2-arena-3-team-4)))"/>
    <trigger scope="match" action="team-4-defeat-team-5-msg" filter="all(team-4-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-4), all(current_round=3, round-3-arena-2-team-4), all(current_round=3, round-3-arena-3-team-4), all(current_round=3, round-3-arena-4-team-4)))"/>
    <trigger scope="match" action="team-4-defeat-team-6-msg" filter="all(team-4-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-4), all(current_round=3, round-3-arena-2-team-4), all(current_round=3, round-3-arena-3-team-4), all(current_round=3, round-3-arena-4-team-4)))"/>
    <trigger scope="match" action="team-4-defeat-team-7-msg" filter="all(team-4-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-4), all(current_round=3, round-3-arena-2-team-4), all(current_round=3, round-3-arena-3-team-4), all(current_round=3, round-3-arena-4-team-4)))"/>
    <trigger scope="match" action="team-4-defeat-team-8-msg" filter="all(team-4-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-4), all(current_round=3, round-3-arena-2-team-4), all(current_round=3, round-3-arena-3-team-4), all(current_round=3, round-3-arena-4-team-4)))"/>
    <trigger scope="match" action="team-5-defeat-team-7-msg" filter="all(team-5-vs-team-7, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-5), all(current_round=2, round-2-arena-4-team-5)))"/>
    <trigger scope="match" action="team-5-defeat-team-8-msg" filter="all(team-5-vs-team-8, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-5), all(current_round=2, round-2-arena-4-team-5)))"/>
    <trigger scope="match" action="team-5-defeat-team-1-msg" filter="all(team-1-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-5), all(current_round=3, round-3-arena-2-team-5), all(current_round=3, round-3-arena-3-team-5), all(current_round=3, round-3-arena-4-team-5)))"/>
    <trigger scope="match" action="team-5-defeat-team-2-msg" filter="all(team-2-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-5), all(current_round=3, round-3-arena-2-team-5), all(current_round=3, round-3-arena-3-team-5), all(current_round=3, round-3-arena-4-team-5)))"/>
    <trigger scope="match" action="team-5-defeat-team-3-msg" filter="all(team-3-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-5), all(current_round=3, round-3-arena-2-team-5), all(current_round=3, round-3-arena-3-team-5), all(current_round=3, round-3-arena-4-team-5)))"/>
    <trigger scope="match" action="team-5-defeat-team-4-msg" filter="all(team-4-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-5), all(current_round=3, round-3-arena-2-team-5), all(current_round=3, round-3-arena-3-team-5), all(current_round=3, round-3-arena-4-team-5)))"/>
    <trigger scope="match" action="team-6-defeat-team-7-msg" filter="all(team-6-vs-team-7, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-6), all(current_round=2, round-2-arena-4-team-6)))"/>
    <trigger scope="match" action="team-6-defeat-team-8-msg" filter="all(team-6-vs-team-8, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-6), all(current_round=2, round-2-arena-4-team-6)))"/>
    <trigger scope="match" action="team-6-defeat-team-1-msg" filter="all(team-1-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-6), all(current_round=3, round-3-arena-2-team-6), all(current_round=3, round-3-arena-3-team-6), all(current_round=3, round-3-arena-4-team-6)))"/>
    <trigger scope="match" action="team-6-defeat-team-2-msg" filter="all(team-2-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-6), all(current_round=3, round-3-arena-2-team-6), all(current_round=3, round-3-arena-3-team-6), all(current_round=3, round-3-arena-4-team-6)))"/>
    <trigger scope="match" action="team-6-defeat-team-3-msg" filter="all(team-3-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-6), all(current_round=3, round-3-arena-2-team-6), all(current_round=3, round-3-arena-3-team-6), all(current_round=3, round-3-arena-4-team-6)))"/>
    <trigger scope="match" action="team-6-defeat-team-4-msg" filter="all(team-4-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-6), all(current_round=3, round-3-arena-2-team-6), all(current_round=3, round-3-arena-3-team-6), all(current_round=3, round-3-arena-4-team-6)))"/>
    <trigger scope="match" action="team-7-defeat-team-5-msg" filter="all(team-5-vs-team-7, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-7), all(current_round=2, round-2-arena-4-team-7)))"/>
    <trigger scope="match" action="team-7-defeat-team-6-msg" filter="all(team-6-vs-team-7, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-7), all(current_round=2, round-2-arena-4-team-7)))"/>
    <trigger scope="match" action="team-7-defeat-team-1-msg" filter="all(team-1-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-7), all(current_round=3, round-3-arena-2-team-7), all(current_round=3, round-3-arena-3-team-7), all(current_round=3, round-3-arena-4-team-7)))"/>
    <trigger scope="match" action="team-7-defeat-team-2-msg" filter="all(team-2-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-7), all(current_round=3, round-3-arena-2-team-7), all(current_round=3, round-3-arena-3-team-7), all(current_round=3, round-3-arena-4-team-7)))"/>
    <trigger scope="match" action="team-7-defeat-team-3-msg" filter="all(team-3-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-7), all(current_round=3, round-3-arena-2-team-7), all(current_round=3, round-3-arena-3-team-7), all(current_round=3, round-3-arena-4-team-7)))"/>
    <trigger scope="match" action="team-7-defeat-team-4-msg" filter="all(team-4-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-7), all(current_round=3, round-3-arena-2-team-7), all(current_round=3, round-3-arena-3-team-7), all(current_round=3, round-3-arena-4-team-7)))"/>
    <trigger scope="match" action="team-8-defeat-team-5-msg" filter="all(team-5-vs-team-8, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-8), all(current_round=2, round-2-arena-4-team-8)))"/>
    <trigger scope="match" action="team-8-defeat-team-6-msg" filter="all(team-6-vs-team-8, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-8), all(current_round=2, round-2-arena-4-team-8)))"/>
    <trigger scope="match" action="team-8-defeat-team-1-msg" filter="all(team-1-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-8), all(current_round=3, round-3-arena-2-team-8), all(current_round=3, round-3-arena-3-team-8), all(current_round=3, round-3-arena-4-team-8)))"/>
    <trigger scope="match" action="team-8-defeat-team-2-msg" filter="all(team-2-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-8), all(current_round=3, round-3-arena-2-team-8), all(current_round=3, round-3-arena-3-team-8), all(current_round=3, round-3-arena-4-team-8)))"/>
    <trigger scope="match" action="team-8-defeat-team-3-msg" filter="all(team-3-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-8), all(current_round=3, round-3-arena-2-team-8), all(current_round=3, round-3-arena-3-team-8), all(current_round=3, round-3-arena-4-team-8)))"/>
    <trigger scope="match" action="team-8-defeat-team-4-msg" filter="all(team-4-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-8), all(current_round=3, round-3-arena-2-team-8), all(current_round=3, round-3-arena-3-team-8), all(current_round=3, round-3-arena-4-team-8)))"/>
    <trigger scope="team" filter="award-points">
        <action>
            <set var="score" value="score+1"/>
        </action>
    </trigger>
    <action id="round-win-msg" scope="team">
        <message text="`aYour team won the duel!"/>
        <sound preset="OBJECTIVE_GOOD"/>
        <sound preset="OBJECTIVE_FIREWORKS_TWINKLE"/>
    </action>
    <trigger scope="team" action="round-win-msg" filter="round-1-arena-1-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-1-arena-2-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-1-arena-3-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-1-arena-4-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-2-arena-1-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-2-arena-2-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-2-arena-3-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-2-arena-4-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-3-arena-1-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-3-arena-2-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-3-arena-3-winner"/>
    <trigger scope="team" action="round-win-msg" filter="round-3-arena-4-winner"/>
</actions>
<control-points required="false" capture-time="1s" points="0" capture-rule="exclusive" permanent="true" show="false">
    <control-point id="round-1-arena-1-decider" name="round-1-arena-1-decider" capture="arena-1" player-filter="current_round=1"/>
    <control-point id="round-1-arena-2-decider" name="round-1-arena-2-decider" capture="arena-2" player-filter="current_round=1"/>
    <control-point id="round-1-arena-3-decider" name="round-1-arena-3-decider" capture="arena-3" player-filter="current_round=1"/>
    <control-point id="round-1-arena-4-decider" name="round-1-arena-4-decider" capture="arena-4" player-filter="current_round=1"/>
    <control-point id="round-2-arena-1-decider" name="round-2-arena-1-decider" capture="arena-1" player-filter="current_round=2"/>
    <control-point id="round-2-arena-2-decider" name="round-2-arena-2-decider" capture="arena-2" player-filter="current_round=2"/>
    <control-point id="round-2-arena-3-decider" name="round-2-arena-3-decider" capture="arena-3" player-filter="current_round=2"/>
    <control-point id="round-2-arena-4-decider" name="round-2-arena-4-decider" capture="arena-4" player-filter="current_round=2"/>
    <control-point id="round-3-arena-1-decider" name="round-3-arena-1-decider" capture="arena-1" player-filter="current_round=3"/>
    <control-point id="round-3-arena-2-decider" name="round-3-arena-2-decider" capture="arena-2" player-filter="current_round=3"/>
    <control-point id="round-3-arena-3-decider" name="round-3-arena-3-decider" capture="arena-3" player-filter="current_round=3"/>
    <control-point id="round-3-arena-4-decider" name="round-3-arena-4-decider" capture="arena-4" player-filter="current_round=3"/>
</control-points>
<portals sound="false">
    <portal destination="lobby-spawn" yaw="@90" forward="round-1-finished"/>
    <portal destination="lobby-spawn" yaw="@90" forward="round-2-finished"/>
    <portal destination="lobby-spawn" yaw="@90" forward="round-3-finished"/>
    <!--
    teleport players to respective arenas
    -->
    <portal destination="round-1-arena-1-spawn-1" yaw="@0"   forward="all(round-1-begin, only-team-1)"/>
    <portal destination="round-1-arena-1-spawn-2" yaw="@180" forward="all(round-1-begin, only-team-2)"/>
    <portal destination="round-1-arena-2-spawn-1" yaw="@0"   forward="all(round-1-begin, only-team-3)"/>
    <portal destination="round-1-arena-2-spawn-2" yaw="@180" forward="all(round-1-begin, only-team-4)"/>
    <portal destination="round-1-arena-3-spawn-1" yaw="@0"   forward="all(round-1-begin, only-team-5)"/>
    <portal destination="round-1-arena-3-spawn-2" yaw="@180" forward="all(round-1-begin, only-team-6)"/>
    <portal destination="round-1-arena-4-spawn-1" yaw="@0"   forward="all(round-1-begin, only-team-7)"/>
    <portal destination="round-1-arena-4-spawn-2" yaw="@180" forward="all(round-1-begin, only-team-8)"/>
    <portal destination="round-2-arena-1-spawn-1" yaw="@0"   forward="all(lobby, round-2-begin, not(round-2-finished), only-team-1, team-1-1-wins, round-2-arena-1-competitors)"/>
    <portal destination="round-2-arena-1-spawn-1" yaw="@0"   forward="all(lobby, round-2-begin, not(round-2-finished), only-team-2, team-2-1-wins, round-2-arena-1-competitors)"/>
    <portal destination="round-2-arena-1-spawn-2" yaw="@180" forward="all(lobby, round-2-begin, not(round-2-finished), only-team-3, team-3-1-wins, round-2-arena-1-competitors)"/>
    <portal destination="round-2-arena-1-spawn-2" yaw="@180" forward="all(lobby, round-2-begin, not(round-2-finished), only-team-4, team-4-1-wins, round-2-arena-1-competitors)"/>
    <portal destination="round-2-arena-2-spawn-1" yaw="@0"   forward="all(lobby, round-2-begin, not(round-2-finished), only-team-5, team-5-1-wins, round-2-arena-2-competitors)"/>
    <portal destination="round-2-arena-2-spawn-1" yaw="@0"   forward="all(lobby, round-2-begin, not(round-2-finished), only-team-6, team-6-1-wins, round-2-arena-2-competitors)"/>
    <portal destination="round-2-arena-2-spawn-2" yaw="@180" forward="all(lobby, round-2-begin, not(round-2-finished), only-team-7, team-7-1-wins, round-2-arena-2-competitors)"/>
    <portal destination="round-2-arena-2-spawn-2" yaw="@180" forward="all(lobby, round-2-begin, not(round-2-finished), only-team-8, team-8-1-wins, round-2-arena-2-competitors)"/>
    <portal destination="round-2-arena-3-spawn-1" yaw="@0"   forward="all(lobby, round-2-begin, not(round-2-finished), only-team-1, team-1-0-wins, round-2-arena-3-competitors)"/>
    <portal destination="round-2-arena-3-spawn-1" yaw="@0"   forward="all(lobby, round-2-begin, not(round-2-finished), only-team-2, team-2-0-wins, round-2-arena-3-competitors)"/>
    <portal destination="round-2-arena-3-spawn-2" yaw="@180" forward="all(lobby, round-2-begin, not(round-2-finished), only-team-3, team-3-0-wins, round-2-arena-3-competitors)"/>
    <portal destination="round-2-arena-3-spawn-2" yaw="@180" forward="all(lobby, round-2-begin, not(round-2-finished), only-team-4, team-4-0-wins, round-2-arena-3-competitors)"/>
    <portal destination="round-2-arena-4-spawn-1" yaw="@0"   forward="all(lobby, round-2-begin, not(round-2-finished), only-team-5, team-5-0-wins, round-2-arena-4-competitors)"/>
    <portal destination="round-2-arena-4-spawn-1" yaw="@0"   forward="all(lobby, round-2-begin, not(round-2-finished), only-team-6, team-6-0-wins, round-2-arena-4-competitors)"/>
    <portal destination="round-2-arena-4-spawn-2" yaw="@180" forward="all(lobby, round-2-begin, not(round-2-finished), only-team-7, team-7-0-wins, round-2-arena-4-competitors)"/>
    <portal destination="round-2-arena-4-spawn-2" yaw="@180" forward="all(lobby, round-2-begin, not(round-2-finished), only-team-8, team-8-0-wins, round-2-arena-4-competitors)"/>
    <portal destination="round-3-arena-1-spawn-1" yaw="@0"   forward="all(lobby, round-3-begin, not(round-3-finished), only-team-1, team-1-2-wins, round-3-arena-1-competitors)"/>
    <portal destination="round-3-arena-1-spawn-1" yaw="@0"   forward="all(lobby, round-3-begin, not(round-3-finished), only-team-2, team-2-2-wins, round-3-arena-1-competitors)"/>
    <portal destination="round-3-arena-1-spawn-1" yaw="@0"   forward="all(lobby, round-3-begin, not(round-3-finished), only-team-3, team-3-2-wins, round-3-arena-1-competitors)"/>
    <portal destination="round-3-arena-1-spawn-1" yaw="@0"   forward="all(lobby, round-3-begin, not(round-3-finished), only-team-4, team-4-2-wins, round-3-arena-1-competitors)"/>
    <portal destination="round-3-arena-1-spawn-2" yaw="@180" forward="all(lobby, round-3-begin, not(round-3-finished), only-team-5, team-5-2-wins, round-3-arena-1-competitors)"/>
    <portal destination="round-3-arena-1-spawn-2" yaw="@180" forward="all(lobby, round-3-begin, not(round-3-finished), only-team-6, team-6-2-wins, round-3-arena-1-competitors)"/>
    <portal destination="round-3-arena-1-spawn-2" yaw="@180" forward="all(lobby, round-3-begin, not(round-3-finished), only-team-7, team-7-2-wins, round-3-arena-1-competitors)"/>
    <portal destination="round-3-arena-1-spawn-2" yaw="@180" forward="all(lobby, round-3-begin, not(round-3-finished), only-team-8, team-8-2-wins, round-3-arena-1-competitors)"/>
    <portal destination="round-3-arena-2-spawn-1" yaw="@0"   forward="all(lobby, round-3-begin, not(round-3-finished), round-3-arena-2-spawn-1-competitors, round-1-winner)"/>
    <portal destination="round-3-arena-2-spawn-2" yaw="@180" forward="all(lobby, round-3-begin, not(round-3-finished), round-3-arena-2-spawn-2-competitors, round-1-winner)"/>
    <portal destination="round-3-arena-3-spawn-1" yaw="@0"   forward="all(lobby, round-3-begin, not(round-3-finished), round-3-arena-3-spawn-1-competitors, round-2-winner)"/>
    <portal destination="round-3-arena-3-spawn-2" yaw="@180" forward="all(lobby, round-3-begin, not(round-3-finished), round-3-arena-3-spawn-2-competitors, round-2-winner)"/>
    <portal destination="round-3-arena-4-spawn-1" yaw="@0"   forward="all(lobby, round-3-begin, not(round-3-finished), only-team-1, team-1-0-wins, round-3-arena-4-competitors)"/>
    <portal destination="round-3-arena-4-spawn-1" yaw="@0"   forward="all(lobby, round-3-begin, not(round-3-finished), only-team-2, team-2-0-wins, round-3-arena-4-competitors)"/>
    <portal destination="round-3-arena-4-spawn-1" yaw="@0"   forward="all(lobby, round-3-begin, not(round-3-finished), only-team-3, team-3-0-wins, round-3-arena-4-competitors)"/>
    <portal destination="round-3-arena-4-spawn-1" yaw="@0"   forward="all(lobby, round-3-begin, not(round-3-finished), only-team-4, team-4-0-wins, round-3-arena-4-competitors)"/>
    <portal destination="round-3-arena-4-spawn-2" yaw="@180" forward="all(lobby, round-3-begin, not(round-3-finished), only-team-5, team-5-0-wins, round-3-arena-4-competitors)"/>
    <portal destination="round-3-arena-4-spawn-2" yaw="@180" forward="all(lobby, round-3-begin, not(round-3-finished), only-team-6, team-6-0-wins, round-3-arena-4-competitors)"/>
    <portal destination="round-3-arena-4-spawn-2" yaw="@180" forward="all(lobby, round-3-begin, not(round-3-finished), only-team-7, team-7-0-wins, round-3-arena-4-competitors)"/>
    <portal destination="round-3-arena-4-spawn-2" yaw="@180" forward="all(lobby, round-3-begin, not(round-3-finished), only-team-8, team-8-0-wins, round-3-arena-4-competitors)"/>
    <!--
    rescue arena winners to spectator zone
    -->
    <portal destination="round-1-arena-1-spectator" yaw="@90" forward="all(participating, current_round=1, any(all(arena-1, round-1-arena-1-finished), all(arena-2, round-1-arena-2-finished), all(arena-3, round-1-arena-3-finished), all(arena-4, round-1-arena-4-finished)), not(round-1-arena-1-finished))"/>
    <portal destination="round-1-arena-2-spectator" yaw="@90" forward="all(participating, current_round=1, any(all(arena-1, round-1-arena-1-finished), all(arena-2, round-1-arena-2-finished), all(arena-3, round-1-arena-3-finished), all(arena-4, round-1-arena-4-finished)), not(round-1-arena-2-finished))"/>
    <portal destination="round-1-arena-3-spectator" yaw="@90" forward="all(participating, current_round=1, any(all(arena-1, round-1-arena-1-finished), all(arena-2, round-1-arena-2-finished), all(arena-3, round-1-arena-3-finished), all(arena-4, round-1-arena-4-finished)), not(round-1-arena-3-finished))"/>
    <portal destination="round-1-arena-4-spectator" yaw="@90" forward="all(participating, current_round=1, any(all(arena-1, round-1-arena-1-finished), all(arena-2, round-1-arena-2-finished), all(arena-3, round-1-arena-3-finished), all(arena-4, round-1-arena-4-finished)), not(round-1-arena-4-finished))"/>
    <portal destination="lobby-spawn"                         forward="all(participating, current_round=1, any(all(arena-1, round-1-arena-1-finished), all(arena-2, round-1-arena-2-finished), all(arena-3, round-1-arena-3-finished), all(arena-4, round-1-arena-4-finished)), round-1-finished)"/>
    <portal destination="round-2-arena-1-spectator" yaw="@90" forward="all(participating, current_round=2, any(all(arena-1, round-2-arena-1-finished), all(arena-2, round-2-arena-2-finished), all(arena-3, round-2-arena-3-finished), all(arena-4, round-2-arena-4-finished)), not(round-2-arena-1-finished))"/>
    <portal destination="round-2-arena-2-spectator" yaw="@90" forward="all(participating, current_round=2, any(all(arena-1, round-2-arena-1-finished), all(arena-2, round-2-arena-2-finished), all(arena-3, round-2-arena-3-finished), all(arena-4, round-2-arena-4-finished)), not(round-2-arena-2-finished))"/>
    <portal destination="round-2-arena-3-spectator" yaw="@90" forward="all(participating, current_round=2, any(all(arena-1, round-2-arena-1-finished), all(arena-2, round-2-arena-2-finished), all(arena-3, round-2-arena-3-finished), all(arena-4, round-2-arena-4-finished)), not(round-2-arena-3-finished))"/>
    <portal destination="round-2-arena-4-spectator" yaw="@90" forward="all(participating, current_round=2, any(all(arena-1, round-2-arena-1-finished), all(arena-2, round-2-arena-2-finished), all(arena-3, round-2-arena-3-finished), all(arena-4, round-2-arena-4-finished)), not(round-2-arena-4-finished))"/>
    <portal destination="lobby-spawn"                         forward="all(participating, current_round=2, any(all(arena-1, round-2-arena-1-finished), all(arena-2, round-2-arena-2-finished), all(arena-3, round-2-arena-3-finished), all(arena-4, round-2-arena-4-finished)), round-2-finished)"/>
    <portal destination="round-3-arena-1-spectator" yaw="@90" forward="all(participating, current_round=3, any(all(arena-1, round-3-arena-1-finished), all(arena-2, round-3-arena-2-finished), all(arena-3, round-3-arena-3-finished), all(arena-4, round-3-arena-4-finished)), not(round-3-arena-1-finished))"/>
    <portal destination="round-3-arena-2-spectator" yaw="@90" forward="all(participating, current_round=3, any(all(arena-1, round-3-arena-1-finished), all(arena-2, round-3-arena-2-finished), all(arena-3, round-3-arena-3-finished), all(arena-4, round-3-arena-4-finished)), not(round-3-arena-2-finished))"/>
    <portal destination="round-3-arena-3-spectator" yaw="@90" forward="all(participating, current_round=3, any(all(arena-1, round-3-arena-1-finished), all(arena-2, round-3-arena-2-finished), all(arena-3, round-3-arena-3-finished), all(arena-4, round-3-arena-4-finished)), not(round-3-arena-3-finished))"/>
    <portal destination="round-3-arena-4-spectator" yaw="@90" forward="all(participating, current_round=3, any(all(arena-1, round-3-arena-1-finished), all(arena-2, round-3-arena-2-finished), all(arena-3, round-3-arena-3-finished), all(arena-4, round-3-arena-4-finished)), not(round-3-arena-4-finished))"/>
    <portal destination="lobby-spawn"                         forward="all(participating, current_round=3, any(all(arena-1, round-3-arena-1-finished), all(arena-2, round-3-arena-2-finished), all(arena-3, round-3-arena-3-finished), all(arena-4, round-3-arena-4-finished)), round-3-finished)"/>
    <!--
    inter-arena portals
    -->
    <portal destination="round-1-arena-2-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-1-spectator, round-1-arena-1-finished, not(round-1-finished)), all(round-1-arena-1-spectator-portal, not(round-1-arena-2-finished))))"/>
    <portal destination="round-1-arena-3-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-1-spectator, round-1-arena-1-finished, not(round-1-finished)), all(round-1-arena-1-spectator-portal, not(round-1-arena-3-finished), round-1-arena-2-finished)))"/>
    <portal destination="round-1-arena-4-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-1-spectator, round-1-arena-1-finished, not(round-1-finished)), all(round-1-arena-1-spectator-portal, not(round-1-arena-4-finished), round-1-arena-2-finished, round-1-arena-3-finished)))"/>
    <portal destination="round-1-arena-3-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-2-spectator, round-1-arena-2-finished, not(round-1-finished)), all(round-1-arena-2-spectator-portal, not(round-1-arena-3-finished))))"/>
    <portal destination="round-1-arena-4-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-2-spectator, round-1-arena-2-finished, not(round-1-finished)), all(round-1-arena-2-spectator-portal, not(round-1-arena-4-finished), round-1-arena-3-finished)))"/>
    <portal destination="round-1-arena-1-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-2-spectator, round-1-arena-2-finished, not(round-1-finished)), all(round-1-arena-2-spectator-portal, not(round-1-arena-1-finished), round-1-arena-3-finished, round-1-arena-4-finished)))"/>
    <portal destination="round-1-arena-4-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-3-spectator, round-1-arena-3-finished, not(round-1-finished)), all(round-1-arena-3-spectator-portal, not(round-1-arena-4-finished))))"/>
    <portal destination="round-1-arena-1-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-3-spectator, round-1-arena-3-finished, not(round-1-finished)), all(round-1-arena-3-spectator-portal, not(round-1-arena-1-finished), round-1-arena-4-finished)))"/>
    <portal destination="round-1-arena-2-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-3-spectator, round-1-arena-3-finished, not(round-1-finished)), all(round-1-arena-3-spectator-portal, not(round-1-arena-2-finished), round-1-arena-4-finished, round-1-arena-1-finished)))"/>
    <portal destination="round-1-arena-1-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-4-spectator, round-1-arena-4-finished, not(round-1-finished)), all(round-1-arena-4-spectator-portal, not(round-1-arena-1-finished))))"/>
    <portal destination="round-1-arena-2-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-4-spectator, round-1-arena-4-finished, not(round-1-finished)), all(round-1-arena-4-spectator-portal, not(round-1-arena-2-finished), round-1-arena-1-finished)))"/>
    <portal destination="round-1-arena-3-spectator" yaw="@90" forward="all(current_round=1, any(all(arena-4-spectator, round-1-arena-4-finished, not(round-1-finished)), all(round-1-arena-4-spectator-portal, not(round-1-arena-3-finished), round-1-arena-1-finished, round-1-arena-2-finished)))"/>
    <portal destination="round-2-arena-2-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-1-spectator, round-2-arena-1-finished, not(round-2-finished)), all(round-2-arena-1-spectator-portal, not(round-2-arena-2-finished))))"/>
    <portal destination="round-2-arena-3-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-1-spectator, round-2-arena-1-finished, not(round-2-finished)), all(round-2-arena-1-spectator-portal, not(round-2-arena-3-finished), round-2-arena-2-finished)))"/>
    <portal destination="round-2-arena-4-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-1-spectator, round-2-arena-1-finished, not(round-2-finished)), all(round-2-arena-1-spectator-portal, not(round-2-arena-4-finished), round-2-arena-2-finished, round-2-arena-3-finished)))"/>
    <portal destination="round-2-arena-3-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-2-spectator, round-2-arena-2-finished, not(round-2-finished)), all(round-2-arena-2-spectator-portal, not(round-2-arena-3-finished))))"/>
    <portal destination="round-2-arena-4-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-2-spectator, round-2-arena-2-finished, not(round-2-finished)), all(round-2-arena-2-spectator-portal, not(round-2-arena-4-finished), round-2-arena-3-finished)))"/>
    <portal destination="round-2-arena-1-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-2-spectator, round-2-arena-2-finished, not(round-2-finished)), all(round-2-arena-2-spectator-portal, not(round-2-arena-1-finished), round-2-arena-3-finished, round-2-arena-4-finished)))"/>
    <portal destination="round-2-arena-4-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-3-spectator, round-2-arena-3-finished, not(round-2-finished)), all(round-2-arena-3-spectator-portal, not(round-2-arena-4-finished))))"/>
    <portal destination="round-2-arena-1-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-3-spectator, round-2-arena-3-finished, not(round-2-finished)), all(round-2-arena-3-spectator-portal, not(round-2-arena-1-finished), round-2-arena-4-finished)))"/>
    <portal destination="round-2-arena-2-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-3-spectator, round-2-arena-3-finished, not(round-2-finished)), all(round-2-arena-3-spectator-portal, not(round-2-arena-2-finished), round-2-arena-4-finished, round-2-arena-1-finished)))"/>
    <portal destination="round-2-arena-1-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-4-spectator, round-2-arena-4-finished, not(round-2-finished)), all(round-2-arena-4-spectator-portal, not(round-2-arena-1-finished))))"/>
    <portal destination="round-2-arena-2-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-4-spectator, round-2-arena-4-finished, not(round-2-finished)), all(round-2-arena-4-spectator-portal, not(round-2-arena-2-finished), round-2-arena-1-finished)))"/>
    <portal destination="round-2-arena-3-spectator" yaw="@90" forward="all(current_round=2, any(all(arena-4-spectator, round-2-arena-4-finished, not(round-2-finished)), all(round-2-arena-4-spectator-portal, not(round-2-arena-3-finished), round-2-arena-1-finished, round-2-arena-2-finished)))"/>
    <portal destination="round-3-arena-2-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-1-spectator, round-3-arena-1-finished, not(round-3-finished)), all(round-3-arena-1-spectator-portal, not(round-3-arena-2-finished))))"/>
    <portal destination="round-3-arena-3-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-1-spectator, round-3-arena-1-finished, not(round-3-finished)), all(round-3-arena-1-spectator-portal, not(round-3-arena-3-finished), round-3-arena-2-finished)))"/>
    <portal destination="round-3-arena-4-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-1-spectator, round-3-arena-1-finished, not(round-3-finished)), all(round-3-arena-1-spectator-portal, not(round-3-arena-4-finished), round-3-arena-2-finished, round-3-arena-3-finished)))"/>
    <portal destination="round-3-arena-3-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-2-spectator, round-3-arena-2-finished, not(round-3-finished)), all(round-3-arena-2-spectator-portal, not(round-3-arena-3-finished))))"/>
    <portal destination="round-3-arena-4-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-2-spectator, round-3-arena-2-finished, not(round-3-finished)), all(round-3-arena-2-spectator-portal, not(round-3-arena-4-finished), round-3-arena-3-finished)))"/>
    <portal destination="round-3-arena-1-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-2-spectator, round-3-arena-2-finished, not(round-3-finished)), all(round-3-arena-2-spectator-portal, not(round-3-arena-1-finished), round-3-arena-3-finished, round-3-arena-4-finished)))"/>
    <portal destination="round-3-arena-4-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-3-spectator, round-3-arena-3-finished, not(round-3-finished)), all(round-3-arena-3-spectator-portal, not(round-3-arena-4-finished))))"/>
    <portal destination="round-3-arena-1-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-3-spectator, round-3-arena-3-finished, not(round-3-finished)), all(round-3-arena-3-spectator-portal, not(round-3-arena-1-finished), round-3-arena-4-finished)))"/>
    <portal destination="round-3-arena-2-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-3-spectator, round-3-arena-3-finished, not(round-3-finished)), all(round-3-arena-3-spectator-portal, not(round-3-arena-2-finished), round-3-arena-4-finished, round-3-arena-1-finished)))"/>
    <portal destination="round-3-arena-1-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-4-spectator, round-3-arena-4-finished, not(round-3-finished)), all(round-3-arena-4-spectator-portal, not(round-3-arena-1-finished))))"/>
    <portal destination="round-3-arena-2-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-4-spectator, round-3-arena-4-finished, not(round-3-finished)), all(round-3-arena-4-spectator-portal, not(round-3-arena-2-finished), round-3-arena-1-finished)))"/>
    <portal destination="round-3-arena-3-spectator" yaw="@90" forward="all(current_round=3, any(all(arena-4-spectator, round-3-arena-4-finished, not(round-3-finished)), all(round-3-arena-4-spectator-portal, not(round-3-arena-3-finished), round-3-arena-1-finished, round-3-arena-2-finished)))"/>
</portals>
<itemremove>
    <item>leather helmet</item>
    <item>leather chestplate</item>
    <item>leather leggings</item>
    <item>leather boots</item>
    <item>iron helmet</item>
    <item>iron chestplate</item>
    <item>iron leggings</item>
    <item>iron boots</item>
    <item>chainmail chestplate</item>
    <item>chainmail helmet</item>
    <item>chainmail leggings</item>
    <item>chainmail boots</item>
    <item>gold helmet</item>
    <item>gold chestplate</item>
    <item>gold leggings</item>
    <item>gold boots</item>
    <item>diamond helmet</item>
    <item>diamond chestplate</item>
    <item>diamond leggings</item>
    <item>diamond boots</item>
    <item>arrow</item>
    <item>potion</item>
    <item>golden apple</item>
    <item>tnt</item>
</itemremove>
<toolrepair>
    <tool>stone sword</tool>
    <tool>iron sword</tool>
    <tool>diamond sword</tool>
    <tool>bow</tool>
    <tool>diamond axe</tool>
    <tool>wood hoe</tool>
    <tool>gold hoe</tool>
    <tool>blaze rod</tool>
    <tool>raw fish</tool>
    <tool>fishing rod</tool>
</toolrepair>
</map>
