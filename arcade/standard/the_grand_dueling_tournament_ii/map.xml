<map proto="1.5.0" game="Wins">
<!--
   ________                         .___ ___________                                                      __    ________
  /  _____/___________    ____    __| _/ \__    ___/___  __ _________  ____ _____    _____   ____   _____/  |_  \_____  \
/   \  __\_  __ \__  \  /    \  / __ |    |    | /  _ \|  |  \_  __ \/    \\__  \  /     \_/ __ \ /    \   __\  /  ____/
\    \_\  \  | \// __ \|   |  \/ /_/ |    |    |(  <_> )  |  /|  | \/   |  \/ __ \|  Y Y  \  ___/|   |  \  |   /       \
 \______  /__|  (____  /___|  /\____ |    |____| \____/|____/ |__|  |___|  (____  /__|_|  /\___  >___|  /__|   \_______ \
        \/           \/     \/      \/                                   \/     \/      \/     \/     \/               \/
                                                    Definitive Edition
-->
<name>The Grand Dueling Tournament II</name>
<version>2.8.2</version>
<objective>Defeat opposing teams in The Grand ${tournament-type} Tournament!</objective>
<phase>staging</phase>
<variant id="spleef" world="spleef" override="true">The Grand Spleefing Tournament II</variant>
<variant id="cannon" world="cannon" override="true">The Grand Cannoning Tournament II</variant>
<variant id="cacti" world="cacti" override="true">The Grand Cacti Tournament II</variant>
<constant id="kit-type">kit</constant>
<constant id="arena-height">25</constant>
<constant id="round-begin-after-seconds">10</constant>
<constant id="round-begin-countdown-after-seconds">7</constant> <!-- 3 less than round-begin-after-seconds for countdown include -->
<constant id="tirion-console-base">193,5,31.5</constant>
<if variant="default">
    <created>2016-01-19</created>
    <constant id="tournament-type">Dueling</constant>
    <constant id="tournament-action">fight</constant>
    <constant id="kit-count">14</constant>
    <constant id="kit-0-name">`bIron</constant>
    <constant id="kit-1-name">`6Gold</constant>
    <constant id="kit-2-name">`bSlappy Fish</constant>
    <constant id="kit-3-name">`cArcher</constant>
    <constant id="kit-4-name">`aLumberjack</constant>
    <constant id="kit-5-name">`cMCSG</constant>
    <constant id="kit-6-name">`3Diamond</constant>
    <constant id="kit-7-name">`5Potions</constant>
    <constant id="kit-8-name">`6Gapple</constant>
    <constant id="kit-9-name">`3Gunz</constant>
    <constant id="kit-10-name">`bConquest</constant>
    <constant id="kit-11-name">`eBlasternauts</constant>
    <constant id="kit-12-name">`cUHC</constant>
    <constant id="kit-13-name">`6Soup</constant>
</if>
<if variant="spleef">
    <created>2016-06-29</created>
    <constant id="tournament-type">Spleefing</constant>
    <constant id="tournament-action">spleef</constant>
    <constant id="kit-count">5</constant>
    <constant id="kit-0-name">`bClassic</constant>
    <constant id="kit-1-name">`aBuild</constant>
    <constant id="kit-2-name">`cGrenade</constant>
    <constant id="kit-3-name">`2Creep Slap</constant>
    <constant id="kit-4-name">`bClassic (but with `cTNT`b)</constant>
</if>
<if variant="cannon">
    <created>2023-11-12</created>
    <constant id="tournament-type">Cannoning</constant>
    <constant id="tournament-action">cannon</constant>
    <constant id="kit-type">platform</constant>
    <constant id="kit-count">12</constant>
    <constant id="kit-0-name">`bClassic</constant>
    <constant id="kit-1-name">`bClassic `7(`aitty-bitty`7)</constant>
    <constant id="kit-2-name">`bClassic `7(`cwide`7)</constant>
    <constant id="kit-3-name">`bClassic `7(`6diagonal`7)</constant>
    <constant id="kit-4-name">`3Cubes</constant>
    <constant id="kit-5-name">`dShips</constant>
    <constant id="kit-6-name">`5Levels</constant>
    <constant id="kit-7-name">`cDescent</constant>
    <constant id="kit-8-name">`9Submarine</constant>
    <constant id="kit-9-name">`3Wars</constant>
    <constant id="kit-10-name">`aFortress</constant>
    <constant id="kit-11-name">`eBalloon</constant>
    <constant id="arena-height">38</constant>
    <constant id="round-begin-after-seconds">15</constant>
    <constant id="round-begin-countdown-after-seconds">12</constant>
</if>
<if variant="cacti">
    <created>2024-04-01</created>
    <constant id="tournament-type">Cacti</constant>
    <constant id="tournament-action">place prickly cactus</constant>
    <constant id="kit-count">6</constant>
    <constant id="kit-0-name">`bClassic</constant>
    <constant id="kit-1-name">`aFast Digging</constant>
    <constant id="kit-2-name">`cDouble Knockback</constant>
    <constant id="kit-3-name">`3Ghost Squadron</constant>
    <constant id="kit-4-name">`dSumo</constant>
    <constant id="kit-5-name">`2Cacti Toss</constant>
    <constant id="arena-height">13</constant>
</if>
<include id="countdown"/>
<include id="void-death"/>
<authors>
    <if variant="default, spleef">
        <author uuid="07fa10c6-f564-4630-861e-fe134ae27527"/> <!-- Yoyo_ -->
    </if>
    <if variant="spleef">
        <author uuid="75fd93dd-8e48-4698-81a2-97dae2ec5b5f"/> <!-- Pugzy -->
    </if>
    <if variant="cacti">
        <author uuid="3a3dab52-a356-4eed-a506-a9a7e53a3f68"/> <!-- Pyrolith -->
    </if>
    <if variant="cannon, cacti">
        <author uuid="f690a591-348b-482e-a18d-7779d0c0a28c"/> <!-- mitchiii -->
    </if>
    <if variant="cannon">
        <author uuid="a9f11454-beac-4cc3-a138-1780802c8794"/> <!-- Crazy_ -->
    </if>
</authors>
<contributors>
    <if variant="default, spleef">
        <contributor uuid="f690a591-348b-482e-a18d-7779d0c0a28c" contribution="Remastered XML"/> <!-- mitchiii -->
    </if>
    <contributor uuid="e82603df-417d-4a95-bd1f-1720648be0b4" contribution="Grandmaster of PGM, XML, and existence itself"/> <!-- Pablete1234 -->
    <unless variant="default, spleef">
        <contributor uuid="07fa10c6-f564-4630-861e-fe134ae27527" contribution="Original dueling tournament game format"/> <!-- Yoyo_ -->
    </unless>
    <if variant="cannon">
        <contributor uuid="9bfbc560-244a-4e28-ab70-185f39740ec1" contribution="Cubes - CannonQuad design inspiration"/> <!-- Zan -->
        <contributor uuid="dad8b95c-cf6a-44df-982e-8c8dd70201e0" contribution="Ships - Database design inspiration"/> <!-- ElectroidFilms -->
        <contributor uuid="2ca8072f-74be-4798-85b8-bbce03aa91af" contribution="Levels - KÃ¯ design inspiration"/> <!-- Tywnis -->
        <contributor uuid="c33a03bf-0f73-46e2-a93e-ddb7d25232d1" contribution="Descent - Fractal Descent design inspiration"/> <!-- teheggy -->
        <contributor uuid="459fd919-0d58-401a-9601-6cab1eb721ab" contribution="Descent - Fractal Descent design inspiration"/> <!-- Reshif -->
        <contributor uuid="3a549b18-08ed-4756-a78c-b34d29a4fd87" contribution="Fortress - Fortress Battles design inspiration"/> <!-- Torn_Ares -->
        <contributor uuid="98a4a81e-4393-4041-8d43-40a0196b5832" contribution="Fortress - Fortress Battles design inspiration"/> <!-- Thungon -->
        <contributor uuid="0ae466ff-d3a1-4307-a323-89043643ace5" contribution="Fortress - Fortress Battles design inspiration"/> <!-- GammaRay_89 -->
        <contributor uuid="177803b2-797c-4089-aae1-5702ca259e2c" contribution="Wars - War Wars design inspiration"/> <!-- Onsole -->
        <contributor uuid="459fd919-0d58-401a-9601-6cab1eb721ab" contribution="Submarine, Balloon - Sky Traffic design inspiration"/> <!-- Reshif -->
    </if>
</contributors>
<score>
    <limit>3</limit>
</score>
<teams>
    <team id="team-1" color="dark red"     max="6" min="1">Red</team>
    <team id="team-2" color="blue"         max="6" min="1">Blue</team>
    <team id="team-3" color="dark green"   max="6" min="1">Green</team>
    <team id="team-4" color="dark purple"  max="6" min="1">Purple</team>
    <team id="team-5" color="yellow"       max="6" min="1">Yellow</team>
    <team id="team-6" color="gold"         max="6" min="1">Orange</team>
    <team id="team-7" color="light purple" max="6" min="1">Pink</team>
    <team id="team-8" color="dark aqua"    max="6" min="1">Cyan</team>
</teams>
<spawns spread="true">
    <spawn region="lobby-spawn" angle="193.5,6,31.5" kit="clear-kit" filter="current_round=0"/>
    <spawn region="lobby-spawn" kit="clear-kit" filter="between-rounds"/>
    <spawn region="round-1-arena-1-spectator" yaw="90" kit="spectator-kit" filter="all(current_round=1, not(round-1-arena-1-finished))"/>
    <spawn region="round-1-arena-2-spectator" yaw="90" kit="spectator-kit" filter="all(current_round=1, not(round-1-arena-2-finished))"/>
    <spawn region="round-1-arena-3-spectator" yaw="90" kit="spectator-kit" filter="all(current_round=1, not(round-1-arena-3-finished))"/>
    <spawn region="round-1-arena-4-spectator" yaw="90" kit="spectator-kit" filter="all(current_round=1, not(round-1-arena-4-finished))"/>
    <spawn region="round-2-arena-1-spectator" yaw="90" kit="spectator-kit" filter="all(current_round=2, not(round-2-arena-1-finished))"/>
    <spawn region="round-2-arena-2-spectator" yaw="90" kit="spectator-kit" filter="all(current_round=2, not(round-2-arena-2-finished))"/>
    <spawn region="round-2-arena-3-spectator" yaw="90" kit="spectator-kit" filter="all(current_round=2, not(round-2-arena-3-finished))"/>
    <spawn region="round-2-arena-4-spectator" yaw="90" kit="spectator-kit" filter="all(current_round=2, not(round-2-arena-4-finished))"/>
    <spawn region="round-3-arena-1-spectator" yaw="90" kit="spectator-kit" filter="all(current_round=3, not(round-3-arena-1-finished))"/>
    <spawn region="round-3-arena-2-spectator" yaw="90" kit="spectator-kit" filter="all(current_round=3, not(round-3-arena-2-finished))"/>
    <spawn region="round-3-arena-3-spectator" yaw="90" kit="spectator-kit" filter="all(current_round=3, not(round-3-arena-3-finished))"/>
    <spawn region="round-3-arena-4-spectator" yaw="90" kit="spectator-kit" filter="all(current_round=3, not(round-3-arena-4-finished))"/>
    <default region="lobby-spawn" angle="193.5,6,31.5" kit="obs-kit"/>
</spawns>
<respawn auto="true" delay="0"/>
<kits>
    <kit id="obs-kit">
        <effect>night vision</effect>
    </kit>
    <kit id="clear-kit" force="true">
        <clear effects="true"/>
        <max-health>20</max-health>
        <foodlevel>20</foodlevel>
        <game-mode>adventure</game-mode>
        <double-jump enabled="false"/>
        <effect amplifier="100" duration="1">instant health</effect>
        <action>
            <set var="current_kill_reward" value="0"/>
            <set var="current_kit_requires_survival" value="0"/>
            <set var="playing" value="0"/>
        </action>
        <if variant="cannon">
            <effect>night vision</effect>
        </if>
    </kit>
    <kit id="spectator-kit" parents="clear-kit" force="true" filter="round-1-begin">
        <effect>invisibility</effect>
        <unless variant="cacti">
            <item slot="8" material="feather" name="`r`bSpectator Mode `o`7(right click)" consumable="spectator-mode" locked="true"/>
        </unless>
    </kit>
    <kit id="survival-kit" force="true">
        <game-mode>survival</game-mode>
    </kit>
    <if variant="default">
        <kit id="kit-0"> <!-- iron -->
            <item slot="0" material="iron sword" unbreakable="true"/>
            <item slot="1" material="bow" unbreakable="true"/>
            <item slot="2" material="arrow" amount="24"/>
            <helmet material="iron helmet"/>
            <chestplate material="iron chestplate"/>
            <leggings material="iron leggings"/>
            <boots material="iron boots"/>
            <action>
                <set var="current_kill_reward" value="1"/>
            </action>
        </kit>
        <kit id="kit-1"> <!-- gold -->
            <item slot="0" material="stone sword" unbreakable="true"/>
            <item slot="1" material="bow" unbreakable="true"/>
            <item slot="2" material="arrow" amount="24"/>
            <helmet material="gold helmet"/>
            <chestplate material="gold chestplate"/>
            <leggings material="gold leggings"/>
            <boots material="gold boots"/>
            <action>
                <set var="current_kill_reward" value="1"/>
            </action>
        </kit>
        <kit id="kit-2"> <!-- slappy fish -->
            <item slot="0" material="raw fish">
                <enchantment level="1">damage all</enchantment>
                <enchantment level="1">knockback</enchantment>
            </item>
        </kit>
        <kit id="kit-3"> <!-- archer -->
            <item slot="0" material="bow" unbreakable="true">
                <enchantment level="1">arrow damage</enchantment>
                <enchantment level="1">arrow infinite</enchantment>
            </item>
            <item slot="27" material="arrow"/>
            <helmet material="iron helmet"/>
            <chestplate material="leather chestplate" team-color="true"/>
            <leggings material="leather leggings" team-color="true"/>
            <boots material="iron boots"/>
            <action>
                <set var="current_kill_reward" value="2"/>
            </action>
        </kit>
        <kit id="kit-4"> <!-- lumberjack -->
            <item slot="0" material="diamond axe" unbreakable="true">
                <enchantment level="2">damage all</enchantment>
            </item>
            <helmet material="diamond helmet"/>
            <chestplate material="diamond chestplate"/>
            <leggings material="diamond leggings"/>
            <boots material="diamond boots"/>
            <action>
                <set var="current_kill_reward" value="2"/>
            </action>
        </kit>
        <kit id="kit-5"> <!-- mcsg -->
            <item slot="0" material="stone sword"/>
            <item slot="1" material="bow"/>
            <item slot="2" material="fishing rod"/>
            <item slot="3" material="golden apple"/>
            <item slot="8" material="arrow" amount="16"/>
            <helmet material="chainmail helmet"/>
            <chestplate material="chainmail chestplate"/>
            <leggings material="chainmail leggings"/>
            <boots material="chainmail boots"/>
        </kit>
        <kit id="kit-6"> <!-- diamond -->
            <item slot="0" material="diamond sword" unbreakable="true"/>
            <item slot="1" material="bow" unbreakable="true"/>
            <item slot="2" amount="2" material="golden apple"/>
            <item slot="8" amount="24" material="arrow"/>
            <helmet material="diamond helmet"/>
            <chestplate material="diamond chestplate"/>
            <leggings material="diamond leggings"/>
            <boots material="diamond boots"/>
            <action>
                <set var="current_kill_reward" value="3"/>
            </action>
        </kit>
        <kit id="kit-7"> <!-- pot -->
            <item slot="0" material="diamond sword" unbreakable="true">
                <enchantment level="5">damage all</enchantment>
            </item>
            <item slot="1" material="bow" unbreakable="true">
                <enchantment level="5">arrow damage</enchantment>
            </item>
            <item slot="2" material="potion" damage="16421">
                <potion amplifier="2">heal</potion>
            </item>
            <item slot="3" material="potion" damage="16421">
                <potion amplifier="2">heal</potion>
            </item>
            <item slot="4" material="potion" damage="16421">
                <potion amplifier="2">heal</potion>
            </item>
            <item slot="5" material="potion" damage="16421">
                <potion amplifier="2">heal</potion>
            </item>
            <item slot="6" material="potion" damage="16421">
                <potion amplifier="2">heal</potion>
            </item>
            <item slot="7" material="potion" damage="16421">
                <potion amplifier="2">heal</potion>
            </item>
            <item slot="8" material="potion" damage="16421">
                <potion amplifier="2">heal</potion>
            </item>
            <item slot="27" amount="16" material="arrow"/>
            <helmet material="diamond helmet" damage="250">
                <enchantment level="1">protection environmental</enchantment>
            </helmet>
            <chestplate material="diamond chestplate" damage="300">
                <enchantment level="2">protection environmental</enchantment>
            </chestplate>
            <leggings material="diamond leggings" damage="300">
                <enchantment level="1">protection environmental</enchantment>
            </leggings>
            <boots material="diamond boots" damage="300">
                <enchantment level="1">protection environmental</enchantment>
            </boots>
            <effect amplifier="2">speed</effect>
            <action>
                <set var="current_kill_reward" value="4"/>
            </action>
        </kit>
        <kit id="kit-8"> <!-- gapple -->
            <item slot="0" material="diamond sword" unbreakable="true">
                <enchantment level="5">damage all</enchantment>
            </item>
            <item slot="1" material="golden apple" damage="1" amount="64"/>
            <helmet material="diamond helmet" damage="250">
                <enchantment level="3">protection environmental</enchantment>
            </helmet>
            <chestplate material="diamond chestplate" damage="300">
                <enchantment level="3">protection environmental</enchantment>
            </chestplate>
            <leggings material="diamond leggings" damage="300">
                <enchantment level="3">protection environmental</enchantment>
            </leggings>
            <boots material="diamond boots" damage="300">
                <enchantment level="3">protection environmental</enchantment>
            </boots>
            <effect amplifier="2">speed</effect>
        </kit>
        <kit id="kit-9"> <!-- gunz -->
            <item slot="0" material="wood hoe" unbreakable="true" projectile="egg-gun" name="`rEgg Gun"/>
        </kit>
        <kit id="kit-10"> <!-- conquest  -->
            <item slot="0" material="stone sword" unbreakable="true"/>
            <item slot="1" material="bow" unbreakable="true"/>
            <item slot="2" material="golden apple"/>
            <item slot="8" material="arrow" amount="12"/>
            <helmet material="leather helmet" unbreakable="true" team-color="true"/>
            <chestplate material="leather chestplate" unbreakable="true" team-color="true"/>
            <leggings material="leather leggings" unbreakable="true" team-color="true">
                <enchantment level="3">protection projectile</enchantment>
            </leggings>
            <boots material="iron boots" unbreakable="true"/>
            <action>
                <set var="current_kill_reward" value="5"/>
            </action>
        </kit>
        <kit id="kit-11"> <!-- blasternauts  -->
            <item slot="0" material="blaze rod" name="`rMelee Stick">
                <enchantment level="2">knockback</enchantment>
                <enchantment level="2">damage all</enchantment>
            </item>
            <item slot="1" material="gold hoe" unbreakable="true" projectile="tnt-gun" name="`rTNT Launcher"/>
            <item slot="2" material="tnt" amount="6" show-can-place-on="false">
                <can-place-on>
                    <all-blocks/>
                </can-place-on>
            </item>
            <item slot="3" material="snow ball" amount="16" name="`rGrenade" grenade="true" grenade-power="1.2"/>
            <item slot="4" material="snow ball" amount="16" name="`rGrenade" grenade="true" grenade-power="1.2"/>
            <item slot="8" material="potion" damage="8229"/>
            <helmet material="iron helmet" unbreakable="true"/>
            <chestplate material="leather chestplate" unbreakable="true" team-color="true"/>
            <leggings material="chainmail leggings" unbreakable="true">
                <enchantment level="2">protection explosions</enchantment>
            </leggings>
            <boots material="iron boots" unbreakable="true"/>
            <double-jump/>
            <action>
                <set var="current_kill_reward" value="6"/>
            </action>
        </kit>
        <kit id="kit-12" force="true"> <!-- uhc -->
            <foodlevel>16</foodlevel>
            <item slot="0" material="iron sword">
                <enchantment level="2">damage all</enchantment>
            </item>
            <item slot="1" material="bow">
                <enchantment>arrow damage</enchantment>
            </item>
            <helmet material="iron helmet">
                <enchantment>protection environmental</enchantment>
            </helmet>
            <chestplate material="iron chestplate">
                <enchantment>protection environmental</enchantment>
            </chestplate>
            <leggings material="iron leggings">
                <enchantment>protection environmental</enchantment>
            </leggings>
            <boots material="iron boots">
                <enchantment>protection environmental</enchantment>
            </boots>
            <item slot="2" material="golden apple" amount="3" consumable="uhc-gapple"/>
            <item slot="28" material="arrow" amount="32"/>
        </kit>
        <kit id="kit-13" force="true"> <!-- soup -->
            <foodlevel>16</foodlevel>
            <item slot="0" material="iron sword" unbreakable="true"/>
            <helmet material="iron helmet"/>
            <chestplate material="iron chestplate"/>
            <leggings material="iron leggings"/>
            <boots material="iron boots"/>
            <item slot="1" material="mushroom soup" consumable="soup"/>
            <item slot="2" material="mushroom soup" consumable="soup"/>
            <item slot="3" material="mushroom soup" consumable="soup"/>
            <item slot="4" material="mushroom soup" consumable="soup"/>
            <item slot="5" material="mushroom soup" consumable="soup"/>
            <item slot="6" material="mushroom soup" consumable="soup"/>
            <item slot="7" material="mushroom soup" consumable="soup"/>
            <item slot="8" material="mushroom soup" consumable="soup"/>
            <item slot="9" material="mushroom soup" consumable="soup"/>
            <item slot="10" material="mushroom soup" consumable="soup"/>
            <item slot="11" material="mushroom soup" consumable="soup"/>
            <item slot="12" material="mushroom soup" consumable="soup"/>
            <item slot="13" material="mushroom soup" consumable="soup"/>
            <item slot="14" material="mushroom soup" consumable="soup"/>
            <item slot="15" material="mushroom soup" consumable="soup"/>
            <item slot="16" material="mushroom soup" consumable="soup"/>
            <item slot="17" material="mushroom soup" consumable="soup"/>
            <item slot="18" material="mushroom soup" consumable="soup"/>
            <item slot="19" material="mushroom soup" consumable="soup"/>
            <item slot="20" material="mushroom soup" consumable="soup"/>
            <item slot="21" material="mushroom soup" consumable="soup"/>
            <item slot="22" material="mushroom soup" consumable="soup"/>
            <item slot="23" material="mushroom soup" consumable="soup"/>
            <item slot="24" material="mushroom soup" consumable="soup"/>
            <item slot="25" material="mushroom soup" consumable="soup"/>
            <item slot="26" material="mushroom soup" consumable="soup"/>
            <item slot="27" material="mushroom soup" consumable="soup"/>
            <item slot="28" material="mushroom soup" consumable="soup"/>
            <item slot="29" material="mushroom soup" consumable="soup"/>
            <item slot="30" material="mushroom soup" consumable="soup"/>
            <item slot="31" material="mushroom soup" consumable="soup"/>
            <item slot="32" material="mushroom soup" consumable="soup"/>
            <item slot="33" material="mushroom soup" consumable="soup"/>
            <item slot="34" material="mushroom soup" consumable="soup"/>
            <item slot="35" material="mushroom soup" consumable="soup"/>
        </kit>
    </if>
    <if variant="spleef">
        <kit id="kit-0"> <!-- classic -->
            <item slot="0" material="diamond spade" unbreakable="true">
                <enchantment level="5">efficiency</enchantment>
                <can-destroy>
                    <material>snow block</material>
                </can-destroy>
            </item>
            <chestplate material="leather chestplate" unbreakable="true" team-color="true"/>
            <boots material="leather boots" unbreakable="true" team-color="true"/>
        </kit>
        <kit id="kit-1"> <!-- build -->
            <item slot="0" material="diamond spade" unbreakable="true">
                <enchantment level="5">efficiency</enchantment>
                <can-destroy>
                    <material>snow block</material>
                </can-destroy>
            </item>
            <item slot="1" material="snow block" amount="126">
                <can-place-on>
                    <material>snow block</material>
                </can-place-on>
            </item>
            <item slot="2" material="snow ball" amount="16"/>
            <helmet material="gold helmet" unbreakable="true"/>
            <chestplate material="leather chestplate" unbreakable="true" team-color="true"/>
            <leggings material="iron leggings" unbreakable="true"/>
            <boots material="leather boots" unbreakable="true" team-color="true"/>
            <action>
                <set var="current_kill_reward" value="1"/>
            </action>
        </kit>
        <kit id="kit-2"> <!-- grenade -->
            <item slot="0" material="diamond spade" unbreakable="true">
                <enchantment level="5">efficiency</enchantment>
                <can-destroy>
                    <material>snow block</material>
                </can-destroy>
            </item>
            <item slot="1" material="egg" amount="36" name="`rGrenade" grenade="true" grenade-power="0.5"/>
            <helmet material="iron helmet" unbreakable="true"/>
            <chestplate material="iron chestplate" unbreakable="true" team-color="true"/>
            <leggings material="iron leggings" unbreakable="true"/>
            <boots material="leather boots" unbreakable="true" team-color="true"/>
            <action>
                <set var="current_kill_reward" value="2"/>
            </action>
        </kit>
        <kit id="kit-3"> <!-- creeper -->
            <item slot="0" material="diamond spade" unbreakable="true">
                <enchantment level="5">efficiency</enchantment>
                <enchantment level="5">knockback</enchantment>
                <can-destroy>
                    <material>snow block</material>
                </can-destroy>
            </item>
            <item slot="1" material="monster egg" damage="50" amount="16" show-can-place-on="false">
                <can-place-on>
                    <all-blocks/>
                </can-place-on>
            </item>
            <item slot="2" material="flint and steel" unbreakable="true">
                <enchantment level="7">knockback</enchantment>
            </item>
            <helmet material="iron helmet" unbreakable="true"/>
            <chestplate material="iron chestplate" unbreakable="true">
                <enchantment level="2">protection explosions</enchantment>
            </chestplate>
            <leggings material="iron leggings" unbreakable="true"/>
            <boots material="leather boots" unbreakable="true" team-color="true"/>
            <action>
                <set var="current_kill_reward" value="3"/>
            </action>
        </kit>
        <kit id="kit-4"> <!-- classic w/ tnt -->
            <item slot="0" material="diamond spade" unbreakable="true">
                <enchantment level="5">efficiency</enchantment>
                <enchantment level="5">knockback</enchantment>
                <can-destroy>
                    <material>snow block</material>
                </can-destroy>
            </item>
            <item slot="1" material="tnt" amount="3" show-can-place-on="false">
                <can-place-on>
                    <all-blocks/>
                </can-place-on>
            </item>
            <helmet material="gold helmet" unbreakable="true"/>
            <chestplate material="leather chestplate" unbreakable="true" team-color="true"/>
            <leggings material="gold leggings" unbreakable="true"/>
            <boots material="leather boots" unbreakable="true" team-color="true"/>
            <action>
                <set var="current_kill_reward" value="4"/>
            </action>
        </kit>
    </if>
    <if variant="cannon">
        <kit id="kit-0"> <!-- classic -->
            <item slot="9" material="tnt" amount="64"/>
            <item slot="18" material="tnt" amount="64"/>
            <item slot="27" material="tnt" amount="64"/>
            <item slot="0" material="diamond pickaxe" unbreakable="true"/>
            <item slot="10" material="tnt" amount="64"/>
            <item slot="19" material="tnt" amount="64"/>
            <item slot="28" material="tnt" amount="64"/>
            <item slot="1" material="dispenser" amount="16"/>
            <item slot="11" material="tnt" amount="64"/>
            <item slot="20" material="tnt" amount="64"/>
            <item slot="29" material="tnt" amount="64"/>
            <item slot="2" material="step" amount="64"/>
            <item slot="12" material="stained glass" amount="64" team-color="true"/>
            <item slot="21" material="stained clay" amount="64" team-color="true"/>
            <item slot="30" material="stained clay" amount="64" team-color="true"/>
            <item slot="3" material="stained clay" amount="64" team-color="true"/>
            <!-- <item slot="13" material=" "/> -->
            <item slot="22" material="trap door" amount="16"/>
            <item slot="31" material="ladder" amount="16"/>
            <item slot="4" material="nether fence" amount="64"/>
            <item slot="14" material="piston base" amount="16"/>
            <item slot="23" material="lever" amount="16"/>
            <item slot="32" material="stone plate" amount="16"/>
            <item slot="5"  material="stone button" amount="16"/>
            <item slot="15" material="water bucket"/>
            <item slot="24" material="water bucket"/>
            <item slot="33" material="water bucket"/>
            <item slot="6" material="water bucket"/>
            <item slot="16" material="diode" amount="16"/>
            <item slot="25" material="redstone torch on" amount="16"/>
            <item slot="34" material="redstone block" amount="16"/>
            <item slot="7" material="redstone" amount="64"/>
            <item slot="17" material="tnt" amount="64"/>
            <item slot="26" material="tnt" amount="64"/>
            <item slot="35" material="tnt" amount="64"/>
            <item slot="8" material="tnt" amount="64"/>
            <helmet material="leather helmet" team-color="true" unbreakable="true" enchantment="water worker:3"/>
            <chestplate material="leather chestplate" team-color="true" unbreakable="true"/>
            <leggings material="leather leggings" team-color="true" unbreakable="true"/>
            <boots material="leather boots" team-color="true" unbreakable="true"/>
            <effect amplifier="10" duration="1s">resistance</effect>
            <action>
                <set var="current_kit_requires_survival" value="1"/>
            </action>
        </kit>
        <kit id="kit-1" parents="kit-0"/> <!-- itty-bitty -->
        <kit id="kit-2" parents="kit-0"/> <!-- wide -->
        <kit id="kit-3" parents="kit-0"/> <!-- diagonal -->
        <kit id="kit-4" parents="kit-0"/> <!-- cubes -->
        <kit id="kit-5" parents="kit-0"/> <!-- ships -->
        <kit id="kit-6" parents="kit-0"/> <!-- levels -->
        <kit id="kit-7" parents="kit-0"/> <!-- descent -->
        <kit id="kit-8" parents="kit-0"/> <!-- submarine -->
        <kit id="kit-9" parents="kit-0"/> <!-- war wars -->
        <kit id="kit-10" parents="kit-0"/> <!-- fortress -->
        <kit id="kit-11" parents="kit-0"/> <!-- balloon -->
    </if>
    <if variant="cacti">
        <kit id="kit-0">
            <item slot="0" material="cactus" amount="16"/>
            <item slot="1" material="fishing rod" unbreakable="true"/>
            <effect amplifier="2">slow digging</effect>
            <effect amplifier="20">weakness</effect>
            <health>1</health>
            <max-health>1</max-health>
            <knockback-reduction>0.5</knockback-reduction>
            <action>
                <set var="current_kit_requires_survival" value="1"/>
                <set var="current_kill_reward" value="1"/>
            </action>
        </kit>
        <kit id="kit-1" parents="kit-0"> <!-- fast digging -->
            <effect>haste</effect>
            <effect amplifier="99" duration="0">slow digging</effect>
        </kit>
        <kit id="kit-2" parents="kit-0"> <!-- double knockback -->
            <knockback-reduction>0.15</knockback-reduction>
        </kit>
        <kit id="kit-3" parents="kit-0"> <!-- ghost squadron -->
            <item slot="2" material="exp bottle" amount="3"/>
            <effect>invisibility</effect>
        </kit>
        <kit id="kit-4"> <!-- sumo -->
            <helmet material="leather helmet" team-color="true" unbreakable="true" locked="true"/>
            <health>20</health>
            <max-health>20</max-health>
            <knockback-reduction>0.15</knockback-reduction>
            <effect amplifier="10">resistance</effect>
        </kit>
        <kit id="kit-5" parents="kit-0" force="true"> <!-- cacti toss -->
            <item slot="0" material="cactus" amount="16" name="`rThrowable Cactus" projectile="cacti-gun"/>
            <action>
                <set var="current_kill_reward" value="2"/>
            </action>
        </kit>
    </if>
</kits>
<consumables>
    <consumable id="uhc-gapple" action="uhc-gapple-eat" on="eat" override="false"/>
    <consumable id="soup" action="soup-eat" on="click" override="true" consume="true"/>
    <consumable id="spectator-mode" action="enable-spectator-mode" on="click" consume="false"/>
</consumables>
<projectiles>
    <projectile id="egg-gun" name="Egg Gun" projectile="Egg" velocity="3.5" damage="3" throwable="false" cooldown="0s"/>
    <projectile id="tnt-gun" name="TNT Gun" projectile="TNTPrimed" velocity="2" damage="15" throwable="false" cooldown="3s"/>
    <projectile id="cacti-gun" name="cactus" projectile="FallingBlock" material="cactus" velocity="0.75" damage="0" throwable="true" cooldown="0s"/>
</projectiles>
<modifybowprojectile pickup-filter="never"/>
<unless variant="cannon">
    <tnt>
        <instantignite>true</instantignite>
        <if variant="default, spleef">
            <fuse>1.25s</fuse>
            <power>3</power>
        </if>
        <if variant="cacti">
            <fuse>2s</fuse>
            <power>2</power>
        </if>
    </tnt>
</unless>
<hunger>
    <depletion>off</depletion>
</hunger>
<timelock>on</timelock>
<kill-rewards>
    <if variant="default">
        <kill-reward filter="current_kill_reward=1">
            <item material="golden apple"/>
            <item material="arrow" amount="8"/>
        </kill-reward>
        <kill-reward filter="current_kill_reward=2">
            <item material="golden apple"/>
        </kill-reward>
        <kill-reward filter="current_kill_reward=3">
            <item material="golden apple"/>
            <item material="arrow" amount="12"/>
        </kill-reward>
        <kill-reward filter="current_kill_reward=4">
            <item material="potion" damage="16421">
                <potion amplifier="2">heal</potion>
            </item>
            <item material="potion" damage="16421">
                <potion amplifier="2">heal</potion>
            </item>
            <item material="arrow" amount="6"/>
        </kill-reward>
        <kill-reward filter="current_kill_reward=5">
            <item material="golden apple"/>
            <item material="arrow" amount="4"/>
        </kill-reward>
        <kill-reward filter="current_kill_reward=6">
            <item material="tnt" amount="2" show-can-place-on="false">
                <can-place-on>
                    <all-blocks/>
                </can-place-on>
            </item>
            <item material="snow ball" amount="12" name="`rGrenade" grenade="true" grenade-power="1.2"/>
            <item material="potion" damage="8229"/>
        </kill-reward>
    </if>
    <if variant="spleef">
        <kill-reward filter="current_kill_reward=1">
            <item material="snow ball" amount="16"/>
        </kill-reward>
        <kill-reward filter="current_kill_reward=2">
            <item material="egg" amount="6" name="`rGrenade" grenade="true" grenade-power="0.5"/>
        </kill-reward>
        <kill-reward filter="current_kill_reward=3">
            <item material="monster egg" damage="50" amount="6" show-can-place-on="false">
                <can-place-on>
                    <all-blocks/>
                </can-place-on>
            </item>
        </kill-reward>
        <kill-reward filter="current_kill_reward=4">
            <item material="tnt" amount="3" show-can-place-on="false">
                <can-place-on>
                    <all-blocks/>
                </can-place-on>
            </item>
        </kill-reward>
    </if>
    <if variant="cacti">
        <kill-reward filter="current_kill_reward=1">
            <item material="cactus" amount="4"/>
            <item material="tnt"/>
        </kill-reward>
        <kill-reward filter="current_kill_reward=2">
            <item material="cactus" amount="4" name="`rThrowable Cactus" projectile="cacti-gun"/>
            <item material="tnt"/>
        </kill-reward>
    </if>
</kill-rewards>
<if variant="cacti">
    <block-drops>
        <rule>
            <filter>
                <all>
                    <material>cactus</material>
                    <variable var="current_kit">5</variable>
                </all>
            </filter>
            <drops>
                <item material="cactus" name="`rThrowable Cactus" projectile="cacti-gun"/>
            </drops>
        </rule>
    </block-drops>
</if>
<damage>
    <deny>
        <any>
            <not>
                <region id="all-arenas"/>
            </not>
            <attacker>
                <all>
                    <filter id="not-playing"/>
                    <cause>melee</cause>
                </all>
            </attacker>
            <if variant="spleef, cacti">
                <all>
                    <cause>melee</cause>
                    <if variant="cacti">
                        <not>
                            <variable var="current_kit">4</variable> <!-- sumo -->
                        </not>
                    </if>
                </all>
            </if>
            <if variant="cannon">
                <cause>fall</cause>
            </if>
        </any>
    </deny>
</damage>
<disabledamage>
    <if variant="default, spleef">
        <damage ally="true" self="true" enemy="false" other="false">block explosion</damage>
    </if>
    <if variant="cannon">
        <damage ally="false" self="false" enemy="false" other="false">block explosion</damage>
    </if>
    <if variant="cacti">
        <damage ally="true" self="true" enemy="true" other="true">block explosion</damage>
    </if>
</disabledamage>
<filters>
    <deny id="deny-not-playing">
        <not id="not-playing">
            <variable id="is-playing" var="playing">1</variable>
        </not>
    </deny>
    <material id="allow-tnt">tnt</material>
    <material id="only-barrier">barrier</material>
    <any id="visual-blocks">
        <material>wool:0</material>
        <material>stained clay:0</material>
    </any>
    <any id="clearable-entities">
        <entity>dropped item</entity>
        <entity>arrow</entity>
        <entity>creeper</entity>
    </any>
    <if variant="default">
        <all id="breakable-blocks">
            <never/>
        </all>
    </if>
    <if variant="spleef">
        <all id="breakable-blocks">
            <region id="all-arenas"/>
            <material>snow block</material>
        </all>
    </if>
    <if variant="cannon">
        <any id="arena-wall-material">
            <material>stained glass:7</material>
            <material>stained glass:8</material>
        </any>
        <any id="bridge-material">
            <material>stained glass:0</material>
            <material>stained glass:5</material>
        </any>
        <players id="player-inside-round-1-arena-1-overtime-capture" min="1" filter="all(round-1-arena-1-teams, round-1-overtime-capture-area, overtime_level=3)"/>
        <players id="player-inside-round-1-arena-2-overtime-capture" min="1" filter="all(round-1-arena-2-teams, round-1-overtime-capture-area, overtime_level=3)"/>
        <players id="player-inside-round-1-arena-3-overtime-capture" min="1" filter="all(round-1-arena-3-teams, round-1-overtime-capture-area, overtime_level=3)"/>
        <players id="player-inside-round-1-arena-4-overtime-capture" min="1" filter="all(round-1-arena-4-teams, round-1-overtime-capture-area, overtime_level=3)"/>
        <players id="player-inside-round-2-arena-1-overtime-capture" min="1" filter="all(round-2-arena-1-teams, round-2-overtime-capture-area, overtime_level=3)"/>
        <players id="player-inside-round-2-arena-2-overtime-capture" min="1" filter="all(round-2-arena-2-teams, round-2-overtime-capture-area, overtime_level=3)"/>
        <players id="player-inside-round-2-arena-3-overtime-capture" min="1" filter="all(round-2-arena-3-teams, round-2-overtime-capture-area, overtime_level=3)"/>
        <players id="player-inside-round-2-arena-4-overtime-capture" min="1" filter="all(round-2-arena-4-teams, round-2-overtime-capture-area, overtime_level=3)"/>
        <players id="player-inside-round-3-arena-1-overtime-capture" min="1" filter="all(round-3-arena-1-teams, round-3-overtime-capture-area, overtime_level=3)"/>
        <players id="player-inside-round-3-arena-2-overtime-capture" min="1" filter="all(round-3-arena-2-teams, round-3-overtime-capture-area, overtime_level=3)"/>
        <players id="player-inside-round-3-arena-3-overtime-capture" min="1" filter="all(round-3-arena-3-teams, round-3-overtime-capture-area, overtime_level=3)"/>
        <players id="player-inside-round-3-arena-4-overtime-capture" min="1" filter="all(round-3-arena-4-teams, round-3-overtime-capture-area, overtime_level=3)"/>
    </if>
    <if variant="cacti">
        <any id="allowed-interactions">
            <all>
                <region id="all-arenas"/>
                <any>
                    <cause>explosion</cause>
                    <cause>player</cause>
                </any>
                <any>
                    <material>cactus</material>
                    <material>tnt</material>
                </any>
            </all>
            <all>
                <cause>world</cause>
                <not>
                    <cause>explosion</cause>
                </not>
                <any>
                    <material>log 2</material>
                    <material>sand</material>
                    <material>double step</material>
                    <material>wood step</material>
                    <material>cactus</material>
                </any>
            </all>
        </any>
        <material id="sand">sand</material>
        <any id="support-blocks">
            <material>log 2</material>
            <material>wood step</material>
        </any>
    </if>
    <after id="allow-round-1-completion" duration="1s">
        <after id="round-1-begin" duration="${round-begin-after-seconds}s" message="Round 1 begins in {0}">
            <time id="round-1-starting">18s</time>
        </after>
    </after>
    <after id="allow-round-2-completion" duration="1s">
        <after id="round-2-begin" duration="${round-begin-after-seconds}s" message="Round 2 begins in {0}">
            <after id="round-2-starting" duration="2s">
                <all id="round-1-finished">
                    <filter id="round-1-arena-1-finished"/>
                    <filter id="round-1-arena-2-finished"/>
                    <filter id="round-1-arena-3-finished"/>
                    <filter id="round-1-arena-4-finished"/>
                </all>
            </after>
        </after>
    </after>
    <after id="allow-round-3-completion" duration="1s">
        <after id="round-3-begin" duration="${round-begin-after-seconds}s" message="Round 3 begins in {0}">
            <after id="round-3-starting" duration="2s">
                <all id="round-2-finished">
                    <filter id="round-2-arena-1-finished"/>
                    <filter id="round-2-arena-2-finished"/>
                    <filter id="round-2-arena-3-finished"/>
                    <filter id="round-2-arena-4-finished"/>
                </all>
            </after>
        </after>
    </after>
    <all id="round-3-finished">
        <filter id="round-3-arena-1-finished"/>
        <filter id="round-3-arena-2-finished"/>
        <filter id="round-3-arena-3-finished"/>
        <filter id="round-3-arena-4-finished"/>
    </all>
    <unless variant="cannon">
        <all id="round-1-teleport">
            <filter id="all(round-1-begin, not(round-1-finished))"/>
        </all>
        <all id="round-2-teleport">
            <filter id="all(round-2-begin, not(round-2-finished))"/>
        </all>
        <all id="round-3-teleport">
            <filter id="all(round-3-begin, not(round-3-finished))"/>
        </all>
    </unless>
    <if variant="cannon">
        <all id="round-1-teleport">
            <after id="round-1-kit-rearranging-period" duration="3s" filter="all(round-1-starting, not(round-1-finished))"/>
        </all>
        <all id="round-2-teleport">
            <after id="round-2-kit-rearranging-period" duration="3s" filter="all(round-2-starting, not(round-2-finished))"/>
        </all>
        <all id="round-3-teleport">
            <after id="round-3-kit-rearranging-period" duration="3s" filter="all(round-3-starting, not(round-3-finished))"/>
        </all>
    </if>
    <any id="between-rounds">
        <all>
            <variable id="round-1" var="current_round">1</variable>
            <filter id="round-1-finished"/>
        </all>
        <all>
            <variable id="round-2" var="current_round">2</variable>
            <filter id="round-2-finished"/>
        </all>
        <all>
            <variable id="round-3" var="current_round">3</variable>
            <filter id="round-3-finished"/>
        </all>
    </any>
    <any id="countdown-start">
        <all>
            <after duration="${round-begin-countdown-after-seconds}s" filter="round-1-starting"/>
            <not>
                <filter id="round-1-finished"/>
            </not>
        </all>
        <all>
            <after duration="${round-begin-countdown-after-seconds}s" filter="round-2-starting"/>
            <not>
                <filter id="round-2-finished"/>
            </not>
        </all>
        <all>
            <after duration="${round-begin-countdown-after-seconds}s" filter="round-3-starting"/>
            <not>
                <filter id="round-3-finished"/>
            </not>
        </all>
    </any>
    <all id="only-team-1-0-wins">
        <team id="only-team-1">team-1</team>
        <score id="team-1-0-wins" team="team-1">0</score>
    </all>
    <all id="only-team-1-1-wins">
        <filter id="only-team-1"/>
        <score id="team-1-1-wins" team="team-1">1</score>
    </all>
    <all id="only-team-1-2-wins">
        <filter id="only-team-1"/>
        <score id="team-1-2-wins" team="team-1">2</score>
    </all>
    <all id="only-team-2-0-wins">
        <team id="only-team-2">team-2</team>
        <score id="team-2-0-wins" team="team-2">0</score>
    </all>
    <all id="only-team-2-1-wins">
        <filter id="only-team-2"/>
        <score id="team-2-1-wins" team="team-2">1</score>
    </all>
    <all id="only-team-2-2-wins">
        <filter id="only-team-2"/>
        <score id="team-2-2-wins" team="team-2">2</score>
    </all>
    <all id="only-team-3-0-wins">
        <team id="only-team-3">team-3</team>
        <score id="team-3-0-wins" team="team-3">0</score>
    </all>
    <all id="only-team-3-1-wins">
        <filter id="only-team-3"/>
        <score id="team-3-1-wins" team="team-3">1</score>
    </all>
    <all id="only-team-3-2-wins">
        <filter id="only-team-3"/>
        <score id="team-3-2-wins" team="team-3">2</score>
    </all>
    <all id="only-team-4-0-wins">
        <team id="only-team-4">team-4</team>
        <score id="team-4-0-wins" team="team-4">0</score>
    </all>
    <all id="only-team-4-1-wins">
        <filter id="only-team-4"/>
        <score id="team-4-1-wins" team="team-4">1</score>
    </all>
    <all id="only-team-4-2-wins">
        <filter id="only-team-4"/>
        <score id="team-4-2-wins" team="team-4">2</score>
    </all>
    <all id="only-team-5-0-wins">
        <team id="only-team-5">team-5</team>
        <score id="team-5-0-wins" team="team-5">0</score>
    </all>
    <all id="only-team-5-1-wins">
        <filter id="only-team-5"/>
        <score id="team-5-1-wins" team="team-5">1</score>
    </all>
    <all id="only-team-5-2-wins">
        <filter id="only-team-5"/>
        <score id="team-5-2-wins" team="team-5">2</score>
    </all>
    <all id="only-team-6-0-wins">
        <team id="only-team-6">team-6</team>
        <score id="team-6-0-wins" team="team-6">0</score>
    </all>
    <all id="only-team-6-1-wins">
        <filter id="only-team-6"/>
        <score id="team-6-1-wins" team="team-6">1</score>
    </all>
    <all id="only-team-6-2-wins">
        <filter id="only-team-6"/>
        <score id="team-6-2-wins" team="team-6">2</score>
    </all>
    <all id="only-team-7-0-wins">
        <team id="only-team-7">team-7</team>
        <score id="team-7-0-wins" team="team-7">0</score>
    </all>
    <all id="only-team-7-1-wins">
        <filter id="only-team-7"/>
        <score id="team-7-1-wins" team="team-7">1</score>
    </all>
    <all id="only-team-7-2-wins">
        <filter id="only-team-7"/>
        <score id="team-7-2-wins" team="team-7">2</score>
    </all>
    <all id="only-team-8-0-wins">
        <team id="only-team-8">team-8</team>
        <score id="team-8-0-wins" team="team-8">0</score>
    </all>
    <all id="only-team-8-1-wins">
        <filter id="only-team-8"/>
        <score id="team-8-1-wins" team="team-8">1</score>
    </all>
    <all id="only-team-8-2-wins">
        <filter id="only-team-8"/>
        <score id="team-8-2-wins" team="team-8">2</score>
    </all>
    <completed id="round-1-arena-1-finished">round-1-arena-1-decider</completed>
    <completed id="round-1-arena-2-finished">round-1-arena-2-decider</completed>
    <completed id="round-1-arena-3-finished">round-1-arena-3-decider</completed>
    <completed id="round-1-arena-4-finished">round-1-arena-4-decider</completed>
    <completed id="round-2-arena-1-finished">round-2-arena-1-decider</completed>
    <completed id="round-2-arena-2-finished">round-2-arena-2-decider</completed>
    <completed id="round-2-arena-3-finished">round-2-arena-3-decider</completed>
    <completed id="round-2-arena-4-finished">round-2-arena-4-decider</completed>
    <completed id="round-3-arena-1-finished">round-3-arena-1-decider</completed>
    <completed id="round-3-arena-2-finished">round-3-arena-2-decider</completed>
    <completed id="round-3-arena-3-finished">round-3-arena-3-decider</completed>
    <completed id="round-3-arena-4-finished">round-3-arena-4-decider</completed>
    <after id="award-points" duration="2s">
        <any>
            <all>
                <all>
                    <filter id="round-1"/>
                    <filter id="round-1-finished"/>
                </all>
                <any id="round-1-winner">
                    <captured id="round-1-arena-1-winner">round-1-arena-1-decider</captured>
                    <captured id="round-1-arena-2-winner">round-1-arena-2-decider</captured>
                    <captured id="round-1-arena-3-winner">round-1-arena-3-decider</captured>
                    <captured id="round-1-arena-4-winner">round-1-arena-4-decider</captured>
                </any>
            </all>
            <all>
                <all>
                    <filter id="round-2"/>
                    <filter id="round-2-finished"/>
                </all>
                <any id="round-2-winner">
                    <captured id="round-2-arena-1-winner">round-2-arena-1-decider</captured>
                    <captured id="round-2-arena-2-winner">round-2-arena-2-decider</captured>
                    <captured id="round-2-arena-3-winner">round-2-arena-3-decider</captured>
                    <captured id="round-2-arena-4-winner">round-2-arena-4-decider</captured>
                </any>
            </all>
            <all>
                <all>
                    <filter id="round-3"/>
                    <filter id="round-3-finished"/>
                </all>
                <any>
                    <captured id="round-3-arena-1-winner">round-3-arena-1-decider</captured>
                    <captured id="round-3-arena-2-winner">round-3-arena-2-decider</captured>
                    <captured id="round-3-arena-3-winner">round-3-arena-3-decider</captured>
                    <captured id="round-3-arena-4-winner">round-3-arena-4-decider</captured>
                </any>
            </all>
        </any>
    </after>
    <captured id="round-1-arena-1-team-1-win" team="team-1">round-1-arena-1-decider</captured>
    <captured id="round-2-arena-1-team-1-win" team="team-1">round-2-arena-1-decider</captured>
    <captured id="round-2-arena-3-team-1-win" team="team-1">round-2-arena-3-decider</captured>
    <captured id="round-3-arena-1-team-1-win" team="team-1">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-1-win" team="team-1">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-1-win" team="team-1">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-1-win" team="team-1">round-3-arena-4-decider</captured>
    <captured id="round-1-arena-1-team-2-win" team="team-2">round-1-arena-1-decider</captured>
    <captured id="round-2-arena-1-team-2-win" team="team-2">round-2-arena-1-decider</captured>
    <captured id="round-2-arena-3-team-2-win" team="team-2">round-2-arena-3-decider</captured>
    <captured id="round-3-arena-1-team-2-win" team="team-2">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-2-win" team="team-2">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-2-win" team="team-2">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-2-win" team="team-2">round-3-arena-4-decider</captured>
    <captured id="round-1-arena-2-team-3-win" team="team-3">round-1-arena-2-decider</captured>
    <captured id="round-2-arena-1-team-3-win" team="team-3">round-2-arena-1-decider</captured>
    <captured id="round-2-arena-3-team-3-win" team="team-3">round-2-arena-3-decider</captured>
    <captured id="round-3-arena-1-team-3-win" team="team-3">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-3-win" team="team-3">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-3-win" team="team-3">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-3-win" team="team-3">round-3-arena-4-decider</captured>
    <captured id="round-1-arena-2-team-4-win" team="team-4">round-1-arena-2-decider</captured>
    <captured id="round-2-arena-1-team-4-win" team="team-4">round-2-arena-1-decider</captured>
    <captured id="round-2-arena-3-team-4-win" team="team-4">round-2-arena-3-decider</captured>
    <captured id="round-3-arena-1-team-4-win" team="team-4">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-4-win" team="team-4">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-4-win" team="team-4">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-4-win" team="team-4">round-3-arena-4-decider</captured>
    <captured id="round-1-arena-3-team-5-win" team="team-5">round-1-arena-3-decider</captured>
    <captured id="round-2-arena-2-team-5-win" team="team-5">round-2-arena-2-decider</captured>
    <captured id="round-2-arena-4-team-5-win" team="team-5">round-2-arena-4-decider</captured>
    <captured id="round-3-arena-1-team-5-win" team="team-5">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-5-win" team="team-5">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-5-win" team="team-5">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-5-win" team="team-5">round-3-arena-4-decider</captured>
    <captured id="round-1-arena-3-team-6-win" team="team-6">round-1-arena-3-decider</captured>
    <captured id="round-2-arena-2-team-6-win" team="team-6">round-2-arena-2-decider</captured>
    <captured id="round-2-arena-4-team-6-win" team="team-6">round-2-arena-4-decider</captured>
    <captured id="round-3-arena-1-team-6-win" team="team-6">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-6-win" team="team-6">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-6-win" team="team-6">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-6-win" team="team-6">round-3-arena-4-decider</captured>
    <captured id="round-1-arena-4-team-7-win" team="team-7">round-1-arena-4-decider</captured>
    <captured id="round-2-arena-2-team-7-win" team="team-7">round-2-arena-2-decider</captured>
    <captured id="round-2-arena-4-team-7-win" team="team-7">round-2-arena-4-decider</captured>
    <captured id="round-3-arena-1-team-7-win" team="team-7">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-7-win" team="team-7">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-7-win" team="team-7">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-7-win" team="team-7">round-3-arena-4-decider</captured>
    <captured id="round-1-arena-4-team-8-win" team="team-8">round-1-arena-4-decider</captured>
    <captured id="round-2-arena-2-team-8-win" team="team-8">round-2-arena-2-decider</captured>
    <captured id="round-2-arena-4-team-8-win" team="team-8">round-2-arena-4-decider</captured>
    <captured id="round-3-arena-1-team-8-win" team="team-8">round-3-arena-1-decider</captured>
    <captured id="round-3-arena-2-team-8-win" team="team-8">round-3-arena-2-decider</captured>
    <captured id="round-3-arena-3-team-8-win" team="team-8">round-3-arena-3-decider</captured>
    <captured id="round-3-arena-4-team-8-win" team="team-8">round-3-arena-4-decider</captured>
    <!-- ..................................................... -->
    <!-- :         : Round 1         : Round 2   : Round 3   : -->
    <!-- ..................................................... -->
    <!-- : Arena 1 : Red v Blue      : A1W v A2W : A1W v A3W : -->
    <!-- : Arena 2 : Green v Purple  : A3W v A4W : A2W v A4W : -->
    <!-- : Arena 3 : Yellow v Orange : A1L v A2L : A1L v A3L : -->
    <!-- : Arena 4 : Pink v Cyan     : A3L v A4L : A2L v A4L : -->
    <!-- ..................................................... -->
    <!--
    round 2 match ups
    -->
    <all id="team-1-vs-team-3">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-1-1-wins"/>
                <filter id="team-3-1-wins"/>
            </all>
            <all>
                <filter id="team-1-0-wins"/>
                <filter id="team-3-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-1-vs-team-4">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-1-1-wins"/>
                <filter id="team-4-1-wins"/>
            </all>
            <all>
                <filter id="team-1-0-wins"/>
                <filter id="team-4-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-1-vs-team-5">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-1-2-wins"/>
                <filter id="team-5-2-wins"/>
            </all>
            <all>
                <filter id="team-1-1-wins"/>
                <filter id="team-5-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-1-team-1-win"/>
                        <filter id="round-1-arena-3-team-5-win"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-3-team-1-win"/>
                        <filter id="round-2-arena-4-team-5-win"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-1-0-wins"/>
                <filter id="team-5-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-1-vs-team-6">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-1-2-wins"/>
                <filter id="team-6-2-wins"/>
            </all>
            <all>
                <filter id="team-1-1-wins"/>
                <filter id="team-6-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-1-team-1-win"/>
                        <filter id="round-1-arena-3-team-6-win"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-3-team-1-win"/>
                        <filter id="round-2-arena-4-team-6-win"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-1-0-wins"/>
                <filter id="team-6-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-1-vs-team-7">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-1-2-wins"/>
                <filter id="team-7-2-wins"/>
            </all>
            <all>
                <filter id="team-1-0-wins"/>
                <filter id="team-7-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-1-vs-team-8">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-1-2-wins"/>
                <filter id="team-8-2-wins"/>
            </all>
            <all>
                <filter id="team-1-0-wins"/>
                <filter id="team-8-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-2-vs-team-3">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-2-1-wins"/>
                <filter id="team-3-1-wins"/>
            </all>
            <all>
                <filter id="team-2-0-wins"/>
                <filter id="team-3-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-2-vs-team-4">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-2-1-wins"/>
                <filter id="team-4-1-wins"/>
            </all>
            <all>
                <filter id="team-2-0-wins"/>
                <filter id="team-4-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-2-vs-team-5">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-2-2-wins"/>
                <filter id="team-5-2-wins"/>
            </all>
            <all>
                <filter id="team-2-1-wins"/>
                <filter id="team-5-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-1-team-2-win"/>
                        <filter id="round-1-arena-3-team-5-win"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-3-team-2-win"/>
                        <filter id="round-2-arena-4-team-5-win"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-2-0-wins"/>
                <filter id="team-5-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-2-vs-team-6">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-2-2-wins"/>
                <filter id="team-6-2-wins"/>
            </all>
            <all>
                <filter id="team-2-1-wins"/>
                <filter id="team-6-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-1-team-2-win"/>
                        <filter id="round-1-arena-3-team-6-win"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-3-team-2-win"/>
                        <filter id="round-2-arena-4-team-6-win"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-2-0-wins"/>
                <filter id="team-6-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-2-vs-team-7">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-2-2-wins"/>
                <filter id="team-7-2-wins"/>
            </all>
            <all>
                <filter id="team-2-0-wins"/>
                <filter id="team-7-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-2-vs-team-8">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-2-2-wins"/>
                <filter id="team-8-2-wins"/>
            </all>
            <all>
                <filter id="team-2-0-wins"/>
                <filter id="team-8-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-3-vs-team-5">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-3-2-wins"/>
                <filter id="team-5-2-wins"/>
            </all>
            <all>
                <filter id="team-3-0-wins"/>
                <filter id="team-5-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-3-vs-team-6">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-3-2-wins"/>
                <filter id="team-6-2-wins"/>
            </all>
            <all>
                <filter id="team-3-0-wins"/>
                <filter id="team-6-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-3-vs-team-7">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-3-2-wins"/>
                <filter id="team-7-2-wins"/>
            </all>
            <all>
                <filter id="team-3-1-wins"/>
                <filter id="team-7-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-2-team-3-win"/>
                        <filter id="round-1-arena-4-team-7-win"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-3-team-3-win"/>
                        <filter id="round-2-arena-4-team-7-win"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-3-0-wins"/>
                <filter id="team-7-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-3-vs-team-8">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-3-2-wins"/>
                <filter id="team-8-2-wins"/>
            </all>
            <all>
                <filter id="team-3-1-wins"/>
                <filter id="team-8-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-2-team-3-win"/>
                        <filter id="round-1-arena-4-team-8-win"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-3-team-3-win"/>
                        <filter id="round-2-arena-4-team-8-win"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-3-0-wins"/>
                <filter id="team-8-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-4-vs-team-5">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-4-2-wins"/>
                <filter id="team-5-2-wins"/>
            </all>
            <all>
                <filter id="team-4-0-wins"/>
                <filter id="team-5-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-4-vs-team-6">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-4-2-wins"/>
                <filter id="team-6-2-wins"/>
            </all>
            <all>
                <filter id="team-4-0-wins"/>
                <filter id="team-6-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-4-vs-team-7">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-4-2-wins"/>
                <filter id="team-7-2-wins"/>
            </all>
            <all>
                <filter id="team-4-1-wins"/>
                <filter id="team-7-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-2-team-4-win"/>
                        <filter id="round-1-arena-4-team-7-win"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-3-team-4-win"/>
                        <filter id="round-2-arena-4-team-7-win"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-4-0-wins"/>
                <filter id="team-7-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-4-vs-team-8">
        <filter id="round-3"/>
        <any>
            <all>
                <filter id="team-4-2-wins"/>
                <filter id="team-8-2-wins"/>
            </all>
            <all>
                <filter id="team-4-1-wins"/>
                <filter id="team-8-1-wins"/>
                <any>
                    <all>
                        <filter id="round-1-arena-2-team-4-win"/>
                        <filter id="round-1-arena-4-team-8-win"/>
                    </all>
                    <all>
                        <filter id="round-2-arena-1-team-4-win"/>
                        <filter id="round-2-arena-2-team-8-win"/>
                    </all>
                </any>
            </all>
            <all>
                <filter id="team-4-0-wins"/>
                <filter id="team-8-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-5-vs-team-7">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-5-1-wins"/>
                <filter id="team-7-1-wins"/>
            </all>
            <all>
                <filter id="team-5-0-wins"/>
                <filter id="team-7-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-5-vs-team-8">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-5-1-wins"/>
                <filter id="team-8-1-wins"/>
            </all>
            <all>
                <filter id="team-5-0-wins"/>
                <filter id="team-8-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-6-vs-team-7">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-6-1-wins"/>
                <filter id="team-7-1-wins"/>
            </all>
            <all>
                <filter id="team-6-0-wins"/>
                <filter id="team-7-0-wins"/>
            </all>
        </any>
    </all>
    <all id="team-6-vs-team-8">
        <filter id="round-2"/>
        <any>
            <all>
                <filter id="team-6-1-wins"/>
                <filter id="team-8-1-wins"/>
            </all>
            <all>
                <filter id="team-6-0-wins"/>
                <filter id="team-8-0-wins"/>
            </all>
        </any>
    </all>
    <all id="playing-round-1">
        <filter id="any(round-1, round-1-teleport)"/>
        <filter id="is-playing"/>
    </all>
    <all id="playing-round-2">
        <filter id="any(round-2, round-2-teleport)"/>
        <filter id="is-playing"/>
    </all>
    <all id="playing-round-3">
        <filter id="any(round-3, round-3-teleport)"/>
        <filter id="is-playing"/>
    </all>
    <any id="playing-arena-1">
        <filter id="round-1-arena-1-teams"/>
        <filter id="round-2-arena-1-teams"/>
        <filter id="round-3-arena-1-teams"/>
    </any>
    <any id="playing-arena-2">
        <filter id="round-1-arena-2-teams"/>
        <filter id="round-2-arena-2-teams"/>
        <filter id="round-3-arena-2-teams"/>
    </any>
    <any id="playing-arena-3">
        <filter id="round-1-arena-3-teams"/>
        <filter id="round-2-arena-3-teams"/>
        <filter id="round-3-arena-3-teams"/>
    </any>
    <any id="playing-arena-4">
        <filter id="round-1-arena-4-teams"/>
        <filter id="round-2-arena-4-teams"/>
        <filter id="round-3-arena-4-teams"/>
    </any>
    <any id="round-1-arena-1-teams">
        <all id="round-1-arena-1-team-1">
            <filter id="playing-round-1"/>
            <filter id="only-team-1"/>
        </all>
        <all id="round-1-arena-1-team-2">
            <filter id="playing-round-1"/>
            <filter id="only-team-2"/>
        </all>
    </any>
    <any id="round-1-arena-2-teams">
        <all id="round-1-arena-2-team-1">
            <filter id="playing-round-1"/>
            <filter id="only-team-3"/>
        </all>
        <all id="round-1-arena-2-team-2">
            <filter id="playing-round-1"/>
            <filter id="only-team-4"/>
        </all>
    </any>
    <any id="round-1-arena-3-teams">
        <all id="round-1-arena-3-team-1">
            <filter id="playing-round-1"/>
            <filter id="only-team-5"/>
        </all>
        <all id="round-1-arena-3-team-2">
            <filter id="playing-round-1"/>
            <filter id="only-team-6"/>
        </all>
    </any>
    <any id="round-1-arena-4-teams">
        <all id="round-1-arena-4-team-1">
            <filter id="playing-round-1"/>
            <filter id="only-team-7"/>
        </all>
        <all id="round-1-arena-4-team-2">
            <filter id="playing-round-1"/>
            <filter id="only-team-8"/>
        </all>
    </any>
    <any id="round-2-arena-1-teams">
        <all id="round-2-arena-1-team-1">
            <filter id="playing-round-2"/>
            <any>
                <filter id="only-team-1-1-wins"/>
                <filter id="only-team-2-1-wins"/>
            </any>
        </all>
        <all id="round-2-arena-1-team-2">
            <filter id="playing-round-2"/>
            <any>
                <filter id="only-team-3-1-wins"/>
                <filter id="only-team-4-1-wins"/>
            </any>
        </all>
    </any>
    <any id="round-2-arena-2-teams">
        <all id="round-2-arena-2-team-1">
            <filter id="playing-round-2"/>
            <any>
                <filter id="only-team-5-1-wins"/>
                <filter id="only-team-6-1-wins"/>
            </any>
        </all>
        <all id="round-2-arena-2-team-2">
            <filter id="playing-round-2"/>
            <any>
                <filter id="only-team-7-1-wins"/>
                <filter id="only-team-8-1-wins"/>
            </any>
        </all>
    </any>
    <any id="round-2-arena-3-teams">
        <all id="round-2-arena-3-team-1">
            <filter id="playing-round-2"/>
            <any>
                <filter id="only-team-1-0-wins"/>
                <filter id="only-team-2-0-wins"/>
            </any>
        </all>
        <all id="round-2-arena-3-team-2">
            <filter id="playing-round-2"/>
            <any>
                <filter id="only-team-3-0-wins"/>
                <filter id="only-team-4-0-wins"/>
            </any>
        </all>
    </any>
    <any id="round-2-arena-4-teams">
        <all id="round-2-arena-4-team-1">
            <filter id="playing-round-2"/>
            <any>
                <filter id="only-team-5-0-wins"/>
                <filter id="only-team-6-0-wins"/>
            </any>
        </all>
        <all id="round-2-arena-4-team-2">
            <filter id="playing-round-2"/>
            <any>
                <filter id="only-team-7-0-wins"/>
                <filter id="only-team-8-0-wins"/>
            </any>
        </all>
    </any>
    <any id="round-3-arena-1-teams">
        <all id="round-3-arena-1-team-1">
            <filter id="playing-round-3"/>
            <any>
                <filter id="only-team-1-2-wins"/>
                <filter id="only-team-2-2-wins"/>
                <filter id="only-team-3-2-wins"/>
                <filter id="only-team-4-2-wins"/>
            </any>
        </all>
        <all id="round-3-arena-1-team-2">
            <filter id="playing-round-3"/>
            <any>
                <filter id="only-team-5-2-wins"/>
                <filter id="only-team-6-2-wins"/>
                <filter id="only-team-7-2-wins"/>
                <filter id="only-team-8-2-wins"/>
            </any>
        </all>
    </any>
    <any id="round-3-arena-2-teams">
        <all id="round-3-arena-2-team-1">
            <filter id="playing-round-3"/>
            <filter id="round-1-winner"/>
            <any>
                <filter id="only-team-1-1-wins"/>
                <filter id="only-team-2-1-wins"/>
                <filter id="only-team-3-1-wins"/>
                <filter id="only-team-4-1-wins"/>
            </any>
        </all>
        <all id="round-3-arena-2-team-2">
            <filter id="playing-round-3"/>
            <filter id="round-1-winner"/>
            <any>
                <filter id="only-team-5-1-wins"/>
                <filter id="only-team-6-1-wins"/>
                <filter id="only-team-7-1-wins"/>
                <filter id="only-team-8-1-wins"/>
            </any>
        </all>
    </any>
    <any id="round-3-arena-3-teams">
        <all id="round-3-arena-3-team-1">
            <filter id="playing-round-3"/>
            <filter id="round-2-winner"/>
            <any>
                <filter id="only-team-1-1-wins"/>
                <filter id="only-team-2-1-wins"/>
                <filter id="only-team-3-1-wins"/>
                <filter id="only-team-4-1-wins"/>
            </any>
        </all>
        <all id="round-3-arena-3-team-2">
            <filter id="playing-round-3"/>
            <filter id="round-2-winner"/>
            <any>
                <filter id="only-team-5-1-wins"/>
                <filter id="only-team-6-1-wins"/>
                <filter id="only-team-7-1-wins"/>
                <filter id="only-team-8-1-wins"/>
            </any>
        </all>
    </any>
    <any id="round-3-arena-4-teams">
        <all id="round-3-arena-4-team-1">
            <filter id="playing-round-3"/>
            <any>
                <filter id="only-team-1-0-wins"/>
                <filter id="only-team-2-0-wins"/>
                <filter id="only-team-3-0-wins"/>
                <filter id="only-team-4-0-wins"/>
            </any>
        </all>
        <all id="round-3-arena-4-team-2">
            <filter id="playing-round-3"/>
            <any>
                <filter id="only-team-5-0-wins"/>
                <filter id="only-team-6-0-wins"/>
                <filter id="only-team-7-0-wins"/>
                <filter id="only-team-8-0-wins"/>
            </any>
        </all>
    </any>
</filters>
<regions>
    <cylinder id="lobby-spawn" base="205.5,4,31.5" radius="6" height="0.5"/>
    <cuboid id="lobby" min="187,0,8" max="228,25,55"/>
    <if variant="cannon">
        <apply velocity="-1.5,0.8,0">
            <region>
                <cuboid min="222,3,29" max="223,9,34"/>
            </region>
        </apply>
        <cuboid id="fake-platforms" min="180,9,-64" max="13,10,127"/>
    </if>
    <union id="all-arenas">
        <cuboid id="arena-1" min="180,-oo,-64" max="145,${arena-height},127"/>
        <translate id="arena-2" offset="-44,0,0" region="arena-1"/>
        <translate id="arena-3" offset="-44,0,0" region="arena-2"/>
        <translate id="arena-4" offset="-44,0,0" region="arena-3"/>
    </union>
    <intersect id="round-1-arenas">
        <cuboid id="round-1-region" min="0,0,-65" max="188,${arena-height},0"/>
        <region id="all-arenas"/>
    </intersect>
    <translate id="round-2-arenas" offset="0,0,66" region="round-1-arenas"/>
    <translate id="round-3-arenas" offset="0,0,66" region="round-2-arenas"/>
    <union id="all-side-2-platforms">
        <intersect id="round-1-side-2-platforms">
            <cuboid min="180,0,-23" max="13,${arena-height},-5"/>
            <region id="round-1-arenas"/>
        </intersect>
        <translate id="round-2-side-2-platforms" offset="0,0,66" region="round-1-side-2-platforms"/>
        <translate id="round-3-side-2-platforms" offset="0,0,66" region="round-2-side-2-platforms"/>
    </union>
    <union id="all-arena-spawns">
        <if variant="default, spleef">
            <point id="round-1-arena-1-spawn-1">162.5,11,-61.5</point>
            <point id="round-1-arena-1-spawn-2">162.5,11,-7.5</point>
        </if>
        <if variant="cannon">
            <point id="round-1-arena-1-spawn-1">162.5,34,-58.5</point>
            <point id="round-1-arena-1-spawn-2">162.5,34,-10.5</point>
        </if>
        <if variant="cacti">
            <cylinder id="round-1-arena-1-spawn-1" base="162.5,11,-46.5" radius="1.5" height="1"/>
            <cylinder id="round-1-arena-1-spawn-2" base="162.5,11,-22.5" radius="1.5" height="1"/>
        </if>
        <translate id="round-1-arena-2-spawn-1" offset="-44,0,0" region="round-1-arena-1-spawn-1"/>
        <translate id="round-1-arena-2-spawn-2" offset="-44,0,0" region="round-1-arena-1-spawn-2"/>
        <translate id="round-1-arena-3-spawn-1" offset="-44,0,0" region="round-1-arena-2-spawn-1"/>
        <translate id="round-1-arena-3-spawn-2" offset="-44,0,0" region="round-1-arena-2-spawn-2"/>
        <translate id="round-1-arena-4-spawn-1" offset="-44,0,0" region="round-1-arena-3-spawn-1"/>
        <translate id="round-1-arena-4-spawn-2" offset="-44,0,0" region="round-1-arena-3-spawn-2"/>
        <translate id="round-2-arena-1-spawn-1" offset="0,0,66" region="round-1-arena-1-spawn-1"/>
        <translate id="round-2-arena-1-spawn-2" offset="0,0,66" region="round-1-arena-1-spawn-2"/>
        <translate id="round-2-arena-2-spawn-1" offset="0,0,66" region="round-1-arena-2-spawn-1"/>
        <translate id="round-2-arena-2-spawn-2" offset="0,0,66" region="round-1-arena-2-spawn-2"/>
        <translate id="round-2-arena-3-spawn-1" offset="0,0,66" region="round-1-arena-3-spawn-1"/>
        <translate id="round-2-arena-3-spawn-2" offset="0,0,66" region="round-1-arena-3-spawn-2"/>
        <translate id="round-2-arena-4-spawn-1" offset="0,0,66" region="round-1-arena-4-spawn-1"/>
        <translate id="round-2-arena-4-spawn-2" offset="0,0,66" region="round-1-arena-4-spawn-2"/>
        <translate id="round-3-arena-1-spawn-1" offset="0,0,66" region="round-2-arena-1-spawn-1"/>
        <translate id="round-3-arena-1-spawn-2" offset="0,0,66" region="round-2-arena-1-spawn-2"/>
        <translate id="round-3-arena-2-spawn-1" offset="0,0,66" region="round-2-arena-2-spawn-1"/>
        <translate id="round-3-arena-2-spawn-2" offset="0,0,66" region="round-2-arena-2-spawn-2"/>
        <translate id="round-3-arena-3-spawn-1" offset="0,0,66" region="round-2-arena-3-spawn-1"/>
        <translate id="round-3-arena-3-spawn-2" offset="0,0,66" region="round-2-arena-3-spawn-2"/>
        <translate id="round-3-arena-4-spawn-1" offset="0,0,66" region="round-2-arena-4-spawn-1"/>
        <translate id="round-3-arena-4-spawn-2" offset="0,0,66" region="round-2-arena-4-spawn-2"/>
    </union>
    <union id="all-arena-spectator-spawns">
        <unless variant="cacti">
            <point id="round-1-arena-1-spectator">182.5,14,-34.5</point>
        </unless>
        <if variant="cacti">
            <point id="round-1-arena-1-spectator">175,14,-34.5</point>
        </if>
        <translate id="round-1-arena-2-spectator" offset="-44,0,0" region="round-1-arena-1-spectator"/>
        <translate id="round-1-arena-3-spectator" offset="-44,0,0" region="round-1-arena-2-spectator"/>
        <translate id="round-1-arena-4-spectator" offset="-44,0,0" region="round-1-arena-3-spectator"/>
        <translate id="round-2-arena-1-spectator" offset="0,0,66" region="round-1-arena-1-spectator"/>
        <translate id="round-2-arena-2-spectator" offset="0,0,66" region="round-1-arena-2-spectator"/>
        <translate id="round-2-arena-3-spectator" offset="0,0,66" region="round-1-arena-3-spectator"/>
        <translate id="round-2-arena-4-spectator" offset="0,0,66" region="round-1-arena-4-spectator"/>
        <translate id="round-3-arena-1-spectator" offset="0,0,66" region="round-2-arena-1-spectator"/>
        <translate id="round-3-arena-2-spectator" offset="0,0,66" region="round-2-arena-2-spectator"/>
        <translate id="round-3-arena-3-spectator" offset="0,0,66" region="round-2-arena-3-spectator"/>
        <translate id="round-3-arena-4-spectator" offset="0,0,66" region="round-2-arena-4-spectator"/>
        <translate id="round-4-arena-1-spectator" offset="0,0,66" region="round-3-arena-1-spectator"/>
        <translate id="round-4-arena-2-spectator" offset="0,0,66" region="round-3-arena-2-spectator"/>
        <translate id="round-4-arena-3-spectator" offset="0,0,66" region="round-3-arena-3-spectator"/>
        <translate id="round-4-arena-4-spectator" offset="0,0,66" region="round-3-arena-4-spectator"/>
    </union>
    <union id="all-arena-spectator-portals">
        <unless variant="cacti">
            <cuboid id="round-1-arena-1-spectator-portal" min="185,10,-37" max="186,18,-32"/>
        </unless>
        <if variant="cacti">
            <cuboid id="round-1-arena-1-spectator-portal" min="176,10,-37" max="177,18,-32"/>
        </if>
        <translate id="round-1-arena-2-spectator-portal" offset="-44,0,0" region="round-1-arena-1-spectator-portal"/>
        <translate id="round-1-arena-3-spectator-portal" offset="-44,0,0" region="round-1-arena-2-spectator-portal"/>
        <translate id="round-1-arena-4-spectator-portal" offset="-44,0,0" region="round-1-arena-3-spectator-portal"/>
        <translate id="round-2-arena-1-spectator-portal" offset="0,0,66" region="round-1-arena-1-spectator-portal"/>
        <translate id="round-2-arena-2-spectator-portal" offset="0,0,66" region="round-1-arena-2-spectator-portal"/>
        <translate id="round-2-arena-3-spectator-portal" offset="0,0,66" region="round-1-arena-3-spectator-portal"/>
        <translate id="round-2-arena-4-spectator-portal" offset="0,0,66" region="round-1-arena-4-spectator-portal"/>
        <translate id="round-3-arena-1-spectator-portal" offset="0,0,66" region="round-2-arena-1-spectator-portal"/>
        <translate id="round-3-arena-2-spectator-portal" offset="0,0,66" region="round-2-arena-2-spectator-portal"/>
        <translate id="round-3-arena-3-spectator-portal" offset="0,0,66" region="round-2-arena-3-spectator-portal"/>
        <translate id="round-3-arena-4-spectator-portal" offset="0,0,66" region="round-2-arena-4-spectator-portal"/>
        <translate id="round-4-arena-1-spectator-portal" offset="0,0,66" region="round-3-arena-1-spectator-portal"/>
        <translate id="round-4-arena-2-spectator-portal" offset="0,0,66" region="round-3-arena-2-spectator-portal"/>
        <translate id="round-4-arena-3-spectator-portal" offset="0,0,66" region="round-3-arena-3-spectator-portal"/>
        <translate id="round-4-arena-4-spectator-portal" offset="0,0,66" region="round-3-arena-4-spectator-portal"/>
    </union>
    <union id="all-arena-spectator">
        <unless variant="cacti">
            <union id="arena-1-spectator">
                <cuboid id="round-1-arena-1-spectator-area" min="181,13.5,-20" max="185.5,18,-49"/>
                <translate id="round-2-arena-1-spectator-area" offset="0,0,66" region="round-1-arena-1-spectator-area"/>
                <translate id="round-3-arena-1-spectator-area" offset="0,0,66" region="round-2-arena-1-spectator-area"/>
            </union>
            <translate id="arena-2-spectator" offset="-44,0,0" region="arena-1-spectator"/>
            <translate id="arena-3-spectator" offset="-44,0,0" region="arena-2-spectator"/>
            <translate id="arena-4-spectator" offset="-44,0,0" region="arena-3-spectator"/>
        </unless>
        <if variant="cacti">
            <union id="arena-1-spectator">
                <union id="round-1-arena-1-spectator-area">
                    <cuboid min="172,13,-44" max="177,18,-24"/>
                    <complement>
                        <cuboid min="168,13,-50" max="172,18,-19"/>
                        <cuboid min="168,13,-40" max="172,18,-29"/>
                    </complement>
                </union>
                <translate id="round-2-arena-1-spectator-area" offset="0,0,66" region="round-1-arena-1-spectator-area"/>
                <translate id="round-3-arena-1-spectator-area" offset="0,0,66" region="round-2-arena-1-spectator-area"/>
            </union>
            <translate id="arena-2-spectator" offset="-44,0,0" region="arena-1-spectator"/>
            <translate id="arena-3-spectator" offset="-44,0,0" region="arena-2-spectator"/>
            <translate id="arena-4-spectator" offset="-44,0,0" region="arena-3-spectator"/>
        </if>
    </union>
    <apply region="lobby" use="never" block-place="allow-tnt" block-break="never"/>
    <apply region="all-arenas" use="deny-not-playing"/>
    <apply enter="spectator_mode=0">
        <region>
            <below y="0"/>
        </region>
    </apply>
    <if variant="default, spleef">
        <apply block-break="breakable-blocks"/>
    </if>
    <if variant="cacti">
        <apply block="allowed-interactions"/>
        <apply region="all-arena-spectator" leave="any(playing=1, between-rounds)"/>
    </if>
    <if variant="cannon">
        <!-- layout 0 is default -->
        <cuboid id="arena-layout-1" min="144,0,146" size="37,23,61"/>
        <translate id="arena-layout-2" offset="-44,0,0" region="arena-layout-1"/>
        <translate id="arena-layout-3" offset="-44,0,0" region="arena-layout-2"/>
        <translate id="arena-layout-4" offset="-44,0,0" region="arena-layout-3"/>
        <translate id="arena-layout-5" offset="-44,0,0" region="arena-layout-4"/>
        <translate id="arena-layout-6" offset="-44,0,0" region="arena-layout-5"/>
        <translate id="arena-layout-7" offset="-44,0,0" region="arena-layout-6"/>
        <translate id="arena-layout-8" offset="-44,0,0" region="arena-layout-7"/>
        <translate id="arena-layout-9" offset="-44,0,0" region="arena-layout-8"/>
        <translate id="arena-layout-10" offset="-44,0,0" region="arena-layout-9"/>
        <translate id="arena-layout-11" offset="-44,0,0" region="arena-layout-10"/>
        <union id="arena-spawn-boxes">
            <union id="round-1-spawn-boxes">
                <union id="round-1-arena-1-spawn-boxes">
                    <complement id="round-1-arena-1-spawn-1-box">
                        <cuboid min="160,32,-61" size="5,5,5"/>
                        <cuboid min="161,33,-60" size="3,3,3"/>
                    </complement>
                    <mirror origin="162.5,10,-34.5" normal="-1,0,0">
                        <mirror region="round-1-arena-1-spawn-1-box" origin="162.5,10,-34.5" normal="0,0,1"/>
                    </mirror>
                </union>
                <translate id="round-1-arena-2-spawn-boxes" offset="-44,0,0" region="round-1-arena-1-spawn-boxes"/>
                <translate id="round-1-arena-3-spawn-boxes" offset="-44,0,0" region="round-1-arena-2-spawn-boxes"/>
                <translate id="round-1-arena-4-spawn-boxes" offset="-44,0,0" region="round-1-arena-3-spawn-boxes"/>
            </union>
            <translate id="round-2-spawn-boxes" offset="0,0,66" region="round-1-spawn-boxes"/>
            <translate id="round-3-spawn-boxes" offset="0,0,66" region="round-2-spawn-boxes"/>
        </union>
        <union id="arena-bridges"> <!-- 0 -->
            <union id="round-1-bridges">
                <cuboid id="round-1-arena-1-bridge" min="162,9,-50" max="163,10,-19"/>
                <translate id="round-1-arena-2-bridge" offset="-44,0,0" region="round-1-arena-1-bridge"/>
                <translate id="round-1-arena-3-bridge" offset="-44,0,0" region="round-1-arena-2-bridge"/>
                <translate id="round-1-arena-4-bridge" offset="-44,0,0" region="round-1-arena-3-bridge"/>
            </union>
            <translate id="round-2-bridges" offset="0,0,66" region="round-1-bridges"/>
            <translate id="round-3-bridges" offset="0,0,66" region="round-2-bridges"/>
        </union>
        <union id="arena-bridges-wide"> <!-- 1 -->
            <union id="round-1-bridges-wide">
                <cuboid id="round-1-arena-1-bridge-wide" min="160,9,-49" max="165,10,-20"/>
                <translate id="round-1-arena-2-bridge-wide" offset="-44,0,0" region="round-1-arena-1-bridge-wide"/>
                <translate id="round-1-arena-3-bridge-wide" offset="-44,0,0" region="round-1-arena-2-bridge-wide"/>
                <translate id="round-1-arena-4-bridge-wide" offset="-44,0,0" region="round-1-arena-3-bridge-wide"/>
            </union>
            <translate id="round-2-bridges-wide" offset="0,0,66" region="round-1-bridges-wide"/>
            <translate id="round-3-bridges-wide" offset="0,0,66" region="round-2-bridges-wide"/>
        </union>
        <union id="arena-bridges-diagonal"> <!-- 2 -->
            <union id="round-1-bridges-diagonal">
                <union id="round-1-arena-1-bridge-diagonal">
                    <union id="round-1-arena-1-side-1-bridge-diagonal">
                        <cuboid min="165,9,-49" max="164,10,-43"/>
                        <cuboid min="164,9,-44" max="163,10,-37"/>
                        <cuboid min="163,9,-38" max="162,10,-34"/>
                    </union>
                    <mirror origin="162.5,10,-34.5" normal="-1,0,0">
                        <mirror region="round-1-arena-1-side-1-bridge-diagonal" origin="162.5,10,-34.5" normal="0,0,1"/>
                    </mirror>
                </union>
                <translate id="round-1-arena-2-bridge-diagonal" offset="-44,0,0" region="round-1-arena-1-bridge-diagonal"/>
                <translate id="round-1-arena-3-bridge-diagonal" offset="-44,0,0" region="round-1-arena-2-bridge-diagonal"/>
                <translate id="round-1-arena-4-bridge-diagonal" offset="-44,0,0" region="round-1-arena-3-bridge-diagonal"/>
            </union>
            <translate id="round-2-bridges-diagonal" offset="0,0,66" region="round-1-bridges-diagonal"/>
            <translate id="round-3-bridges-diagonal" offset="0,0,66" region="round-2-bridges-diagonal"/>
        </union>
        <union id="arena-bridges-side"> <!-- 3 -->
            <union id="round-1-bridges-side">
                <union id="round-1-arena-1-bridge-side">
                    <cuboid min="172,8,-53" max="173,9,-16"/>
                    <cuboid min="152,8,-53" max="153,9,-16"/>
                </union>
                <translate id="round-1-arena-2-bridge-side" offset="-44,0,0" region="round-1-arena-1-bridge-side"/>
                <translate id="round-1-arena-3-bridge-side" offset="-44,0,0" region="round-1-arena-2-bridge-side"/>
                <translate id="round-1-arena-4-bridge-side" offset="-44,0,0" region="round-1-arena-3-bridge-side"/>
            </union>
            <translate id="round-2-bridges-side" offset="0,0,66" region="round-1-bridges-side"/>
            <translate id="round-3-bridges-side" offset="0,0,66" region="round-2-bridges-side"/>
        </union>
        <union id="arena-bridges-lower"> <!-- 4 -->
            <translate id="round-1-bridges-lower" offset="0,-2,0" region="round-1-bridges"/>
            <translate id="round-2-bridges-lower" offset="0,-2,0" region="round-2-bridges"/>
            <translate id="round-3-bridges-lower" offset="0,-2,0" region="round-3-bridges"/>
        </union>
        <union id="arena-overtime-capture-area">
            <cuboid id="round-1-overtime-capture-area" min="12,0,-36" max="181,${arena-height},-33"/>
            <translate id="round-2-overtime-capture-area" offset="0,0,66" region="round-1-overtime-capture-area"/>
            <translate id="round-3-overtime-capture-area" offset="0,0,66" region="round-2-overtime-capture-area"/>
        </union>
        <union id="buildable-area-middle-identifier">
            <cuboid id="round-1-buildable-area-middle-identifier" min="12,1,-50" max="181,23,-19"/>
            <translate id="round-2-buildable-area-middle-identifier" offset="0,0,66" region="round-1-buildable-area-middle-identifier"/>
            <translate id="round-3-buildable-area-middle-identifier" offset="0,0,66" region="round-2-buildable-area-middle-identifier"/>
        </union>
        <union id="buildable-area"> <!-- 0 -->
            <union id="round-1-buildable-area">
                <union id="round-1-arena-1-buildable-area">
                    <cuboid id="round-1-arena-1-spawn-1-buildable-area" min="156,1,-62" max="169,23,-50"/>
                    <translate id="round-1-arena-1-spawn-2-buildable-area" offset="0,0,43" region="round-1-arena-1-spawn-1-buildable-area"/>
                </union>
                <translate id="round-1-arena-2-buildable-area" offset="-44,0,0" region="round-1-arena-1-buildable-area"/>
                <translate id="round-1-arena-3-buildable-area" offset="-44,0,0" region="round-1-arena-2-buildable-area"/>
                <translate id="round-1-arena-4-buildable-area" offset="-44,0,0" region="round-1-arena-3-buildable-area"/>
            </union>
            <translate id="round-2-buildable-area" offset="0,0,66" region="round-1-buildable-area"/>
            <translate id="round-3-buildable-area" offset="0,0,66" region="round-2-buildable-area"/>
        </union>
        <union id="buildable-area-middle">
            <union id="round-1-buildable-area-middle">
                <cuboid id="round-1-arena-1-buildable-area-middle" min="156,1,-50" max="169,23,-19"/>
                <translate id="round-1-arena-2-buildable-area-middle" offset="-44,0,0" region="round-1-arena-1-buildable-area-middle"/>
                <translate id="round-1-arena-3-buildable-area-middle" offset="-44,0,0" region="round-1-arena-2-buildable-area-middle"/>
                <translate id="round-1-arena-4-buildable-area-middle" offset="-44,0,0" region="round-1-arena-3-buildable-area-middle"/>
            </union>
            <translate id="round-2-buildable-area-middle" offset="0,0,66" region="round-1-buildable-area-middle"/>
            <translate id="round-3-buildable-area-middle" offset="0,0,66" region="round-2-buildable-area-middle"/>
        </union>
        <union id="buildable-area-wide"> <!-- 1 -->
            <union id="round-1-buildable-area-wide">
                <union id="round-1-arena-1-buildable-area-wide">
                    <cuboid id="round-1-arena-1-spawn-1-buildable-area-wide" min="147,1,-62" max="178,23,-49"/>
                    <translate id="round-1-arena-1-spawn-2-buildable-area-wide" offset="0,0,42" region="round-1-arena-1-spawn-1-buildable-area-wide"/>
                </union>
                <translate id="round-1-arena-2-buildable-area-wide" offset="-44,0,0" region="round-1-arena-1-buildable-area-wide"/>
                <translate id="round-1-arena-3-buildable-area-wide" offset="-44,0,0" region="round-1-arena-2-buildable-area-wide"/>
                <translate id="round-1-arena-4-buildable-area-wide" offset="-44,0,0" region="round-1-arena-3-buildable-area-wide"/>
            </union>
            <translate id="round-2-buildable-area-wide" offset="0,0,66" region="round-1-buildable-area-wide"/>
            <translate id="round-3-buildable-area-wide" offset="0,0,66" region="round-2-buildable-area-wide"/>
        </union>
        <union id="buildable-area-wide-middle">
            <union id="round-1-buildable-area-wide-middle">
                <cuboid id="round-1-arena-1-buildable-area-wide-middle" min="147,1,-50" max="178,23,-19"/>
                <translate id="round-1-arena-2-buildable-area-wide-middle" offset="-44,0,0" region="round-1-arena-1-buildable-area-wide-middle"/>
                <translate id="round-1-arena-3-buildable-area-wide-middle" offset="-44,0,0" region="round-1-arena-2-buildable-area-wide-middle"/>
                <translate id="round-1-arena-4-buildable-area-wide-middle" offset="-44,0,0" region="round-1-arena-3-buildable-area-wide-middle"/>
            </union>
            <translate id="round-2-buildable-area-wide-middle" offset="0,0,66" region="round-1-buildable-area-wide-middle"/>
            <translate id="round-3-buildable-area-wide-middle" offset="0,0,66" region="round-2-buildable-area-wide-middle"/>
        </union>
        <apply block="all(not(bridge-material), any(all(current_platform_size=0, any(buildable-area, all(overtime_level=2.., buildable-area-middle))), all(current_platform_size=1, any(buildable-area-wide, all(overtime_level=2.., buildable-area-wide-middle)))))" message="You may not modify that block"/>
    </if>
    <if variant="cacti">
        <union id="snowball-spawners">
            <point id="round-1-arena-1-spawner">162.5,11.5,-34.5</point>
            <translate id="round-1-arena-2-spawner" offset="-44,0,0" region="round-1-arena-1-spawner"/>
            <translate id="round-1-arena-3-spawner" offset="-44,0,0" region="round-1-arena-2-spawner"/>
            <translate id="round-1-arena-4-spawner" offset="-44,0,0" region="round-1-arena-3-spawner"/>
            <translate id="round-2-arena-1-spawner" offset="0,0,66" region="round-1-arena-1-spawner"/>
            <translate id="round-2-arena-2-spawner" offset="0,0,66" region="round-1-arena-2-spawner"/>
            <translate id="round-2-arena-3-spawner" offset="0,0,66" region="round-1-arena-3-spawner"/>
            <translate id="round-2-arena-4-spawner" offset="0,0,66" region="round-1-arena-4-spawner"/>
            <translate id="round-3-arena-1-spawner" offset="0,0,66" region="round-2-arena-1-spawner"/>
            <translate id="round-3-arena-2-spawner" offset="0,0,66" region="round-2-arena-2-spawner"/>
            <translate id="round-3-arena-3-spawner" offset="0,0,66" region="round-2-arena-3-spawner"/>
            <translate id="round-3-arena-4-spawner" offset="0,0,66" region="round-2-arena-4-spawner"/>
        </union>
        <union id="arenas-segment-1">
            <union id="round-1-arenas-segment-1">
                <cylinder id="round-1-arena-1-segment-1" base="162.5,7,-34.5" radius="2" height="4"/>
                <translate id="round-1-arena-2-segment-1" offset="-44,0,0" region="round-1-arena-1-segment-1"/>
                <translate id="round-1-arena-3-segment-1" offset="-44,0,0" region="round-1-arena-2-segment-1"/>
                <translate id="round-1-arena-4-segment-1" offset="-44,0,0" region="round-1-arena-3-segment-1"/>
            </union>
            <translate id="round-2-arenas-segment-1" offset="0,0,66" region="round-1-arenas-segment-1"/>
            <translate id="round-3-arenas-segment-1" offset="0,0,66" region="round-2-arenas-segment-1"/>
        </union>
        <union id="arenas-segment-2">
            <complement id="round-1-arenas-segment-2">
                <union id="round-1-arenas-radius-2">
                    <cylinder id="round-1-arena-1-segment-2" base="162.5,7,-34.5" radius="4" height="4"/>
                    <translate id="round-1-arena-2-segment-2" offset="-44,0,0" region="round-1-arena-1-segment-2"/>
                    <translate id="round-1-arena-3-segment-2" offset="-44,0,0" region="round-1-arena-2-segment-2"/>
                    <translate id="round-1-arena-4-segment-2" offset="-44,0,0" region="round-1-arena-3-segment-2"/>
                </union>
                <region id="round-1-arenas-segment-1"/>
            </complement>
            <translate id="round-2-arenas-segment-2" offset="0,0,66" region="round-1-arenas-segment-2"/>
            <translate id="round-3-arenas-segment-2" offset="0,0,66" region="round-2-arenas-segment-2"/>
        </union>
        <union id="arenas-segment-3">
            <complement id="round-1-arenas-segment-3">
                <union id="round-1-arenas-radius-3">
                    <cylinder id="round-1-arena-1-segment-3" base="162.5,7,-34.5" radius="5" height="4"/>
                    <translate id="round-1-arena-2-segment-3" offset="-44,0,0" region="round-1-arena-1-segment-3"/>
                    <translate id="round-1-arena-3-segment-3" offset="-44,0,0" region="round-1-arena-2-segment-3"/>
                    <translate id="round-1-arena-4-segment-3" offset="-44,0,0" region="round-1-arena-3-segment-3"/>
                </union>
                <region id="round-1-arenas-radius-2"/>
            </complement>
            <translate id="round-2-arenas-segment-3" offset="0,0,66" region="round-1-arenas-segment-3"/>
            <translate id="round-3-arenas-segment-3" offset="0,0,66" region="round-2-arenas-segment-3"/>
        </union>
        <union id="arenas-segment-4">
            <complement id="round-1-arenas-segment-4">
                <union id="round-1-arenas-radius-4">
                    <cylinder id="round-1-arena-1-segment-4" base="162.5,7,-34.5" radius="6" height="4"/>
                    <translate id="round-1-arena-2-segment-4" offset="-44,0,0" region="round-1-arena-1-segment-4"/>
                    <translate id="round-1-arena-3-segment-4" offset="-44,0,0" region="round-1-arena-2-segment-4"/>
                    <translate id="round-1-arena-4-segment-4" offset="-44,0,0" region="round-1-arena-3-segment-4"/>
                </union>
                <region id="round-1-arenas-radius-3"/>
            </complement>
            <translate id="round-2-arenas-segment-4" offset="0,0,66" region="round-1-arenas-segment-4"/>
            <translate id="round-3-arenas-segment-4" offset="0,0,66" region="round-2-arenas-segment-4"/>
        </union>
        <union id="arenas-segment-5">
            <complement id="round-1-arenas-segment-5">
                <union id="round-1-arenas-radius-5">
                    <cylinder id="round-1-arena-1-segment-5" base="162.5,7,-34.5" radius="7" height="4"/>
                    <translate id="round-1-arena-2-segment-5" offset="-44,0,0" region="round-1-arena-1-segment-5"/>
                    <translate id="round-1-arena-3-segment-5" offset="-44,0,0" region="round-1-arena-2-segment-5"/>
                    <translate id="round-1-arena-4-segment-5" offset="-44,0,0" region="round-1-arena-3-segment-5"/>
                </union>
                <region id="round-1-arenas-radius-4"/>
            </complement>
            <translate id="round-2-arenas-segment-5" offset="0,0,66" region="round-1-arenas-segment-5"/>
            <translate id="round-3-arenas-segment-5" offset="0,0,66" region="round-2-arenas-segment-5"/>
        </union>
        <union id="arenas-segment-6">
            <complement id="round-1-arenas-segment-6">
                <union id="round-1-arenas-radius-6">
                    <cylinder id="round-1-arena-1-segment-6" base="162.5,7,-34.5" radius="8" height="4"/>
                    <translate id="round-1-arena-2-segment-6" offset="-44,0,0" region="round-1-arena-1-segment-6"/>
                    <translate id="round-1-arena-3-segment-6" offset="-44,0,0" region="round-1-arena-2-segment-6"/>
                    <translate id="round-1-arena-4-segment-6" offset="-44,0,0" region="round-1-arena-3-segment-6"/>
                </union>
                <region id="round-1-arenas-radius-5"/>
            </complement>
            <translate id="round-2-arenas-segment-6" offset="0,0,66" region="round-1-arenas-segment-6"/>
            <translate id="round-3-arenas-segment-6" offset="0,0,66" region="round-2-arenas-segment-6"/>
        </union>
        <union id="arenas-segment-7">
            <complement id="round-1-arenas-segment-7">
                <union id="round-1-arenas-radius-7">
                    <cylinder id="round-1-arena-1-segment-7" base="162.5,7,-34.5" radius="9" height="4"/>
                    <translate id="round-1-arena-2-segment-7" offset="-44,0,0" region="round-1-arena-1-segment-7"/>
                    <translate id="round-1-arena-3-segment-7" offset="-44,0,0" region="round-1-arena-2-segment-7"/>
                    <translate id="round-1-arena-4-segment-7" offset="-44,0,0" region="round-1-arena-3-segment-7"/>
                </union>
                <region id="round-1-arenas-radius-6"/>
            </complement>
            <translate id="round-2-arenas-segment-7" offset="0,0,66" region="round-1-arenas-segment-7"/>
            <translate id="round-3-arenas-segment-7" offset="0,0,66" region="round-2-arenas-segment-7"/>
        </union>
        <union id="arenas-segment-8">
            <complement id="round-1-arenas-segment-8">
                <union id="round-1-arenas-radius-8">
                    <cylinder id="round-1-arena-1-segment-8" base="162.5,7,-34.5" radius="10" height="4"/>
                    <translate id="round-1-arena-2-segment-8" offset="-44,0,0" region="round-1-arena-1-segment-8"/>
                    <translate id="round-1-arena-3-segment-8" offset="-44,0,0" region="round-1-arena-2-segment-8"/>
                    <translate id="round-1-arena-4-segment-8" offset="-44,0,0" region="round-1-arena-3-segment-8"/>
                </union>
                <region id="round-1-arenas-radius-7"/>
            </complement>
            <translate id="round-2-arenas-segment-8" offset="0,0,66" region="round-1-arenas-segment-8"/>
            <translate id="round-3-arenas-segment-8" offset="0,0,66" region="round-2-arenas-segment-8"/>
        </union>
        <union id="arenas-segment-9">
            <complement id="round-1-arenas-segment-9">
                <union id="round-1-arenas-radius-9">
                    <cylinder id="round-1-arena-1-segment-9" base="162.5,7,-34.5" radius="11" height="4"/>
                    <translate id="round-1-arena-2-segment-9" offset="-44,0,0" region="round-1-arena-1-segment-9"/>
                    <translate id="round-1-arena-3-segment-9" offset="-44,0,0" region="round-1-arena-2-segment-9"/>
                    <translate id="round-1-arena-4-segment-9" offset="-44,0,0" region="round-1-arena-3-segment-9"/>
                </union>
                <region id="round-1-arenas-radius-8"/>
            </complement>
            <translate id="round-2-arenas-segment-9" offset="0,0,66" region="round-1-arenas-segment-9"/>
            <translate id="round-3-arenas-segment-9" offset="0,0,66" region="round-2-arenas-segment-9"/>
        </union>
        <union id="arenas-segment-10">
            <complement id="round-1-arenas-segment-10">
                <union id="round-1-arenas-radius-10">
                    <cylinder id="round-1-arena-1-segment-10" base="162.5,7,-34.5" radius="12" height="4"/>
                    <translate id="round-1-arena-2-segment-10" offset="-44,0,0" region="round-1-arena-1-segment-10"/>
                    <translate id="round-1-arena-3-segment-10" offset="-44,0,0" region="round-1-arena-2-segment-10"/>
                    <translate id="round-1-arena-4-segment-10" offset="-44,0,0" region="round-1-arena-3-segment-10"/>
                </union>
                <region id="round-1-arenas-radius-9"/>
            </complement>
            <translate id="round-2-arenas-segment-10" offset="0,0,66" region="round-1-arenas-segment-10"/>
            <translate id="round-3-arenas-segment-10" offset="0,0,66" region="round-2-arenas-segment-10"/>
        </union>
        <union id="arenas-segment-11">
            <complement id="round-1-arenas-segment-11">
                <union id="round-1-arenas-radius-11">
                    <cylinder id="round-1-arena-1-segment-11" base="162.5,7,-34.5" radius="13" height="4"/>
                    <translate id="round-1-arena-2-segment-11" offset="-44,0,0" region="round-1-arena-1-segment-11"/>
                    <translate id="round-1-arena-3-segment-11" offset="-44,0,0" region="round-1-arena-2-segment-11"/>
                    <translate id="round-1-arena-4-segment-11" offset="-44,0,0" region="round-1-arena-3-segment-11"/>
                </union>
                <region id="round-1-arenas-radius-10"/>
            </complement>
            <translate id="round-2-arenas-segment-11" offset="0,0,66" region="round-1-arenas-segment-11"/>
            <translate id="round-3-arenas-segment-11" offset="0,0,66" region="round-2-arenas-segment-11"/>
        </union>
        <union id="arenas-segment-12">
            <complement id="round-1-arenas-segment-12">
                <union id="round-1-arenas-radius-12">
                    <cylinder id="round-1-arena-1-segment-12" base="162.5,7,-34.5" radius="14" height="4"/>
                    <translate id="round-1-arena-2-segment-12" offset="-44,0,0" region="round-1-arena-1-segment-12"/>
                    <translate id="round-1-arena-3-segment-12" offset="-44,0,0" region="round-1-arena-2-segment-12"/>
                    <translate id="round-1-arena-4-segment-12" offset="-44,0,0" region="round-1-arena-3-segment-12"/>
                </union>
                <region id="round-1-arenas-radius-11"/>
            </complement>
            <translate id="round-2-arenas-segment-12" offset="0,0,66" region="round-1-arenas-segment-12"/>
            <translate id="round-3-arenas-segment-12" offset="0,0,66" region="round-2-arenas-segment-12"/>
        </union>
        <union id="arenas-segment-13">
            <complement id="round-1-arenas-segment-13">
                <union id="round-1-arenas-radius-13">
                    <cylinder id="round-1-arena-1-segment-13" base="162.5,7,-34.5" radius="15" height="4"/>
                    <translate id="round-1-arena-2-segment-13" offset="-44,0,0" region="round-1-arena-1-segment-13"/>
                    <translate id="round-1-arena-3-segment-13" offset="-44,0,0" region="round-1-arena-2-segment-13"/>
                    <translate id="round-1-arena-4-segment-13" offset="-44,0,0" region="round-1-arena-3-segment-13"/>
                </union>
                <region id="round-1-arenas-radius-12"/>
            </complement>
            <translate id="round-2-arenas-segment-13" offset="0,0,66" region="round-1-arenas-segment-13"/>
            <translate id="round-3-arenas-segment-13" offset="0,0,66" region="round-2-arenas-segment-13"/>
        </union>
    </if>
    <if variant="cacti">
        <union id="arena-team-color-objects">
            <cuboid id="round-1-arena-1-spawn-1-color-objects" min="159,7,-53" max="166,25,-42"/>
            <translate id="round-1-arena-1-spawn-2-color-objects" offset="0,0,26" region="round-1-arena-1-spawn-1-color-objects"/>
            <translate id="round-1-arena-2-spawn-1-color-objects" offset="-44,0,0" region="round-1-arena-1-spawn-1-color-objects"/>
            <translate id="round-1-arena-2-spawn-2-color-objects" offset="-44,0,0" region="round-1-arena-1-spawn-2-color-objects"/>
            <translate id="round-1-arena-3-spawn-1-color-objects" offset="-44,0,0" region="round-1-arena-2-spawn-1-color-objects"/>
            <translate id="round-1-arena-3-spawn-2-color-objects" offset="-44,0,0" region="round-1-arena-2-spawn-2-color-objects"/>
            <translate id="round-1-arena-4-spawn-1-color-objects" offset="-44,0,0" region="round-1-arena-3-spawn-1-color-objects"/>
            <translate id="round-1-arena-4-spawn-2-color-objects" offset="-44,0,0" region="round-1-arena-3-spawn-2-color-objects"/>
            <translate id="round-2-arena-1-spawn-1-color-objects" offset="0,0,66" region="round-1-arena-1-spawn-1-color-objects"/>
            <translate id="round-2-arena-1-spawn-2-color-objects" offset="0,0,66" region="round-1-arena-1-spawn-2-color-objects"/>
            <translate id="round-2-arena-2-spawn-1-color-objects" offset="0,0,66" region="round-1-arena-2-spawn-1-color-objects"/>
            <translate id="round-2-arena-2-spawn-2-color-objects" offset="0,0,66" region="round-1-arena-2-spawn-2-color-objects"/>
            <translate id="round-2-arena-3-spawn-1-color-objects" offset="0,0,66" region="round-1-arena-3-spawn-1-color-objects"/>
            <translate id="round-2-arena-3-spawn-2-color-objects" offset="0,0,66" region="round-1-arena-3-spawn-2-color-objects"/>
            <translate id="round-2-arena-4-spawn-1-color-objects" offset="0,0,66" region="round-1-arena-4-spawn-1-color-objects"/>
            <translate id="round-2-arena-4-spawn-2-color-objects" offset="0,0,66" region="round-1-arena-4-spawn-2-color-objects"/>
            <translate id="round-3-arena-1-spawn-1-color-objects" offset="0,0,66" region="round-2-arena-1-spawn-1-color-objects"/>
            <translate id="round-3-arena-1-spawn-2-color-objects" offset="0,0,66" region="round-2-arena-1-spawn-1-color-objects"/>
            <translate id="round-3-arena-2-spawn-1-color-objects" offset="0,0,66" region="round-2-arena-2-spawn-1-color-objects"/>
            <translate id="round-3-arena-2-spawn-2-color-objects" offset="0,0,66" region="round-2-arena-2-spawn-2-color-objects"/>
            <translate id="round-3-arena-3-spawn-1-color-objects" offset="0,0,66" region="round-2-arena-3-spawn-1-color-objects"/>
            <translate id="round-3-arena-3-spawn-2-color-objects" offset="0,0,66" region="round-2-arena-3-spawn-2-color-objects"/>
            <translate id="round-3-arena-4-spawn-1-color-objects" offset="0,0,66" region="round-2-arena-4-spawn-1-color-objects"/>
            <translate id="round-3-arena-4-spawn-2-color-objects" offset="0,0,66" region="round-2-arena-4-spawn-2-color-objects"/>
        </union>
    </if>
</regions>
<variables scope="match" default="0">
    <score id="score"/>
    <array id="kit" size="${kit-count}"/>
    <variable id="temp"/>
    <variable id="index"/>
    <variable id="min_index"/>
    <variable id="round_1_kit"/>
    <variable id="round_2_kit"/>
    <variable id="round_3_kit"/>
    <variable id="announce_kit" default="1"/>
    <variable id="overtime_level"/>
    <variable id="current_round"/>
    <variable id="current_kit"/>
    <variable id="current_kit_requires_survival" scope="player"/>
    <variable id="current_kill_reward" scope="player"/>
    <variable id="playing" scope="player"/>
    <variable id="spectator_mode" scope="player"/>
    <if variant="cannon">
        <variable id="current_platform_size"/>
        <variable id="current_platform_bridge"/>
    </if>
</variables>
<actions>
    <!--
    kit decider
    cheers, Pablo
    -->
    <if variant="default, spleef, cannon, cacti">
        <trigger scope="match" filter="always">
            <action>
                <set var="index" value="0"/>
                <repeat times="${kit-count}">
                    <set var="kit" index="index" value="random()"/>
                    <set var="index" value="index + 1"/>
                </repeat>
                <action id="pick-next-kit">
                    <set var="index" value="0"/>
                    <set var="min_index" value="0"/>
                    <repeat times="${kit-count}">
                        <set var="temp" value="kit[min_index] - kit[index]"/>
                        <action filter="temp=0..">
                            <set var="min_index" value="index"/>
                        </action>
                        <set var="index" value="index + 1"/>
                    </repeat>
                </action>
                <set var="round_1_kit" value="min_index"/>
                <set var="kit" index="min_index" value="999"/>
                <action id="pick-next-kit"/>
                <set var="round_2_kit" value="min_index"/>
                <set var="kit" index="min_index" value="999"/>
                <action id="pick-next-kit"/>
                <set var="round_3_kit" value="min_index"/>
            </action>
        </trigger>
    </if>
    <action id="clear-kit-applicator" scope="match"> <!-- all references to this action come from a match scoped trigger -->
        <switch-scope inner="player" filter="participating">
            <kit id="clear-kit"/>
        </switch-scope>
    </action>
    <action id="uhc-gapple-eat" scope="player">
        <kit force="true">
            <foodlevel>16</foodlevel>
        </kit>
    </action>
    <action id="soup-eat" scope="player">
        <kit force="true">
            <effect duration="0.1s">instant health</effect>
            <foodlevel>16</foodlevel>
        </kit>
    </action>
    <trigger scope="player" filter="all(participating, current_kit_requires_survival=1, all-arenas)" action="survival-kit"/>
    <action id="enable-spectator-mode" scope="player" filter="all(spectator_mode=0, playing=0)">
        <sound key="${entity.experience_orb.pickup}" volume="1" pitch="1.2"/>
        <message text="`7`oFrom `6Tirion`r: Return to the arena observing zone to exit spectator mode"/>
        <set var="spectator_mode" value="1"/>
        <kit force="true">
            <game-mode>spectator</game-mode>
        </kit>
    </action>
    <action id="disable-spectator-mode" scope="player" filter="all(participating, spectator_mode=1)">
        <set var="spectator_mode" value="0"/>
        <kit force="true">
            <game-mode>adventure</game-mode>
        </kit>
    </action>
    <trigger scope="player" filter="all(participating, playing=0, all-arena-spectator)" action="disable-spectator-mode"/>
    <!--
    pre-match introduction announcements
    -->
    <trigger scope="match" filter="match-started">
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: Welcome to The Grand ${tournament-type} Tournament!"/>
            <sound key="${entity.villager.trade}"/>
            <set var="temp" value="(round_1_kit + round_2_kit + round_3_kit) - (max(round_1_kit, round_2_kit, round_3_kit) * 3)"/> <!-- test to see if all 3 rounds use the same kit -->
        </action>
    </trigger>
    <trigger scope="match">
        <filter>
            <time>3s</time>
        </filter>
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: This is a swiss tournament where you will ${tournament-action} with your partners against other teams with the same number of wins."/>
            <sound key="${entity.villager.trade}"/>
        </action>
    </trigger>
    <trigger scope="match">
        <filter>
            <time>6s</time>
        </filter>
        <action filter="not(temp=0)">
            <message text="`7[`6Arena Master`7] `6Tirion`r: Each round will have a different ${kit-type} for you to ${tournament-action} your way to victory with!"/>
            <sound key="${entity.villager.trade}"/>
        </action>
    </trigger>
    <trigger scope="match">
        <filter>
            <time>9s</time>
        </filter>
        <action>
            <action filter="not(temp=0)">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Your first ${kit-type} will be..."/>
                <set var="current_kit" value="round_1_kit"/>
                <action id="clear-kit-applicator"/>
                <action id="kit-applicator"/>
                <sound key="${entity.villager.trade}"/>
            </action>
            <action filter="temp=0">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Each round you will use the same ${kit-type} to ${tournament-action} your way to victory with!"/>
                <sound key="${entity.villager.trade}"/>
            </action>
        </action>
    </trigger>
    <trigger scope="match">
        <filter>
            <time>12s</time>
        </filter>
        <action>
            <action id="clear-dropped-lobby-entities"/>
            <action filter="not(temp=0)">
                <message text="`7[`6Arena Master`7] `6Tirion`r: In the second round your ${kit-type} will be..."/>
                <set var="current_kit" value="round_2_kit"/>
                <action id="clear-kit-applicator"/>
                <action id="kit-applicator"/>
                <sound key="${entity.villager.trade}"/>
            </action>
            <action filter="temp=0">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Your ${kit-type} will be..."/>
                <set var="current_kit" value="round_1_kit"/>
                <action id="clear-kit-applicator"/>
                <action id="kit-applicator"/>
                <sound key="${entity.villager.trade}"/>
                <set var="announce_kit" value="0"/>
            </action>
        </action>
    </trigger>
    <trigger scope="match">
        <filter>
            <time>15s</time>
        </filter>
        <action filter="not(temp=0)">
            <action id="clear-dropped-lobby-entities"/>
            <message text="`7[`6Arena Master`7] `6Tirion`r: And for the grand finale..."/>
            <set var="current_kit" value="round_3_kit"/>
            <action id="clear-kit-applicator"/>
            <action id="kit-applicator"/>
            <set var="announce_kit" value="0"/>
            <sound key="${entity.villager.trade}"/>
        </action>
    </trigger>
    <action id="clear-dropped-lobby-entities" scope="match">
        <kill-entities filter="all(lobby, clearable-entities)"/>
    </action>
    <action id="kit-applicator" scope="match">
        <switch-scope inner="player" filter="all(participating, any(all(round-1-teleport, not(round-1-finished)), all(round-2-teleport, not(round-2-finished)), all(round-3-teleport, not(round-3-finished))))">
            <set var="playing" value="1"/>
        </switch-scope>
        <if constant="kit-count" constant-value="1.." constant-comparison="range">
            <action filter="current_kit=0">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-0-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-0"/>
                </switch-scope>
            </action>
        </if>
        <if constant="kit-count" constant-value="2.." constant-comparison="range">
            <action filter="current_kit=1">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-1-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-1"/>
                </switch-scope>
            </action>
        </if>
        <if constant="kit-count" constant-value="3.." constant-comparison="range">
            <action filter="current_kit=2">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-2-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-2"/>
                </switch-scope>
            </action>
        </if>
        <if constant="kit-count" constant-value="4.." constant-comparison="range">
            <action filter="current_kit=3">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-3-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-3"/>
                </switch-scope>
            </action>
        </if>
        <if constant="kit-count" constant-value="5.." constant-comparison="range">
            <action filter="current_kit=4">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-4-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-4"/>
                </switch-scope>
            </action>
        </if>
        <if constant="kit-count" constant-value="6.." constant-comparison="range">
            <action filter="current_kit=5">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-5-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-5"/>
                </switch-scope>
            </action>
        </if>
        <if constant="kit-count" constant-value="7.." constant-comparison="range">
            <action filter="current_kit=6">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-6-name}`b!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-6"/>
                </switch-scope>
            </action>
        </if>
        <if constant="kit-count" constant-value="8.." constant-comparison="range">
            <action filter="current_kit=7">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-7-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-7"/>
                </switch-scope>
            </action>
        </if>
        <if constant="kit-count" constant-value="9.." constant-comparison="range">
            <action filter="current_kit=8">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-8-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-8"/>
                </switch-scope>
            </action>
        </if>
        <if constant="kit-count" constant-value="10.." constant-comparison="range">
            <action filter="current_kit=9">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-9-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-9"/>
                </switch-scope>
            </action>
        </if>
        <if constant="kit-count" constant-value="11.." constant-comparison="range">
            <action filter="current_kit=10">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-10-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-10"/>
                </switch-scope>
            </action>
        </if>
        <if constant="kit-count" constant-value="12.." constant-comparison="range">
            <action filter="current_kit=11">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-11-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-11"/>
                </switch-scope>
            </action>
        </if>
        <if constant="kit-count" constant-value="13.." constant-comparison="range">
            <action filter="current_kit=12">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-12-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-12"/>
                </switch-scope>
            </action>
        </if>
        <if constant="kit-count" constant-value="14.." constant-comparison="range">
            <action filter="current_kit=13">
                <action filter="announce_kit=1">
                    <message text="`7[`6Arena Master`7] `6Tirion`r: ${kit-13-name}`r!"/>
                </action>
                <switch-scope inner="player" filter="participating">
                    <kit id="kit-13"/>
                </switch-scope>
            </action>
        </if>
        <if variant="cannon">
            <!-- set current platform buildable size preset -->
            <set var="current_platform_size" value="0"/> <!-- default -->
            <action filter="current_kit=2..9">
                <set var="current_platform_size" value="1"/> <!-- wide -->
            </action>
            <!-- set current platform overtime bridge preset -->
            <set var="current_platform_bridge" value="0"/> <!-- default -->
            <action filter="current_kit=2">
                <set var="current_platform_bridge" value="1"/> <!-- wide -->
            </action>
            <action filter="current_kit=3">
                <set var="current_platform_bridge" value="2"/> <!-- diagonal -->
            </action>
            <action filter="any(current_kit=4, current_kit=6)">
                <set var="current_platform_bridge" value="3"/> <!-- sides -->
            </action>
            <action filter="any(current_kit=5, current_kit=9, current_kit=11)">
                <set var="current_platform_bridge" value="4"/> <!-- lower default -->
            </action>
        </if>
    </action>
    <action id="kit-title" scope="match">
        <switch-scope inner="player" filter="participating">
            <if constant="kit-count" constant-value="1.." constant-comparison="range">
                <action filter="current_kit=0">
                    <message actionbar="${kit-0-name}"/>
                </action>
            </if>
            <if constant="kit-count" constant-value="2.." constant-comparison="range">
                <action filter="current_kit=1">
                    <message actionbar="${kit-1-name}"/>
                </action>
            </if>
            <if constant="kit-count" constant-value="3.." constant-comparison="range">
                <action filter="current_kit=2">
                    <message actionbar="${kit-2-name}"/>
                </action>
            </if>
            <if constant="kit-count" constant-value="4.." constant-comparison="range">
                <action filter="current_kit=3">
                    <message actionbar="${kit-3-name}"/>
                </action>
            </if>
            <if constant="kit-count" constant-value="5.." constant-comparison="range">
                <action filter="current_kit=4">
                    <message actionbar="${kit-4-name}"/>
                </action>
            </if>
            <if constant="kit-count" constant-value="6.." constant-comparison="range">
                <action filter="current_kit=5">
                    <message actionbar="${kit-5-name}"/>
                </action>
            </if>
            <if constant="kit-count" constant-value="7.." constant-comparison="range">
                <action filter="current_kit=6">
                    <message actionbar="${kit-6-name}"/>
                </action>
            </if>
            <if constant="kit-count" constant-value="8.." constant-comparison="range">
                <action filter="current_kit=7">
                    <message actionbar="${kit-7-name}"/>
                </action>
            </if>
            <if constant="kit-count" constant-value="9.." constant-comparison="range">
                <action filter="current_kit=8">
                    <message actionbar="${kit-8-name}"/>
                </action>
            </if>
            <if constant="kit-count" constant-value="10.." constant-comparison="range">
                <action filter="current_kit=9">
                    <message actionbar="${kit-9-name}"/>
                </action>
            </if>
            <if constant="kit-count" constant-value="11.." constant-comparison="range">
                <action filter="current_kit=10">
                    <message actionbar="${kit-10-name}"/>
                </action>
            </if>
            <if constant="kit-count" constant-value="12.." constant-comparison="range">
                <action filter="current_kit=11">
                    <message actionbar="${kit-11-name}"/>
                </action>
            </if>
            <if constant="kit-count" constant-value="13.." constant-comparison="range">
                <action filter="current_kit=12">
                    <message actionbar="${kit-12-name}"/>
                </action>
            </if>
            <if constant="kit-count" constant-value="14.." constant-comparison="range">
                <action filter="current_kit=13">
                    <message actionbar="${kit-13-name}"/>
                </action>
            </if>
        </switch-scope>
    </action>
    <trigger scope="player" observers="true">
        <filter>
            <all>
                <cylinder base="${tirion-console-base}" radius="1.5" height="2"/>
                <observing/>
            </all>
        </filter>
        <action filter="not(match-started)">
            <sound key="${entity.experience_orb.pickup}" volume="1" pitch="1.2"/>
            <message>
                <text>{"text": "`7`oFrom `6Tirion`r: Psst, have you heard about the super secret settings? ","extra":[{"text":" [Let me see] ","clickEvent":{"action":"run_command","value":"/action trigger kit-console-intro"},"color":"blue"}],"color": "white"}</text>
            </message>
        </action>
    </trigger>
    <action id="kit-console-intro" scope="player" expose="true" filter="not(match-started)">
        <sound key="${entity.experience_orb.pickup}" volume="1" pitch="1.2"/>
        <message text="`7`oFrom `6Tirion`r: Use the controls below to change the ${kit-type} for each round. `b[1]`r indicates that the ${kit-type} is currently selected for the corresponding `3[Round]`r. Here are the available ${kit-type}s for this tournament:"/>
        <action id="kit-console"/>
    </action>
    <action id="kit-console" scope="player" expose="true" filter="not(match-started)">
        <message>
            <text>{"text": "","extra":[{"text":" [1] ","hoverEvent":{"action":"show_text","contents":{"text":"Round 1","color":"dark_aqua"}},"color":"dark_aqua"},{"text":"[2] ","hoverEvent":{"action":"show_text","contents":{"text":"Round 2","color":"dark_aqua"}},"color":"dark_aqua"},{"text":"[3]","hoverEvent":{"action":"show_text","contents":{"text":"Round 3","color":"dark_aqua"}},"color":"dark_aqua"}],"color": "white"}</text>
        </message>
        <if constant="kit-count" constant-value="1.." constant-comparison="range">
            <message>
                <text>{"text": "","extra":[{"text":" [{r1}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-1-kit-0"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 1 ${kit-type} to ${kit-0-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r2}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-2-kit-0"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 2 ${kit-type} to ${kit-0-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r3}]","clickEvent":{"action":"run_command","value":"/action trigger set-round-3-kit-0"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 3 ${kit-type} to ${kit-0-name}","color":"aqua"}},"color":"aqua"},{"text":" - 0: ${kit-0-name}"}],"color": "white"}</text>
                <replacements>
                    <decimal id="r1" value="(bound(abs(round_1_kit - 0), 0, 1) + 1) % 2"/>
                    <decimal id="r2" value="(bound(abs(round_2_kit - 0), 0, 1) + 1) % 2"/>
                    <decimal id="r3" value="(bound(abs(round_3_kit - 0), 0, 1) + 1) % 2"/>
                </replacements>
            </message>
        </if>
        <if constant="kit-count" constant-value="2.." constant-comparison="range">
            <message>
                <text>{"text": "","extra":[{"text":" [{r1}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-1-kit-1"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 1 ${kit-type} to ${kit-1-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r2}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-2-kit-1"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 2 ${kit-type} to ${kit-1-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r3}]","clickEvent":{"action":"run_command","value":"/action trigger set-round-3-kit-1"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 3 ${kit-type} to ${kit-1-name}","color":"aqua"}},"color":"aqua"},{"text":" - 1: ${kit-1-name}"}],"color": "white"}</text>
                <replacements>
                    <decimal id="r1" value="(bound(abs(round_1_kit - 1), 0, 1) + 1) % 2"/>
                    <decimal id="r2" value="(bound(abs(round_2_kit - 1), 0, 1) + 1) % 2"/>
                    <decimal id="r3" value="(bound(abs(round_3_kit - 1), 0, 1) + 1) % 2"/>
                </replacements>
            </message>
        </if>
        <if constant="kit-count" constant-value="3.." constant-comparison="range">
            <message>
                <text>{"text": "","extra":[{"text":" [{r1}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-1-kit-2"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 1 ${kit-type} to ${kit-2-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r2}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-2-kit-2"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 2 ${kit-type} to ${kit-2-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r3}]","clickEvent":{"action":"run_command","value":"/action trigger set-round-3-kit-2"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 3 ${kit-type} to ${kit-2-name}","color":"aqua"}},"color":"aqua"},{"text":" - 2: ${kit-2-name}"}],"color": "white"}</text>
                <replacements>
                    <decimal id="r1" value="(bound(abs(round_1_kit - 2), 0, 1) + 1) % 2"/>
                    <decimal id="r2" value="(bound(abs(round_2_kit - 2), 0, 1) + 1) % 2"/>
                    <decimal id="r3" value="(bound(abs(round_3_kit - 2), 0, 1) + 1) % 2"/>
                </replacements>
            </message>
        </if>
        <if constant="kit-count" constant-value="4.." constant-comparison="range">
            <message>
                <text>{"text": "","extra":[{"text":" [{r1}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-1-kit-3"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 1 ${kit-type} to ${kit-3-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r2}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-2-kit-3"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 2 ${kit-type} to ${kit-3-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r3}]","clickEvent":{"action":"run_command","value":"/action trigger set-round-3-kit-3"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 3 ${kit-type} to ${kit-3-name}","color":"aqua"}},"color":"aqua"},{"text":" - 3: ${kit-3-name}"}],"color": "white"}</text>
                <replacements>
                    <decimal id="r1" value="(bound(abs(round_1_kit - 3), 0, 1) + 1) % 2"/>
                    <decimal id="r2" value="(bound(abs(round_2_kit - 3), 0, 1) + 1) % 2"/>
                    <decimal id="r3" value="(bound(abs(round_3_kit - 3), 0, 1) + 1) % 2"/>
                </replacements>
            </message>
        </if>
        <if constant="kit-count" constant-value="5.." constant-comparison="range">
            <message>
                <text>{"text": "","extra":[{"text":" [{r1}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-1-kit-4"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 1 ${kit-type} to ${kit-4-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r2}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-2-kit-4"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 2 ${kit-type} to ${kit-4-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r3}]","clickEvent":{"action":"run_command","value":"/action trigger set-round-3-kit-4"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 3 ${kit-type} to ${kit-4-name}","color":"aqua"}},"color":"aqua"},{"text":" - 4: ${kit-4-name}"}],"color": "white"}</text>
                <replacements>
                    <decimal id="r1" value="(bound(abs(round_1_kit - 4), 0, 1) + 1) % 2"/>
                    <decimal id="r2" value="(bound(abs(round_2_kit - 4), 0, 1) + 1) % 2"/>
                    <decimal id="r3" value="(bound(abs(round_3_kit - 4), 0, 1) + 1) % 2"/>
                </replacements>
            </message>
        </if>
        <if constant="kit-count" constant-value="6.." constant-comparison="range">
            <message>
                <text>{"text": "","extra":[{"text":" [{r1}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-1-kit-5"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 1 ${kit-type} to ${kit-5-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r2}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-2-kit-5"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 2 ${kit-type} to ${kit-5-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r3}]","clickEvent":{"action":"run_command","value":"/action trigger set-round-3-kit-5"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 3 ${kit-type} to ${kit-5-name}","color":"aqua"}},"color":"aqua"},{"text":" - 5: ${kit-5-name}"}],"color": "white"}</text>
                <replacements>
                    <decimal id="r1" value="(bound(abs(round_1_kit - 5), 0, 1) + 1) % 2"/>
                    <decimal id="r2" value="(bound(abs(round_2_kit - 5), 0, 1) + 1) % 2"/>
                    <decimal id="r3" value="(bound(abs(round_3_kit - 5), 0, 1) + 1) % 2"/>
                </replacements>
            </message>
        </if>
        <if constant="kit-count" constant-value="7.." constant-comparison="range">
            <message>
                <text>{"text": "","extra":[{"text":" [{r1}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-1-kit-6"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 1 ${kit-type} to ${kit-6-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r2}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-2-kit-6"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 2 ${kit-type} to ${kit-6-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r3}]","clickEvent":{"action":"run_command","value":"/action trigger set-round-3-kit-6"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 3 ${kit-type} to ${kit-6-name}","color":"aqua"}},"color":"aqua"},{"text":" - 6: ${kit-6-name}"}],"color": "white"}</text>
                <replacements>
                    <decimal id="r1" value="(bound(abs(round_1_kit - 6), 0, 1) + 1) % 2"/>
                    <decimal id="r2" value="(bound(abs(round_2_kit - 6), 0, 1) + 1) % 2"/>
                    <decimal id="r3" value="(bound(abs(round_3_kit - 6), 0, 1) + 1) % 2"/>
                </replacements>
            </message>
        </if>
        <if constant="kit-count" constant-value="8.." constant-comparison="range">
            <message>
                <text>{"text": "","extra":[{"text":" [{r1}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-1-kit-7"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 1 ${kit-type} to ${kit-7-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r2}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-2-kit-7"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 2 ${kit-type} to ${kit-7-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r3}]","clickEvent":{"action":"run_command","value":"/action trigger set-round-3-kit-7"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 3 ${kit-type} to ${kit-7-name}","color":"aqua"}},"color":"aqua"},{"text":" - 7: ${kit-7-name}"}],"color": "white"}</text>
                <replacements>
                    <decimal id="r1" value="(bound(abs(round_1_kit - 7), 0, 1) + 1) % 2"/>
                    <decimal id="r2" value="(bound(abs(round_2_kit - 7), 0, 1) + 1) % 2"/>
                    <decimal id="r3" value="(bound(abs(round_3_kit - 7), 0, 1) + 1) % 2"/>
                </replacements>
            </message>
        </if>
        <if constant="kit-count" constant-value="9.." constant-comparison="range">
            <message>
                <text>{"text": "","extra":[{"text":" [{r1}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-1-kit-8"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 1 ${kit-type} to ${kit-8-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r2}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-2-kit-8"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 2 ${kit-type} to ${kit-8-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r3}]","clickEvent":{"action":"run_command","value":"/action trigger set-round-3-kit-8"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 3 ${kit-type} to ${kit-8-name}","color":"aqua"}},"color":"aqua"},{"text":" - 8: ${kit-8-name}"}],"color": "white"}</text>
                <replacements>
                    <decimal id="r1" value="(bound(abs(round_1_kit - 8), 0, 1) + 1) % 2"/>
                    <decimal id="r2" value="(bound(abs(round_2_kit - 8), 0, 1) + 1) % 2"/>
                    <decimal id="r3" value="(bound(abs(round_3_kit - 8), 0, 1) + 1) % 2"/>
                </replacements>
            </message>
        </if>
        <if constant="kit-count" constant-value="10.." constant-comparison="range">
            <message>
                <text>{"text": "","extra":[{"text":" [{r1}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-1-kit-9"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 1 ${kit-type} to ${kit-9-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r2}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-2-kit-9"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 2 ${kit-type} to ${kit-9-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r3}]","clickEvent":{"action":"run_command","value":"/action trigger set-round-3-kit-9"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 3 ${kit-type} to ${kit-9-name}","color":"aqua"}},"color":"aqua"},{"text":" - 9: ${kit-9-name}"}],"color": "white"}</text>
                <replacements>
                    <decimal id="r1" value="(bound(abs(round_1_kit - 9), 0, 1) + 1) % 2"/>
                    <decimal id="r2" value="(bound(abs(round_2_kit - 9), 0, 1) + 1) % 2"/>
                    <decimal id="r3" value="(bound(abs(round_3_kit - 9), 0, 1) + 1) % 2"/>
                </replacements>
            </message>
        </if>
        <if constant="kit-count" constant-value="11.." constant-comparison="range">
            <message>
                <text>{"text": "","extra":[{"text":" [{r1}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-1-kit-10"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 1 ${kit-type} to ${kit-10-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r2}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-2-kit-10"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 2 ${kit-type} to ${kit-10-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r3}]","clickEvent":{"action":"run_command","value":"/action trigger set-round-3-kit-10"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 3 ${kit-type} to ${kit-10-name}","color":"aqua"}},"color":"aqua"},{"text":" - 10: ${kit-10-name}"}],"color": "white"}</text>
                <replacements>
                    <decimal id="r1" value="(bound(abs(round_1_kit - 10), 0, 1) + 1) % 2"/>
                    <decimal id="r2" value="(bound(abs(round_2_kit - 10), 0, 1) + 1) % 2"/>
                    <decimal id="r3" value="(bound(abs(round_3_kit - 10), 0, 1) + 1) % 2"/>
                </replacements>
            </message>
        </if>
        <if constant="kit-count" constant-value="12.." constant-comparison="range">
            <message>
                <text>{"text": "","extra":[{"text":" [{r1}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-1-kit-11"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 1 ${kit-type} to ${kit-11-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r2}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-2-kit-11"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 2 ${kit-type} to ${kit-11-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r3}]","clickEvent":{"action":"run_command","value":"/action trigger set-round-3-kit-11"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 3 ${kit-type} to ${kit-11-name}","color":"aqua"}},"color":"aqua"},{"text":" - 11: ${kit-11-name}"}],"color": "white"}</text>
                <replacements>
                    <decimal id="r1" value="(bound(abs(round_1_kit - 11), 0, 1) + 1) % 2"/>
                    <decimal id="r2" value="(bound(abs(round_2_kit - 11), 0, 1) + 1) % 2"/>
                    <decimal id="r3" value="(bound(abs(round_3_kit - 11), 0, 1) + 1) % 2"/>
                </replacements>
            </message>
        </if>
        <if constant="kit-count" constant-value="13.." constant-comparison="range">
            <message>
                <text>{"text": "","extra":[{"text":" [{r1}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-1-kit-12"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 1 ${kit-type} to ${kit-12-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r2}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-2-kit-12"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 2 ${kit-type} to ${kit-12-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r3}]","clickEvent":{"action":"run_command","value":"/action trigger set-round-3-kit-12"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 3 ${kit-type} to ${kit-12-name}","color":"aqua"}},"color":"aqua"},{"text":" - 12: ${kit-12-name}"}],"color": "white"}</text>
                <replacements>
                    <decimal id="r1" value="(bound(abs(round_1_kit - 12), 0, 1) + 1) % 2"/>
                    <decimal id="r2" value="(bound(abs(round_2_kit - 12), 0, 1) + 1) % 2"/>
                    <decimal id="r3" value="(bound(abs(round_3_kit - 12), 0, 1) + 1) % 2"/>
                </replacements>
            </message>
        </if>
        <if constant="kit-count" constant-value="14.." constant-comparison="range">
            <message>
                <text>{"text": "","extra":[{"text":" [{r1}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-1-kit-13"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 1 ${kit-type} to ${kit-13-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r2}] ","clickEvent":{"action":"run_command","value":"/action trigger set-round-2-kit-13"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 2 ${kit-type} to ${kit-13-name}","color":"aqua"}},"color":"aqua"},{"text":"[{r3}]","clickEvent":{"action":"run_command","value":"/action trigger set-round-3-kit-13"},"hoverEvent":{"action":"show_text","contents":{"text":"Set round 3 ${kit-type} to ${kit-13-name}","color":"aqua"}},"color":"aqua"},{"text":" - 12: ${kit-13-name}"}],"color": "white"}</text>
                <replacements>
                    <decimal id="r1" value="(bound(abs(round_1_kit - 13), 0, 1) + 1) % 2"/>
                    <decimal id="r2" value="(bound(abs(round_2_kit - 13), 0, 1) + 1) % 2"/>
                    <decimal id="r3" value="(bound(abs(round_3_kit - 13), 0, 1) + 1) % 2"/>
                </replacements>
            </message>
        </if>
    </action>
    <if constant="kit-count" constant-value="1.." constant-comparison="range">
        <action id="set-round-1-kit-0" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 1 has been set to ${kit-0-name}`r!"/>
                <set var="round_1_kit" value="0"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-2-kit-0" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 2 has been set to ${kit-0-name}`r!"/>
                <set var="round_2_kit" value="0"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-3-kit-0" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 3 has been set to ${kit-0-name}`r!"/>
                <set var="round_3_kit" value="0"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
    </if>
    <if constant="kit-count" constant-value="2.." constant-comparison="range">
        <action id="set-round-1-kit-1" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 1 has been set to ${kit-1-name}`r!"/>
                <set var="round_1_kit" value="1"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-2-kit-1" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 2 has been set to ${kit-1-name}`r!"/>
                <set var="round_2_kit" value="1"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-3-kit-1" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 3 has been set to ${kit-1-name}`r!"/>
                <set var="round_3_kit" value="1"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
    </if>
    <if constant="kit-count" constant-value="3.." constant-comparison="range">
        <action id="set-round-1-kit-2" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 1 has been set to ${kit-2-name}`r!"/>
                <set var="round_1_kit" value="2"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-2-kit-2" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 2 has been set to ${kit-2-name}`r!"/>
                <set var="round_2_kit" value="2"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-3-kit-2" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 3 has been set to ${kit-2-name}`r!"/>
                <set var="round_3_kit" value="2"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
    </if>
    <if constant="kit-count" constant-value="4.." constant-comparison="range">
        <action id="set-round-1-kit-3" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 1 has been set to ${kit-3-name}`r!"/>
                <set var="round_1_kit" value="3"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-2-kit-3" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 2 has been set to ${kit-3-name}`r!"/>
                <set var="round_2_kit" value="3"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-3-kit-3" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 3 has been set to ${kit-3-name}`r!"/>
                <set var="round_3_kit" value="3"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
    </if>
    <if constant="kit-count" constant-value="5.." constant-comparison="range">
        <action id="set-round-1-kit-4" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 1 has been set to ${kit-4-name}`r!"/>
                <set var="round_1_kit" value="4"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-2-kit-4" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 2 has been set to ${kit-4-name}`r!"/>
                <set var="round_2_kit" value="4"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-3-kit-4" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 3 has been set to ${kit-4-name}`r!"/>
                <set var="round_3_kit" value="4"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
    </if>
    <if constant="kit-count" constant-value="6.." constant-comparison="range">
        <action id="set-round-1-kit-5" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 1 has been set to ${kit-5-name}`r!"/>
                <set var="round_1_kit" value="5"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-2-kit-5" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 2 has been set to ${kit-5-name}`r!"/>
                <set var="round_2_kit" value="5"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-3-kit-5" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 3 has been set to ${kit-5-name}`r!"/>
                <set var="round_3_kit" value="5"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
    </if>
    <if constant="kit-count" constant-value="7.." constant-comparison="range">
        <action id="set-round-1-kit-6" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 1 has been set to ${kit-6-name}`r!"/>
                <set var="round_1_kit" value="6"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-2-kit-6" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 2 has been set to ${kit-6-name}`r!"/>
                <set var="round_2_kit" value="6"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-3-kit-6" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 3 has been set to ${kit-6-name}`r!"/>
                <set var="round_3_kit" value="6"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
    </if>
    <if constant="kit-count" constant-value="8.." constant-comparison="range">
        <action id="set-round-1-kit-7" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 1 has been set to ${kit-7-name}`r!"/>
                <set var="round_1_kit" value="7"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-2-kit-7" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 2 has been set to ${kit-7-name}`r!"/>
                <set var="round_2_kit" value="7"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-3-kit-7" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 3 has been set to ${kit-7-name}`r!"/>
                <set var="round_3_kit" value="7"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
    </if>
    <if constant="kit-count" constant-value="9.." constant-comparison="range">
        <action id="set-round-1-kit-8" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 1 has been set to ${kit-8-name}`r!"/>
                <set var="round_1_kit" value="8"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-2-kit-8" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 2 has been set to ${kit-8-name}`r!"/>
                <set var="round_2_kit" value="8"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-3-kit-8" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 3 has been set to ${kit-8-name}`r!"/>
                <set var="round_3_kit" value="8"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
    </if>
    <if constant="kit-count" constant-value="10.." constant-comparison="range">
        <action id="set-round-1-kit-9" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 1 has been set to ${kit-9-name}`r!"/>
                <set var="round_1_kit" value="9"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-2-kit-9" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 2 has been set to ${kit-9-name}`r!"/>
                <set var="round_2_kit" value="9"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-3-kit-9" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 3 has been set to ${kit-9-name}`r!"/>
                <set var="round_3_kit" value="9"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
    </if>
    <if constant="kit-count" constant-value="11.." constant-comparison="range">
        <action id="set-round-1-kit-10" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 1 has been set to ${kit-10-name}`r!"/>
                <set var="round_1_kit" value="10"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-2-kit-10" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 2 has been set to ${kit-10-name}`r!"/>
                <set var="round_2_kit" value="10"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-3-kit-10" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 3 has been set to ${kit-10-name}`r!"/>
                <set var="round_3_kit" value="10"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
    </if>
    <if constant="kit-count" constant-value="12.." constant-comparison="range">
        <action id="set-round-1-kit-11" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 1 has been set to ${kit-11-name}`r!"/>
                <set var="round_1_kit" value="11"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-2-kit-11" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 2 has been set to ${kit-11-name}`r!"/>
                <set var="round_2_kit" value="11"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-3-kit-11" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 3 has been set to ${kit-11-name}`r!"/>
                <set var="round_3_kit" value="11"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
    </if>
    <if constant="kit-count" constant-value="13.." constant-comparison="range">
        <action id="set-round-1-kit-12" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 1 has been set to ${kit-12-name}`r!"/>
                <set var="round_1_kit" value="12"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-2-kit-12" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 2 has been set to ${kit-12-name}`r!"/>
                <set var="round_2_kit" value="12"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-3-kit-12" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 3 has been set to ${kit-12-name}`r!"/>
                <set var="round_3_kit" value="12"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
    </if>
    <if constant="kit-count" constant-value="14.." constant-comparison="range">
        <action id="set-round-1-kit-13" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 1 has been set to ${kit-13-name}`r!"/>
                <set var="round_1_kit" value="13"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-2-kit-13" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 2 has been set to ${kit-13-name}`r!"/>
                <set var="round_2_kit" value="13"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
        <action id="set-round-3-kit-13" scope="player" expose="true" filter="not(match-started)">
            <switch-scope inner="match">
                <message text="`7[`6Arena Master`7] `6Tirion`r: The ${kit-type} for round 3 has been set to ${kit-13-name}`r!"/>
                <set var="round_3_kit" value="13"/>
            </switch-scope>
            <action id="kit-console"/>
        </action>
    </if>
    <!--
    round starting
    -->
    <trigger scope="match" filter="round-1-starting">
        <action>
            <action id="clear-dropped-lobby-entities"/>
            <message text="`7[`6Arena Master`7] `6Tirion`r: Get ready, the first round is about to commence in ${round-begin-after-seconds} seconds!"/>
            <sound key="${entity.villager.trade}"/>
            <action id="clear-kit-applicator"/>
            <set var="current_kit" value="round_1_kit"/>
        </action>
    </trigger>
    <trigger scope="match" filter="round-1-begin">
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: Let The Grand ${tournament-type} Tournament begin!"/>
            <set var="current_round" value="1"/>
            <set var="overtime_level" value="0"/>
            <action id="kit-applicator"/>
            <action id="kit-title"/>
            <if variant="cannon">
                <fill region="arena-spawn-boxes" material="air"/>
            </if>
        </action>
    </trigger>
    <trigger scope="match" filter="round-1-finished">
        <action>
            <switch-scope inner="player">
                <action id="disable-spectator-mode"/>
            </switch-scope>
            <action id="clear-kit-applicator"/>
        </action>
    </trigger>
    <trigger scope="match" filter="round-2-starting">
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: Brace yourselves, the second round starts in ${round-begin-after-seconds} seconds!"/>
            <sound key="${entity.villager.trade}"/>
            <set var="current_kit" value="round_2_kit"/>
        </action>
    </trigger>
    <trigger scope="match" filter="round-2-begin">
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: Aaaaand fight!"/>
            <set var="current_round" value="2"/>
            <set var="overtime_level" value="0"/>
            <action id="kit-applicator"/>
            <action id="kit-title"/>
            <if variant="cannon">
                <fill region="arena-spawn-boxes" material="air"/>
            </if>
        </action>
    </trigger>
    <trigger scope="match" filter="round-2-finished">
        <action>
            <switch-scope inner="player">
                <action id="disable-spectator-mode"/>
            </switch-scope>
            <action id="clear-kit-applicator"/>
        </action>
    </trigger>
    <trigger scope="match" filter="round-3-starting">
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: Prepare for the `7final showdown`r, starting in ${round-begin-after-seconds} seconds!"/>
            <sound key="${entity.villager.trade}"/>
            <set var="current_kit" value="round_3_kit"/>
        </action>
    </trigger>
    <trigger scope="match" filter="round-3-begin">
        <action>
            <message text="`7[`6Arena Master`7] `6Tirion`r: May the best team win!"/>
            <set var="current_round" value="3"/>
            <set var="overtime_level" value="0"/>
            <action id="kit-applicator"/>
            <action id="kit-title"/>
            <if variant="cannon">
                <fill region="arena-spawn-boxes" material="air"/>
            </if>
        </action>
    </trigger>
    <trigger scope="match" filter="round-3-finished">
        <action>
            <switch-scope inner="player">
                <action id="disable-spectator-mode"/>
            </switch-scope>
            <action id="clear-kit-applicator"/>
        </action>
    </trigger>
    <if variant="cannon">
        <trigger scope="match" filter="any(all(round-1-kit-rearranging-period, not(round-1-begin)), all(round-2-kit-rearranging-period, not(round-2-begin)), all(round-3-kit-rearranging-period, not(round-3-begin)))">
            <action>
                <message text="`7[`6Arena Master`7] `6Tirion`r: Use this time to rearrange your inventory to your liking!"/>
                <sound key="${entity.villager.trade}"/>
                <action id="kit-applicator"/>
                <fill region="arena-spawn-boxes" material="stained glass"/>
            </action>
        </trigger>
    </if>
    <trigger scope="match" filter="match-finished">
        <action>
            <set var="current_round" value="0"/>
            <action filter="round-3-arena-1-team-1-win">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `4Red `ron winning The Grand ${tournament-type} Tournament!"/>
            </action>
            <action filter="round-3-arena-1-team-2-win">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `9Blue `ron winning The Grand ${tournament-type} Tournament!"/>
            </action>
            <action filter="round-3-arena-1-team-3-win">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `2Green `ron winning The Grand ${tournament-type} Tournament!"/>
            </action>
            <action filter="round-3-arena-1-team-4-win">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `5Purple `ron winning The Grand ${tournament-type} Tournament!"/>
            </action>
            <action filter="round-3-arena-1-team-5-win">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `eYellow `ron winning The Grand ${tournament-type} Tournament!"/>
            </action>
            <action filter="round-3-arena-1-team-6-win">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `6Orange `ron winning The Grand ${tournament-type} Tournament!"/>
            </action>
            <action filter="round-3-arena-1-team-7-win">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `dPink `ron winning The Grand ${tournament-type} Tournament!"/>
            </action>
            <action filter="round-3-arena-1-team-8-win">
                <message text="`7[`6Arena Master`7] `6Tirion`r: Congratulations `3Cyan `ron winning The Grand ${tournament-type} Tournament!"/>
            </action>
        </action>
    </trigger>
    <trigger scope="player" filter="all(all-arena-spectator, participating, not(between-rounds), not(lobby))" action="spectator-kit"/>
    <if variant="default">
        <trigger scope="match">
            <filter>
                <after duration="30s" message="Overtime in {0}">
                    <after duration="2s" filter="all(any(all(current_round=1, round-1-starting), all(current_round=2, round-2-starting), all(current_round=3, round-3-starting)), not(between-rounds))"/>
                </after>
            </filter>
            <action>
                <message text="`7[`6Arena Master`7] `6Tirion`r: Alright, this is taking far too long..."/>
                <message text="`7[`6Arena Master`7] `6Tirion`r: Remaining players have had their health reduced to 1 heart!"/>
                <set var="overtime_level" value="1"/>
                <sound preset="OBJECTIVE_MODE"/>
                <switch-scope inner="player" filter="all(all-arenas, participating)">
                    <kit force="true">
                        <max-health>2</max-health>
                    </kit>
                </switch-scope>
            </action>
        </trigger>
    </if>
    <if variant="spleef">
        <trigger scope="match">
            <filter>
                <after duration="10s" message="Sudden death in {0}">
                    <after duration="2m20s" filter="all(any(all(current_round=1, round-1-starting), all(current_round=2, round-2-starting), all(current_round=3, round-3-starting)), not(between-rounds))"/>
                </after>
            </filter>
            <action>
                <message text="`7[`6Arena Master`7] `6Tirion`r: Let's make this sudden death a little... `cexplosive`r!"/>
                <set var="overtime_level" value="1"/>
                <switch-scope inner="player" filter="all(all-arenas, participating)">
                    <kit>
                        <item material="egg" amount="128" name="`rMega Grenade" grenade="true" grenade-power="4">
                            <enchantment>knockback</enchantment>
                        </item>
                    </kit>
                </switch-scope>
            </action>
        </trigger>
    </if>
    <if variant="cannon">
        <trigger scope="match">
            <filter>
                <after duration="30s" message="Connecting the platforms in {0}">
                    <after duration="2m" filter="all(any(all(current_round=1, round-1-starting), all(current_round=2, round-2-starting), all(current_round=3, round-3-starting)), not(between-rounds))"/>
                </after>
            </filter>
            <action>
                <message text="`7[`6Arena Master`7] `6Tirion`r: The platforms have been connected by a bridge!"/>
                <set var="overtime_level" value="1"/>
                <sound preset="OBJECTIVE_MODE"/>
                <fill region="arena-bridges" material="stained glass:0" filter="all(current_platform_bridge=0, any(all(current_round=1, round-1-bridges), all(current_round=2, round-2-bridges), all(current_round=3, round-3-bridges)))"/>
                <fill region="arena-bridges-wide" material="stained glass:0" filter="all(current_platform_bridge=1, any(all(current_round=1, round-1-bridges-wide), all(current_round=2, round-2-bridges-wide), all(current_round=3, round-3-bridges-wide)))"/>
                <fill region="arena-bridges-diagonal" material="stained glass:0" filter="all(current_platform_bridge=2, any(all(current_round=1, round-1-bridges-diagonal), all(current_round=2, round-2-bridges-diagonal), all(current_round=3, round-3-bridges-diagonal)))"/>
                <fill region="arena-bridges-side" material="stained glass:0" filter="all(current_platform_bridge=3, any(all(current_round=1, round-1-bridges-side), all(current_round=2, round-2-bridges-side), all(current_round=3, round-3-bridges-side)))"/>
                <fill region="arena-bridges-lower" material="stained glass:0" filter="all(current_platform_bridge=4, any(all(current_round=1, round-1-bridges-lower), all(current_round=2, round-2-bridges-lower), all(current_round=3, round-3-bridges-lower)))"/>
            </action>
        </trigger>
        <trigger scope="match">
            <filter>
                <after duration="30s" message="The middle will become buildable in {0}">
                    <after duration="3m30s" filter="all(any(all(current_round=1, round-1-starting), all(current_round=2, round-2-starting), all(current_round=3, round-3-starting)), not(between-rounds))"/>
                </after>
            </filter>
            <action>
                <message text="`7[`6Arena Master`7] `6Tirion`r: You can now build between the platforms!"/>
                <set var="overtime_level" value="2"/>
                <sound preset="OBJECTIVE_MODE"/>
                <fill region="buildable-area-middle-identifier" material="stained glass:7" filter="all(arena-wall-material, any(all(current_round=1, round-1-buildable-area-middle-identifier), all(current_round=2, round-2-buildable-area-middle-identifier), all(current_round=3, round-3-buildable-area-middle-identifier)))"/>
            </action>
        </trigger>
        <trigger scope="match">
            <filter>
                <after duration="30s" message="Sudden death in {0}">
                    <after duration="4m45s" filter="all(any(all(current_round=1, round-1-starting), all(current_round=2, round-2-starting), all(current_round=3, round-3-starting)), not(between-rounds))"/>
                </after>
            </filter>
            <action>
                <message text="`7[`6Arena Master`7] `6Tirion`r: Alright, this is taking far too long..."/>
                <message text="`7[`6Arena Master`7] `6Tirion`r: The first team to reach the `agreen safe zone `rwins the round!"/>
                <set var="overtime_level" value="3"/>
                <sound preset="OBJECTIVE_MODE"/>
                <fill region="arena-overtime-capture-area" material="stained glass:5" filter="all(any(arena-wall-material, bridge-material), any(all(current_round=1, round-1-overtime-capture-area), all(current_round=2, round-2-overtime-capture-area), all(current_round=3, round-3-overtime-capture-area)))"/>
            </action>
        </trigger>
        <trigger scope="match">
            <filter>
                <after duration="1s" filter="all(current_kit=3, any(all(current_round=1, round-1-starting), all(current_round=2, round-2-starting), all(current_round=3, round-3-starting)), not(between-rounds))"/>
            </filter>
            <action>
                <fill region="fake-platforms" material="air" filter="all(only-barrier, any(all(current_round=1, round-1-arenas), all(current_round=2, round-2-arenas), all(current_round=3, round-3-arenas)))"/>
            </action>
        </trigger>
    </if>
    <if variant="cacti">
        <trigger scope="match">
            <filter>
                <after duration="40s" filter="any(all(round-1, not(round-1-finished)), all(round-2, not(round-2-finished)), all(round-3, not(round-3-finished)))"/>
            </filter>
            <action>
                <fill region="arenas-segment-13" material="sand:1" filter="all(sand, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
                <fill region="arenas-segment-13" material="air" events="true" filter="all(support-blocks, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
            </action>
        </trigger>
        <trigger scope="match">
            <filter>
                <after duration="48s" filter="any(all(round-1, not(round-1-finished)), all(round-2, not(round-2-finished)), all(round-3, not(round-3-finished)))"/>
            </filter>
            <action>
                <fill region="arenas-segment-12" material="sand:1" filter="all(sand, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
                <fill region="arenas-segment-12" material="air" events="true" filter="all(support-blocks, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
            </action>
        </trigger>
        <trigger scope="match">
            <filter>
                <after duration="56s" filter="any(all(round-1, not(round-1-finished)), all(round-2, not(round-2-finished)), all(round-3, not(round-3-finished)))"/>
            </filter>
            <action>
                <fill region="arenas-segment-11" material="sand:1" filter="all(sand, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
                <fill region="arenas-segment-11" material="air" events="true" filter="all(support-blocks, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
            </action>
        </trigger>
        <trigger scope="match">
            <filter>
                <after duration="61s" filter="any(all(round-1, not(round-1-finished)), all(round-2, not(round-2-finished)), all(round-3, not(round-3-finished)))"/>
            </filter>
            <action>
                <fill region="arenas-segment-10" material="sand:1" filter="all(sand, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
                <fill region="arenas-segment-10" material="air" events="true" filter="all(support-blocks, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
            </action>
        </trigger>
        <trigger scope="match">
            <filter>
                <after duration="66s" filter="any(all(round-1, not(round-1-finished)), all(round-2, not(round-2-finished)), all(round-3, not(round-3-finished)))"/>
            </filter>
            <action>
                <fill region="arenas-segment-9" material="sand:1" filter="all(sand, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
                <fill region="arenas-segment-9" material="air" events="true" filter="all(support-blocks, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
            </action>
        </trigger>
        <trigger scope="match">
            <filter>
                <after duration="71s" filter="any(all(round-1, not(round-1-finished)), all(round-2, not(round-2-finished)), all(round-3, not(round-3-finished)))"/>
            </filter>
            <action>
                <fill region="arenas-segment-8" material="sand:1" filter="all(sand, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
                <fill region="arenas-segment-8" material="air" events="true" filter="all(support-blocks, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
            </action>
        </trigger>
        <trigger scope="match">
            <filter>
                <after duration="76s" filter="any(all(round-1, not(round-1-finished)), all(round-2, not(round-2-finished)), all(round-3, not(round-3-finished)))"/>
            </filter>
            <action>
                <fill region="arenas-segment-7" material="sand:1" filter="all(sand, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
                <fill region="arenas-segment-7" material="air" events="true" filter="all(support-blocks, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
            </action>
        </trigger>
        <trigger scope="match">
            <filter>
                <after duration="81s" filter="any(all(round-1, not(round-1-finished)), all(round-2, not(round-2-finished)), all(round-3, not(round-3-finished)))"/>
            </filter>
            <action>
                <fill region="arenas-segment-6" material="sand:1" filter="all(sand, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
                <fill region="arenas-segment-6" material="air" events="true" filter="all(support-blocks, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
            </action>
        </trigger>
        <trigger scope="match">
            <filter>
                <after duration="105s" filter="any(all(round-1, not(round-1-finished)), all(round-2, not(round-2-finished)), all(round-3, not(round-3-finished)))"/>
            </filter>
            <action>
                <fill region="arenas-segment-5" material="sand:1" filter="all(sand, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
                <fill region="arenas-segment-5" material="air" events="true" filter="all(support-blocks, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
            </action>
        </trigger>
        <trigger scope="match">
            <filter>
                <after duration="110s" filter="any(all(round-1, not(round-1-finished)), all(round-2, not(round-2-finished)), all(round-3, not(round-3-finished)))"/>
            </filter>
            <action>
                <fill region="arenas-segment-4" material="sand:1" filter="all(sand, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
                <fill region="arenas-segment-4" material="air" events="true" filter="all(support-blocks, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
            </action>
        </trigger>
        <trigger scope="match">
            <filter>
                <after duration="115s" filter="any(all(round-1, not(round-1-finished)), all(round-2, not(round-2-finished)), all(round-3, not(round-3-finished)))"/>
            </filter>
            <action>
                <fill region="arenas-segment-3" material="sand:1" filter="all(sand, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
                <fill region="arenas-segment-3" material="air" events="true" filter="all(support-blocks, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
            </action>
        </trigger>
        <trigger scope="match">
            <filter>
                <after duration="120s" filter="any(all(round-1, not(round-1-finished)), all(round-2, not(round-2-finished)), all(round-3, not(round-3-finished)))"/>
            </filter>
            <action>
                <fill region="arenas-segment-2" material="sand:1" filter="all(sand, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
                <fill region="arenas-segment-2" material="air" events="true" filter="all(support-blocks, any(all(round-1, round-1-arenas), all(round-2, round-2-arenas), all(round-3, round-3-arenas)))"/>
            </action>
        </trigger>
    </if>
    <!--
    elimination messages
    -->
    <message id="team-1-defeat-team-2-msg" text="`7[`6Arena Master`7] `6Tirion`r: `4Red `rhas defeated `9Blue`r!"/>
    <message id="team-1-defeat-team-3-msg" text="`7[`6Arena Master`7] `6Tirion`r: `4Red `rhas defeated `2Green`r!"/>
    <message id="team-1-defeat-team-4-msg" text="`7[`6Arena Master`7] `6Tirion`r: `4Red `rhas defeated `5Purple`r!"/>
    <message id="team-1-defeat-team-5-msg" text="`7[`6Arena Master`7] `6Tirion`r: `4Red `rhas defeated `eYellow`r!"/>
    <message id="team-1-defeat-team-6-msg" text="`7[`6Arena Master`7] `6Tirion`r: `4Red `rhas defeated `6Orange`r!"/>
    <message id="team-1-defeat-team-7-msg" text="`7[`6Arena Master`7] `6Tirion`r: `4Red `rhas defeated `dPink`r!"/>
    <message id="team-1-defeat-team-8-msg" text="`7[`6Arena Master`7] `6Tirion`r: `4Red `rhas defeated `3Cyan`r!"/>
    <message id="team-2-defeat-team-1-msg" text="`7[`6Arena Master`7] `6Tirion`r: `9Blue `rhas defeated `4Red`r!"/>
    <message id="team-2-defeat-team-3-msg" text="`7[`6Arena Master`7] `6Tirion`r: `9Blue `rhas defeated `2Green`r!"/>
    <message id="team-2-defeat-team-4-msg" text="`7[`6Arena Master`7] `6Tirion`r: `9Blue `rhas defeated `5Purple`r!"/>
    <message id="team-2-defeat-team-5-msg" text="`7[`6Arena Master`7] `6Tirion`r: `9Blue `rhas defeated `eYellow`r!"/>
    <message id="team-2-defeat-team-6-msg" text="`7[`6Arena Master`7] `6Tirion`r: `9Blue `rhas defeated `6Orange`r!"/>
    <message id="team-2-defeat-team-7-msg" text="`7[`6Arena Master`7] `6Tirion`r: `9Blue `rhas defeated `dPink`r!"/>
    <message id="team-2-defeat-team-8-msg" text="`7[`6Arena Master`7] `6Tirion`r: `9Blue `rhas defeated `3Cyan`r!"/>
    <message id="team-3-defeat-team-1-msg" text="`7[`6Arena Master`7] `6Tirion`r: `2Green `rhas defeated `4Red`r!"/>
    <message id="team-3-defeat-team-2-msg" text="`7[`6Arena Master`7] `6Tirion`r: `2Green `rhas defeated `9Blue`r!"/>
    <message id="team-3-defeat-team-4-msg" text="`7[`6Arena Master`7] `6Tirion`r: `2Green `rhas defeated `5Purple`r!"/>
    <message id="team-3-defeat-team-5-msg" text="`7[`6Arena Master`7] `6Tirion`r: `2Green `rhas defeated `eYellow`r!"/>
    <message id="team-3-defeat-team-6-msg" text="`7[`6Arena Master`7] `6Tirion`r: `2Green `rhas defeated `6Orange`r!"/>
    <message id="team-3-defeat-team-7-msg" text="`7[`6Arena Master`7] `6Tirion`r: `2Green `rhas defeated `dPink`r!"/>
    <message id="team-3-defeat-team-8-msg" text="`7[`6Arena Master`7] `6Tirion`r: `2Green `rhas defeated `3Cyan`r!"/>
    <message id="team-4-defeat-team-1-msg" text="`7[`6Arena Master`7] `6Tirion`r: `5Purple `rhas defeated `4Red`r!"/>
    <message id="team-4-defeat-team-2-msg" text="`7[`6Arena Master`7] `6Tirion`r: `5Purple `rhas defeated `9Blue`r!"/>
    <message id="team-4-defeat-team-3-msg" text="`7[`6Arena Master`7] `6Tirion`r: `5Purple `rhas defeated `2Green`r!"/>
    <message id="team-4-defeat-team-5-msg" text="`7[`6Arena Master`7] `6Tirion`r: `5Purple `rhas defeated `eYellow`r!"/>
    <message id="team-4-defeat-team-6-msg" text="`7[`6Arena Master`7] `6Tirion`r: `5Purple `rhas defeated `6Orange`r!"/>
    <message id="team-4-defeat-team-7-msg" text="`7[`6Arena Master`7] `6Tirion`r: `5Purple `rhas defeated `dPink`r!"/>
    <message id="team-4-defeat-team-8-msg" text="`7[`6Arena Master`7] `6Tirion`r: `5Purple `rhas defeated `3Cyan`r!"/>
    <message id="team-5-defeat-team-1-msg" text="`7[`6Arena Master`7] `6Tirion`r: `eYellow `rhas defeated `4Red`r!"/>
    <message id="team-5-defeat-team-2-msg" text="`7[`6Arena Master`7] `6Tirion`r: `eYellow `rhas defeated `9Blue`r!"/>
    <message id="team-5-defeat-team-3-msg" text="`7[`6Arena Master`7] `6Tirion`r: `eYellow `rhas defeated `2Green`r!"/>
    <message id="team-5-defeat-team-4-msg" text="`7[`6Arena Master`7] `6Tirion`r: `eYellow `rhas defeated `5Purple`r!"/>
    <message id="team-5-defeat-team-6-msg" text="`7[`6Arena Master`7] `6Tirion`r: `eYellow `rhas defeated `6Orange`r!"/>
    <message id="team-5-defeat-team-7-msg" text="`7[`6Arena Master`7] `6Tirion`r: `eYellow `rhas defeated `dPink`r!"/>
    <message id="team-5-defeat-team-8-msg" text="`7[`6Arena Master`7] `6Tirion`r: `eYellow `rhas defeated `3Cyan`r!"/>
    <message id="team-6-defeat-team-1-msg" text="`7[`6Arena Master`7] `6Tirion`r: `6Orange `rhas defeated `4Red`r!"/>
    <message id="team-6-defeat-team-2-msg" text="`7[`6Arena Master`7] `6Tirion`r: `6Orange `rhas defeated `9Blue`r!"/>
    <message id="team-6-defeat-team-3-msg" text="`7[`6Arena Master`7] `6Tirion`r: `6Orange `rhas defeated `2Green`r!"/>
    <message id="team-6-defeat-team-4-msg" text="`7[`6Arena Master`7] `6Tirion`r: `6Orange `rhas defeated `5Purple`r!"/>
    <message id="team-6-defeat-team-5-msg" text="`7[`6Arena Master`7] `6Tirion`r: `6Orange `rhas defeated `eYellow`r!"/>
    <message id="team-6-defeat-team-7-msg" text="`7[`6Arena Master`7] `6Tirion`r: `6Orange `rhas defeated `dPink`r!"/>
    <message id="team-6-defeat-team-8-msg" text="`7[`6Arena Master`7] `6Tirion`r: `6Orange `rhas defeated `3Cyan`r!"/>
    <message id="team-7-defeat-team-1-msg" text="`7[`6Arena Master`7] `6Tirion`r: `dPink `rhas defeated `4Red`r!"/>
    <message id="team-7-defeat-team-2-msg" text="`7[`6Arena Master`7] `6Tirion`r: `dPink `rhas defeated `9Blue`r!"/>
    <message id="team-7-defeat-team-3-msg" text="`7[`6Arena Master`7] `6Tirion`r: `dPink `rhas defeated `2Green`r!"/>
    <message id="team-7-defeat-team-4-msg" text="`7[`6Arena Master`7] `6Tirion`r: `dPink `rhas defeated `5Purple`r!"/>
    <message id="team-7-defeat-team-5-msg" text="`7[`6Arena Master`7] `6Tirion`r: `dPink `rhas defeated `eYellow`r!"/>
    <message id="team-7-defeat-team-6-msg" text="`7[`6Arena Master`7] `6Tirion`r: `dPink `rhas defeated `6Orange`r!"/>
    <message id="team-7-defeat-team-8-msg" text="`7[`6Arena Master`7] `6Tirion`r: `dPink `rhas defeated `3Cyan`r!"/>
    <message id="team-8-defeat-team-1-msg" text="`7[`6Arena Master`7] `6Tirion`r: `3Cyan `rhas defeated `4Red`r!"/>
    <message id="team-8-defeat-team-2-msg" text="`7[`6Arena Master`7] `6Tirion`r: `3Cyan `rhas defeated `9Blue`r!"/>
    <message id="team-8-defeat-team-3-msg" text="`7[`6Arena Master`7] `6Tirion`r: `3Cyan `rhas defeated `2Green`r!"/>
    <message id="team-8-defeat-team-4-msg" text="`7[`6Arena Master`7] `6Tirion`r: `3Cyan `rhas defeated `5Purple`r!"/>
    <message id="team-8-defeat-team-5-msg" text="`7[`6Arena Master`7] `6Tirion`r: `3Cyan `rhas defeated `eYellow`r!"/>
    <message id="team-8-defeat-team-6-msg" text="`7[`6Arena Master`7] `6Tirion`r: `3Cyan `rhas defeated `6Orange`r!"/>
    <message id="team-8-defeat-team-7-msg" text="`7[`6Arena Master`7] `6Tirion`r: `3Cyan `rhas defeated `dPink`r!"/>
    <trigger scope="match" action="team-1-defeat-team-2-msg" filter="round-1-arena-1-team-1-win"/>
    <trigger scope="match" action="team-2-defeat-team-1-msg" filter="round-1-arena-1-team-2-win"/>
    <trigger scope="match" action="team-3-defeat-team-4-msg" filter="round-1-arena-2-team-3-win"/>
    <trigger scope="match" action="team-4-defeat-team-3-msg" filter="round-1-arena-2-team-4-win"/>
    <trigger scope="match" action="team-5-defeat-team-6-msg" filter="round-1-arena-3-team-5-win"/>
    <trigger scope="match" action="team-6-defeat-team-5-msg" filter="round-1-arena-3-team-6-win"/>
    <trigger scope="match" action="team-7-defeat-team-8-msg" filter="round-1-arena-4-team-7-win"/>
    <trigger scope="match" action="team-8-defeat-team-7-msg" filter="round-1-arena-4-team-8-win"/>
    <trigger scope="match" action="team-1-defeat-team-3-msg" filter="all(team-1-vs-team-3, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-1-win), all(current_round=2, round-2-arena-3-team-1-win)))"/>
    <trigger scope="match" action="team-1-defeat-team-4-msg" filter="all(team-1-vs-team-4, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-1-win), all(current_round=2, round-2-arena-3-team-1-win)))"/>
    <trigger scope="match" action="team-1-defeat-team-5-msg" filter="all(team-1-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-1-win), all(current_round=3, round-3-arena-2-team-1-win), all(current_round=3, round-3-arena-3-team-1-win), all(current_round=3, round-3-arena-4-team-1-win)))"/>
    <trigger scope="match" action="team-1-defeat-team-6-msg" filter="all(team-1-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-1-win), all(current_round=3, round-3-arena-2-team-1-win), all(current_round=3, round-3-arena-3-team-1-win), all(current_round=3, round-3-arena-4-team-1-win)))"/>
    <trigger scope="match" action="team-1-defeat-team-7-msg" filter="all(team-1-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-1-win), all(current_round=3, round-3-arena-2-team-1-win), all(current_round=3, round-3-arena-3-team-1-win), all(current_round=3, round-3-arena-4-team-1-win)))"/>
    <trigger scope="match" action="team-1-defeat-team-8-msg" filter="all(team-1-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-1-win), all(current_round=3, round-3-arena-2-team-1-win), all(current_round=3, round-3-arena-3-team-1-win), all(current_round=3, round-3-arena-4-team-1-win)))"/>
    <trigger scope="match" action="team-2-defeat-team-3-msg" filter="all(team-2-vs-team-3, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-2-win), all(current_round=2, round-2-arena-3-team-2-win)))"/>
    <trigger scope="match" action="team-2-defeat-team-4-msg" filter="all(team-2-vs-team-4, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-2-win), all(current_round=2, round-2-arena-3-team-2-win)))"/>
    <trigger scope="match" action="team-2-defeat-team-5-msg" filter="all(team-2-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-2-win), all(current_round=3, round-3-arena-2-team-2-win), all(current_round=3, round-3-arena-3-team-2-win), all(current_round=3, round-3-arena-4-team-2-win)))"/>
    <trigger scope="match" action="team-2-defeat-team-6-msg" filter="all(team-2-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-2-win), all(current_round=3, round-3-arena-2-team-2-win), all(current_round=3, round-3-arena-3-team-2-win), all(current_round=3, round-3-arena-4-team-2-win)))"/>
    <trigger scope="match" action="team-2-defeat-team-7-msg" filter="all(team-2-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-2-win), all(current_round=3, round-3-arena-2-team-2-win), all(current_round=3, round-3-arena-3-team-2-win), all(current_round=3, round-3-arena-4-team-2-win)))"/>
    <trigger scope="match" action="team-2-defeat-team-8-msg" filter="all(team-2-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-2-win), all(current_round=3, round-3-arena-2-team-2-win), all(current_round=3, round-3-arena-3-team-2-win), all(current_round=3, round-3-arena-4-team-2-win)))"/>
    <trigger scope="match" action="team-3-defeat-team-1-msg" filter="all(team-1-vs-team-3, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-3-win), all(current_round=2, round-2-arena-3-team-3-win)))"/>
    <trigger scope="match" action="team-3-defeat-team-2-msg" filter="all(team-2-vs-team-3, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-3-win), all(current_round=2, round-2-arena-3-team-3-win)))"/>
    <trigger scope="match" action="team-3-defeat-team-5-msg" filter="all(team-3-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-3-win), all(current_round=3, round-3-arena-2-team-3-win), all(current_round=3, round-3-arena-3-team-3-win), all(current_round=3, round-3-arena-4-team-3-win)))"/>
    <trigger scope="match" action="team-3-defeat-team-6-msg" filter="all(team-3-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-3-win), all(current_round=3, round-3-arena-2-team-3-win), all(current_round=3, round-3-arena-3-team-3-win), all(current_round=3, round-3-arena-4-team-3-win)))"/>
    <trigger scope="match" action="team-3-defeat-team-7-msg" filter="all(team-3-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-3-win), all(current_round=3, round-3-arena-2-team-3-win), all(current_round=3, round-3-arena-3-team-3-win), all(current_round=3, round-3-arena-4-team-3-win)))"/>
    <trigger scope="match" action="team-3-defeat-team-8-msg" filter="all(team-3-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-3-win), all(current_round=3, round-3-arena-2-team-3-win), all(current_round=3, round-3-arena-3-team-3-win), all(current_round=3, round-3-arena-4-team-3-win)))"/>
    <trigger scope="match" action="team-4-defeat-team-1-msg" filter="all(team-1-vs-team-4, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-4-win), all(current_round=2, round-2-arena-3-team-4-win)))"/>
    <trigger scope="match" action="team-4-defeat-team-2-msg" filter="all(team-2-vs-team-4, not(round-3-starting), any(all(current_round=2, round-2-arena-1-team-4-win), all(current_round=2, round-2-arena-3-team-4-win)))"/>
    <trigger scope="match" action="team-4-defeat-team-5-msg" filter="all(team-4-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-4-win), all(current_round=3, round-3-arena-2-team-4-win), all(current_round=3, round-3-arena-3-team-4-win), all(current_round=3, round-3-arena-4-team-4-win)))"/>
    <trigger scope="match" action="team-4-defeat-team-6-msg" filter="all(team-4-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-4-win), all(current_round=3, round-3-arena-2-team-4-win), all(current_round=3, round-3-arena-3-team-4-win), all(current_round=3, round-3-arena-4-team-4-win)))"/>
    <trigger scope="match" action="team-4-defeat-team-7-msg" filter="all(team-4-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-4-win), all(current_round=3, round-3-arena-2-team-4-win), all(current_round=3, round-3-arena-3-team-4-win), all(current_round=3, round-3-arena-4-team-4-win)))"/>
    <trigger scope="match" action="team-4-defeat-team-8-msg" filter="all(team-4-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-4-win), all(current_round=3, round-3-arena-2-team-4-win), all(current_round=3, round-3-arena-3-team-4-win), all(current_round=3, round-3-arena-4-team-4-win)))"/>
    <trigger scope="match" action="team-5-defeat-team-7-msg" filter="all(team-5-vs-team-7, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-5-win), all(current_round=2, round-2-arena-4-team-5-win)))"/>
    <trigger scope="match" action="team-5-defeat-team-8-msg" filter="all(team-5-vs-team-8, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-5-win), all(current_round=2, round-2-arena-4-team-5-win)))"/>
    <trigger scope="match" action="team-5-defeat-team-1-msg" filter="all(team-1-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-5-win), all(current_round=3, round-3-arena-2-team-5-win), all(current_round=3, round-3-arena-3-team-5-win), all(current_round=3, round-3-arena-4-team-5-win)))"/>
    <trigger scope="match" action="team-5-defeat-team-2-msg" filter="all(team-2-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-5-win), all(current_round=3, round-3-arena-2-team-5-win), all(current_round=3, round-3-arena-3-team-5-win), all(current_round=3, round-3-arena-4-team-5-win)))"/>
    <trigger scope="match" action="team-5-defeat-team-3-msg" filter="all(team-3-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-5-win), all(current_round=3, round-3-arena-2-team-5-win), all(current_round=3, round-3-arena-3-team-5-win), all(current_round=3, round-3-arena-4-team-5-win)))"/>
    <trigger scope="match" action="team-5-defeat-team-4-msg" filter="all(team-4-vs-team-5, not(match-finished), any(all(current_round=3, round-3-arena-1-team-5-win), all(current_round=3, round-3-arena-2-team-5-win), all(current_round=3, round-3-arena-3-team-5-win), all(current_round=3, round-3-arena-4-team-5-win)))"/>
    <trigger scope="match" action="team-6-defeat-team-7-msg" filter="all(team-6-vs-team-7, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-6-win), all(current_round=2, round-2-arena-4-team-6-win)))"/>
    <trigger scope="match" action="team-6-defeat-team-8-msg" filter="all(team-6-vs-team-8, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-6-win), all(current_round=2, round-2-arena-4-team-6-win)))"/>
    <trigger scope="match" action="team-6-defeat-team-1-msg" filter="all(team-1-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-6-win), all(current_round=3, round-3-arena-2-team-6-win), all(current_round=3, round-3-arena-3-team-6-win), all(current_round=3, round-3-arena-4-team-6-win)))"/>
    <trigger scope="match" action="team-6-defeat-team-2-msg" filter="all(team-2-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-6-win), all(current_round=3, round-3-arena-2-team-6-win), all(current_round=3, round-3-arena-3-team-6-win), all(current_round=3, round-3-arena-4-team-6-win)))"/>
    <trigger scope="match" action="team-6-defeat-team-3-msg" filter="all(team-3-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-6-win), all(current_round=3, round-3-arena-2-team-6-win), all(current_round=3, round-3-arena-3-team-6-win), all(current_round=3, round-3-arena-4-team-6-win)))"/>
    <trigger scope="match" action="team-6-defeat-team-4-msg" filter="all(team-4-vs-team-6, not(match-finished), any(all(current_round=3, round-3-arena-1-team-6-win), all(current_round=3, round-3-arena-2-team-6-win), all(current_round=3, round-3-arena-3-team-6-win), all(current_round=3, round-3-arena-4-team-6-win)))"/>
    <trigger scope="match" action="team-7-defeat-team-5-msg" filter="all(team-5-vs-team-7, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-7-win), all(current_round=2, round-2-arena-4-team-7-win)))"/>
    <trigger scope="match" action="team-7-defeat-team-6-msg" filter="all(team-6-vs-team-7, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-7-win), all(current_round=2, round-2-arena-4-team-7-win)))"/>
    <trigger scope="match" action="team-7-defeat-team-1-msg" filter="all(team-1-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-7-win), all(current_round=3, round-3-arena-2-team-7-win), all(current_round=3, round-3-arena-3-team-7-win), all(current_round=3, round-3-arena-4-team-7-win)))"/>
    <trigger scope="match" action="team-7-defeat-team-2-msg" filter="all(team-2-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-7-win), all(current_round=3, round-3-arena-2-team-7-win), all(current_round=3, round-3-arena-3-team-7-win), all(current_round=3, round-3-arena-4-team-7-win)))"/>
    <trigger scope="match" action="team-7-defeat-team-3-msg" filter="all(team-3-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-7-win), all(current_round=3, round-3-arena-2-team-7-win), all(current_round=3, round-3-arena-3-team-7-win), all(current_round=3, round-3-arena-4-team-7-win)))"/>
    <trigger scope="match" action="team-7-defeat-team-4-msg" filter="all(team-4-vs-team-7, not(match-finished), any(all(current_round=3, round-3-arena-1-team-7-win), all(current_round=3, round-3-arena-2-team-7-win), all(current_round=3, round-3-arena-3-team-7-win), all(current_round=3, round-3-arena-4-team-7-win)))"/>
    <trigger scope="match" action="team-8-defeat-team-5-msg" filter="all(team-5-vs-team-8, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-8-win), all(current_round=2, round-2-arena-4-team-8-win)))"/>
    <trigger scope="match" action="team-8-defeat-team-6-msg" filter="all(team-6-vs-team-8, not(round-3-starting), any(all(current_round=2, round-2-arena-2-team-8-win), all(current_round=2, round-2-arena-4-team-8-win)))"/>
    <trigger scope="match" action="team-8-defeat-team-1-msg" filter="all(team-1-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-8-win), all(current_round=3, round-3-arena-2-team-8-win), all(current_round=3, round-3-arena-3-team-8-win), all(current_round=3, round-3-arena-4-team-8-win)))"/>
    <trigger scope="match" action="team-8-defeat-team-2-msg" filter="all(team-2-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-8-win), all(current_round=3, round-3-arena-2-team-8-win), all(current_round=3, round-3-arena-3-team-8-win), all(current_round=3, round-3-arena-4-team-8-win)))"/>
    <trigger scope="match" action="team-8-defeat-team-3-msg" filter="all(team-3-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-8-win), all(current_round=3, round-3-arena-2-team-8-win), all(current_round=3, round-3-arena-3-team-8-win), all(current_round=3, round-3-arena-4-team-8-win)))"/>
    <trigger scope="match" action="team-8-defeat-team-4-msg" filter="all(team-4-vs-team-8, not(match-finished), any(all(current_round=3, round-3-arena-1-team-8-win), all(current_round=3, round-3-arena-2-team-8-win), all(current_round=3, round-3-arena-3-team-8-win), all(current_round=3, round-3-arena-4-team-8-win)))"/>
    <trigger scope="team" filter="award-points">
        <action>
            <set var="score" value="score + 1"/>
        </action>
    </trigger>
    <action id="round-over-message-win" scope="team">
        <message text="{ translate: 'broadcast.gameOver.teamWon', color: 'green' }" subtitle="{ translate: 'broadcast.gameOver.teamWon', color: 'green' }"/>
        <sound preset="OBJECTIVE_GOOD"/>
        <sound preset="OBJECTIVE_FIREWORKS_TWINKLE"/>
    </action>
    <!-- <action id="round-over-message-loss" scope="team">
        <message text="{ translate: 'broadcast.gameOver.teamLost', color: 'red' }" subtitle="{ translate: 'broadcast.gameOver.teamLost', color: 'red' }"/>
        <sound preset="OBJECTIVE_BAD"/>
    </action> -->
    <trigger scope="team" action="round-over-message-win" filter="round-1-arena-1-winner"/>
    <trigger scope="team" action="round-over-message-win" filter="round-1-arena-2-winner"/>
    <trigger scope="team" action="round-over-message-win" filter="round-1-arena-3-winner"/>
    <trigger scope="team" action="round-over-message-win" filter="round-1-arena-4-winner"/>
    <trigger scope="team" action="round-over-message-win" filter="round-2-arena-1-winner"/>
    <trigger scope="team" action="round-over-message-win" filter="round-2-arena-2-winner"/>
    <trigger scope="team" action="round-over-message-win" filter="round-2-arena-3-winner"/>
    <trigger scope="team" action="round-over-message-win" filter="round-2-arena-4-winner"/>
    <trigger scope="team" action="round-over-message-win" filter="round-3-arena-1-winner"/>
    <trigger scope="team" action="round-over-message-win" filter="round-3-arena-2-winner"/>
    <trigger scope="team" action="round-over-message-win" filter="round-3-arena-3-winner"/>
    <trigger scope="team" action="round-over-message-win" filter="round-3-arena-4-winner"/>
</actions>
<control-points required="false" capture-time="0s" points="0" capture-rule="exclusive" permanent="true" show="false">
    <unless variant="cannon">
        <control-point id="round-1-arena-1-decider" name="round-1-arena-1-decider" capture="arena-1" capture-filter="allow-round-1-completion" player-filter="all(playing=1, round-1-arena-1-teams)"/>
        <control-point id="round-1-arena-2-decider" name="round-1-arena-2-decider" capture="arena-2" capture-filter="allow-round-1-completion" player-filter="all(playing=1, round-1-arena-2-teams)"/>
        <control-point id="round-1-arena-3-decider" name="round-1-arena-3-decider" capture="arena-3" capture-filter="allow-round-1-completion" player-filter="all(playing=1, round-1-arena-3-teams)"/>
        <control-point id="round-1-arena-4-decider" name="round-1-arena-4-decider" capture="arena-4" capture-filter="allow-round-1-completion" player-filter="all(playing=1, round-1-arena-4-teams)"/>
        <control-point id="round-2-arena-1-decider" name="round-2-arena-1-decider" capture="arena-1" capture-filter="allow-round-2-completion" player-filter="all(playing=1, round-2-arena-1-teams)"/>
        <control-point id="round-2-arena-2-decider" name="round-2-arena-2-decider" capture="arena-2" capture-filter="allow-round-2-completion" player-filter="all(playing=1, round-2-arena-2-teams)"/>
        <control-point id="round-2-arena-3-decider" name="round-2-arena-3-decider" capture="arena-3" capture-filter="allow-round-2-completion" player-filter="all(playing=1, round-2-arena-3-teams)"/>
        <control-point id="round-2-arena-4-decider" name="round-2-arena-4-decider" capture="arena-4" capture-filter="allow-round-2-completion" player-filter="all(playing=1, round-2-arena-4-teams)"/>
        <control-point id="round-3-arena-1-decider" name="round-3-arena-1-decider" capture="arena-1" capture-filter="allow-round-3-completion" player-filter="all(playing=1, round-3-arena-1-teams)"/>
        <control-point id="round-3-arena-2-decider" name="round-3-arena-2-decider" capture="arena-2" capture-filter="allow-round-3-completion" player-filter="all(playing=1, round-3-arena-2-teams)"/>
        <control-point id="round-3-arena-3-decider" name="round-3-arena-3-decider" capture="arena-3" capture-filter="allow-round-3-completion" player-filter="all(playing=1, round-3-arena-3-teams)"/>
        <control-point id="round-3-arena-4-decider" name="round-3-arena-4-decider" capture="arena-4" capture-filter="allow-round-3-completion" player-filter="all(playing=1, round-3-arena-4-teams)"/>
    </unless>
    <if variant="cannon">
        <control-point id="round-1-arena-1-decider" name="round-1-arena-1-decider" capture="arena-1" capture-filter="allow-round-1-completion" player-filter="all(playing=1, any(all(round-1-arena-1-teams, not(all(player-inside-round-1-arena-1-overtime-capture, overtime_level=3))), all(round-1-arena-1-teams, overtime_level=3, round-1-buildable-area-middle)))"/>
        <control-point id="round-1-arena-2-decider" name="round-1-arena-2-decider" capture="arena-2" capture-filter="allow-round-1-completion" player-filter="all(playing=1, any(all(round-1-arena-2-teams, not(all(player-inside-round-1-arena-2-overtime-capture, overtime_level=3))), all(round-1-arena-2-teams, overtime_level=3, round-1-buildable-area-middle)))"/>
        <control-point id="round-1-arena-3-decider" name="round-1-arena-3-decider" capture="arena-3" capture-filter="allow-round-1-completion" player-filter="all(playing=1, any(all(round-1-arena-3-teams, not(all(player-inside-round-1-arena-3-overtime-capture, overtime_level=3))), all(round-1-arena-3-teams, overtime_level=3, round-1-buildable-area-middle)))"/>
        <control-point id="round-1-arena-4-decider" name="round-1-arena-4-decider" capture="arena-4" capture-filter="allow-round-1-completion" player-filter="all(playing=1, any(all(round-1-arena-4-teams, not(all(player-inside-round-1-arena-4-overtime-capture, overtime_level=3))), all(round-1-arena-4-teams, overtime_level=3, round-1-buildable-area-middle)))"/>
        <control-point id="round-2-arena-1-decider" name="round-2-arena-1-decider" capture="arena-1" capture-filter="allow-round-2-completion" player-filter="all(playing=1, any(all(round-2-arena-1-teams, not(all(player-inside-round-2-arena-1-overtime-capture, overtime_level=3))), all(round-2-arena-1-teams, overtime_level=3, round-2-buildable-area-middle)))"/>
        <control-point id="round-2-arena-2-decider" name="round-2-arena-2-decider" capture="arena-2" capture-filter="allow-round-2-completion" player-filter="all(playing=1, any(all(round-2-arena-2-teams, not(all(player-inside-round-2-arena-2-overtime-capture, overtime_level=3))), all(round-2-arena-2-teams, overtime_level=3, round-2-buildable-area-middle)))"/>
        <control-point id="round-2-arena-3-decider" name="round-2-arena-3-decider" capture="arena-3" capture-filter="allow-round-2-completion" player-filter="all(playing=1, any(all(round-2-arena-3-teams, not(all(player-inside-round-2-arena-3-overtime-capture, overtime_level=3))), all(round-2-arena-3-teams, overtime_level=3, round-2-buildable-area-middle)))"/>
        <control-point id="round-2-arena-4-decider" name="round-2-arena-4-decider" capture="arena-4" capture-filter="allow-round-2-completion" player-filter="all(playing=1, any(all(round-2-arena-4-teams, not(all(player-inside-round-2-arena-4-overtime-capture, overtime_level=3))), all(round-2-arena-4-teams, overtime_level=3, round-2-buildable-area-middle)))"/>
        <control-point id="round-3-arena-1-decider" name="round-3-arena-1-decider" capture="arena-1" capture-filter="allow-round-3-completion" player-filter="all(playing=1, any(all(round-3-arena-1-teams, not(all(player-inside-round-3-arena-1-overtime-capture, overtime_level=3))), all(round-3-arena-1-teams, overtime_level=3, round-3-buildable-area-middle)))"/>
        <control-point id="round-3-arena-2-decider" name="round-3-arena-2-decider" capture="arena-2" capture-filter="allow-round-3-completion" player-filter="all(playing=1, any(all(round-3-arena-2-teams, not(all(player-inside-round-3-arena-2-overtime-capture, overtime_level=3))), all(round-3-arena-2-teams, overtime_level=3, round-3-buildable-area-middle)))"/>
        <control-point id="round-3-arena-3-decider" name="round-3-arena-3-decider" capture="arena-3" capture-filter="allow-round-3-completion" player-filter="all(playing=1, any(all(round-3-arena-3-teams, not(all(player-inside-round-3-arena-3-overtime-capture, overtime_level=3))), all(round-3-arena-3-teams, overtime_level=3, round-3-buildable-area-middle)))"/>
        <control-point id="round-3-arena-4-decider" name="round-3-arena-4-decider" capture="arena-4" capture-filter="allow-round-3-completion" player-filter="all(playing=1, any(all(round-3-arena-4-teams, not(all(player-inside-round-3-arena-4-overtime-capture, overtime_level=3))), all(round-3-arena-4-teams, overtime_level=3, round-3-buildable-area-middle)))"/>
    </if>
    <if variant="cacti">
        <control-points visual-materials="visual-blocks">
            <control-point id="round-1-arena-1-spawn-1-color-decider" name="round-1-arena-1-spawn-1-color-decider" capture="round-1-arena-1-spawn-1-color-objects" captured="round-1-arena-1-spawn-1-color-objects"/>
            <control-point id="round-1-arena-1-spawn-2-color-decider" name="round-1-arena-1-spawn-2-color-decider" capture="round-1-arena-1-spawn-2-color-objects" captured="round-1-arena-1-spawn-2-color-objects"/>
            <control-point id="round-1-arena-2-spawn-1-color-decider" name="round-1-arena-2-spawn-1-color-decider" capture="round-1-arena-2-spawn-1-color-objects" captured="round-1-arena-2-spawn-1-color-objects"/>
            <control-point id="round-1-arena-2-spawn-2-color-decider" name="round-1-arena-2-spawn-2-color-decider" capture="round-1-arena-2-spawn-2-color-objects" captured="round-1-arena-2-spawn-2-color-objects"/>
            <control-point id="round-1-arena-3-spawn-1-color-decider" name="round-1-arena-3-spawn-1-color-decider" capture="round-1-arena-3-spawn-1-color-objects" captured="round-1-arena-3-spawn-1-color-objects"/>
            <control-point id="round-1-arena-3-spawn-2-color-decider" name="round-1-arena-3-spawn-2-color-decider" capture="round-1-arena-3-spawn-2-color-objects" captured="round-1-arena-3-spawn-2-color-objects"/>
            <control-point id="round-1-arena-4-spawn-1-color-decider" name="round-1-arena-4-spawn-1-color-decider" capture="round-1-arena-4-spawn-1-color-objects" captured="round-1-arena-4-spawn-1-color-objects"/>
            <control-point id="round-1-arena-4-spawn-2-color-decider" name="round-1-arena-4-spawn-2-color-decider" capture="round-1-arena-4-spawn-2-color-objects" captured="round-1-arena-4-spawn-2-color-objects"/>
            <control-point id="round-2-arena-1-spawn-1-color-decider" name="round-2-arena-1-spawn-1-color-decider" capture="round-2-arena-1-spawn-1-color-objects" captured="round-2-arena-1-spawn-1-color-objects"/>
            <control-point id="round-2-arena-1-spawn-2-color-decider" name="round-2-arena-1-spawn-2-color-decider" capture="round-2-arena-1-spawn-2-color-objects" captured="round-2-arena-1-spawn-2-color-objects"/>
            <control-point id="round-2-arena-2-spawn-1-color-decider" name="round-2-arena-2-spawn-1-color-decider" capture="round-2-arena-2-spawn-1-color-objects" captured="round-2-arena-2-spawn-1-color-objects"/>
            <control-point id="round-2-arena-2-spawn-2-color-decider" name="round-2-arena-2-spawn-2-color-decider" capture="round-2-arena-2-spawn-2-color-objects" captured="round-2-arena-2-spawn-2-color-objects"/>
            <control-point id="round-2-arena-3-spawn-1-color-decider" name="round-2-arena-3-spawn-1-color-decider" capture="round-2-arena-3-spawn-1-color-objects" captured="round-2-arena-3-spawn-1-color-objects"/>
            <control-point id="round-2-arena-3-spawn-2-color-decider" name="round-2-arena-3-spawn-2-color-decider" capture="round-2-arena-3-spawn-2-color-objects" captured="round-2-arena-3-spawn-2-color-objects"/>
            <control-point id="round-2-arena-4-spawn-1-color-decider" name="round-2-arena-4-spawn-1-color-decider" capture="round-2-arena-4-spawn-1-color-objects" captured="round-2-arena-4-spawn-1-color-objects"/>
            <control-point id="round-2-arena-4-spawn-2-color-decider" name="round-2-arena-4-spawn-2-color-decider" capture="round-2-arena-4-spawn-2-color-objects" captured="round-2-arena-4-spawn-2-color-objects"/>
            <control-point id="round-3-arena-1-spawn-1-color-decider" name="round-3-arena-1-spawn-1-color-decider" capture="round-3-arena-1-spawn-1-color-objects" captured="round-3-arena-1-spawn-1-color-objects"/>
            <control-point id="round-3-arena-1-spawn-2-color-decider" name="round-3-arena-1-spawn-2-color-decider" capture="round-3-arena-1-spawn-2-color-objects" captured="round-3-arena-1-spawn-2-color-objects"/>
            <control-point id="round-3-arena-2-spawn-1-color-decider" name="round-3-arena-2-spawn-1-color-decider" capture="round-3-arena-2-spawn-1-color-objects" captured="round-3-arena-2-spawn-1-color-objects"/>
            <control-point id="round-3-arena-2-spawn-2-color-decider" name="round-3-arena-2-spawn-2-color-decider" capture="round-3-arena-2-spawn-2-color-objects" captured="round-3-arena-2-spawn-2-color-objects"/>
            <control-point id="round-3-arena-3-spawn-1-color-decider" name="round-3-arena-3-spawn-1-color-decider" capture="round-3-arena-3-spawn-1-color-objects" captured="round-3-arena-3-spawn-1-color-objects"/>
            <control-point id="round-3-arena-3-spawn-2-color-decider" name="round-3-arena-3-spawn-2-color-decider" capture="round-3-arena-3-spawn-2-color-objects" captured="round-3-arena-3-spawn-2-color-objects"/>
            <control-point id="round-3-arena-4-spawn-1-color-decider" name="round-3-arena-4-spawn-1-color-decider" capture="round-3-arena-4-spawn-1-color-objects" captured="round-3-arena-4-spawn-1-color-objects"/>
            <control-point id="round-3-arena-4-spawn-2-color-decider" name="round-3-arena-4-spawn-2-color-decider" capture="round-3-arena-4-spawn-2-color-objects" captured="round-3-arena-4-spawn-2-color-objects"/>
        </control-points>
    </if>
</control-points>
<portals sound="false">
    <portal destination="lobby-spawn" yaw="@90" forward="round-1-finished"/>
    <portal destination="lobby-spawn" yaw="@90" forward="round-2-finished"/>
    <portal destination="lobby-spawn" yaw="@90" forward="round-3-finished"/>
    <portal destination="round-1-arena-1-spectator" yaw="@90" forward="all(participating, playing=0, spectator_mode=0, not(all-arena-spectator), not(between-rounds))"/>
    <!--
    teleport players to respective arenas
    -->
    <portal destination="round-1-arena-1-spawn-1" yaw="@0"   forward="all(round-1-teleport, not(round-1-finished), round-1-arena-1-team-1)"/>
    <portal destination="round-1-arena-1-spawn-2" yaw="@180" forward="all(round-1-teleport, not(round-1-finished), round-1-arena-1-team-2)"/>
    <portal destination="round-1-arena-2-spawn-1" yaw="@0"   forward="all(round-1-teleport, not(round-1-finished), round-1-arena-2-team-1)"/>
    <portal destination="round-1-arena-2-spawn-2" yaw="@180" forward="all(round-1-teleport, not(round-1-finished), round-1-arena-2-team-2)"/>
    <portal destination="round-1-arena-3-spawn-1" yaw="@0"   forward="all(round-1-teleport, not(round-1-finished), round-1-arena-3-team-1)"/>
    <portal destination="round-1-arena-3-spawn-2" yaw="@180" forward="all(round-1-teleport, not(round-1-finished), round-1-arena-3-team-2)"/>
    <portal destination="round-1-arena-4-spawn-1" yaw="@0"   forward="all(round-1-teleport, not(round-1-finished), round-1-arena-4-team-1)"/>
    <portal destination="round-1-arena-4-spawn-2" yaw="@180" forward="all(round-1-teleport, not(round-1-finished), round-1-arena-4-team-2)"/>
    <portal destination="round-2-arena-1-spawn-1" yaw="@0"   forward="all(round-2-teleport, not(round-2-finished), round-2-arena-1-team-1)"/>
    <portal destination="round-2-arena-1-spawn-2" yaw="@180" forward="all(round-2-teleport, not(round-2-finished), round-2-arena-1-team-2)"/>
    <portal destination="round-2-arena-2-spawn-1" yaw="@0"   forward="all(round-2-teleport, not(round-2-finished), round-2-arena-2-team-1)"/>
    <portal destination="round-2-arena-2-spawn-2" yaw="@180" forward="all(round-2-teleport, not(round-2-finished), round-2-arena-2-team-2)"/>
    <portal destination="round-2-arena-3-spawn-1" yaw="@0"   forward="all(round-2-teleport, not(round-2-finished), round-2-arena-3-team-1)"/>
    <portal destination="round-2-arena-3-spawn-2" yaw="@180" forward="all(round-2-teleport, not(round-2-finished), round-2-arena-3-team-2)"/>
    <portal destination="round-2-arena-4-spawn-1" yaw="@0"   forward="all(round-2-teleport, not(round-2-finished), round-2-arena-4-team-1)"/>
    <portal destination="round-2-arena-4-spawn-2" yaw="@180" forward="all(round-2-teleport, not(round-2-finished), round-2-arena-4-team-2)"/>
    <portal destination="round-3-arena-1-spawn-1" yaw="@0"   forward="all(round-3-teleport, not(round-3-finished), round-3-arena-1-team-1)"/>
    <portal destination="round-3-arena-1-spawn-2" yaw="@180" forward="all(round-3-teleport, not(round-3-finished), round-3-arena-1-team-2)"/>
    <portal destination="round-3-arena-2-spawn-1" yaw="@0"   forward="all(round-3-teleport, not(round-3-finished), round-3-arena-2-team-1)"/>
    <portal destination="round-3-arena-2-spawn-2" yaw="@180" forward="all(round-3-teleport, not(round-3-finished), round-3-arena-2-team-2)"/>
    <portal destination="round-3-arena-3-spawn-1" yaw="@0"   forward="all(round-3-teleport, not(round-3-finished), round-3-arena-3-team-1)"/>
    <portal destination="round-3-arena-3-spawn-2" yaw="@180" forward="all(round-3-teleport, not(round-3-finished), round-3-arena-3-team-2)"/>
    <portal destination="round-3-arena-4-spawn-1" yaw="@0"   forward="all(round-3-teleport, not(round-3-finished), round-3-arena-4-team-1)"/>
    <portal destination="round-3-arena-4-spawn-2" yaw="@180" forward="all(round-3-teleport, not(round-3-finished), round-3-arena-4-team-2)"/>

    <!--
    rescue arena winners to spectator zone
    -->
    <portal destination="round-1-arena-1-spectator" yaw="@90" forward="all(participating, any(playing=1, all(playing=0, spectator_mode=0)), current_round=1, any(all(arena-1, round-1-arena-1-finished), all(arena-2, round-1-arena-2-finished), all(arena-3, round-1-arena-3-finished), all(arena-4, round-1-arena-4-finished)), not(round-1-arena-1-finished))"/>
    <portal destination="round-1-arena-2-spectator" yaw="@90" forward="all(participating, any(playing=1, all(playing=0, spectator_mode=0)), current_round=1, any(all(arena-1, round-1-arena-1-finished), all(arena-2, round-1-arena-2-finished), all(arena-3, round-1-arena-3-finished), all(arena-4, round-1-arena-4-finished)), not(round-1-arena-2-finished))"/>
    <portal destination="round-1-arena-3-spectator" yaw="@90" forward="all(participating, any(playing=1, all(playing=0, spectator_mode=0)), current_round=1, any(all(arena-1, round-1-arena-1-finished), all(arena-2, round-1-arena-2-finished), all(arena-3, round-1-arena-3-finished), all(arena-4, round-1-arena-4-finished)), not(round-1-arena-3-finished))"/>
    <portal destination="round-1-arena-4-spectator" yaw="@90" forward="all(participating, any(playing=1, all(playing=0, spectator_mode=0)), current_round=1, any(all(arena-1, round-1-arena-1-finished), all(arena-2, round-1-arena-2-finished), all(arena-3, round-1-arena-3-finished), all(arena-4, round-1-arena-4-finished)), not(round-1-arena-4-finished))"/>
    <portal destination="lobby-spawn"                         forward="all(participating, any(playing=1, all(playing=0, spectator_mode=0)), current_round=1, any(all(arena-1, round-1-arena-1-finished), all(arena-2, round-1-arena-2-finished), all(arena-3, round-1-arena-3-finished), all(arena-4, round-1-arena-4-finished)), round-1-finished)"/>
    <portal destination="round-2-arena-1-spectator" yaw="@90" forward="all(participating, any(playing=1, all(playing=0, spectator_mode=0)), current_round=2, any(all(arena-1, round-2-arena-1-finished), all(arena-2, round-2-arena-2-finished), all(arena-3, round-2-arena-3-finished), all(arena-4, round-2-arena-4-finished)), not(round-2-arena-1-finished))"/>
    <portal destination="round-2-arena-2-spectator" yaw="@90" forward="all(participating, any(playing=1, all(playing=0, spectator_mode=0)), current_round=2, any(all(arena-1, round-2-arena-1-finished), all(arena-2, round-2-arena-2-finished), all(arena-3, round-2-arena-3-finished), all(arena-4, round-2-arena-4-finished)), not(round-2-arena-2-finished))"/>
    <portal destination="round-2-arena-3-spectator" yaw="@90" forward="all(participating, any(playing=1, all(playing=0, spectator_mode=0)), current_round=2, any(all(arena-1, round-2-arena-1-finished), all(arena-2, round-2-arena-2-finished), all(arena-3, round-2-arena-3-finished), all(arena-4, round-2-arena-4-finished)), not(round-2-arena-3-finished))"/>
    <portal destination="round-2-arena-4-spectator" yaw="@90" forward="all(participating, any(playing=1, all(playing=0, spectator_mode=0)), current_round=2, any(all(arena-1, round-2-arena-1-finished), all(arena-2, round-2-arena-2-finished), all(arena-3, round-2-arena-3-finished), all(arena-4, round-2-arena-4-finished)), not(round-2-arena-4-finished))"/>
    <portal destination="lobby-spawn"                         forward="all(participating, any(playing=1, all(playing=0, spectator_mode=0)), current_round=2, any(all(arena-1, round-2-arena-1-finished), all(arena-2, round-2-arena-2-finished), all(arena-3, round-2-arena-3-finished), all(arena-4, round-2-arena-4-finished)), round-2-finished)"/>
    <portal destination="round-3-arena-1-spectator" yaw="@90" forward="all(participating, any(playing=1, all(playing=0, spectator_mode=0)), current_round=3, any(all(arena-1, round-3-arena-1-finished), all(arena-2, round-3-arena-2-finished), all(arena-3, round-3-arena-3-finished), all(arena-4, round-3-arena-4-finished)), not(round-3-arena-1-finished))"/>
    <portal destination="round-3-arena-2-spectator" yaw="@90" forward="all(participating, any(playing=1, all(playing=0, spectator_mode=0)), current_round=3, any(all(arena-1, round-3-arena-1-finished), all(arena-2, round-3-arena-2-finished), all(arena-3, round-3-arena-3-finished), all(arena-4, round-3-arena-4-finished)), not(round-3-arena-2-finished))"/>
    <portal destination="round-3-arena-3-spectator" yaw="@90" forward="all(participating, any(playing=1, all(playing=0, spectator_mode=0)), current_round=3, any(all(arena-1, round-3-arena-1-finished), all(arena-2, round-3-arena-2-finished), all(arena-3, round-3-arena-3-finished), all(arena-4, round-3-arena-4-finished)), not(round-3-arena-3-finished))"/>
    <portal destination="round-3-arena-4-spectator" yaw="@90" forward="all(participating, any(playing=1, all(playing=0, spectator_mode=0)), current_round=3, any(all(arena-1, round-3-arena-1-finished), all(arena-2, round-3-arena-2-finished), all(arena-3, round-3-arena-3-finished), all(arena-4, round-3-arena-4-finished)), not(round-3-arena-4-finished))"/>
    <portal destination="lobby-spawn"                         forward="all(participating, any(playing=1, all(playing=0, spectator_mode=0)), current_round=3, any(all(arena-1, round-3-arena-1-finished), all(arena-2, round-3-arena-2-finished), all(arena-3, round-3-arena-3-finished), all(arena-4, round-3-arena-4-finished)), round-3-finished)"/>
    <!--
    inter-arena portals
    -->
    <portal destination="round-1-arena-2-spectator" yaw="@90" forward="all(current_round=1, not(spectator_mode=1), any(all(arena-1-spectator, round-1-arena-1-finished, not(round-1-finished)), round-1-arena-1-spectator-portal), not(round-1-arena-2-finished))"/>
    <portal destination="round-1-arena-3-spectator" yaw="@90" forward="all(current_round=1, not(spectator_mode=1), any(all(arena-1-spectator, round-1-arena-1-finished, not(round-1-finished)), round-1-arena-1-spectator-portal), not(round-1-arena-3-finished), round-1-arena-2-finished)"/>
    <portal destination="round-1-arena-4-spectator" yaw="@90" forward="all(current_round=1, not(spectator_mode=1), any(all(arena-1-spectator, round-1-arena-1-finished, not(round-1-finished)), round-1-arena-1-spectator-portal), not(round-1-arena-4-finished), round-1-arena-2-finished, round-1-arena-3-finished)"/>
    <portal destination="round-1-arena-3-spectator" yaw="@90" forward="all(current_round=1, not(spectator_mode=1), any(all(arena-2-spectator, round-1-arena-2-finished, not(round-1-finished)), round-1-arena-2-spectator-portal), not(round-1-arena-3-finished))"/>
    <portal destination="round-1-arena-4-spectator" yaw="@90" forward="all(current_round=1, not(spectator_mode=1), any(all(arena-2-spectator, round-1-arena-2-finished, not(round-1-finished)), round-1-arena-2-spectator-portal), not(round-1-arena-4-finished), round-1-arena-3-finished)"/>
    <portal destination="round-1-arena-1-spectator" yaw="@90" forward="all(current_round=1, not(spectator_mode=1), any(all(arena-2-spectator, round-1-arena-2-finished, not(round-1-finished)), round-1-arena-2-spectator-portal), not(round-1-arena-1-finished), round-1-arena-3-finished, round-1-arena-4-finished)"/>
    <portal destination="round-1-arena-4-spectator" yaw="@90" forward="all(current_round=1, not(spectator_mode=1), any(all(arena-3-spectator, round-1-arena-3-finished, not(round-1-finished)), round-1-arena-3-spectator-portal), not(round-1-arena-4-finished))"/>
    <portal destination="round-1-arena-1-spectator" yaw="@90" forward="all(current_round=1, not(spectator_mode=1), any(all(arena-3-spectator, round-1-arena-3-finished, not(round-1-finished)), round-1-arena-3-spectator-portal), not(round-1-arena-1-finished), round-1-arena-4-finished)"/>
    <portal destination="round-1-arena-2-spectator" yaw="@90" forward="all(current_round=1, not(spectator_mode=1), any(all(arena-3-spectator, round-1-arena-3-finished, not(round-1-finished)), round-1-arena-3-spectator-portal), not(round-1-arena-2-finished), round-1-arena-4-finished, round-1-arena-1-finished)"/>
    <portal destination="round-1-arena-1-spectator" yaw="@90" forward="all(current_round=1, not(spectator_mode=1), any(all(arena-4-spectator, round-1-arena-4-finished, not(round-1-finished)), round-1-arena-4-spectator-portal), not(round-1-arena-1-finished))"/>
    <portal destination="round-1-arena-2-spectator" yaw="@90" forward="all(current_round=1, not(spectator_mode=1), any(all(arena-4-spectator, round-1-arena-4-finished, not(round-1-finished)), round-1-arena-4-spectator-portal), not(round-1-arena-2-finished), round-1-arena-1-finished)"/>
    <portal destination="round-1-arena-3-spectator" yaw="@90" forward="all(current_round=1, not(spectator_mode=1), any(all(arena-4-spectator, round-1-arena-4-finished, not(round-1-finished)), round-1-arena-4-spectator-portal), not(round-1-arena-3-finished), round-1-arena-1-finished, round-1-arena-2-finished)"/>
    <portal destination="round-2-arena-2-spectator" yaw="@90" forward="all(current_round=2, not(spectator_mode=1), any(all(arena-1-spectator, round-2-arena-1-finished, not(round-2-finished)), round-2-arena-1-spectator-portal), not(round-2-arena-2-finished))"/>
    <portal destination="round-2-arena-3-spectator" yaw="@90" forward="all(current_round=2, not(spectator_mode=1), any(all(arena-1-spectator, round-2-arena-1-finished, not(round-2-finished)), round-2-arena-1-spectator-portal), not(round-2-arena-3-finished), round-2-arena-2-finished)"/>
    <portal destination="round-2-arena-4-spectator" yaw="@90" forward="all(current_round=2, not(spectator_mode=1), any(all(arena-1-spectator, round-2-arena-1-finished, not(round-2-finished)), round-2-arena-1-spectator-portal), not(round-2-arena-4-finished), round-2-arena-2-finished, round-2-arena-3-finished)"/>
    <portal destination="round-2-arena-3-spectator" yaw="@90" forward="all(current_round=2, not(spectator_mode=1), any(all(arena-2-spectator, round-2-arena-2-finished, not(round-2-finished)), round-2-arena-2-spectator-portal), not(round-2-arena-3-finished))"/>
    <portal destination="round-2-arena-4-spectator" yaw="@90" forward="all(current_round=2, not(spectator_mode=1), any(all(arena-2-spectator, round-2-arena-2-finished, not(round-2-finished)), round-2-arena-2-spectator-portal), not(round-2-arena-4-finished), round-2-arena-3-finished)"/>
    <portal destination="round-2-arena-1-spectator" yaw="@90" forward="all(current_round=2, not(spectator_mode=1), any(all(arena-2-spectator, round-2-arena-2-finished, not(round-2-finished)), round-2-arena-2-spectator-portal), not(round-2-arena-1-finished), round-2-arena-3-finished, round-2-arena-4-finished)"/>
    <portal destination="round-2-arena-4-spectator" yaw="@90" forward="all(current_round=2, not(spectator_mode=1), any(all(arena-3-spectator, round-2-arena-3-finished, not(round-2-finished)), round-2-arena-3-spectator-portal), not(round-2-arena-4-finished))"/>
    <portal destination="round-2-arena-1-spectator" yaw="@90" forward="all(current_round=2, not(spectator_mode=1), any(all(arena-3-spectator, round-2-arena-3-finished, not(round-2-finished)), round-2-arena-3-spectator-portal), not(round-2-arena-1-finished), round-2-arena-4-finished)"/>
    <portal destination="round-2-arena-2-spectator" yaw="@90" forward="all(current_round=2, not(spectator_mode=1), any(all(arena-3-spectator, round-2-arena-3-finished, not(round-2-finished)), round-2-arena-3-spectator-portal), not(round-2-arena-2-finished), round-2-arena-4-finished, round-2-arena-1-finished)"/>
    <portal destination="round-2-arena-1-spectator" yaw="@90" forward="all(current_round=2, not(spectator_mode=1), any(all(arena-4-spectator, round-2-arena-4-finished, not(round-2-finished)), round-2-arena-4-spectator-portal), not(round-2-arena-1-finished))"/>
    <portal destination="round-2-arena-2-spectator" yaw="@90" forward="all(current_round=2, not(spectator_mode=1), any(all(arena-4-spectator, round-2-arena-4-finished, not(round-2-finished)), round-2-arena-4-spectator-portal), not(round-2-arena-2-finished), round-2-arena-1-finished)"/>
    <portal destination="round-2-arena-3-spectator" yaw="@90" forward="all(current_round=2, not(spectator_mode=1), any(all(arena-4-spectator, round-2-arena-4-finished, not(round-2-finished)), round-2-arena-4-spectator-portal), not(round-2-arena-3-finished), round-2-arena-1-finished, round-2-arena-2-finished)"/>
    <portal destination="round-3-arena-2-spectator" yaw="@90" forward="all(current_round=3, not(spectator_mode=1), any(all(arena-1-spectator, round-3-arena-1-finished, not(round-3-finished)), round-3-arena-1-spectator-portal), not(round-3-arena-2-finished))"/>
    <portal destination="round-3-arena-3-spectator" yaw="@90" forward="all(current_round=3, not(spectator_mode=1), any(all(arena-1-spectator, round-3-arena-1-finished, not(round-3-finished)), round-3-arena-1-spectator-portal), not(round-3-arena-3-finished), round-3-arena-2-finished)"/>
    <portal destination="round-3-arena-4-spectator" yaw="@90" forward="all(current_round=3, not(spectator_mode=1), any(all(arena-1-spectator, round-3-arena-1-finished, not(round-3-finished)), round-3-arena-1-spectator-portal), not(round-3-arena-4-finished), round-3-arena-2-finished, round-3-arena-3-finished)"/>
    <portal destination="round-3-arena-3-spectator" yaw="@90" forward="all(current_round=3, not(spectator_mode=1), any(all(arena-2-spectator, round-3-arena-2-finished, not(round-3-finished)), round-3-arena-2-spectator-portal), not(round-3-arena-3-finished))"/>
    <portal destination="round-3-arena-4-spectator" yaw="@90" forward="all(current_round=3, not(spectator_mode=1), any(all(arena-2-spectator, round-3-arena-2-finished, not(round-3-finished)), round-3-arena-2-spectator-portal), not(round-3-arena-4-finished), round-3-arena-3-finished)"/>
    <portal destination="round-3-arena-1-spectator" yaw="@90" forward="all(current_round=3, not(spectator_mode=1), any(all(arena-2-spectator, round-3-arena-2-finished, not(round-3-finished)), round-3-arena-2-spectator-portal), not(round-3-arena-1-finished), round-3-arena-3-finished, round-3-arena-4-finished)"/>
    <portal destination="round-3-arena-4-spectator" yaw="@90" forward="all(current_round=3, not(spectator_mode=1), any(all(arena-3-spectator, round-3-arena-3-finished, not(round-3-finished)), round-3-arena-3-spectator-portal), not(round-3-arena-4-finished))"/>
    <portal destination="round-3-arena-1-spectator" yaw="@90" forward="all(current_round=3, not(spectator_mode=1), any(all(arena-3-spectator, round-3-arena-3-finished, not(round-3-finished)), round-3-arena-3-spectator-portal), not(round-3-arena-1-finished), round-3-arena-4-finished)"/>
    <portal destination="round-3-arena-2-spectator" yaw="@90" forward="all(current_round=3, not(spectator_mode=1), any(all(arena-3-spectator, round-3-arena-3-finished, not(round-3-finished)), round-3-arena-3-spectator-portal), not(round-3-arena-2-finished), round-3-arena-4-finished, round-3-arena-1-finished)"/>
    <portal destination="round-3-arena-1-spectator" yaw="@90" forward="all(current_round=3, not(spectator_mode=1), any(all(arena-4-spectator, round-3-arena-4-finished, not(round-3-finished)), round-3-arena-4-spectator-portal), not(round-3-arena-1-finished))"/>
    <portal destination="round-3-arena-2-spectator" yaw="@90" forward="all(current_round=3, not(spectator_mode=1), any(all(arena-4-spectator, round-3-arena-4-finished, not(round-3-finished)), round-3-arena-4-spectator-portal), not(round-3-arena-2-finished), round-3-arena-1-finished)"/>
    <portal destination="round-3-arena-3-spectator" yaw="@90" forward="all(current_round=3, not(spectator_mode=1), any(all(arena-4-spectator, round-3-arena-4-finished, not(round-3-finished)), round-3-arena-4-spectator-portal), not(round-3-arena-3-finished), round-3-arena-1-finished, round-3-arena-2-finished)"/>
    <if variant="cannon">
        <!-- hack to move players to offset platforms -->
        <portal x="9" z="1" y="0">
            <forward>
                <all>
                    <after duration="0.1" filter="all(participating, playing=1, current_kit=3, any(all(current_round=1, round-1-begin), all(current_round=2, round-2-begin), all(current_round=3, round-3-begin)), all-arenas, not(all-side-2-platforms))"/>
                    <not>
                        <after duration="0.5" filter="all(any(all(current_round=1, round-1-starting), all(current_round=2, round-2-starting), all(current_round=3, round-3-starting)), not(between-rounds))"/>
                    </not>
                </all>
            </forward>
        </portal>
        <portal x="-9" z="-1" y="0">
            <forward>
                <all>
                    <after duration="0.1" filter="all(participating, playing=1, current_kit=3, any(all(current_round=1, round-1-begin), all(current_round=2, round-2-begin), all(current_round=3, round-3-begin)), all-arenas, all-side-2-platforms)"/>
                    <not>
                        <after duration="0.5" filter="all(any(all(current_round=1, round-1-starting), all(current_round=2, round-2-starting), all(current_round=3, round-3-starting)), not(between-rounds))"/>
                    </not>
                </all>
            </forward>
        </portal>
    </if>
</portals>
<if variant="spleef">
    <renewables>
        <renewable region="all-arenas" interval="80" grow="false" particles="true">
            <renew-filter>
                <material>snow block</material>
            </renew-filter>
            <replace-filter>
                <material>air</material>
            </replace-filter>
        </renewable>
    </renewables>
</if>
<if variant="cannon">
    <structures update="false" air="true">
        <structure id="arena-struct-1" region="arena-layout-1"/>
        <structure id="arena-struct-2" region="arena-layout-2"/>
        <structure id="arena-struct-3" region="arena-layout-3"/>
        <structure id="arena-struct-4" region="arena-layout-4"/>
        <structure id="arena-struct-5" region="arena-layout-5"/>
        <structure id="arena-struct-6" region="arena-layout-6"/>
        <structure id="arena-struct-7" region="arena-layout-7"/>
        <structure id="arena-struct-8" region="arena-layout-8"/>
        <structure id="arena-struct-9" region="arena-layout-9"/>
        <structure id="arena-struct-10" region="arena-layout-10"/>
        <structure id="arena-struct-11" region="arena-layout-11"/>
        <!-- round 1 layout 1 -->
        <dynamic structure="arena-struct-1" location="144,0,-65" trigger="round_1_kit=1"/>
        <dynamic structure="arena-struct-1" location="100,0,-65" trigger="round_1_kit=1"/>
        <dynamic structure="arena-struct-1" location="56,0,-65" trigger="round_1_kit=1"/>
        <dynamic structure="arena-struct-1" location="12,0,-65" trigger="round_1_kit=1"/>
        <!-- round 1 layout 2 -->
        <dynamic structure="arena-struct-2" location="144,0,-65" trigger="round_1_kit=2"/>
        <dynamic structure="arena-struct-2" location="100,0,-65" trigger="round_1_kit=2"/>
        <dynamic structure="arena-struct-2" location="56,0,-65" trigger="round_1_kit=2"/>
        <dynamic structure="arena-struct-2" location="12,0,-65" trigger="round_1_kit=2"/>
        <!-- round 1 layout 3 -->
        <dynamic structure="arena-struct-3" location="144,0,-65" trigger="round_1_kit=3"/>
        <dynamic structure="arena-struct-3" location="100,0,-65" trigger="round_1_kit=3"/>
        <dynamic structure="arena-struct-3" location="56,0,-65" trigger="round_1_kit=3"/>
        <dynamic structure="arena-struct-3" location="12,0,-65" trigger="round_1_kit=3"/>
        <!-- round 1 layout 4 -->
        <dynamic structure="arena-struct-4" location="144,0,-65" trigger="round_1_kit=4"/>
        <dynamic structure="arena-struct-4" location="100,0,-65" trigger="round_1_kit=4"/>
        <dynamic structure="arena-struct-4" location="56,0,-65" trigger="round_1_kit=4"/>
        <dynamic structure="arena-struct-4" location="12,0,-65" trigger="round_1_kit=4"/>
        <!-- round 1 layout 5 -->
        <dynamic structure="arena-struct-5" location="144,0,-65" trigger="round_1_kit=5"/>
        <dynamic structure="arena-struct-5" location="100,0,-65" trigger="round_1_kit=5"/>
        <dynamic structure="arena-struct-5" location="56,0,-65" trigger="round_1_kit=5"/>
        <dynamic structure="arena-struct-5" location="12,0,-65" trigger="round_1_kit=5"/>
        <!-- round 1 layout 6 -->
        <dynamic structure="arena-struct-6" location="144,0,-65" trigger="round_1_kit=6"/>
        <dynamic structure="arena-struct-6" location="100,0,-65" trigger="round_1_kit=6"/>
        <dynamic structure="arena-struct-6" location="56,0,-65" trigger="round_1_kit=6"/>
        <dynamic structure="arena-struct-6" location="12,0,-65" trigger="round_1_kit=6"/>
        <!-- round 1 layout 7 -->
        <dynamic structure="arena-struct-7" location="144,0,-65" trigger="round_1_kit=7"/>
        <dynamic structure="arena-struct-7" location="100,0,-65" trigger="round_1_kit=7"/>
        <dynamic structure="arena-struct-7" location="56,0,-65" trigger="round_1_kit=7"/>
        <dynamic structure="arena-struct-7" location="12,0,-65" trigger="round_1_kit=7"/>
        <!-- round 1 layout 8 -->
        <dynamic structure="arena-struct-8" location="144,0,-65" trigger="round_1_kit=8"/>
        <dynamic structure="arena-struct-8" location="100,0,-65" trigger="round_1_kit=8"/>
        <dynamic structure="arena-struct-8" location="56,0,-65" trigger="round_1_kit=8"/>
        <dynamic structure="arena-struct-8" location="12,0,-65" trigger="round_1_kit=8"/>
        <!-- round 1 layout 9 -->
        <dynamic structure="arena-struct-9" location="144,0,-65" trigger="round_1_kit=9"/>
        <dynamic structure="arena-struct-9" location="100,0,-65" trigger="round_1_kit=9"/>
        <dynamic structure="arena-struct-9" location="56,0,-65" trigger="round_1_kit=9"/>
        <dynamic structure="arena-struct-9" location="12,0,-65" trigger="round_1_kit=9"/>
        <!-- round 1 layout 10 -->
        <dynamic structure="arena-struct-10" location="144,0,-65" trigger="round_1_kit=10"/>
        <dynamic structure="arena-struct-10" location="100,0,-65" trigger="round_1_kit=10"/>
        <dynamic structure="arena-struct-10" location="56,0,-65" trigger="round_1_kit=10"/>
        <dynamic structure="arena-struct-10" location="12,0,-65" trigger="round_1_kit=10"/>
        <!-- round 1 layout 11 -->
        <dynamic structure="arena-struct-11" location="144,0,-65" trigger="round_1_kit=11"/>
        <dynamic structure="arena-struct-11" location="100,0,-65" trigger="round_1_kit=11"/>
        <dynamic structure="arena-struct-11" location="56,0,-65" trigger="round_1_kit=11"/>
        <dynamic structure="arena-struct-11" location="12,0,-65" trigger="round_1_kit=11"/>
        <!-- round 2 layout 1 -->
        <dynamic structure="arena-struct-1" location="144,0,1" trigger="round_2_kit=1"/>
        <dynamic structure="arena-struct-1" location="100,0,1" trigger="round_2_kit=1"/>
        <dynamic structure="arena-struct-1" location="56,0,1" trigger="round_2_kit=1"/>
        <dynamic structure="arena-struct-1" location="12,0,1" trigger="round_2_kit=1"/>
        <!-- round 2 layout 2 -->
        <dynamic structure="arena-struct-2" location="144,0,1" trigger="round_2_kit=2"/>
        <dynamic structure="arena-struct-2" location="100,0,1" trigger="round_2_kit=2"/>
        <dynamic structure="arena-struct-2" location="56,0,1" trigger="round_2_kit=2"/>
        <dynamic structure="arena-struct-2" location="12,0,1" trigger="round_2_kit=2"/>
        <!-- round 2 layout 3 -->
        <dynamic structure="arena-struct-3" location="144,0,1" trigger="round_2_kit=3"/>
        <dynamic structure="arena-struct-3" location="100,0,1" trigger="round_2_kit=3"/>
        <dynamic structure="arena-struct-3" location="56,0,1" trigger="round_2_kit=3"/>
        <dynamic structure="arena-struct-3" location="12,0,1" trigger="round_2_kit=3"/>
        <!-- round 2 layout 4 -->
        <dynamic structure="arena-struct-4" location="144,0,1" trigger="round_2_kit=4"/>
        <dynamic structure="arena-struct-4" location="100,0,1" trigger="round_2_kit=4"/>
        <dynamic structure="arena-struct-4" location="56,0,1" trigger="round_2_kit=4"/>
        <dynamic structure="arena-struct-4" location="12,0,1" trigger="round_2_kit=4"/>
        <!-- round 2 layout 5 -->
        <dynamic structure="arena-struct-5" location="144,0,1" trigger="round_2_kit=5"/>
        <dynamic structure="arena-struct-5" location="100,0,1" trigger="round_2_kit=5"/>
        <dynamic structure="arena-struct-5" location="56,0,1" trigger="round_2_kit=5"/>
        <dynamic structure="arena-struct-5" location="12,0,1" trigger="round_2_kit=5"/>
        <!-- round 2 layout 6 -->
        <dynamic structure="arena-struct-6" location="144,0,1" trigger="round_2_kit=6"/>
        <dynamic structure="arena-struct-6" location="100,0,1" trigger="round_2_kit=6"/>
        <dynamic structure="arena-struct-6" location="56,0,1" trigger="round_2_kit=6"/>
        <dynamic structure="arena-struct-6" location="12,0,1" trigger="round_2_kit=6"/>
        <!-- round 2 layout 7 -->
        <dynamic structure="arena-struct-7" location="144,0,1" trigger="round_2_kit=7"/>
        <dynamic structure="arena-struct-7" location="100,0,1" trigger="round_2_kit=7"/>
        <dynamic structure="arena-struct-7" location="56,0,1" trigger="round_2_kit=7"/>
        <dynamic structure="arena-struct-7" location="12,0,1" trigger="round_2_kit=7"/>
        <!-- round 2 layout 8 -->
        <dynamic structure="arena-struct-8" location="144,0,1" trigger="round_2_kit=8"/>
        <dynamic structure="arena-struct-8" location="100,0,1" trigger="round_2_kit=8"/>
        <dynamic structure="arena-struct-8" location="56,0,1" trigger="round_2_kit=8"/>
        <dynamic structure="arena-struct-8" location="12,0,1" trigger="round_2_kit=8"/>
        <!-- round 2 layout 9 -->
        <dynamic structure="arena-struct-9" location="144,0,1" trigger="round_2_kit=9"/>
        <dynamic structure="arena-struct-9" location="100,0,1" trigger="round_2_kit=9"/>
        <dynamic structure="arena-struct-9" location="56,0,1" trigger="round_2_kit=9"/>
        <dynamic structure="arena-struct-9" location="12,0,1" trigger="round_2_kit=9"/>
        <!-- round 2 layout 10 -->
        <dynamic structure="arena-struct-10" location="144,0,1" trigger="round_2_kit=10"/>
        <dynamic structure="arena-struct-10" location="100,0,1" trigger="round_2_kit=10"/>
        <dynamic structure="arena-struct-10" location="56,0,1" trigger="round_2_kit=10"/>
        <dynamic structure="arena-struct-10" location="12,0,1" trigger="round_2_kit=10"/>
        <!-- round 2 layout 11 -->
        <dynamic structure="arena-struct-11" location="144,0,1" trigger="round_2_kit=11"/>
        <dynamic structure="arena-struct-11" location="100,0,1" trigger="round_2_kit=11"/>
        <dynamic structure="arena-struct-11" location="56,0,1" trigger="round_2_kit=11"/>
        <dynamic structure="arena-struct-11" location="12,0,1" trigger="round_2_kit=11"/>
        <!-- round 3 layout 1 -->
        <dynamic structure="arena-struct-1" location="144,0,67" trigger="round_3_kit=1"/>
        <dynamic structure="arena-struct-1" location="100,0,67" trigger="round_3_kit=1"/>
        <dynamic structure="arena-struct-1" location="56,0,67" trigger="round_3_kit=1"/>
        <dynamic structure="arena-struct-1" location="12,0,67" trigger="round_3_kit=1"/>
        <!-- round 3 layout 2 -->
        <dynamic structure="arena-struct-2" location="144,0,67" trigger="round_3_kit=2"/>
        <dynamic structure="arena-struct-2" location="100,0,67" trigger="round_3_kit=2"/>
        <dynamic structure="arena-struct-2" location="56,0,67" trigger="round_3_kit=2"/>
        <dynamic structure="arena-struct-2" location="12,0,67" trigger="round_3_kit=2"/>
        <!-- round 3 layout 3 -->
        <dynamic structure="arena-struct-3" location="144,0,67" trigger="round_3_kit=3"/>
        <dynamic structure="arena-struct-3" location="100,0,67" trigger="round_3_kit=3"/>
        <dynamic structure="arena-struct-3" location="56,0,67" trigger="round_3_kit=3"/>
        <dynamic structure="arena-struct-3" location="12,0,67" trigger="round_3_kit=3"/>
        <!-- round 3 layout 4 -->
        <dynamic structure="arena-struct-4" location="144,0,67" trigger="round_3_kit=4"/>
        <dynamic structure="arena-struct-4" location="100,0,67" trigger="round_3_kit=4"/>
        <dynamic structure="arena-struct-4" location="56,0,67" trigger="round_3_kit=4"/>
        <dynamic structure="arena-struct-4" location="12,0,67" trigger="round_3_kit=4"/>
        <!-- round 3 layout 5 -->
        <dynamic structure="arena-struct-5" location="144,0,67" trigger="round_3_kit=5"/>
        <dynamic structure="arena-struct-5" location="100,0,67" trigger="round_3_kit=5"/>
        <dynamic structure="arena-struct-5" location="56,0,67" trigger="round_3_kit=5"/>
        <dynamic structure="arena-struct-5" location="12,0,67" trigger="round_3_kit=5"/>
        <!-- round 3 layout 6 -->
        <dynamic structure="arena-struct-6" location="144,0,67" trigger="round_3_kit=6"/>
        <dynamic structure="arena-struct-6" location="100,0,67" trigger="round_3_kit=6"/>
        <dynamic structure="arena-struct-6" location="56,0,67" trigger="round_3_kit=6"/>
        <dynamic structure="arena-struct-6" location="12,0,67" trigger="round_3_kit=6"/>
        <!-- round 3 layout 7 -->
        <dynamic structure="arena-struct-7" location="144,0,67" trigger="round_3_kit=7"/>
        <dynamic structure="arena-struct-7" location="100,0,67" trigger="round_3_kit=7"/>
        <dynamic structure="arena-struct-7" location="56,0,67" trigger="round_3_kit=7"/>
        <dynamic structure="arena-struct-7" location="12,0,67" trigger="round_3_kit=7"/>
        <!-- round 3 layout 8 -->
        <dynamic structure="arena-struct-8" location="144,0,67" trigger="round_3_kit=8"/>
        <dynamic structure="arena-struct-8" location="100,0,67" trigger="round_3_kit=8"/>
        <dynamic structure="arena-struct-8" location="56,0,67" trigger="round_3_kit=8"/>
        <dynamic structure="arena-struct-8" location="12,0,67" trigger="round_3_kit=8"/>
        <!-- round 3 layout 9 -->
        <dynamic structure="arena-struct-9" location="144,0,67" trigger="round_3_kit=9"/>
        <dynamic structure="arena-struct-9" location="100,0,67" trigger="round_3_kit=9"/>
        <dynamic structure="arena-struct-9" location="56,0,67" trigger="round_3_kit=9"/>
        <dynamic structure="arena-struct-9" location="12,0,67" trigger="round_3_kit=9"/>
        <!-- round 3 layout 10 -->
        <dynamic structure="arena-struct-10" location="144,0,67" trigger="round_3_kit=10"/>
        <dynamic structure="arena-struct-10" location="100,0,67" trigger="round_3_kit=10"/>
        <dynamic structure="arena-struct-10" location="56,0,67" trigger="round_3_kit=10"/>
        <dynamic structure="arena-struct-10" location="12,0,67" trigger="round_3_kit=10"/>
        <!-- round 3 layout 11 -->
        <dynamic structure="arena-struct-11" location="144,0,67" trigger="round_3_kit=11"/>
        <dynamic structure="arena-struct-11" location="100,0,67" trigger="round_3_kit=11"/>
        <dynamic structure="arena-struct-11" location="56,0,67" trigger="round_3_kit=11"/>
        <dynamic structure="arena-struct-11" location="12,0,67" trigger="round_3_kit=11"/>
    </structures>
</if>
<if variant="cacti">
    <spawners max-entities="1" delay="8s">
        <spawner spawn-region="round-1-arena-1-spawner" player-region="arena-1" filter="all(participating, round-1, playing=1)">
            <item material="snow ball"/>
        </spawner>
        <spawner spawn-region="round-1-arena-2-spawner" player-region="arena-2" filter="all(participating, round-1, playing=1)">
            <item material="snow ball"/>
        </spawner>
        <spawner spawn-region="round-1-arena-3-spawner" player-region="arena-3" filter="all(participating, round-1, playing=1)">
            <item material="snow ball"/>
        </spawner>
        <spawner spawn-region="round-1-arena-4-spawner" player-region="arena-4" filter="all(participating, round-1, playing=1)">
            <item material="snow ball"/>
        </spawner>
        <spawner spawn-region="round-2-arena-1-spawner" player-region="arena-1" filter="all(participating, round-2, playing=1)">
            <item material="snow ball"/>
        </spawner>
        <spawner spawn-region="round-2-arena-2-spawner" player-region="arena-2" filter="all(participating, round-2, playing=1)">
            <item material="snow ball"/>
        </spawner>
        <spawner spawn-region="round-2-arena-3-spawner" player-region="arena-3" filter="all(participating, round-2, playing=1)">
            <item material="snow ball"/>
        </spawner>
        <spawner spawn-region="round-2-arena-4-spawner" player-region="arena-4" filter="all(participating, round-2, playing=1)">
            <item material="snow ball"/>
        </spawner>
        <spawner spawn-region="round-3-arena-1-spawner" player-region="arena-1" filter="all(participating, round-1, playing=1)">
            <item material="snow ball"/>
        </spawner>
        <spawner spawn-region="round-3-arena-2-spawner" player-region="arena-2" filter="all(participating, round-1, playing=1)">
            <item material="snow ball"/>
        </spawner>
        <spawner spawn-region="round-3-arena-3-spawner" player-region="arena-3" filter="all(participating, round-1, playing=1)">
            <item material="snow ball"/>
        </spawner>
        <spawner spawn-region="round-3-arena-4-spawner" player-region="arena-4" filter="all(participating, round-1, playing=1)">
            <item material="snow ball"/>
        </spawner>
    </spawners>
    <falling-blocks>
        <rule delay="15">
            <filter>
                <any>
                    <material>sand:1</material>
                    <material>double step</material>
                    <material>cactus</material>
                </any>
            </filter>
            <sticky>
                <material>log 2:13</material>
            </sticky>
        </rule>
    </falling-blocks>
    <falling-blocks>
        <rule delay="2">
            <filter>
                <material>cactus</material>
            </filter>
            <sticky>
                <material>sand</material>
            </sticky>
        </rule>
    </falling-blocks>
</if>
<itemremove>
    <item>leather helmet</item>
    <item>leather chestplate</item>
    <item>leather leggings</item>
    <item>leather boots</item>
    <item>iron helmet</item>
    <item>iron chestplate</item>
    <item>iron leggings</item>
    <item>iron boots</item>
    <item>chainmail chestplate</item>
    <item>chainmail helmet</item>
    <item>chainmail leggings</item>
    <item>chainmail boots</item>
    <item>gold helmet</item>
    <item>gold chestplate</item>
    <item>gold leggings</item>
    <item>gold boots</item>
    <item>diamond helmet</item>
    <item>diamond chestplate</item>
    <item>diamond leggings</item>
    <item>diamond boots</item>
    <item>arrow</item>
    <item>potion</item>
    <item>golden apple</item>
    <item>tnt</item>
    <item>snow block</item>
    <item>monster egg</item>
    <item>egg</item>
    <item>dispenser</item>
    <item>trap door</item>
    <item>ladder</item>
    <item>obsidian</item>
    <item>stone plate</item>
    <item>stone button</item>
    <item>water bucket</item>
    <item>bucket</item>
    <item>diode</item>
    <item>redstone torch on</item>
    <item>redstone block</item>
    <item>redstone</item>
    <item>lever</item>
    <item>piston base</item>
    <item>nether fence</item>
    <item>stained glass</item>
    <item>stained clay</item>
    <item>sulphur</item>
    <item>exp bottle</item>
    <item>quartz block</item>
    <item>quartz stairs</item>
    <item>step</item>
    <item>wool</item>
    <item>iron fence</item>
    <item>iron block</item>
    <item>diamond block</item>
    <item>bed</item>
    <item>mushroom soup</item>
    <item>bowl</item>
    <item>feather</item>
    <item>cobblestone</item>
    <item>torch</item>
    <if variant="spleef">
        <item>snow ball</item>
    </if>
</itemremove>
<toolrepair>
    <tool>stone sword</tool>
    <tool>iron sword</tool>
    <tool>diamond sword</tool>
    <tool>bow</tool>
    <tool>diamond axe</tool>
    <tool>wood hoe</tool>
    <tool>gold hoe</tool>
    <tool>blaze rod</tool>
    <tool>raw fish</tool>
    <tool>fishing rod</tool>
    <tool>wood spade</tool>
    <tool>stone spade</tool>
    <tool>iron spade</tool>
    <tool>gold spade</tool>
    <tool>diamond spade</tool>
    <tool>flint and steel</tool>
    <tool>diamond pickaxe</tool>
</toolrepair>
</map>
